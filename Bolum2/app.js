!function(){var t,e=[function(t,e,i){"use strict";i.r(e),i.d(e,{SolarSystemApp:function(){return SolarSystemApp}});var s=i(1),n=(i(691),i(702)),o=i(703),a=i(704),r=i(705),l=i(706),c=i(988),h=i(992),u=i.n(h),d=i(854);class SolarSystemApp extends s.BaseApp{constructor(){super(d.Types),this._timeInfo=o,this._sceneInfo=a,this._viewClasses={...l.default},this._viewInfo=r,this._componentInfo=n.default}async init(){await super.init(),this.endLoadingScreen()}setUpRoutes(){this.getManager("router").addRoutes([{route:this.getManager("router").homeRoute,view:"home"},{route:"/story/:id",view:"story"},{route:"/:spaceObject",view:"object"},{route:"/:spaceObject/compare",view:"compare"},{route:"/:spaceObject/events",view:"event"},{route:"/:spaceObject/telescope",view:"telescope"},{route:"/:spaceObject/:feature",view:"feature"},{route:"/:spaceObject/events/:child",view:"event"},{route:"/:spaceObject/:feature/:child",view:"object"}])}async setUpScene(){await super.setUpScene(),await this.scene.getLoadedPromise(),await this.pioneer.waitUntilNextFrame()}setUpManagers(){super.setUpManagers(),this.addManager("link",d.LinkManager);const t=this.getManager("content");t.setStoryList(c.STORY_LIST),t.setStories(c.STORIES);const e=t.getEntityList();this.getManager("search").setDatabase(e)}async setUpComponents(){await super.setUpComponents();const t=this.getManager("layer");t.getLayer("starfield").toggleCallback[0](!0);const e=this.getComponent("layerPanel"),i=["ui","planets","spacecraft","trails","labels","icons"],s=["asteroids","comets","dwarfPlanets","constellations"];for(let s=0;s<i.length;s++){const n=i[s];t.getLayer(n).visible||e.toggleLayer(n)}for(let i=0;i<s.length;i++){const n=s[i];t.getLayer(n).visible&&e.toggleLayer(n)}this.getComponent("breadcrumb")?.setCrumbClickHandler((t=>{const e=t.endsWith("events"),i={...e&&{rate:1}},s={keepTime:!0,...!e&&{__remove:"all"}};this.getManager("router").navigate(i,t,s)}));const n=this.pioneer?.getViewport("main-viewport")?.getDiv();n&&(n.style.top="",n.style.left="")}getVersion(){return{eyes:super.getVersion(),app:"1.2.0"}}}SolarSystemApp.html=u(),SolarSystemApp.setAppClass()},function(t,e,i){"use strict";i.r(e),i.d(e,{AnimationUtils:function(){return s.AnimationUtils},AppUtils:function(){return s.AppUtils},BaseApp:function(){return s.BaseApp},BaseComponent:function(){return s.BaseComponent},BaseManager:function(){return s.BaseManager},BaseView:function(){return s.BaseView},Breadcrumb:function(){return s.Breadcrumb},CameraManager:function(){return s.CameraManager},CameraScripts:function(){return s.CameraScripts},CancelToken:function(){return s.CancelToken},Carousel:function(){return s.Carousel},CarouselPanel:function(){return s.CarouselPanel},Clock:function(){return s.Clock},ClockShortcut:function(){return s.ClockShortcut},ComparisonManager:function(){return s.ComparisonManager},ContentManager:function(){return s.ContentManager},DescriptionBlock:function(){return s.DescriptionBlock},ERTManager:function(){return s.ERTManager},HintBlock:function(){return s.HintBlock},ImageBlock:function(){return s.ImageBlock},LabelManager:function(){return s.LabelManager},LayerManager:function(){return s.LayerManager},LayerPanel:function(){return s.LayerPanel},LoadIcon:function(){return s.LoadIcon},Navigation:function(){return s.Navigation},OrbiterLineOfSightComponent:function(){return s.OrbiterLineOfSightComponent},Overlay:function(){return s.Overlay},ReplayButtonBlock:function(){return s.ReplayButtonBlock},RouteManager:function(){return s.RouteManager},SceneManager:function(){return s.SceneManager},Search:function(){return s.Search},SearchManager:function(){return s.SearchManager},SelectionManager:function(){return s.SelectionManager},Settings:function(){return s.Settings},Story:function(){return s.Story},StoryBaseContentBlock:function(){return s.StoryBaseContentBlock},TimeController:function(){return s.TimeController},TimeManager:function(){return s.TimeManager},TimeSlider:function(){return s.TimeSlider},TitleBlock:function(){return s.TitleBlock},ToggleBlock:function(){return s.ToggleBlock},TrailManager:function(){return s.TrailManager},TutorialOverlay:function(){return s.TutorialOverlay},Types:function(){return s.Types},Version:function(){return s.Version}});var s=i(2)},function(t,e,i){"use strict";i.r(e),i.d(e,{Version:function(){return s.default},OrbiterLineOfSightComponent:function(){return n.OrbiterLineOfSightComponent},CancelToken:function(){return o.CancelToken},AppUtils:function(){return a.AppUtils},AnimationUtils:function(){return r.AnimationUtils},BaseComponent:function(){return l.BaseComponent},Settings:function(){return c.default},LoadIcon:function(){return h.default},Overlay:function(){return u.default},Search:function(){return d.default},Clock:function(){return p.default},ClockShortcut:function(){return _.default},Carousel:function(){return g.default},TutorialOverlay:function(){return m.default},CarouselPanel:function(){return y.default},TimeSlider:function(){return f.default},TimeController:function(){return b.default},Navigation:function(){return T.default},LayerPanel:function(){return v.LayerPanel},Breadcrumb:function(){return E.Breadcrumb},StoryBaseContentBlock:function(){return x.StoryBaseContentBlock},HintBlock:function(){return S.HintBlock},ToggleBlock:function(){return C.ToggleBlock},TitleBlock:function(){return w.TitleBlock},ImageBlock:function(){return I.ImageBlock},DescriptionBlock:function(){return M.DescriptionBlock},ReplayButtonBlock:function(){return N.ReplayButtonBlock},Story:function(){return A.Story},BaseManager:function(){return L.BaseManager},SelectionManager:function(){return R.SelectionManager},LabelManager:function(){return P.LabelManager},RouteManager:function(){return k.RouteManager},ContentManager:function(){return V.ContentManager},SceneManager:function(){return O.SceneManager},LayerManager:function(){return F.LayerManager},TrailManager:function(){return z.TrailManager},CameraManager:function(){return j.CameraManager},CameraScripts:function(){return U.CameraScripts},ERTManager:function(){return D.ERTManager},TimeManager:function(){return B.TimeManager},ComparisonManager:function(){return H.ComparisonManager},SearchManager:function(){return J.SearchManager},BaseView:function(){return G.BaseView},BaseApp:function(){return Y.BaseApp},Types:function(){return $.Types}});var s=i(3),n=i(4),o=i(128),a=i(129),r=i(136),l=i(137),c=i(138),h=i(201),u=i(205),d=i(209),p=i(213),_=i(357),g=i(361),m=i(366),y=i(476),f=i(481),b=i(485),T=i(489),v=i(493),E=i(496),x=i(499),S=i(501),C=i(504),w=i(507),I=i(509),M=i(512),N=i(515),A=i(518),L=i(520),R=i(521),P=i(522),k=i(524),V=i(526),O=i(527),F=i(663),z=i(664),j=i(665),U=i(666),D=i(667),B=i(668),H=i(669),J=i(670),G=i(672),Y=i(673),$=i(690)},function(t,e,i){"use strict";i.r(e),e.default="2.0.0"},function(t,e,i){"use strict";i.r(e),i.d(e,{OrbiterLineOfSightComponent:function(){return OrbiterLineOfSightComponent}});var s=i(5);class OrbiterLineOfSightComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._targetA=null,this._targetB=null,this._ignoreDistance=!1,this._distanceThreshold={min:2,max:20},this._positions=[],this._colors=[],this._widths=[],this._color=new s.Color(1,1,0),this._width=2,this._threeJsScene=i.getScene().getThreeJsScene(),this._lineMesh=null,this.__setRadius(Number.POSITIVE_INFINITY)}setTargets(t,e){"string"==typeof t&&(t=this.getEntity().getScene().get(t)),"string"==typeof e&&(e=this.getEntity().getScene().get(e)),this._targetA=t,this._targetB=e}setColor(t){this._color=t}setWidth(t){this._width=t}__loadResources(){return this._lineMesh=new s.LineMesh(this),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}__prepareForRender(t){if(null===this._targetA||null===this._targetB)return void(this.getThreeJsObjects().length>0&&(this.getThreeJsObjects()[0].visible=!1));this._updatePoints(t);let e=1;if(!this._ignoreDistance){e*=(t.getEntity().getPosition().magnitude()-this._distanceThreshold.min)/(this._distanceThreshold.max-this._distanceThreshold.min)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t),this._lineMesh.setAlphaMultiplier(e),this._lineMesh.prepareForRender(t)}_updatePoints(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();this._targetA.getPositionRelativeToEntity(t,s.Vector3.Zero,this.getEntity()),this._targetB.getPositionRelativeToEntity(e,s.Vector3.Zero,this.getEntity()),this._positions=[],this._positions.push(t),this._positions.push(e),this._lineMesh.setPositions(this._positions);const i=this._color;this._colors=[],this._colors.push(i),this._colors.push(i),this._lineMesh.setColors(this._colors),this._widths=[],this._widths.push(this._width),this._widths.push(this._width),this._lineMesh.setWidths(this._widths),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}}},function(t,e,i){"use strict";i.r(e),i.d(e,{AER:function(){return s.AER},AlignController:function(){return s.AlignController},AnimdataController:function(){return s.AnimdataController},AtmosphereComponent:function(){return s.AtmosphereComponent},BaseComponent:function(){return s.BaseComponent},BaseController:function(){return s.BaseController},BaseRef:function(){return s.BaseRef},CMTSComponent:function(){return s.CMTSComponent},Cache:function(){return s.Cache},CameraComponent:function(){return s.CameraComponent},Capabilities:function(){return s.Capabilities},Collection:function(){return s.Collection},CollectionItem:function(){return s.CollectionItem},Color:function(){return s.Color},CometTailComponent:function(){return s.CometTailComponent},ComponentRef:function(){return s.ComponentRef},Config:function(){return s.Config},ConnectedSpriteComponent:function(){return s.ConnectedSpriteComponent},ControllerRef:function(){return s.ControllerRef},CoverageController:function(){return s.CoverageController},CubeMap:function(){return s.CubeMap},DependencyGraph:function(){return s.DependencyGraph},DivComponent:function(){return s.DivComponent},Downloader:function(){return s.Downloader},DynamicEnvironmentMapComponent:function(){return s.DynamicEnvironmentMapComponent},DynamoController:function(){return s.DynamoController},Engine:function(){return s.Engine},Entity:function(){return s.Entity},EntityItem:function(){return s.EntityItem},EntityRef:function(){return s.EntityRef},FPS:function(){return s.FPS},FastIterable:function(){return s.FastIterable},FastMap:function(){return s.FastMap},FastSet:function(){return s.FastSet},FixedController:function(){return s.FixedController},FixedToParentController:function(){return s.FixedToParentController},FreeFlyController:function(){return s.FreeFlyController},Freezable:function(){return s.Freezable},Geometry:function(){return s.Geometry},GizmoComponent:function(){return s.GizmoComponent},GroundClampController:function(){return s.GroundClampController},Input:function(){return s.Input},Interval:function(){return s.Interval},KeyframeController:function(){return s.KeyframeController},LabelComponent:function(){return s.LabelComponent},LatLonAlt:function(){return s.LatLonAlt},LightSourceComponent:function(){return s.LightSourceComponent},LineMesh:function(){return s.LineMesh},LookController:function(){return s.LookController},MaterialManager:function(){return s.MaterialManager},MaterialUtils:function(){return s.MaterialUtils},MaterialUtilsPhong:function(){return s.MaterialUtilsPhong},MaterialUtilsStandard:function(){return s.MaterialUtilsStandard},MathUtils:function(){return s.MathUtils},ModelAnimateController:function(){return s.ModelAnimateController},ModelComponent:function(){return s.ModelComponent},OrbitController:function(){return s.OrbitController},OrbitKeyframeController:function(){return s.OrbitKeyframeController},OrbitalElements:function(){return s.OrbitalElements},OrbitalElementsController:function(){return s.OrbitalElementsController},OrbitalParticlesComponent:function(){return s.OrbitalParticlesComponent},ParticleSprayComponent:function(){return s.ParticleSprayComponent},PickController:function(){return s.PickController},Pool:function(){return s.Pool},Quaternion:function(){return s.Quaternion},Reader:function(){return s.Reader},Rect:function(){return s.Rect},RingsComponent:function(){return s.RingsComponent},RollController:function(){return s.RollController},RotateByEntityOrientationController:function(){return s.RotateByEntityOrientationController},RotateController:function(){return s.RotateController},SatelliteJs:function(){return s.SatelliteJs},ScaleController:function(){return s.ScaleController},Scene:function(){return s.Scene},SelectController:function(){return s.SelectController},SetParentController:function(){return s.SetParentController},ShaderFix:function(){return s.ShaderFix},SkyboxComponent:function(){return s.SkyboxComponent},Sort:function(){return s.Sort},SpheroidComponent:function(){return s.SpheroidComponent},SpheroidLODComponent:function(){return s.SpheroidLODComponent},SpinController:function(){return s.SpinController},SpoutComponent:function(){return s.SpoutComponent},SpriteComponent:function(){return s.SpriteComponent},SpriteParticles:function(){return s.SpriteParticles},StarfieldComponent:function(){return s.StarfieldComponent},THREE:function(){return s.THREE},TLEController:function(){return s.TLEController},TapController:function(){return s.TapController},TextureLOD:function(){return s.TextureLOD},TextureLoader:function(){return s.TextureLoader},TextureLoaderCompressed:function(){return s.TextureLoaderCompressed},ThreeJsEffectComposer:function(){return s.ThreeJsEffectComposer},ThreeJsGLTFLoader:function(){return s.ThreeJsGLTFLoader},ThreeJsHelper:function(){return s.ThreeJsHelper},ThreeJsKTXLoader:function(){return s.ThreeJsKTXLoader},ThreeJsOutlinePass:function(){return s.ThreeJsOutlinePass},ThreeJsRenderPass:function(){return s.ThreeJsRenderPass},ThreeJsUnrealBloomPass:function(){return s.ThreeJsUnrealBloomPass},Tile:function(){return s.Tile},TimeUtils:function(){return s.TimeUtils},TrailComponent:function(){return s.TrailComponent},TransitionController:function(){return s.TransitionController},TranslateController:function(){return s.TranslateController},Types:function(){return s.Types},Vector2:function(){return s.Vector2},Vector3:function(){return s.Vector3},Version:function(){return s.Version},Viewport:function(){return s.Viewport},ZoomController:function(){return s.ZoomController}});var s=i(6)},function(t,e,i){"use strict";i.r(e),i.d(e,{Collection:function(){return d.Collection},CollectionItem:function(){return d.CollectionItem},DependencyGraph:function(){return p.default},FastIterable:function(){return _.default},FPS:function(){return g.default},Freezable:function(){return m.default},MathUtils:function(){return y.default},Reader:function(){return b.default},Sort:function(){return T.default},AER:function(){return x.default},BaseRef:function(){return u.default},Cache:function(){return k.default},Color:function(){return S.default},ComponentRef:function(){return V.default},ControllerRef:function(){return O.default},CubeMap:function(){return F.default},EntityRef:function(){return z.default},FastMap:function(){return C.default},FastSet:function(){return w.default},Geometry:function(){return I.default},Interval:function(){return M.default},LatLonAlt:function(){return j.default},LineMesh:function(){return U.default},MaterialUtils:function(){return H.default},MaterialUtilsPhong:function(){return D.default},MaterialUtilsStandard:function(){return B.default},OrbitalElements:function(){return N.default},Pool:function(){return f.default},Quaternion:function(){return L.default},Rect:function(){return A.default},ShaderFix:function(){return J.default},SpriteParticles:function(){return G.default},TextureLOD:function(){return Y.default},ThreeJsHelper:function(){return $.default},Tile:function(){return v.default},TimeUtils:function(){return E.default},Vector2:function(){return R.default},Vector3:function(){return P.default},Capabilities:function(){return Q.default},Config:function(){return X.default},Downloader:function(){return Z.default},Engine:function(){return q.default},Entity:function(){return W.default},EntityItem:function(){return K.default},Input:function(){return tt.default},MaterialManager:function(){return et.default},Scene:function(){return it.default},TextureLoader:function(){return st.default},TextureLoaderCompressed:function(){return nt.default},Types:function(){return se.default},Version:function(){return ot.default},Viewport:function(){return at.default},BaseComponent:function(){return rt.default},AtmosphereComponent:function(){return lt.default},CameraComponent:function(){return ct.default},CMTSComponent:function(){return ht.default},CometTailComponent:function(){return ut.default},ConnectedSpriteComponent:function(){return dt.default},DivComponent:function(){return pt.default},DynamicEnvironmentMapComponent:function(){return _t.default},GizmoComponent:function(){return gt.default},LabelComponent:function(){return mt.default},LightSourceComponent:function(){return yt.default},ModelComponent:function(){return ft.default},OrbitalParticlesComponent:function(){return bt.default},ParticleSprayComponent:function(){return Tt.default},RingsComponent:function(){return vt.default},SkyboxComponent:function(){return Et.default},SpheroidComponent:function(){return xt.default},SpheroidLODComponent:function(){return St.default},SpoutComponent:function(){return Ct.default},SpriteComponent:function(){return wt.default},StarfieldComponent:function(){return It.default},TrailComponent:function(){return Mt.default},BaseController:function(){return Nt.default},AlignController:function(){return At.default},AnimdataController:function(){return Lt.default},CoverageController:function(){return Rt.default},DynamoController:function(){return Pt.default},FixedController:function(){return kt.default},FixedToParentController:function(){return Vt.default},FreeFlyController:function(){return Ot.default},GroundClampController:function(){return Ft.default},KeyframeController:function(){return zt.default},LookController:function(){return jt.default},ModelAnimateController:function(){return Ut.default},OrbitController:function(){return Dt.default},OrbitKeyframeController:function(){return Bt.default},OrbitalElementsController:function(){return Ht.default},PickController:function(){return Jt.default},RollController:function(){return Gt.default},RotateController:function(){return Yt.default},RotateByEntityOrientationController:function(){return $t.default},ScaleController:function(){return Qt.default},SelectController:function(){return Xt.default},SetParentController:function(){return Zt.default},SpinController:function(){return qt.default},TapController:function(){return Wt.default},TLEController:function(){return Kt.default},TransitionController:function(){return te.default},TranslateController:function(){return ee.default},ZoomController:function(){return ie.default},THREE:function(){return s},ThreeJsEffectComposer:function(){return n.EffectComposer},ThreeJsGLTFLoader:function(){return o.GLTFLoader},ThreeJsKTXLoader:function(){return a.KTXLoader},ThreeJsOutlinePass:function(){return r.OutlinePass},ThreeJsRenderPass:function(){return l.RenderPass},ThreeJsUnrealBloomPass:function(){return c.UnrealBloomPass},SatelliteJs:function(){return h}});var s=i(11),n=i(7),o=i(13),a=i(14),r=i(15),l=i(16),c=i(17),h=i(19),u=i(20),d=i(21),p=i(22),_=i(23),g=i(24),m=i(25),y=i(26),f=i(27),b=i(28),T=i(29),v=i(30),E=i(31),x=i(32),S=i(33),C=i(34),w=i(35),I=i(36),M=i(37),N=i(38),A=i(39),L=i(40),R=i(41),P=i(42),k=i(43),V=i(44),O=i(45),F=i(46),z=i(47),j=i(48),U=i(49),D=i(50),B=i(51),H=i(52),J=i(53),G=i(54),Y=i(55),$=i(56),Q=i(57),X=i(58),Z=i(59),q=i(60),W=i(61),K=i(62),tt=i(63),et=i(64),it=i(72),st=i(73),nt=i(74),ot=i(75),at=i(76),rt=i(77),lt=i(78),ct=i(79),ht=i(80),ut=i(81),dt=i(82),pt=i(83),_t=i(84),gt=i(85),mt=i(86),yt=i(87),ft=i(88),bt=i(89),Tt=i(90),vt=i(91),Et=i(92),xt=i(93),St=i(94),Ct=i(95),wt=i(96),It=i(97),Mt=i(98),Nt=i(99),At=i(100),Lt=i(101),Rt=i(102),Pt=i(103),kt=i(104),Vt=i(105),Ot=i(106),Ft=i(107),zt=i(108),jt=i(109),Ut=i(110),Dt=i(111),Bt=i(112),Ht=i(113),Jt=i(114),Gt=i(115),Yt=i(116),$t=i(117),Qt=i(118),Xt=i(119),Zt=i(120),qt=i(121),Wt=i(122),Kt=i(123),te=i(124),ee=i(125),ie=i(126),se=i(127)},,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(6);e.default=class BaseRef{constructor(t){this._scene=t,this._ref=null,this._refChangedCallback=null}get(){return this.update(),this._ref}setRefChangedCallback(t){this._refChangedCallback=t}update(){}_setRef(t){if(null===t||t.isEnabled()||(t=null),this._ref!==t){const e=this._ref;this._ref=t,null!==this._refChangedCallback&&this._refChangedCallback(e,this._ref)}}}},function(t,e,i){"use strict";i.r(e),i.d(e,{CollectionItem:function(){return CollectionItem},Collection:function(){return Collection}});class CollectionItem{constructor(t,e,i){this._type=t,this._typeIndex=0,this._name=e,this._collectionParent=i}getType(){return this._type}getTypeIndex(){return this._typeIndex}__setTypeIndex(t){this._typeIndex=t}getName(){return this._name}__getCollectionParent(){return this._collectionParent}__destroy(){}}class Collection{constructor(t,e){this._parent=t,this._types=e,this._items=[],this._itemNames=new Map}get(t){if("number"==typeof t)return this._items[t]||null;if("string"==typeof t)return this._itemNames.get(t)||null;throw new Error("The param nameOrIndex must be a string or number.")}getByType(t,e=0){for(let i=0;i<this._items.length;i++){const s=this._items[i];if(s.getType()===t&&s.getTypeIndex()===e)return s}return null}add(t,e="",i){if(""!==e&&this._itemNames.has(e))throw new Error("Already added '"+e+"'.");const s=this._types.get(t);if(void 0===t)throw new Error("Type '"+t+"' not found.");try{const n=new s(t,e,this._parent);if(void 0!==i){let t=this._items.length;for(let e=0;e<this._items.length;e++)this._items[e]===i&&(t=e);this._items.splice(t,0,n)}else this._items.push(n);""!==e&&this._itemNames.set(e,n);let o=0;for(let e=0;e<this._items.length;e++){const i=this._items[e];i.getType()===t&&(i.__setTypeIndex(o),o+=1)}return n}catch(i){throw new Error(`While adding "${e}" of type "${t}": ${i}`)}}remove(t){let e,i,s;if("string"==typeof t){s=this._itemNames.get(t),e=t;for(let t=this._items.length-1;t>=0;t--)if(this._items[t]===s){i=t;break}}else if("number"==typeof t)s=this._items[t],i=t,e=s.getName();else{s=t,e=s.getName();for(let t=this._items.length-1;t>=0;t--)if(this._items[t]===s){i=t;break}}if(void 0!==s&&void 0!==i){const t=this._items[i].getType();this._items.splice(i,1),""!==e&&this._itemNames.delete(e);let n=0;for(let e=0;e<this._items.length;e++){const i=this._items[e];i.getType()===t&&(i.__setTypeIndex(n),n+=1)}s.__destroy()}}clear(){for(let t=this._items.length-1;t>=0;t--)this._items[t].__destroy();this._items=[],this._itemNames.clear()}get size(){return this._items.length}__destroy(){for(let t=this._items.length-1;t>=0;t--)this._items[t].__destroy()}}},function(t,e,i){"use strict";i.r(e);class Node{constructor(t){this.item=t,this.permanentMark=!1,this.temporaryMark=!1}}e.default=class DependencyGraph{constructor(){this._updateItemCallback=null,this._compareItemCallback=null,this._nodes=new Map,this._sortedNodes=[],this._needsSorting=!1}setUpdateItemCallback(t){this._updateItemCallback=t}setCompareItemCallback(t){this._compareItemCallback=t}addItem(t){const e=new Node(t);this._nodes.set(t,e),this._needsSorting=!0}removeItem(t){this._nodes.delete(t)&&(this._needsSorting=!0)}needsSorting(){this._needsSorting=!0}update(){if(this._needsSorting){for(const t of this._nodes.values())t.permanentMark=!1,t.temporaryMark=!1;this._sortedNodes=[];const t=this._nodes.values();for(;;){const e=t.next();if(e.done)break;if(!this._visit(e.value))break}this._needsSorting=!1}for(let t=0,e=this._sortedNodes.length;t<e;t++)this._updateItemCallback(this._sortedNodes[t].item)}_visit(t){if(t.permanentMark)return!0;if(t.temporaryMark)throw new Error("Dependency cycle in graph: "+t.item);t.temporaryMark=!0;for(const e of this._nodes.values()){let i=!1;if(this._compareItemCallback&&(i=this._compareItemCallback(t.item,e.item)),i)try{this._visit(e)}catch(e){throw new Error(e.message+" ← "+t.item)}}return t.temporaryMark=!1,t.permanentMark=!0,this._sortedNodes.push(t),!0}}},function(t,e,i){"use strict";i.r(e);e.default=class FastIterable{getAt(t){throw new Error}get size(){throw new Error}}},function(t,e,i){"use strict";i.r(e);e.default=class FPS{constructor(){this._numberOfSamples=100,this._samples=new Array(this._numberOfSamples),this._index=0}getNumberOfSamples(){return this._numberOfSamples}setNumberOfSamples(t){this._numberOfSamples=t,this._samples=new Array(this._numberOfSamples)}getFPS(){let t=0;for(let e=0;e<this._samples.length;e++)t+=this._samples[e];return this._samples.length/t}update(t){this._samples[this._index]=t,this._index=(this._index+1)%this._samples.length}}},function(t,e,i){"use strict";i.r(e);e.default=class Freezable{constructor(){this._frozen=!1}throwIfFrozen(){if(this._frozen)throw new TypeError("The object is frozen.")}isFrozen(){return this._frozen}freeze(){this._frozen=!0}thaw(){this._frozen=!1}}},function(t,e,i){"use strict";i.r(e);e.default=class MathUtils{static get pi(){return 3.141592653589793}static get twoPi(){return 6.283185307179586}static get halfPi(){return 1.5707963267948966}static angle(t,e){return t=this.wrap(t,0,2*Math.PI),(e=this.wrap(e,0,2*Math.PI))-t>Math.PI?t-e+2*Math.PI:t-e>Math.PI?e-t+2*Math.PI:Math.abs(e-t)}static clamp(t,e,i){return Math.min(Math.max(e,t),i)}static clamp01(t){return Math.min(Math.max(0,t),1)}static wrap(t,e,i){let s=(t-e)%(i-e)+e;return s<e&&(s+=i-e),s}static lerp(t,e,i){return(1-i)*t+i*e}static lerpAngle(t,e,i){return t=this.wrap(t,-Math.PI,+Math.PI),(e=this.wrap(e,-Math.PI,+Math.PI))-t>Math.PI&&(t+=2*Math.PI),t-e>Math.PI&&(e+=2*Math.PI),this.wrap(this.lerp(t,e,i),-Math.PI,+Math.PI)}static radToDeg(t){return 57.29577951308232*t}static degToRad(t){return.01745329251994329*t}static ceilPow2(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class Pool extends s.FastIterable{constructor(t){super(),this._type=t,this._objects=[],this._free=[],this._freeLength=0,this._constructorFunction=()=>new this._type,this._destructorFunction=()=>{}}setConstructorFunction(t){this._constructorFunction=t}setDestructorFunction(t){this._destructorFunction=t}get(){let t=null;if(this._freeLength>0)t=this._objects[this._free[this._freeLength-1]],this._freeLength-=1;else{const e=this._objects.push(this._constructorFunction())-1;this._objects[e]._poolIndex=e,t=this._objects[e]}return t._poolUsed=!0,t}release(t){const e=t;void 0!==e._poolIndex&&(this._freeLength>=this._free.length?this._free.push(e._poolIndex):this._free[this._freeLength]=e._poolIndex,this._freeLength+=1,e._poolUsed=!1)}clean(t){if(void 0===t||t>=(this._objects.length-this._freeLength)/this._objects.length){for(let t=0;t<this._freeLength;t++){const e=this._free[t];this._destructorFunction(this._objects[e]),this._objects.splice(e,1);for(let t=e,i=this._objects.length;t<i;t++)this._objects[t]._poolIndex-=1;for(let i=t+1,s=this._freeLength;i<s;i++)this._free[i]>e&&(this._free[i]-=1)}this._free=[],this._freeLength=0}}getAsArray(){return this._objects}isUsed(t){return t._poolUsed}areAnyUsed(){return this._freeLength<this._objects.length}getAt(t){return this._objects[t]}get size(){return this._objects.length}}e.default=Pool},function(t,e,i){"use strict";i.r(e);e.default=class Reader{constructor(t){this._dataView=new DataView(t),this._offset=0}isAtEnd(){return this._offset>=this._dataView.byteLength}readByte(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}readFloat32(){const t=this._dataView.getFloat32(this._offset,!0);return this._offset+=4,t}readFloat64(){const t=this._dataView.getFloat64(this._offset,!0);return this._offset+=8,t}readUInt8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}readUInt16(){const t=this._dataView.getUint16(this._offset,!0);return this._offset+=2,t}readUInt32(){const t=this._dataView.getUint32(this._offset,!0);return this._offset+=4,t}readUInt64(){let t=this._dataView.getUint32(this._offset,!0);return t=t<<32||this._dataView.getUint32(this._offset+4,!0),this._offset+=8,t}readInt8(){const t=this._dataView.getInt8(this._offset);return this._offset+=1,t}readInt16(){const t=this._dataView.getInt16(this._offset,!0);return this._offset+=2,t}readInt32(){const t=this._dataView.getInt32(this._offset,!0);return this._offset+=4,t}readInt64(){let t=this._dataView.getInt32(this._offset,!0);return t=t<<32||this._dataView.getInt32(this._offset+4,!0),this._offset+=8,t}readLine(){const t=[];for(;;){const e=this.readByte(),i=String.fromCharCode(e);if("\r"!==i){if("\n"===i)break;t.push(e)}}if("undefined"!=typeof TextEncoder){const e=new TextDecoder,i=new Uint8Array(t);return e.decode(i)}return this._utf8ArrayToStr(t)}readString(t){const e=[];for(;;){const i=this.readByte();if(void 0===t&&0===i)break;if(e.push(i),void 0!==t&&e.length===t)break}if("undefined"!=typeof TextEncoder){const t=new TextDecoder,i=new Uint8Array(e);return t.decode(i)}return this._utf8ArrayToStr(e)}_utf8ArrayToStr(t){let e=0,i=0,s=0,n=0,o="",a=0;const r=t.length;for(;a<r;)switch(e=t[a],a+=1,e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(e);break;case 12:case 13:i=0|t[a],a+=1,o+=String.fromCharCode((31&e)<<6|63&i);break;case 14:i=0|t[a],a+=1,s=0|t[a],a+=1,o+=String.fromCharCode((15&e)<<12|(63&i)<<6|(63&s)<<0);break;case 15:i=0|t[a],a+=1,s=0|t[a],a+=1,n=0|t[a],a+=1,o+=String.fromCharCode((7&e)<<18|(63&i)<<12|(63&s)<<6|(63&n)<<0)}return o}}},function(t,e,i){"use strict";i.r(e);e.default=class Sort{static getIndex(t,e,i){let s=0,n=e.length;if(void 0===i)for(;s<n;){const i=s+n>>>1;e[i]<t?s=i+1:n=i}else for(;s<n;){const o=s+n>>>1;i(e[o],t)?s=o+1:n=o}return s}static add(t,e,i,s){let n=this.getIndex(t,e,i);if(void 0===s)for(;n<e.length&&e[n]===t;)n+=1;else for(;n<e.length&&s(e[n],t);)n+=1;e.splice(n,0,t)}static remove(t,e,i,s){const n=this.getIndex(t,e,i);let o=!1;return n<e.length&&(void 0===s&&e[n]===t||void 0!==s&&s(e[n],t))&&(o=!0),o&&e.splice(n,1),o}}},function(t,e,i){"use strict";i.r(e);e.default=class Tile{constructor(t){this._parent=t,this._children=[],this._active=!1,this._loaded=!1,this._destroyed=!1,this._transitioning=!1}getParent(){return this._parent}async forceLoad(){return this._transitioning=!0,this.load().then((()=>(this._loaded=!0,this.activate()))).then((()=>{this._active=!0,this._transitioning=!1}))}check(){return this._destroyed||this._transitioning||(0===this._children.length&&this.checkSplit()?this._split():this._children.length>0&&this.checkJoin()&&this._join()),this._transitioning}get children(){return this._children}createNewTile(t,e,i){return null}checkSplit(){return!1}checkJoin(){return!1}async load(){}async unload(){}async activate(){}async deactivate(){}destroy(){this._destroyed=!0;for(let t=0;t<this._children.length;t++)this._children[t].destroy();this._transitioning||(this._active?this.deactivate().then((()=>{this.unload()})).catch((t=>{throw t})):this._loaded&&this.unload())}_split(){const t=[],e=[];this._splitAndLoad(t,e),Promise.all(t).then((()=>{const t=[];for(let i=0;i<e.length;i++)e[i]._loaded&&!e[i]._destroyed?t.push(e[i].activate().then((async()=>{if(this._destroyed)return this.deactivate().then((()=>{this.unload()})).catch((t=>{throw t}));e[i]._active=!0,e[i]._transitioning=!1})).catch((t=>{throw t}))):e[i]._transitioning=!1;return this._active&&t.push(this.deactivate().then((()=>{this._active=!1})).catch((t=>{throw t}))),t})).then((()=>{this._loaded?this.unload().then((()=>{this._loaded=!1,this._transitioning=!1})).catch((t=>{throw t})):this._transitioning=!1})).catch((t=>{throw t}))}_join(){if(this._checkIfDescendantsAreTransitioning())return;const t=[];this._transitioning=!0,this._markDescendantsAsTransitioning(t),this.load().then((async()=>{if(this._destroyed)return this.unload();this._loaded=!0})).then((()=>{const e=[];for(let i=0;i<t.length;i++)e.push(t[i].deactivate().then((()=>{t[i]._active=!1})).catch((t=>{throw t})));return this._destroyed||e.push(this.activate().then((async()=>{if(this._destroyed)return this.deactivate().then((()=>{this.unload()})).catch((t=>{throw t}));this._active=!0})).catch((t=>{throw t}))),Promise.all(e)})).then((()=>{const e=[];for(let i=0;i<t.length;i++)e.push(t[i].unload().then((()=>{t[i]._loaded=!1})).catch((t=>{throw t})));return Promise.all(e)})).then((()=>{this._children=[],this._transitioning=!1})).catch((t=>{throw t}))}_splitAndLoad(t,e){this._transitioning=!0;for(let i=0;i<2;i++)for(let s=0;s<2;s++){const n=this.createNewTile(this,i,s);null!==n&&(this._children.push(n),n.checkSplit()?n._splitAndLoad(t,e):(n._transitioning=!0,t.push(n.load().then((async()=>{if(n._destroyed)return n.unload();n._loaded=!0})).catch((t=>{throw t})))),e.push(n))}}_checkIfDescendantsAreTransitioning(){for(let t=0;t<this._children.length;t++){const e=this._children[t];if(e._transitioning)return!0;if(e._checkIfDescendantsAreTransitioning())return!0}return!1}_markDescendantsAsTransitioning(t){for(let e=0;e<this._children.length;e++){const i=this._children[e];i._transitioning=!0,i._active&&t.push(i),i._markDescendantsAsTransitioning(t)}}}},function(t,e,i){"use strict";i.r(e);class TimeUtils{static now(){return TimeUtils.unixToEt(Date.now()/1e3)}static etToUnix(t){let e=0;for(let i=0;i<s.length;i++)t+946727957.816+e>=s[i]+1&&(e-=1);return t+946727957.816+e}static unixToEt(t){let e=0;for(let i=0;i<s.length;i++)t>=s[i]+1&&(e+=1);return t-946727957.816+e}static get leapSeconds(){return s}}const s=[Date.UTC(1972,5,30,23,59,59)/1e3,Date.UTC(1972,11,31,23,59,59)/1e3,Date.UTC(1973,11,31,23,59,59)/1e3,Date.UTC(1974,11,31,23,59,59)/1e3,Date.UTC(1975,11,31,23,59,59)/1e3,Date.UTC(1976,11,31,23,59,59)/1e3,Date.UTC(1977,11,31,23,59,59)/1e3,Date.UTC(1978,11,31,23,59,59)/1e3,Date.UTC(1979,11,31,23,59,59)/1e3,Date.UTC(1981,5,30,23,59,59)/1e3,Date.UTC(1982,5,30,23,59,59)/1e3,Date.UTC(1983,5,30,23,59,59)/1e3,Date.UTC(1985,5,30,23,59,59)/1e3,Date.UTC(1987,11,31,23,59,59)/1e3,Date.UTC(1989,11,31,23,59,59)/1e3,Date.UTC(1990,11,31,23,59,59)/1e3,Date.UTC(1992,5,30,23,59,59)/1e3,Date.UTC(1993,5,30,23,59,59)/1e3,Date.UTC(1994,5,30,23,59,59)/1e3,Date.UTC(1995,11,31,23,59,59)/1e3,Date.UTC(1997,5,30,23,59,59)/1e3,Date.UTC(1998,11,31,23,59,59)/1e3,Date.UTC(2005,11,31,23,59,59)/1e3,Date.UTC(2008,11,31,23,59,59)/1e3,Date.UTC(2012,5,30,23,59,59)/1e3,Date.UTC(2015,5,30,23,59,59)/1e3,Date.UTC(2016,11,31,23,59,59)/1e3];e.default=TimeUtils},function(t,e,i){"use strict";i.r(e);var s=i(6);class AER extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0){super(),this._azimuth=t,this._elevation=e,this._range=i}get azimuth(){return this._azimuth}set azimuth(t){this.throwIfFrozen(),this._azimuth=t}get elevation(){return this._elevation}set elevation(t){this.throwIfFrozen(),this._elevation=t}get range(){return this._range}set range(t){this.throwIfFrozen(),this._range=t}toString(t=!1){return t?"["+s.MathUtils.radToDeg(this._azimuth)+", "+s.MathUtils.radToDeg(this._elevation)+", "+this._range+"]":"["+this._azimuth+", "+this._elevation+", "+this._range+"]"}copy(t){this.throwIfFrozen(),this._azimuth=t._azimuth,this._elevation=t._elevation,this._range=t._range}set(t,e,i){this.throwIfFrozen(),this._azimuth=t,this._elevation=e,this._range=i}setFromVector(t){this.throwIfFrozen(),this._range=t.magnitude(),this._elevation=Math.asin(t.z/this._range),this._azimuth=Math.atan2(t.y,t.x)}}const n=new s.Pool(AER);e.default=AER},function(t,e,i){"use strict";i.r(e);var s=i(6);class Color extends s.Freezable{static get pool(){return n}static get Black(){return o}static get Clear(){return a}constructor(t=1,e=1,i=1,s=1){super(),this._r=t,this._g=e,this._b=i,this._a=s}get r(){return this._r}set r(t){this.throwIfFrozen(),this._r=t}get g(){return this._g}set g(t){this.throwIfFrozen(),this._g=t}get b(){return this._b}set b(t){this.throwIfFrozen(),this._b=t}get a(){return this._a}set a(t){this.throwIfFrozen(),this._a=t}toString(){return"["+this._r+", "+this._g+", "+this._b+", "+this._a+"]"}copy(t){this.throwIfFrozen(),this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a}set(t,e,i,s=1){this.throwIfFrozen(),this._r=t,this._g=e,this._b=i,this._a=s}add(t,e){this.throwIfFrozen(),this._r=t._r+e._r,this._g=t._g+e._g,this._b=t._b+e._b,this._a=t._a+e._a}sub(t,e){this.throwIfFrozen(),this._r=t._r-e._r,this._g=t._g-e._g,this._b=t._b-e._b,this._a=t._a-e._a}mult(t,e){this.throwIfFrozen(),this._r=t._r*e,this._g=t._g*e,this._b=t._b*e,this._a=t._a*e}addMult(t,e,i){this.throwIfFrozen(),this._r=t._r+e._r*i,this._g=t._g+e._g*i,this._b=t._b+e._b*i,this._a=t._a+e._a*i}div(t,e){this.throwIfFrozen(),this._r=t._r/e,this._g=t._g/e,this._b=t._b/e,this._a=t._a/e}scale(t,e){this.throwIfFrozen(),this._r=t._r*e._r,this._g=t._g*e._g,this._b=t._b*e._b,this._a=t._a*e._a}value(){return(this._r+this._g+this._b)/3}min(){return Math.min(this._r,this._g,this._b)}max(){return Math.max(this._r,this._g,this._b)}lerp(t,e,i){this.throwIfFrozen(),this._r=s.MathUtils.lerp(t._r,e._r,i),this._g=s.MathUtils.lerp(t._g,e._g,i),this._b=s.MathUtils.lerp(t._b,e._b,i),this._a=s.MathUtils.lerp(t._a,e._a,i)}}const n=new s.Pool(Color),o=new Color(0,0,0,1);o.freeze();const a=new Color(0,0,0,1);a.freeze(),e.default=Color},function(t,e,i){"use strict";i.r(e);var s=i(6);class Entry{constructor(t,e){this.key=t,this.value=e}}class FastMap extends s.FastIterable{constructor(t){if(super(),this._entries=[],this._keyMap=new Map,void 0!==t)for(const e of t)this._entries.push(new Entry(e.key,e.value)),this._keyMap.set(e.key,this._entries.length-1)}has(t){return this._keyMap.has(t)}get(t){const e=this._keyMap.get(t);if(void 0!==e)return this._entries[e].value}set(t,e){const i=this._keyMap.get(t);void 0!==i?this._entries[i].value=e:(this._entries.push(new Entry(t,e)),this._keyMap.set(t,this._entries.length-1))}delete(t){const e=this._keyMap.get(t);if(void 0!==e){this._entries.splice(e,1),this._keyMap.delete(t);for(const t of this._keyMap)t[1]>e&&this._keyMap.set(t[0],t[1]-1);return!0}return!1}clear(){this._entries=[],this._keyMap.clear()}getAt(t){return this._entries[t]}get size(){return this._entries.length}}e.default=FastMap},function(t,e,i){"use strict";i.r(e);var s=i(6);class FastSet extends s.FastIterable{constructor(t){if(super(),this._values=[],this._valueMap=new Map,void 0!==t)for(const e of t)this._values.push(e),this._valueMap.set(e,this._values.length-1)}has(t){return this._valueMap.has(t)}add(t){return void 0===this._valueMap.get(t)&&(this._values.push(t),this._valueMap.set(t,this._values.length-1)),this}delete(t){const e=this._valueMap.get(t);if(void 0!==e){this._values.splice(e,1),this._valueMap.delete(t);for(const t of this._valueMap)t[1]>e&&this._valueMap.set(t[0],t[1]-1);return!0}return!1}clear(){this._values=[],this._valueMap.clear()}getAt(t){return this._values[t]}get size(){return this._values.length}}e.default=FastSet},function(t,e,i){"use strict";i.r(e);i(6);e.default=class Geometry{static getLineSphereIntersectionWithSphereAtOrigin(t,e,i){const s=t.dot(t),n=t.dot(e),o=e.dot(e),a=n*n+(i*i-s)*o;return a<0?Number.NaN:(-n-Math.sqrt(a))/o}static getLineSphereIntersectionWithLineStartAtOrigin(t,e,i,s){const n=e.dot(e),o=e.dot(i),a=o*o+(s*s-i.dot(i))*n;if(a<0)t.min=t.max=Number.NaN;else{const e=Math.sqrt(a);t.min=(o-e)/n,t.max=(o+e)/n}}static getLLAFromXYZOnSphere(t,e,i){const s=e.magnitudeXY();t.lon=Math.atan2(e.y,e.x),t.lat=Math.atan(e.z/s),t.alt=e.magnitude()-i}static getXYZFromLLAOnSphere(t,e,i){t.x=(i+e.alt)*Math.cos(e.lat)*Math.cos(e.lon),t.y=(i+e.alt)*Math.cos(e.lat)*Math.sin(e.lon),t.z=(i+e.alt)*Math.sin(e.lat)}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class Interval extends s.Freezable{static get pool(){return n}static get Infinite(){return o}constructor(t=0,e=0){super(),this._min=t,this._max=e}get min(){return this._min}set min(t){this.throwIfFrozen(),this._min=t}get max(){return this._max}set max(t){this.throwIfFrozen(),this._max=t}toString(){return"["+this._min+", "+this._max+"]"}copy(t){this.throwIfFrozen(),this._min=t._min,this._max=t._max}set(t,e){this.throwIfFrozen(),this._min=t,this._max=e}length(){return this._max-this._min}clamp(t){return Math.min(Math.max(this._min,t),this._max)}expandTo(t){this.throwIfFrozen(),this._min=Math.min(this._min,t),this._max=Math.max(this._max,t)}contains(t){return this._min<=t&&t<this._max}intersects(t){return this._min<t._max&&t._min<this._max}intersection(t,e){this.throwIfFrozen(),this._min=Math.max(t._min,e._min),this._max=Math.min(t._max,e._max),this._max<this._min&&(this._max=this._min)}union(t,e){this.throwIfFrozen(),this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}}const n=new s.Pool(Interval),o=new Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);o.freeze(),e.default=Interval},function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return OrbitalElements}});var s=i(6);class OrbitalElements{constructor(){this.epoch=0,this.eccentricity=0,this.semiMajorAxis=0,this.meanAngularMotion=0,this.meanAnomalyAtEpoch=0,this.orbitOrientation=new s.Quaternion}copy(t){this.epoch=t.epoch,this.eccentricity=t.eccentricity,this.semiMajorAxis=t.semiMajorAxis,this.meanAnomalyAtEpoch=t.meanAnomalyAtEpoch,this.meanAngularMotion=t.meanAngularMotion,this.orbitOrientation.copy(t.orbitOrientation)}projectFromMeanAnomaly(t,e,i){if(this.eccentricity<1){const s=this.getEccentricAnomalyFromMeanAnomaly(i),n=this.semiMajorAxis*(1-this.eccentricity*Math.cos(s)),o=this.meanAngularMotion*this.semiMajorAxis*this.semiMajorAxis/n;t.x=this.semiMajorAxis*(Math.cos(s)-this.eccentricity),t.y=this.semiMajorAxis*Math.sqrt(1-this.eccentricity*this.eccentricity)*Math.sin(s),e.x=-o*Math.sin(s),e.y=o*Math.sqrt(1-this.eccentricity*this.eccentricity)*Math.cos(s)}else{const s=this.getEccentricAnomalyFromMeanAnomaly(i),n=-this.semiMajorAxis*(1-this.eccentricity*Math.cosh(s)),o=this.meanAngularMotion*this.semiMajorAxis*this.semiMajorAxis/n;t.x=this.semiMajorAxis*(this.eccentricity-Math.cosh(s)),t.y=this.semiMajorAxis*Math.sqrt(this.eccentricity*this.eccentricity-1)*Math.sinh(s),e.x=-o*Math.sinh(s),e.y=o*Math.sqrt(this.eccentricity*this.eccentricity-1)*Math.cosh(s)}t.z=0,e.z=0,t.rotate(this.orbitOrientation,t),e.rotate(this.orbitOrientation,e)}project(t,e,i){let n=this.meanAnomalyAtEpoch+this.meanAngularMotion*(i-this.epoch);this.eccentricity<1&&(n=s.MathUtils.wrap(n,-s.MathUtils.pi,+s.MathUtils.pi)),this.projectFromMeanAnomaly(t,e,n)}getTrueAnomalyFromPosition(t){const e=s.Vector3.pool.get();return e.rotateInverse(this.orbitOrientation,t),Math.atan2(e.y,e.x)}getMeanAnomalyFromTrueAnomaly(t){let e=0,i=0;return this.eccentricity<1?(e=2*Math.atan(Math.tan(t/2)*Math.sqrt((1-this.eccentricity)/(1+this.eccentricity))),i=e-this.eccentricity*Math.sin(e)):(e=2*Math.atanh(Math.tan(t/2)*Math.sqrt((this.eccentricity-1)/(1+this.eccentricity))),i=this.eccentricity*Math.sinh(e)-e),i}getEccentricAnomalyFromMeanAnomaly(t){if(this.eccentricity<1){let e=t;this.eccentricity>=.8&&(e=Math.sign(t)*s.MathUtils.pi);for(let i=0;i<20;i++){const i=(e-this.eccentricity*Math.sin(e)-t)/(this.eccentricity*Math.cos(e)-1);if(e+=i,Math.abs(i)<.00174532925)break}return e}{let e=Math.log(2*Math.abs(t)/Math.E+1.8);this.eccentricity<=1.2&&(e=Math.log(2*Math.abs(t)/Math.E+1.8)),t<0&&(e*=-1);for(let i=0;i<20;i++){const i=(e-this.eccentricity*Math.sinh(e)+t)/(this.eccentricity*Math.cosh(e)-1);if(e+=i,Math.abs(i)<.00174532925)break}return e}}getMeanAnomalyFromEccentricAnomaly(t){if(this.eccentricity<1){const e=t-this.eccentricity*Math.sin(t);return s.MathUtils.wrap(e,-Math.PI,+Math.PI)}return this.eccentricity*Math.sinh(t)-t}getTrueAnomalyFromEccentricAnomaly(t){return this.eccentricity<1?2*Math.atan(Math.sqrt((1+this.eccentricity)/(1-this.eccentricity))*Math.tan(t/2)):2*Math.atan(Math.sqrt((1+this.eccentricity)/(this.eccentricity-1))*Math.tanh(t/2))}getEccentricAnomalyFromTrueAnomaly(t){if(this.eccentricity<1){const e=2*Math.atan2(Math.tan(t/2),Math.sqrt((1+this.eccentricity)/(1-this.eccentricity)));return s.MathUtils.wrap(e,-Math.PI,+Math.PI)}return 2*Math.atanh(Math.sqrt((this.eccentricity-1)/(this.eccentricity+1))*Math.tan(t/2))}getInclination(){const t=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2);const e=t.angle(s.Vector3.ZAxis);return s.Vector3.pool.release(t),e}getLongitudeOfAscendingNode(){const t=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2);const e=Math.atan2(t.x,-t.y);return s.Vector3.pool.release(t),s.MathUtils.wrap(e,0,s.MathUtils.twoPi)}getArgumentOfPeriapsis(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2),t.set(-t.y,t.x,0),this.orbitOrientation.getAxis(e,0);const i=t.angle(e);return s.Vector3.pool.release(e),s.Vector3.pool.release(t),s.MathUtils.wrap(i,0,s.MathUtils.twoPi)}getPeriod(){return s.MathUtils.twoPi/this.meanAngularMotion}getPeriapsis(){return this.semiMajorAxis*(1-this.eccentricity)}getApoapsis(){return this.semiMajorAxis*(1+this.eccentricity)}setOrbitOrientationFromElements(t,e,i){const n=s.Vector3.pool.get(),o=s.Vector3.pool.get(),a=s.Quaternion.pool.get();n.set(Math.cos(e),Math.sin(e),0),o.set(Math.sin(e)*Math.sin(t),-Math.cos(e)*Math.sin(t),Math.cos(t)),this.orbitOrientation.setFromAxes(n,void 0,o),a.setFromAxisAngle(o,i),this.orbitOrientation.mult(a,this.orbitOrientation),s.Quaternion.pool.release(a),s.Vector3.pool.release(o),s.Vector3.pool.release(n)}setFromPositionAndVelocity(t,e,i,n){const o=1/n;this.epoch=i;const a=s.Vector3.pool.get();a.cross(t,e);const r=s.Vector3.pool.get(),l=s.Vector3.pool.get();l.normalize(t),r.cross(e,a),r.mult(r,o),r.sub(r,l),this.eccentricity=r.magnitude();const c=a.dot(a)*o;this.semiMajorAxis=c/(1-this.eccentricity*this.eccentricity),this.eccentricity>1&&(this.semiMajorAxis*=-1);let h=Math.acos(s.MathUtils.clamp(r.dot(l)/this.eccentricity,-1,1));t.dot(e)<0&&(h*=-1),h<-Math.PI&&(h+=s.MathUtils.twoPi),h>=Math.PI&&(h-=s.MathUtils.twoPi),r.normalize(r),a.normalize(a),this.orbitOrientation.setFromAxes(r,void 0,a),s.Vector3.pool.release(l),s.Vector3.pool.release(a),s.Vector3.pool.release(r);const u=this.getEccentricAnomalyFromTrueAnomaly(h);this.meanAnomalyAtEpoch=this.getMeanAnomalyFromEccentricAnomaly(u),this.meanAngularMotion=Math.sqrt(n/(this.semiMajorAxis*this.semiMajorAxis*this.semiMajorAxis))}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class Rect extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0,n=0){super(),this._origin=new s.Vector2(t,e),this._size=new s.Vector2(i,n)}freeze(){this._origin.freeze(),this._size.freeze()}thaw(){this._origin.thaw(),this._size.thaw()}get origin(){return this._origin}get size(){return this._size}toString(){return"[Origin: ("+this._origin.x+", "+this._origin.y+"), Size: ("+this._size.x+", "+this._size.y+")]"}copy(t){this._origin.copy(t._origin),this._size.copy(t._size)}set(t,e,i,s){this._origin.set(t,e),this._size.set(i,s)}contains(t){return this._origin.x<=t.x&&t.x<this._origin.x+this._size.x&&this._origin.y<=t.y&&t.y<this._origin.y+this._size.y}intersects(t){return this._origin.x+this._size.x>t._origin.x&&t._origin.x+t._size.x>this._origin.x&&this._origin.y+this._size.y>t._origin.y&&t._origin.y+t._size.y>this._origin.y}}const n=new s.Pool(Rect);e.default=Rect},function(t,e,i){"use strict";i.r(e);var s=i(6);class Quaternion extends s.Freezable{static get pool(){return n}static get NaN(){return a}static get Identity(){return o}constructor(t=1,e=0,i=0,s=0){super(),this._w=t,this._x=e,this._y=i,this._z=s}get w(){return this._w}set w(t){this.throwIfFrozen(),this._w=t}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}get z(){return this._z}set z(t){this.throwIfFrozen(),this._z=t}getAngle(){return 2*Math.acos(this._w)}copy(t){this.throwIfFrozen(),this._w=t._w,this._x=t._x,this._y=t._y,this._z=t._z}copyFromThreeJs(t){this.throwIfFrozen(),this._w=t.w,this._x=t.x,this._y=t.y,this._z=t.z}set(t,e,i,s){this.throwIfFrozen(),this._w=t,this._x=e,this._y=i,this._z=s}setFromAxisAngle(t,e){this.throwIfFrozen();const i=Math.sin(e/2);this._w=Math.cos(e/2),this._x=i*t.x,this._y=i*t.y,this._z=i*t.z}setFromAxes(t,e,i){let n;this.throwIfFrozen(),void 0===t?(n=t=s.Vector3.pool.get(),t.cross(e,i)):void 0===e?(n=e=s.Vector3.pool.get(),e.cross(i,t)):void 0===i&&(n=i=s.Vector3.pool.get(),i.cross(t,e));const o=t.x+e.y+i.z;if(o>0){const s=2*Math.sqrt(o+1);this._w=.25*s,this._x=(e.z-i.y)/s,this._y=(i.x-t.z)/s,this._z=(t.y-e.x)/s}else if(t.x>e.y&&t.x>i.z){const s=2*Math.sqrt(1+t.x-e.y-i.z);this._w=(e.z-i.y)/s,this._x=.25*s,this._y=(e.x+t.y)/s,this._z=(i.x+t.z)/s}else if(e.y>i.z){const s=2*Math.sqrt(1+e.y-i.z-t.x);this._w=(i.x-t.z)/s,this._x=(e.x+t.y)/s,this._y=.25*s,this._z=(i.y+e.z)/s}else{const s=2*Math.sqrt(1+i.z-t.x-e.y);this._w=(t.y-e.x)/s,this._x=(i.x+t.z)/s,this._y=(i.y+e.z)/s,this._z=.25*s}s.Vector3.pool.release(n)}setFromEuler(t,e,i){this.throwIfFrozen();const s=.5*t,n=.5*e,o=.5*i,a=Math.cos(s),r=Math.sin(s),l=Math.cos(n),c=Math.sin(n),h=Math.cos(o),u=Math.sin(o);this._w=a*l*h+r*c*u,this._x=r*l*h-a*c*u,this._y=a*c*h+r*l*u,this._z=a*l*u-r*c*h}setFromVectorFromTo(t,e){const i=s.Vector3.pool.get(),n=t.dot(e);if(n>=1)this.set(1,0,0,0);else if(n<=-1)this.set(0,1,0,0);else{i.cross(t,e),i.normalize(i);const s=Math.acos(n);this.setFromAxisAngle(i,s)}s.Vector3.pool.release(i)}setFromAxis(t,e){const i=s.Vector3.pool.get(),n=s.Vector3.pool.get();i.normalize(t),n.cross(i,s.Vector3.XAxis),n.isZero()&&n.cross(i,s.Vector3.YAxis),n.normalize(n),0===e?this.setFromAxes(i,n,void 0):1===e?this.setFromAxes(void 0,i,n):2===e&&this.setFromAxes(n,void 0,i),s.Vector3.pool.release(i),s.Vector3.pool.release(n)}toString(){return"["+this._w+", "+this._x+", "+this._y+", "+this._z+"]"}isNaN(){return!(this._w<=0||this._w>0)}magnitude(){return Math.sqrt(this._w*this._w+this._x*this._x+this._y*this._y+this._z*this._z)}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0&&(this._w=t._w/e,this._x=t._x/e,this._y=t._y/e,this._z=t._z/e)}inverse(t){this.throwIfFrozen(),this._w=t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z}mult(t,e){this.throwIfFrozen();const i=Quaternion.pool.get();i._w=t._w*e._w-t._x*e._x-t._y*e._y-t._z*e._z,i._x=t._w*e._x+t._x*e._w+t._y*e._z-t._z*e._y,i._y=t._w*e._y-t._x*e._z+t._y*e._w+t._z*e._x,i._z=t._w*e._z+t._x*e._y-t._y*e._x+t._z*e._w,this.copy(i),Quaternion.pool.release(i)}multInverseL(t,e){this.throwIfFrozen();const i=Quaternion.pool.get();i._w=t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,i._x=t._w*e._x-t._x*e._w-t._y*e._z+t._z*e._y,i._y=t._w*e._y+t._x*e._z-t._y*e._w-t._z*e._x,i._z=t._w*e._z-t._x*e._y+t._y*e._x-t._z*e._w,this.copy(i),Quaternion.pool.release(i)}multInverseR(t,e){this.throwIfFrozen();const i=Quaternion.pool.get();i._w=+t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,i._x=-t._w*e._x+t._x*e._w-t._y*e._z+t._z*e._y,i._y=-t._w*e._y+t._x*e._z+t._y*e._w-t._z*e._x,i._z=-t._w*e._z-t._x*e._y+t._y*e._x+t._z*e._w,this.copy(i),Quaternion.pool.release(i)}scaleAngle(t,e){this.throwIfFrozen();const i=Math.acos(t._w),s=Math.sin(i);if(0===s)return void this.copy(t);const n=Math.sin(i*e);this._w=Math.cos(i*e),this._x=t._x/s*n,this._y=t._y/s*n,this._z=t._z/s*n}angle(t){return 2*Math.acos(this._w*t._w+this._x*t._x+this._y*t._y+this._z*t._z)}slerp(t,e,i){this.throwIfFrozen();let s=t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,n=1;if(s<0&&(n=-1,s=-s),s<=.9995){const o=Math.acos(s),a=n*Math.sin((1-i)*o)/Math.sin(o),r=Math.sin(i*o)/Math.sin(o);this._w=a*t._w+r*e._w,this._x=a*t._x+r*e._x,this._y=a*t._y+r*e._y,this._z=a*t._z+r*e._z}else{const s=n*(1-i),o=i;this._w=s*t._w+o*e._w,this._x=s*t._x+o*e._x,this._y=s*t._y+o*e._y,this._z=s*t._z+o*e._z,this.normalize(this)}}getAxis(t,e){void 0===e?(t.set(this._x,this._y,this._z),t.normalize(t)):0===e?(t.x=this._w*this._w+this._x*this._x-this._y*this._y-this._z*this._z,t.y=2*this._w*this._z+2*this._x*this._y,t.z=2*this._x*this._z-2*this._w*this._y):1===e?(t.x=2*this._y*this._x-2*this._w*this._z,t.y=this._w*this._w-this._x*this._x+this._y*this._y-this._z*this._z,t.z=2*this._x*this._w+2*this._y*this._z):2===e&&(t.x=2*this._y*this._w+2*this._z*this._x,t.y=2*this._z*this._y-2*this._w*this._x,t.z=this._w*this._w-this._x*this._x-this._y*this._y+this._z*this._z)}}const n=new s.Pool(Quaternion),o=new Quaternion;o.freeze();const a=new Quaternion(Number.NaN,Number.NaN,Number.NaN,Number.NaN);a.freeze(),e.default=Quaternion},function(t,e,i){"use strict";i.r(e);var s=i(6);class Vector2 extends s.Freezable{static get pool(){return n}static get NaN(){return l}static get Zero(){return o}static get XAxis(){return a}static get YAxis(){return r}constructor(t=0,e=0){super(),this._x=t,this._y=e}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}toString(){return"["+this._x+", "+this._y+"]"}equals(t){return this._x===t._x&&this._y===t._y}isZero(){return 0===this._x&&0===this._y}isNaN(){return!((this._x<=0||this._x>0)&&(this._y<=0||this._y>0))}copy(t){this.throwIfFrozen(),this._x=t._x,this._y=t._y}copyFromThreeJs(t){this.throwIfFrozen(),this._x=t.x,this._y=t.y}set(t,e){this.throwIfFrozen(),this._x=t,this._y=e}neg(t){this.throwIfFrozen(),this._x=-t._x,this._y=-t._y}add(t,e){this.throwIfFrozen(),this._x=t._x+e._x,this._y=t._y+e._y}sub(t,e){this.throwIfFrozen(),this._x=t._x-e._x,this._y=t._y-e._y}mult(t,e){this.throwIfFrozen(),this._x=t._x*e,this._y=t._y*e}addMult(t,e,i){this.throwIfFrozen(),this._x=t._x+e._x*i,this._y=t._y+e._y*i}div(t,e){this.throwIfFrozen(),this._x=t._x/e,this._y=t._y/e}scale(t,e){this.throwIfFrozen(),this._x=t._x*e._x,this._y=t._y*e._y}scaleInv(t,e){this.throwIfFrozen(),this._x=t._x/e._x,this._y=t._y/e._y}dot(t){return this._x*t._x+this._y*t._y}cross(t){return this._x*t._y-this._y*t._x}magnitudeSqr(){return this._x*this._x+this._y*this._y}magnitude(){return Math.sqrt(this.magnitudeSqr())}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0&&(this._x=t._x/e,this._y=t._y/e)}setMagnitude(t,e){this.throwIfFrozen(),this.normalize(t),this._x*=e,this._y*=e}distance(t){const e=this._x-t._x,i=this._y-t._y;return Math.sqrt(e*e+i*i)}angle(t){const e=this.magnitude()*t.magnitude();return e>0?Math.acos(s.MathUtils.clamp(this.dot(t)/e,-1,1)):Number.NaN}clamp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.clamp(t._x,e._x,i._x),this._y=s.MathUtils.clamp(t._y,e._y,i._y)}lerp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.lerp(t._x,e._x,i),this._y=s.MathUtils.lerp(t._y,e._y,i)}}const n=new s.Pool(Vector2),o=new Vector2;o.freeze();const a=new Vector2(1,0);a.freeze();const r=new Vector2(0,1);r.freeze();const l=new Vector2(Number.NaN,Number.NaN);l.freeze(),e.default=Vector2},function(t,e,i){"use strict";i.r(e);var s=i(6);class Vector3 extends s.Freezable{static get pool(){return n}static get NaN(){return d}static get Zero(){return o}static get XAxis(){return a}static get YAxis(){return r}static get ZAxis(){return l}static get XAxisNeg(){return c}static get YAxisNeg(){return h}static get ZAxisNeg(){return u}constructor(t=0,e=0,i=0){super(),this._x=t,this._y=e,this._z=i}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}get z(){return this._z}set z(t){this.throwIfFrozen(),this._z=t}toString(){return"["+this._x+", "+this._y+", "+this._z+"]"}equals(t){return this._x===t._x&&this._y===t._y&&this._z===t._z}isZero(){return 0===this._x&&0===this._y&&0===this._z}isNaN(){return!((this._x<=0||this._x>0)&&(this._y<=0||this._y>0)&&(this._z<=0||this._z>0))}copy(t){this.throwIfFrozen(),this._x=t._x,this._y=t._y,this._z=t._z}copyFromThreeJs(t){this.throwIfFrozen(),this._x=t.x,this._y=t.y,this._z=t.z}set(t,e,i){this.throwIfFrozen(),this._x=t,this._y=e,this._z=i}setFromAER(t){this.throwIfFrozen();const e=Math.cos(t.elevation);this._x=t.range*e*Math.cos(t.azimuth),this._y=t.range*e*Math.sin(t.azimuth),this._z=t.range*Math.sin(t.elevation)}neg(t){this.throwIfFrozen(),this._x=-t._x,this._y=-t._y,this._z=-t._z}add(t,e){this.throwIfFrozen(),this._x=t._x+e._x,this._y=t._y+e._y,this._z=t._z+e._z}sub(t,e){this.throwIfFrozen(),this._x=t._x-e._x,this._y=t._y-e._y,this._z=t._z-e._z}mult(t,e){this.throwIfFrozen(),this._x=t._x*e,this._y=t._y*e,this._z=t._z*e}addMult(t,e,i){this.throwIfFrozen(),this._x=t._x+e._x*i,this._y=t._y+e._y*i,this._z=t._z+e._z*i}div(t,e){this.throwIfFrozen(),this._x=t._x/e,this._y=t._y/e,this._z=t._z/e}scale(t,e){this.throwIfFrozen(),this._x=t._x*e._x,this._y=t._y*e._y,this._z=t._z*e._z}scaleInv(t,e){this.throwIfFrozen(),this._x=t._x/e._x,this._y=t._y/e._y,this._z=t._z/e._z}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z}cross(t,e){this.throwIfFrozen();const i=t._y*e._z-t._z*e._y,s=t._z*e._x-t._x*e._z,n=t._x*e._y-t._y*e._x;this._x=i,this._y=s,this._z=n}magnitudeSqr(){return this._x*this._x+this._y*this._y+this._z*this._z}magnitude(){return Math.sqrt(this.magnitudeSqr())}magnitudeXY(){return Math.sqrt(this._x*this._x+this._y*this._y)}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0?(this._x=t._x/e,this._y=t._y/e,this._z=t._z/e):this.copy(t)}setMagnitude(t,e){this.throwIfFrozen(),this.normalize(t),this._x*=e,this._y*=e,this._z*=e}distance(t){const e=this._x-t._x,i=this._y-t._y,s=this._z-t._z;return Math.sqrt(e*e+i*i+s*s)}angle(t){const e=this.magnitude()*t.magnitude();return e>0?Math.acos(s.MathUtils.clamp(this.dot(t)/e,-1,1)):Number.NaN}angleAroundAxis(t,e){const i=Vector3.pool.get(),s=Vector3.pool.get();i.addMult(this,e,-this.dot(e)),s.addMult(t,e,-t.dot(e));let n=i.angle(s);return i.cross(i,s),i.dot(e)<0&&(n*=-1),Vector3.pool.release(i),Vector3.pool.release(s),n}clamp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.clamp(t._x,e._x,i._x),this._y=s.MathUtils.clamp(t._y,e._y,i._y),this._z=s.MathUtils.clamp(t._z,e._z,i._z)}lerp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.lerp(t._x,e._x,i),this._y=s.MathUtils.lerp(t._y,e._y,i),this._z=s.MathUtils.lerp(t._z,e._z,i)}slerp(t,e,i){this.throwIfFrozen();const n=t.magnitude(),o=e.magnitude();if(n>0&&o>0){const a=Math.acos(s.MathUtils.clamp(t.dot(e)/(n*o),-1,1));if(Math.abs(a)>.01745327777){const s=1/Math.sin(a),r=Math.sin((1-i)*a)*s,l=Math.sin(i*a)*s;this.set(t.x*r/n+e.x*l/o,t.y*r/n+e.y*l/o,t.z*r/n+e.z*l/o),this.mult(this,(1-i)*n+i*o)}else this.lerp(t,e,i)}else this.lerp(t,e,i)}rotate(t,e){this.throwIfFrozen();const i=t.w*e._x+t.y*e._z-t.z*e._y,s=t.w*e._y+t.z*e._x-t.x*e._z,n=t.w*e._z+t.x*e._y-t.y*e._x,o=-t.x*e._x-t.y*e._y-t.z*e._z;this._x=i*t.w-o*t.x-s*t.z+n*t.y,this._y=s*t.w-o*t.y-n*t.x+i*t.z,this._z=n*t.w-o*t.z-i*t.y+s*t.x}rotateInverse(t,e){this.throwIfFrozen();const i=t.w*e._x-t.y*e._z+t.z*e._y,s=t.w*e._y-t.z*e._x+t.x*e._z,n=t.w*e._z-t.x*e._y+t.y*e._x,o=t.x*e._x+t.y*e._y+t.z*e._z;this._x=i*t.w+o*t.x+s*t.z-n*t.y,this._y=s*t.w+o*t.y+n*t.x-i*t.z,this._z=n*t.w+o*t.z+i*t.y-s*t.x}setNormalTo(t,e){const i=e._x*(t._y*t._y+t._z*t._z)-t._x*(t._y*e._y+t._z*e._z),s=e._y*(t._z*t._z+t._x*t._x)-t._y*(t._z*e._z+t._x*e._x),n=e._z*(t._x*t._x+t._y*t._y)-t._z*(t._x*e._x+t._y*e._y);this._x=i,this._y=s,this._z=n,this.normalize(this)}}const n=new s.Pool(Vector3),o=new Vector3;o.freeze();const a=new Vector3(1,0,0);a.freeze();const r=new Vector3(0,1,0);r.freeze();const l=new Vector3(0,0,1);l.freeze();const c=new Vector3(-1,0,0);a.freeze();const h=new Vector3(0,-1,0);r.freeze();const u=new Vector3(0,0,-1);l.freeze();const d=new Vector3(Number.NaN,Number.NaN,Number.NaN);d.freeze(),e.default=Vector3},function(t,e,i){"use strict";i.r(e);var s=i(6);class Cache extends s.FastIterable{constructor(t=null,e=null){super(),this._keysToEntries=new s.FastMap,this._itemToKeys=new Map,this._itemConstructor=t,this._itemDestructor=e}get(t){const e=this._keysToEntries.get(t);if(void 0===e){const e={item:this._itemConstructor(t),count:1};return this._keysToEntries.set(t,e),this._itemToKeys.set(e.item,t),e.item}return e.count+=1,e.item}release(t){const e=this._itemToKeys.get(t);if(void 0!==e){const i=this._keysToEntries.get(e);i.count-=1,0===i.count&&(this._itemDestructor(i.item),this._keysToEntries.delete(e),this._itemToKeys.delete(t))}}getAt(t){return this._keysToEntries.getAt(t).value.item}get size(){return this._keysToEntries.size}}e.default=Cache},function(t,e,i){"use strict";i.r(e);var s=i(6);class ComponentRef extends s.BaseRef{constructor(t){super(t),this._entityName="",this._componentName="",this._componentType="",this._componentTypeIndex=0}getEntityName(){return this._entityName}getComponentName(){return this._componentName}getComponentType(){return this._componentType}getComponentTypeIndex(){return this._componentTypeIndex}setByName(t,e){this._entityName=t,this._componentName=e,this._componentType=""}setByType(t,e,i=0){this._entityName=t,this._componentType=e,this._componentTypeIndex=i,this._componentName=""}update(){if(""===this._entityName||""===this._componentName&&""===this._componentType)this._setRef(null);else if(""!==this._componentName){const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getComponent(this._componentName);this._setRef(e)}else this._setRef(null)}else{const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getComponentByType(this._componentType,this._componentTypeIndex);this._setRef(e)}else this._setRef(null)}}}e.default=ComponentRef},function(t,e,i){"use strict";i.r(e);var s=i(6);class ControllerRef extends s.BaseRef{constructor(t){super(t),this._entityName="",this._controllerName="",this._controllerType="",this._controllerTypeIndex=0}getEntityName(){return this._entityName}getControllerName(){return this._controllerName}getControllerType(){return this._controllerType}getControllerTypeIndex(){return this._controllerTypeIndex}setByName(t,e){this._entityName=t,this._controllerName=e,this._controllerType=""}setByType(t,e,i=0){this._entityName=t,this._controllerType=e,this._controllerTypeIndex=i,this._controllerName=""}update(){if(""===this._entityName||""===this._controllerName&&""===this._controllerType)this._setRef(null);else if(""!==this._controllerName){const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getController(this._controllerName);this._setRef(e)}else this._setRef(null)}else{const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getControllerByType(this._controllerType,this._controllerTypeIndex);this._setRef(e)}else this._setRef(null)}}}e.default=ControllerRef},function(t,e,i){"use strict";i.r(e);var s=i(6);class CubeMap{static xyzToUVFace(t,e,i=this._defaultCubeMapFaceFrames){let n;for(let o=0;o<6;o++){const a=i[o],r=a[2];let l=0,c=0,h=0,u=!1;r===s.Vector3.XAxis||r===s.Vector3.XAxisNeg?(l=e.x,c=e.y,h=e.z,u=r===s.Vector3.XAxisNeg):r===s.Vector3.YAxis||r===s.Vector3.YAxisNeg?(l=e.y,c=e.z,h=e.x,u=r===s.Vector3.YAxisNeg):(l=e.z,c=e.x,h=e.y,u=r===s.Vector3.ZAxisNeg),Math.abs(l)>=Math.abs(c)&&Math.abs(l)>=Math.abs(h)&&(l>=0&&!u||l<0&&u)&&(n=a,t.z=o)}if(void 0===n)return void t.set(NaN,NaN,NaN);let o=n[2].x*e.x+n[2].y*e.y+n[2].z*e.z;o<0&&(o=1),t.x=(n[0].x*e.x+n[0].y*e.y+n[0].z*e.z)/o,t.y=(n[1].x*e.x+n[1].y*e.y+n[1].z*e.z)/o,t.x=.5*(t.x+1),t.y=.5*(t.y+1)}}CubeMap._defaultCubeMapFaceFrames=[[s.Vector3.YAxis,s.Vector3.ZAxis,s.Vector3.XAxis],[s.Vector3.XAxisNeg,s.Vector3.ZAxis,s.Vector3.YAxis],[s.Vector3.YAxisNeg,s.Vector3.ZAxis,s.Vector3.XAxisNeg],[s.Vector3.XAxis,s.Vector3.ZAxis,s.Vector3.YAxisNeg],[s.Vector3.YAxis,s.Vector3.XAxisNeg,s.Vector3.ZAxis],[s.Vector3.YAxis,s.Vector3.XAxis,s.Vector3.ZAxisNeg]],e.default=CubeMap},function(t,e,i){"use strict";i.r(e);var s=i(6);class EntityRef extends s.BaseRef{constructor(t,e){super(t),this._name=void 0!==e?e:""}getName(){return this._name}setName(t){this._name=t}update(){if(""===this._name)null!==this._ref&&this._setRef(null);else if(null===this._ref||this._ref.isDestroyed()||!this._ref.isEnabled()||this._ref.getName()!==this._name){const t=this._scene.getEntity(this._name);this._setRef(t)}}}e.default=EntityRef},function(t,e,i){"use strict";i.r(e);var s=i(6);class LatLonAlt extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0){super(),this._lat=t,this._lon=e,this._alt=i}get lat(){return this._lat}set lat(t){this.throwIfFrozen(),this._lat=t}get lon(){return this._lon}set lon(t){this.throwIfFrozen(),this._lon=t}get alt(){return this._alt}set alt(t){this.throwIfFrozen(),this._alt=t}toString(t=!1){return t?"["+s.MathUtils.radToDeg(this._lat)+", "+s.MathUtils.radToDeg(this._lon)+", "+this._alt+"]":"["+this._lat+", "+this._lon+", "+this._alt+"]"}copy(t){this.throwIfFrozen(),this._lat=t._lat,this._lon=t._lon,this._alt=t._alt}set(t,e,i){this.throwIfFrozen(),this._lat=t,this._lon=e,this._alt=i}}const n=new s.Pool(LatLonAlt);e.default=LatLonAlt},function(t,e,i){"use strict";i.r(e);var s=i(6);class LineMesh{constructor(t){this._component=t,this._alphaMultiplier=1,this._position=new s.Vector3,this._orientation=new s.Quaternion,this._scale=1,this._dashGapLength=0,this._dashLength=1,this._glowWidth=0,this._threeJsObjects=[],this._threeJsMaterial=null,this._threeJsMaterial=t.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("line"),t.getThreeJsMaterials().push(this._threeJsMaterial),this._threeJsMaterial.uniforms.alphaMultiplier.value=this._alphaMultiplier,this._threeJsMaterial.uniforms.dashLength.value=this._dashLength,this._threeJsMaterial.uniforms.dashGapLength.value=this._dashGapLength,this._threeJsMaterial.uniforms.glowWidth.value=this._glowWidth}setPositions(t){if(t.length%2!=0)throw new Error("Number of positions in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);const e=s.Vector3.pool.get(),i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),o=s.Vector3.pool.get(),a=s.Vector3.pool.get();let r=0;for(let n=0;n<this._threeJsObjects.length;n++){const o=this._threeJsObjects[n].geometry.getAttribute("position"),l=o.array;for(let o=0;o<l.length/(2*LineMesh._floatsPerVertex);o++){const c=o+n*(LineMesh._verticesPerGeometry/2);l[2*o*LineMesh._floatsPerVertex+0]=t[c].x,l[2*o*LineMesh._floatsPerVertex+1]=t[c].y,l[2*o*LineMesh._floatsPerVertex+2]=t[c].z,l[(2*o+1)*LineMesh._floatsPerVertex+0]=t[c].x,l[(2*o+1)*LineMesh._floatsPerVertex+1]=t[c].y,l[(2*o+1)*LineMesh._floatsPerVertex+2]=t[c].z,c%2==0?t[c].equals(t[s.MathUtils.wrap(c-1,0,t.length)])?(e.copy(t[s.MathUtils.wrap(c-2,0,t.length)]),i.copy(t[c+1])):(e.copy(t[c]),i.copy(t[c+1]),r=0):c%2==1&&(t[c].equals(t[s.MathUtils.wrap(c+1,0,t.length)])?(e.copy(t[c-1]),i.copy(t[s.MathUtils.wrap(c+2,0,t.length)])):(e.copy(t[c-1]),i.copy(t[c])),a.sub(t[c],t[c-1]),r+=a.magnitude()),l[2*o*LineMesh._floatsPerVertex+3]=e.x,l[2*o*LineMesh._floatsPerVertex+4]=e.y,l[2*o*LineMesh._floatsPerVertex+5]=e.z,l[(2*o+1)*LineMesh._floatsPerVertex+3]=e.x,l[(2*o+1)*LineMesh._floatsPerVertex+4]=e.y,l[(2*o+1)*LineMesh._floatsPerVertex+5]=e.z,l[2*o*LineMesh._floatsPerVertex+6]=i.x,l[2*o*LineMesh._floatsPerVertex+7]=i.y,l[2*o*LineMesh._floatsPerVertex+8]=i.z,l[(2*o+1)*LineMesh._floatsPerVertex+6]=i.x,l[(2*o+1)*LineMesh._floatsPerVertex+7]=i.y,l[(2*o+1)*LineMesh._floatsPerVertex+8]=i.z,l[2*o*LineMesh._floatsPerVertex+14]=r,l[(2*o+1)*LineMesh._floatsPerVertex+14]=r}o.data.needsUpdate=!0}s.Vector3.pool.release(n),s.Vector3.pool.release(o),s.Vector3.pool.release(e),s.Vector3.pool.release(i),s.Vector3.pool.release(a)}setColors(t){if(t.length%2!=0)throw new Error("Number of colors in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("color"),s=i.array;for(let i=0;i<s.length/(2*LineMesh._floatsPerVertex);i++){const n=i+e*(LineMesh._verticesPerGeometry/2);s[2*i*LineMesh._floatsPerVertex+9]=t[n].r,s[2*i*LineMesh._floatsPerVertex+10]=t[n].g,s[2*i*LineMesh._floatsPerVertex+11]=t[n].b,s[2*i*LineMesh._floatsPerVertex+12]=t[n].a,s[(2*i+1)*LineMesh._floatsPerVertex+9]=t[n].r,s[(2*i+1)*LineMesh._floatsPerVertex+10]=t[n].g,s[(2*i+1)*LineMesh._floatsPerVertex+11]=t[n].b,s[(2*i+1)*LineMesh._floatsPerVertex+12]=t[n].a}i.data.needsUpdate=!0}}setWidths(t){if("number"==typeof t)for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("width"),s=i.array;for(let e=0;e<s.length/(2*LineMesh._floatsPerVertex);e++)s[2*e*LineMesh._floatsPerVertex+13]=t,s[(2*e+1)*LineMesh._floatsPerVertex+13]=-t;i.data.needsUpdate=!0}else{if(t.length%2!=0)throw new Error("Number of widths in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("width"),s=i.array;for(let i=0;i<s.length/(2*LineMesh._floatsPerVertex);i++){const n=i+e*(LineMesh._verticesPerGeometry/2);s[2*i*LineMesh._floatsPerVertex+13]=t[n],s[(2*i+1)*LineMesh._floatsPerVertex+13]=-t[n]}i.data.needsUpdate=!0}}}setDashLength(t,e){this._dashLength=t,this._dashGapLength=e,s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"dashLength",this._dashLength),s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"dashGapLength",this._dashGapLength)}setGlowWidth(t){this._glowWidth=t,s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"glowWidth",this._glowWidth)}setScale(t){this._scale=t,s.ThreeJsHelper.setScale(this._threeJsObjects,t)}getAlphaMultiplier(){return this._alphaMultiplier}setAlphaMultiplier(t){this._alphaMultiplier=t,s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"alphaMultiplier",this._alphaMultiplier)}prepareForRender(t){const e=s.Vector2.pool.get();if("spout"===t.getType()){const i=t;e.set(.1*i.getRenderWidth(),.5*i.getRenderWidth()*.1)}else e.copy(t.getViewport().getBounds().size);s.ThreeJsHelper.setUniformVector2(this._threeJsMaterial,"pixelSize",e),s.Vector2.pool.release(e)}_adjustVerticesInGeometries(t){const e=Math.ceil(t/LineMesh._verticesPerGeometry);for(;this._threeJsObjects.length>e;){const t=this._threeJsObjects[this._threeJsObjects.length-1];s.ThreeJsHelper.destroyObject(t),this._threeJsObjects.splice(this._threeJsObjects.length-1,1);for(let e=0,i=this._component.getThreeJsObjects().length;e<i;e++)if(this._component.getThreeJsObjects()[e]===t){this._component.getThreeJsObjects().splice(e,1);break}}if(this._threeJsObjects.length<e){this._threeJsObjects.length>0&&this._setupThreeJsGeometry(this._threeJsObjects[this._threeJsObjects.length-1].geometry,LineMesh._verticesPerGeometry);for(let i=this._threeJsObjects.length;i<e;i++){const e=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,[],!1);this._threeJsObjects.push(e),this._component.getThreeJsObjects().push(e);const n=Math.min(t-i*LineMesh._verticesPerGeometry,LineMesh._verticesPerGeometry);this._setupThreeJsGeometry(e.geometry,n),s.ThreeJsHelper.setPosition(e,this._position),s.ThreeJsHelper.setOrientation(e,this._orientation),s.ThreeJsHelper.setScale(e,this._scale),e.frustumCulled=!1}}else if(e>0){const i=this._threeJsObjects[e-1].geometry,s=t-(e-1)*LineMesh._verticesPerGeometry;i.getAttribute("position").array.length!==s*LineMesh._floatsPerVertex&&this._setupThreeJsGeometry(i,s)}}_setupThreeJsGeometry(t,e){const i=new Float32Array(e*LineMesh._floatsPerVertex),n=new s.THREE.InterleavedBuffer(i,LineMesh._floatsPerVertex);t.setAttribute("position",new s.THREE.InterleavedBufferAttribute(n,3,0,!1)),t.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(n,3,3,!1)),t.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(n,3,6,!1)),t.setAttribute("color",new s.THREE.InterleavedBufferAttribute(n,4,9,!1)),t.setAttribute("width",new s.THREE.InterleavedBufferAttribute(n,1,13,!1)),t.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(n,1,14,!1));const o=new Uint16Array(6*e/4);for(let t=0;t<e/4;t++)o[6*t+0]=4*t,o[6*t+1]=4*t+2,o[6*t+2]=4*t+3,o[6*t+3]=4*t,o[6*t+4]=4*t+3,o[6*t+5]=4*t+1;t.setIndex(new s.THREE.BufferAttribute(o,1))}}LineMesh._floatsPerVertex=15,LineMesh._verticesPerGeometry=65536,e.default=LineMesh},function(t,e,i){"use strict";i.r(e);var s=i(6);class MaterialUtilsPhong{static get(){null===MaterialUtilsPhong._material&&(MaterialUtilsPhong._material=new s.THREE.ShaderMaterial({uniforms:{entityPos:new s.THREE.Uniform(new s.THREE.Vector3),ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),color:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),specularColor:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),specularIntensity:new s.THREE.Uniform(0),specularHardness:new s.THREE.Uniform(50),colorTexture:new s.THREE.Uniform(null),normalTexture:new s.THREE.Uniform(null),specularTexture:new s.THREE.Uniform(null),nightTexture:new s.THREE.Uniform(null),decalTexture:new s.THREE.Uniform(null),normalScale:new s.THREE.Uniform(new s.THREE.Vector2),numShadowEntities:new s.THREE.Uniform(0),shadowEntityPositions:new s.THREE.Uniform([new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3]),shadowEntityRadii:new s.THREE.Uniform([0,0,0,0,0]),shadowEntityRayleighAmount:new s.THREE.Uniform([0,0,0,0,0]),shadowRingsInnerRadius:new s.THREE.Uniform(0),shadowRingsOuterRadius:new s.THREE.Uniform(0),shadowRingsTexture:new s.THREE.Uniform(null),shadowRingsNormal:new s.THREE.Uniform(new s.THREE.Vector3),atmospherePosition:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereOrientation:new s.THREE.Uniform(new s.THREE.Vector4(1,0,0,0)),atmosphereEquatorialRadius:new s.THREE.Uniform(1),atmospherePolarRadius:new s.THREE.Uniform(1),atmosphereDensity:new s.THREE.Uniform(0),atmosphereScaleHeight:new s.THREE.Uniform(1),atmosphereEmissivity:new s.THREE.Uniform(0),atmosphereColor:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereSunBrightness:new s.THREE.Uniform(1),atmosphereSunsetColor:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereSunsetIntensity:new s.THREE.Uniform(0),atmosphereGroundIsSpheroid:new s.THREE.Uniform(0)},vertexShader:"\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tattribute vec2 normalUV;\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tattribute vec2 specularUV;\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tattribute vec2 nightUV;\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tattribute vec2 decalUV;\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tviewTangent = vec4((modelMatrix * vec4(tangent.xyz, 0.0)).xyz, tangent.w);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvColorUV = uv;\n\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\tvNormalUV = normalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\tvSpecularUV = specularUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\tvNightUV = nightUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\tvDecalUV = decalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tcameraSpaceNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\t\t\t\t\tvec4 viewPosition = viewMatrix * vec4(cameraSpacePosition, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t\t\t\t\t#endif\n\t\t\t\t\tuniform mat3 normalMatrix;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\n\t\t\t\t\t// Shading.\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform vec3 specularColor;\n\t\t\t\t\tuniform float specularIntensity;\n\t\t\t\t\tuniform float specularHardness;\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tuniform float shadowRingsInnerRadius;\n\t\t\t\t\t\tuniform float shadowRingsOuterRadius;\n\t\t\t\t\t\tuniform sampler2D shadowRingsTexture;\n\t\t\t\t\t\tuniform vec3 shadowRingsNormal;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\tuniform sampler2D specularTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\tuniform sampler2D nightTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\tuniform sampler2D decalTexture;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Modifications on the textures.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(viewTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (viewTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\t\tvec2 uv = vNormalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 uv = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, uv).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\tvec4 getColorFromEnvironmentMap(sampler2D environmentTexture, vec3 positionDir, vec3 normal) {\n\t\t\t\t\t\t\tvec3 r = reflect(positionDir, normal);\n\t\t\t\t\t\t\tfloat m = 2. * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.) * (r.z + 1.));\n\t\t\t\t\t\t\tvec2 uv = r.xy / m + .5;\n\t\t\t\t\t\t\treturn vec4(texture2D(environmentTexture, uv).rgb, 1.);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tif (value > 0.0) {\n\t\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\t\tcolor = value * color / (color.r + color.g + color.b);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - originOffset * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(origin, axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = (ld * sr - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (ld * sr + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\te0 -= (e1 - e0) * shadowEntityRayleighAmount[i] / 6.0;\n\t\t\t\t\t\t\t\t\t\tlightLevel = pow(saturate((e - e0) / (e1 - e0)), 0.5); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tvec3 getLightColorFromShadowRings(vec3 lightColor, vec3 lightDir) {\n\t\t\t\t\t\t\tvec3 position = cameraSpacePosition - entityPos;\n\t\t\t\t\t\t\thighp float d = dot(position, shadowRingsNormal) / dot(lightDir, shadowRingsNormal);\n\t\t\t\t\t\t\thighp vec3 pointOnDisc = -d * lightDir + position;\n\t\t\t\t\t\t\thighp float lengthOnDisc = length(pointOnDisc - dot(pointOnDisc, shadowRingsNormal) * shadowRingsNormal);\n\t\t\t\t\t\t\thighp float u = (lengthOnDisc - shadowRingsInnerRadius) / (shadowRingsOuterRadius - shadowRingsInnerRadius);\n\t\t\t\t\t\t\thighp float shadow = 1.0 - texture2D(shadowRingsTexture, vec2(u, 0.0), 0.0).a;\n\t\t\t\t\t\t\tif (shadowRingsInnerRadius <= lengthOnDisc && lengthOnDisc <= shadowRingsOuterRadius && d > 0.0) {\n\t\t\t\t\t\t\t\treturn lightColor * saturate(shadow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn lightColor;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// ATMOSPHERE\n\n\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\tuniform vec3 atmospherePosition;\n\t\t\t\t\t\tuniform vec4 atmosphereOrientation;\n\t\t\t\t\t\tuniform float atmosphereEquatorialRadius;\n\t\t\t\t\t\tuniform float atmospherePolarRadius;\n\t\t\t\t\t\tuniform float atmosphereDensity;\n\t\t\t\t\t\tuniform float atmosphereScaleHeight;\n\t\t\t\t\t\tuniform vec3 atmosphereColor;\n\t\t\t\t\t\tuniform float atmosphereEmissivity;\n\t\t\t\t\t\tuniform float atmosphereSunBrightness;\n\t\t\t\t\t\tuniform vec3 atmosphereSunsetColor;\n\t\t\t\t\t\tuniform float atmosphereSunsetIntensity;\n\t\t\t\t\t\tuniform float atmosphereGroundIsSpheroid;\n\n\t\t\t\t\t\tconst int atmosphereNumIterations = 5;\n\n\t\t\t\t\t\t// Inverse rotate a vector by a quaternion.\n\t\t\t\t\t\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\t\t\t\t\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\t\t\t\t\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\t\t\t\t\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\t\t\t\t\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\t\t\t\t\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\t\t\t\t\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\t\t\t\t\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\t\t\t\t\t\treturn vec3(x, y, z);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\t\t\t\t\t\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\t// Get the along the ray perpendicular to the sphere.\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tvec3 perp = origin + direction * perpD;\n\n\t\t\t\t\t\t\t// Figure out the sample distance.\n\t\t\t\t\t\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\t\t\t\t\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t\t\t\t\t\t// Figure out starting and ending sample points.\n\t\t\t\t\t\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\t\t\t\t\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the density of the atmosphere at a given position.\n\t\t\t\t\t\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\treturn density * exp((radius - length(position)) / atmosphereScaleHeight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\t\t\t\t\t\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\t\t\t\t\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\t\t\t\t\t\tif (depth < 0.0) { // day\n\t\t\t\t\t\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse { // night\n\t\t\t\t\t\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjusts the color if one of the RGB values is greater than 1.0.\n\t\t\t\t\t\tvec3 adjustOverbrightness(vec3 color) {\n\t\t\t\t\t\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\t\t\t\t\t\tif (maxColor > 1.0) {\n\t\t\t\t\t\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\t\t\t\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfloat easeInOut(float x, float sharpness) {\n\t\t\t\t\t\t\tfloat b = sharpness;\n\t\t\t\t\t\t\tif (x < 0.5) {\n\t\t\t\t\t\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculates a glow around the light direction.\n\t\t\t\t\t\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\t\t\t\t\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjust the incoming light for the atmosphere.\n\t\t\t\t\t\tvec4 getAtmosphereColor(vec3 incomingLight, vec3 lightPosition) {\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere center.\n\t\t\t\t\t\t\thighp vec3 position = cameraSpacePosition - atmospherePosition;\n\t\t\t\t\t\t\thighp vec3 cameraPosition = -atmospherePosition;\n\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere orientation.\n\t\t\t\t\t\t\tposition = quatRotInv(atmosphereOrientation, position);\n\t\t\t\t\t\t\tcameraPosition = quatRotInv(atmosphereOrientation, cameraPosition);\n\n\t\t\t\t\t\t\t// Convert everything into a sphere frame.\n\t\t\t\t\t\t\tfloat spheroidRatio = atmosphereEquatorialRadius / atmospherePolarRadius;\n\t\t\t\t\t\t\tposition.z *= spheroidRatio;\n\t\t\t\t\t\t\tcameraPosition.z *= spheroidRatio;\n\n\t\t\t\t\t\t\t// If the ground is a spheroid, get to be the right position.\n\t\t\t\t\t\t\tposition = normalize(position) * atmosphereEquatorialRadius;\n\n\t\t\t\t\t\t\thighp vec3 cameraToPosition = position - cameraPosition;\n\t\t\t\t\t\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\t\t\t\t\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t\t\t\t\t\t// This will be the final color.\n\t\t\t\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\t\t\t\t// Get the start and end of the sampling from the camera to the position.\n\t\t\t\t\t\t\tfloat start;\n\t\t\t\t\t\t\tfloat end;\n\t\t\t\t\t\t\tgetStartEndSamples(start, end, cameraPosition, cameraToPositionUnit, cameraToPositionDist, atmosphereEquatorialRadius, atmosphereScaleHeight);\n\t\t\t\t\t\t\tfloat step = 1.0 / float(atmosphereNumIterations - 1);\n\t\t\t\t\t\t\tfloat stepDist = step * (end - start);\n\n\t\t\t\t\t\t\t// Do the sampling.\n\t\t\t\t\t\t\tfloat totalDensity = 0.0;\n\t\t\t\t\t\t\tfloat segmentStart = start;\n\t\t\t\t\t\t\tfor (int j = 0; j < atmosphereNumIterations; j++) {\n\t\t\t\t\t\t\t\t// Get the distance that this segment covers.\n\t\t\t\t\t\t\t\tfloat segDist = stepDist;\n\t\t\t\t\t\t\t\tif (j == 0 || j == atmosphereNumIterations - 1) {\n\t\t\t\t\t\t\t\t\tsegDist *= 0.5;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the segment start that we're looking at.\n\t\t\t\t\t\t\t\tvec3 p = cameraPosition + segmentStart * cameraToPositionUnit;\n\n\t\t\t\t\t\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\t\t\t\t\t\tfloat densityAtP = getDensity(p, atmosphereEquatorialRadius, atmosphereDensity, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t\t// Add it to the total density.\n\t\t\t\t\t\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t\t\t\t\t\t// Next step.\n\t\t\t\t\t\t\t\tsegmentStart += stepDist;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Apply emissivity to the light color.\n\t\t\t\t\t\t\tvec3 sunLightColor = mix(incomingLight, vec3(1.0, 1.0, 1.0), atmosphereEmissivity);\n\n\t\t\t\t\t\t\t// Apply the total density to the transparency of the atmosphere.\n\t\t\t\t\t\t\tcolor.a = clamp(pow(3.0 * totalDensity, 0.3), 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Multiply it all together with the source light color.\n\t\t\t\t\t\t\tcolor.rgb = sunLightColor * atmosphereColor * clamp(pow(15.0 * totalDensity / (atmosphereDensity * atmosphereEquatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t\t\t\t\t\t// Make it more opaque when lower down.\n\t\t\t\t\t\t\tcolor.a *= 1.0 + 0.5 * getDensity(cameraPosition, atmosphereEquatorialRadius, 1.0, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t// Clamp it to make it clean for the day/night transition.\n\t\t\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Get the light position in the sphere entity-space.\n\t\t\t\t\t\t\tlightPosition = quatRotInv(atmosphereOrientation, lightPosition);\n\t\t\t\t\t\t\tlightPosition.z *= spheroidRatio;\n\t\t\t\t\t\t\thighp vec3 lightToPosition = position - lightPosition;\n\t\t\t\t\t\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t\t\t\t\t\t// Get the day level, from 0 to 1, and apply it to the alpha.\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\tvec3 dayRefUp = normalize(cameraPosition + end * cameraToPositionUnit);\n\t\t\t\t\t\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\t\t\t\t\t\tfloat lightIntensity = mix(dayLevel, 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.a *= mix(atmosphereEmissivity, 1.0, easeInOut(0.25 * 700.0 * atmosphereDensity + 1.0 * lightIntensity, 2.0));\n\n\t\t\t\t\t\t\t// Add broader sun glare.\n\t\t\t\t\t\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\t\t\t\t\t\tcolor.rgb *= sunLightColor * (1.0 + atmosphereSunBrightness * color.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t\t\t\t\t\t// Apply the sunset.\n\t\t\t\t\t\t\tfloat sunsetAmount = mix(atmosphereSunsetIntensity * easeInOut(0.5 * (1.0 - abs(dayLevel)), 4.0), 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.rgb = color.rgb * mix(vec3(1.0), atmosphereSunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\t\t\t\t\t\t// Adjust for values that are greater than one.\n\t\t\t\t\t\t\tcolor.rgb = adjustOverbrightness(color.rgb);\n\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\t// Get the camera direction to the position.\n\t\t\t\t\t\tvec3 positionDir = normalize(cameraSpacePosition);\n\n\t\t\t\t\t\t// Calculate the normal.\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tvec3 normal = getNormalFromMap();\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// The diffuse light.\n\t\t\t\t\t\tvec3 diffuseLight = ambientLightColor;\n\t\t\t\t\t\tvec3 specularLight = vec3(0, 0, 0);\n\t\t\t\t\t\tvec4 atmosphereColor = vec4(0, 0, 0, 0);\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Get lighting angles.\n\t\t\t\t\t\t\tvec3 lightDir = normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\t\t\t\t\t// If an atmosphere is being used, brighten up the surface a bit, depending on the density of the atmosphere.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tlightCosAngle += 0.25 * 700.0 * atmosphereDensity;\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Get the incoming light after shadows.\n\t\t\t\t\t\t\tvec3 incomingLight = lightColors[i];\n\t\t\t\t\t\t\t#if !defined(colorMapEmmissive) | !defined(nightMapEmmissive) | !defined(decalMapEmmissive)\n\t\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowEntities(incomingLight, lightDir, lightPositions[i], lightRadii[i], normal);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowRings(incomingLight, lightDir);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Diffuse shading.\n\t\t\t\t\t\t\tdiffuseLight += incomingLight * saturate(lightCosAngle);\n\n\t\t\t\t\t\t\t// Specular shading.\n\t\t\t\t\t\t\tvec3 reflectedLightDir = reflect(lightDir, normal);\n\t\t\t\t\t\t\tvec3 halfVector = normalize(-lightDir - positionDir);\n\t\t\t\t\t\t\tfloat phongHighlight = 0.25 * pow(saturate(-dot(reflectedLightDir, positionDir)), specularHardness / 2.0);\n\t\t\t\t\t\t\tfloat blinnHighlight = 4.0 * pow(saturate(dot(halfVector, normal)), specularHardness);\n\t\t\t\t\t\t\tfloat specularAngle = phongHighlight + pow(1.0 - saturate(-dot(positionDir, normal)), specularHardness / 12.0) * blinnHighlight;\n\t\t\t\t\t\t\tspecularLight += saturate(lightCosAngle * 20.0) * specularAngle * incomingLight;\t\n\n\t\t\t\t\t\t\t// Atmosphere shading.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tif (length(lightPositions[i]) > 0.0) { // don't use a camera light\n\t\t\t\t\t\t\t\t\tatmosphereColor += getAtmosphereColor(incomingLight, lightPositions[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiffuseLight = saturate(diffuseLight);\n\n\t\t\t\t\t\t// If there's ambience, remove the direct light components.\n\t\t\t\t\t\tspecularLight *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Main Color map.\n\t\t\t\t\t\tvec4 colorPixel = vec4(1, 0, 1, 1);\n\t\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\t\tcolorPixel = getColorFromEnvironmentMap(colorTexture, positionDir, normal);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tcolorPixel = texture2D(colorTexture, vColorUV) * vec4(color, 1);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef baseColor\n\t\t\t\t\t\t\tcolorPixel = vec4(color, 1);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply diffuse shading.\n\t\t\t\t\t\t#ifndef colorMapEmmissive\n\t\t\t\t\t\t\tcolorPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tgl_FragColor = colorPixel;\n\n\t\t\t\t\t\t// Specular Map\n\t\t\t\t\t\tvec3 specularPixel = specularColor * specularIntensity;\n\t\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\t\tvec2 specularUV = vSpecularUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 specularUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tspecularPixel = specularColor * texture2D(specularTexture, specularUV).r;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply specular Shading\n\t\t\t\t\t\tgl_FragColor.rgb += specularLight * specularPixel;\n\n\t\t\t\t\t\t// Night-Side Map\n\t\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\t\tvec2 nightUV = vNightUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 nightUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 nightPixel = texture2D(nightTexture, nightUV);\n\t\t\t\t\t\t\t#ifndef nightMapEmmissive\n\t\t\t\t\t\t\t\tnightPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor = mix(gl_FragColor, nightPixel, 1.0 - min(1.0, length(ambientLightColor + diffuseLight)));//(1.0 - ambientLightIntensity) * saturate(0.5 - length(diffuseLight)));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Decal Map\n\t\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\t\tvec2 decalUV = vDecalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 decalUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 decalPixel = texture2D(decalTexture, decalUV);\n\t\t\t\t\t\t\t#ifndef decalMapEmmissive\n\t\t\t\t\t\t\t\tdecalPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, decalPixel.rgb, decalPixel.a);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Atmosphere\n\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, atmosphereColor.rgb, clamp(atmosphereColor.a, 0.0, 1.0));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}"}));const t=MaterialUtilsPhong._material.clone();for(let e=0;e<t.uniforms.shadowEntityPositions.value.length;e++)t.uniforms.shadowEntityPositions.value[e]=MaterialUtilsPhong._material.uniforms.shadowEntityPositions.value[e].clone();return s.ThreeJsHelper.setupLogDepthBuffering(t),t.extensions.derivatives=!0,t.needsUpdate=!0,t}}MaterialUtilsPhong._material=null,e.default=MaterialUtilsPhong},function(t,e,i){"use strict";i.r(e);var s=i(6);class MaterialUtilsStandard{static get(){null===MaterialUtilsStandard._material&&(MaterialUtilsStandard._material=new s.THREE.ShaderMaterial({uniforms:{ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),environmentIntensity:new s.THREE.Uniform(1),gammaCorrectionFactor:new s.THREE.Uniform(1),entityPos:new s.THREE.Uniform(new s.THREE.Vector3),color:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),metalness:new s.THREE.Uniform(0),roughness:new s.THREE.Uniform(0),emissiveColor:new s.THREE.Uniform(new s.THREE.Color(0,0,0)),alphaMultiplier:new s.THREE.Uniform(1),colorTexture:new s.THREE.Uniform(null),roughnessTexture:new s.THREE.Uniform(null),metalnessTexture:new s.THREE.Uniform(null),normalTexture:new s.THREE.Uniform(null),emissiveTexture:new s.THREE.Uniform(null),numShadowEntities:new s.THREE.Uniform(0),shadowEntityPositions:new s.THREE.Uniform([new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3]),shadowEntityRadii:new s.THREE.Uniform([0,0,0,0,0]),shadowEntityRayleighAmount:new s.THREE.Uniform([0,0,0,0,0]),envTexture:new s.THREE.Uniform(null),maxMipLevel:new s.THREE.Uniform(0),dynEnvTexture:new s.THREE.Uniform(null),dynEnvFaceSize:new s.THREE.Uniform(0),normalScale:new s.THREE.Uniform(new s.THREE.Vector2)},vertexShader:"\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tlocalTangent = tangent;\n\t\t\t\t\t\t\tlocalNormal = normal;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tmodelNormal = normalize((modelMatrix * vec4(normal, 0.)).xyz);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\t\tlocalUV = uv;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4(position, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\t#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\t\t\t\t\t#define EPSILON 1e-6\n\t\t\t\t\t#define PI 3.14159265359\n\t\t\t\t\t#define RECIPROCAL_PI 0.31830988618\n\t\t\t\t\t#define RECIPROCAL_PI2 0.15915494\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp( a, 0.0, 1.0 )\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat pow2( float x ) { return x*x; }\n\n\t\t\t\t\tuniform mat4 modelMatrix;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\t\t\t\t\tuniform float environmentIntensity;\n\t\t\t\t\tuniform float gammaCorrectionFactor;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform sampler2D roughnessTexture;\n\t\t\t\t\tuniform sampler2D metalnessTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\tuniform sampler2D emissiveTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\tuniform sampler2D dynEnvTexture;\n\t\t\t\t\t\tuniform float dynEnvFaceSize;\n\t\t\t\t\t#elif defined( envMap )\n\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\tuniform samplerCube envTexture;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tuniform sampler2D envTexture;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Scalars\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform float roughness;\n\t\t\t\t\tuniform float metalness;\n\t\t\t\t\tuniform vec3 emissiveColor;\n\t\t\t\t\tuniform float alphaMultiplier;\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tstruct PhysicalMaterial {\n\t\t\t\t\t\tvec3 diffuseColor;\n\t\t\t\t\t\tvec3 specularColor;\n\t\t\t\t\t\tfloat specularRoughness;\n\t\t\t\t\t};\n\t\t\t\t\tstruct IncidentLight {\n\t\t\t\t\t\tvec3 color;\n\t\t\t\t\t\tvec3 direction;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct ReflectedLight {\n\t\t\t\t\t\tvec3 directDiffuse;\n\t\t\t\t\t\tvec3 directSpecular;\n\t\t\t\t\t\tvec3 indirectDiffuse;\n\t\t\t\t\t\tvec3 indirectSpecular;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct GeometricContext {\n\t\t\t\t\t\tvec3 normal;\n\t\t\t\t\t\tvec3 viewDir;\n\t\t\t\t\t};\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(localNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(localTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (localTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, localUV).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tif (value > 0.0) {\n\t\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\t\tcolor = value * color / (color.r + color.g + color.b);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - originOffset * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(origin, axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = (ld * sr - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (ld * sr + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\te0 -= (e1 - e0) * shadowEntityRayleighAmount[i] / 6.0;\n\t\t\t\t\t\t\t\t\t\tlightLevel = pow(saturate((e - e0) / (e1 - e0)), 0.5); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t\t\t\t\t\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\t\t\t\t\t}\n\n\t\t\t\t\t// These use optimizations found in https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf.\n\n\t\t\t\t\t// The Smith-method geometry function. Calculates the ratio of incident light that is blocked by the microfacets to never reach the viewer.\n\t\t\t\t\t// alpha is the roughness^2\n\t\t\t\t\t// dotNL is the normal · the light vector.\n\t\t\t\t\t// dotNV is the normal · the view vector.\n\t\t\t\t\tfloat G_GGX_SmithCorrelated( float alpha, float dotNL, float dotNV ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\t// Get the light direction part of the geometry function.\n\t\t\t\t\t\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\t\t\t\t\t\t// Get the view direction part of the geometry function.\n\t\t\t\t\t\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\t\t\t\t\t\t// It would normally be be gv * gl, but this is using an optimization by Heitz (2014),\n\t\t\t\t\t\t// including the BRDF denominator, simplifying the results.\n\t\t\t\t\t\treturn 0.5 / max( gv + gl, EPSILON );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Trowbridge-Reitz normal distribution function. Calculates the relative surface area microfacets exactly aligned to the halfway vector, how \"smooth\" the surface is.\n\t\t\t\t\t// alpha is the roughness^2.\n\t\t\t\t\t// dotNH is the normal · the halfway vector.\n\t\t\t\t\tfloat D_GGX( float alpha, float dotNH ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\t\t\t\t\t\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Schlick approximation for the Fresnel equation.\n\t\t\t\t\t// Since metallic and non-metallic surfaces have different equations, this function combines the two by approximation.\n\t\t\t\t\t// specularColor is the specular color at normal incidence.\n\t\t\t\t\t// dotLH is the light direction · the halfway vector.\n\t\t\t\t\tvec3 F_Schlick( vec3 specularColor, float dotLH ) {\n\t\t\t\t\t\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\t\t\t\t\t\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\t\t\t\t\t}\n\n\t\t\t\t\t// The specular part of the main BRDF function that describes the weighting function for the sum of every incoming light.\n\t\t\t\t\t// It uses the Cook-Torrance model.\n\t\t\t\t\tvec3 BRDF_Specular_GGX( IncidentLight incidentLight, GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat alpha = pow2( roughness );\n\t\t\t\t\t\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\t\t\t\t\t\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotLH );\n\t\t\t\t\t\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\t\t\t\t\tfloat D = D_GGX( alpha, dotNH );\n\t\t\t\t\t\treturn F * ( G * D );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The diffuse part of the main BRDF function.\n\t\t\t\t\tvec3 BRDF_Diffuse_Lambert( vec3 diffuseColor ) {\n\t\t\t\t\t\treturn RECIPROCAL_PI * diffuseColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat BlinnExponentToGGXRoughness( float blinnExponent ) {\n\t\t\t\t\t\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat GGXRoughnessToBlinnExponent( float ggxRoughness ) {\n\t\t\t\t\t\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n\t\t\t\t\t}\n\n\t\t\t\t\tvec2 integrateSpecularBRDF( float dotNV, float roughness ) {\n\t\t\t\t\t\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\t\t\t\t\t\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\t\t\t\t\t\tvec4 r = roughness * c0 + c1;\n\t\t\t\t\t\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\t\t\t\t\t\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 BRDF_Specular_GGX_Environment( GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\treturn specularColor * brdf.x + brdf.y;\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid BRDF_Specular_Multiscattering_Environment( GeometricContext geometry, vec3 specularColor, float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotNV );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\tvec3 FssEss = F * brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ess = brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ems = 1.0 - Ess;\n\t\t\t\t\t\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\t\t\t\t\t\tsingleScatter += FssEss;\n\t\t\t\t\t\tmultiScatter += Fms * Ems;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat opacity = 1.0;\n\n\t\t\t\t\tuniform float reflectivity;\n\t\t\t\t\tuniform int maxMipLevel;\n\n\t\t\t\t\t// Returns the radiance: the incoming light * the cos(light angle to the normal)\n\t\t\t\t\tvec3 getIncomingLight( IncidentLight directLight, GeometricContext geometry) {\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\t\t\t\t\treturn (dotNL * directLight.color);\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat getSpecularMIPLevel( float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\t\t\t\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\t\t\t\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t\t\t\t\t}\n\n\t\t\t\t\t#ifdef envIsCubeUV\n\t\t\t\t\t\t// These defines must match with PMREMGenerator\n\t\t\t\t\t\t#define cubeUV_maxMipLevel 8.0\n\t\t\t\t\t\t#define cubeUV_minMipLevel 4.0\n\t\t\t\t\t\t#define cubeUV_maxTileSize 256.0\n\t\t\t\t\t\t#define cubeUV_minTileSize 16.0\n\t\t\t\t\t\t// These shader functions convert between the UV coordinates of a single face of\n\t\t\t\t\t\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t\t\t\t\t\t// sampling a textureCube (not generally normalized ).\n\t\t\t\t\t\tfloat getFace( vec3 direction ) {\n\t\t\t\t\t\t\tvec3 absDirection = abs( direction );\n\t\t\t\t\t\t\tfloat face = - 1.0;\n\t\t\t\t\t\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\t\t\t\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn face;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// RH coordinate system; PMREM face-indexing convention\n\t\t\t\t\t\tvec2 getUV( vec3 direction, float face ) {\n\t\t\t\t\t\t\tvec2 uv;\n\t\t\t\t\t\t\tif ( face == 0.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t\t\t\t\t\t\t} else if ( face == 1.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t\t\t\t\t\t\t} else if ( face == 2.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t\t\t\t\t\t\t} else if ( face == 3.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t\t\t\t\t\t\t} else if ( face == 4.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0.5 * ( uv + 1.0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec3 bilinearCubeUV( sampler2D environmentMap, vec3 direction, float mipInt ) {\n\t\t\t\t\t\t\tfloat face = getFace( direction );\n\t\t\t\t\t\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\t\t\t\t\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\t\t\t\t\t\tfloat faceSize = exp2( mipInt );\n\t\t\t\t\t\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\t\t\t\t\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\t\t\t\t\t\tvec2 f = fract( uv );\n\t\t\t\t\t\t\tuv += 0.5 - f;\n\t\t\t\t\t\t\tif ( face > 2.0 ) {\n\t\t\t\t\t\t\t\tuv.y += faceSize;\n\t\t\t\t\t\t\t\tface -= 3.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.x += face * faceSize;\n\t\t\t\t\t\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\t\t\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\t\t\t\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\t\t\t\t\t\tuv *= texelSize;\n\t\t\t\t\t\t\tvec3 tl = texture2D( environmentMap, uv ).rgb;\n\t\t\t\t\t\t\tuv.x += texelSize;\n\t\t\t\t\t\t\tvec3 tr = texture2D( environmentMap, uv ).rgb;\n\t\t\t\t\t\t\tuv.y += texelSize;\n\t\t\t\t\t\t\tvec3 br = texture2D( environmentMap, uv ).rgb;\n\t\t\t\t\t\t\tuv.x -= texelSize;\n\t\t\t\t\t\t\tvec3 bl = texture2D( environmentMap, uv ).rgb;\n\t\t\t\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\t\t\t\treturn mix( tm, bm, f.y );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#define r0 1.0\n\t\t\t\t\t\t#define v0 0.339\n\t\t\t\t\t\t#define m0 - 2.0\n\t\t\t\t\t\t#define r1 0.8\n\t\t\t\t\t\t#define v1 0.276\n\t\t\t\t\t\t#define m1 - 1.0\n\t\t\t\t\t\t#define r4 0.4\n\t\t\t\t\t\t#define v4 0.046\n\t\t\t\t\t\t#define m4 2.0\n\t\t\t\t\t\t#define r5 0.305\n\t\t\t\t\t\t#define v5 0.016\n\t\t\t\t\t\t#define m5 3.0\n\t\t\t\t\t\t#define r6 0.21\n\t\t\t\t\t\t#define v6 0.0038\n\t\t\t\t\t\t#define m6 4.0\n\t\t\t\t\t\tfloat roughnessToMip( float roughness ) {\n\t\t\t\t\t\t\tfloat mip = 0.0;\n\t\t\t\t\t\t\tif ( roughness >= r1 ) {\n\t\t\t\t\t\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t\t\t\t\t\t} else if ( roughness >= r4 ) {\n\t\t\t\t\t\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t\t\t\t\t\t} else if ( roughness >= r5 ) {\n\t\t\t\t\t\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t\t\t\t\t\t} else if ( roughness >= r6 ) {\n\t\t\t\t\t\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn mip;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec4 textureCubeUV( sampler2D environmentMap, vec3 sampleDir, float roughness ) {\n\t\t\t\t\t\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\t\t\t\t\t\tfloat mipF = fract( mip );\n\t\t\t\t\t\t\tfloat mipInt = floor( mip );\n\t\t\t\t\t\t\tvec3 color0 = bilinearCubeUV( environmentMap, sampleDir, mipInt );\n\t\t\t\t\t\t\tif ( mipF == 0.0 ) {\n\t\t\t\t\t\t\t\treturn vec4( color0, 1.0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvec3 color1 = bilinearCubeUV( environmentMap, sampleDir, mipInt + 1.0 );\n\t\t\t\t\t\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t// Converts an XY in cylindrical space to a face (z) with coordinates within that face (xy).\n\t\t\t\t\t\tvec3 xyzToUvFace(vec3 xyz, float pixelSize) {\n\t\t\t\t\t\t\t// Figure out which basis we're using.\n\t\t\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\t\t\tfloat face;\n\t\t\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Convert into the uv basis from the xyz basis.\n\t\t\t\t\t\t\tfloat z = basis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z;\n\t\t\t\t\t\t\tif (z < 0.0) {\n\t\t\t\t\t\t\t\tz = 1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvec2 uv = vec2(\n\t\t\t\t\t\t\t\t(basis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z) / z,\n\t\t\t\t\t\t\t\t(basis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z) / z);\n\n\t\t\t\t\t\t\t// Convert from -1 to +1, to 0 to 1.\n\t\t\t\t\t\t\tuv = 0.5 * (uv + vec2(1.0));\n\n\t\t\t\t\t\t\t// Convert to pixel-space.\n\t\t\t\t\t\t\tuv *= pixelSize;\n\n\t\t\t\t\t\t\t// Shrink to ignore 1 pixel borders.\n\t\t\t\t\t\t\tuv.x = (pixelSize - 2.0) / pixelSize * uv.x + 1.0;\n\t\t\t\t\t\t\tuv.y = (pixelSize - 2.0) / pixelSize * uv.y + 1.0;\n\n\t\t\t\t\t\t\t// Convert back to unit-space.\n\t\t\t\t\t\t\tuv /= pixelSize;\n\n\t\t\t\t\t\t\treturn vec3(uv, face);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the dynamic environmental lighting given the outward direction.\n\t\t\t\t\t\tvec3 getEnvLight(vec3 direction, float roughness) {\n\t\t\t\t\t\t\t// Get the mip levels.\n\t\t\t\t\t\t\tfloat mipLevel = pow(roughness, 0.25) * (log2(dynEnvFaceSize) - 2.0);\n\t\t\t\t\t\t\tfloat mipLevel0 = floor(mipLevel);\n\t\t\t\t\t\t\tfloat mipLevel1 = floor(mipLevel) + 1.0;\n\t\t\t\t\t\t\tfloat mipLevelU = mipLevel - mipLevel0;\n\t\t\t\t\t\t\tfloat mipSizeX0 = pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipOffsetY0 = 1.0 - pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipSizeX1 = pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\tfloat mipOffsetY1 = 1.0 - pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\t// Get UV within a mip of cube faces.\n\t\t\t\t\t\t\tvec3 uvFace0 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX0);\n\t\t\t\t\t\t\tvec3 uvFace1 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX1);\n\t\t\t\t\t\t\tvec2 faceOffset = vec2(mod(uvFace0.z, 3.0) / 3.0, floor(uvFace0.z / 3.0) / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip0 = vec2(faceOffset.x + uvFace0.x / 3.0, faceOffset.y + uvFace0.y / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip1 = vec2(faceOffset.x + uvFace1.x / 3.0, faceOffset.y + uvFace1.y / 2.0);\n\t\t\t\t\t\t\t// Get the UVs within the textures.\n\t\t\t\t\t\t\tvec2 uv0 = vec2(uvInMip0.x * mipSizeX0 * 0.75, 0.5 * uvInMip0.y * mipSizeX0 + mipOffsetY0);\n\t\t\t\t\t\t\tvec2 uv1 = vec2(uvInMip1.x * mipSizeX1 * 0.75, 0.5 * uvInMip1.y * mipSizeX1 + mipOffsetY1);\n\t\t\t\t\t\t\tvec3 color0 = texture2D(dynEnvTexture, uv0).rgb;\n\t\t\t\t\t\t\tvec3 color1 = texture2D(dynEnvTexture, uv1).rgb;\n\t\t\t\t\t\t\treturn mix(color0, color1, mipLevelU) * environmentIntensity * ((PI - 1.0) * roughness + 1.0);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 getLightProbeIndirectRadiance( GeometricContext geometry, float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t\t\t\t\t#if defined( envMap )\n\t\t\t\t\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\t\t\t\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t\t\t\t\t\tvec3 queryReflectVec = vec3( reflectVec.x, reflectVec.yz );\n\t\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envTexture, queryReflectVec, specularMIPLevel );\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = textureCube( envTexture, queryReflectVec, specularMIPLevel );\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#elif defined( envIsCubeUV )\n\t\t\t\t\t\t\t\tvec4 envMapColor = textureCubeUV( envTexture, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 sampleUV;\n\t\t\t\t\t\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\t\t\t\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = texture2DLodEXT( envTexture, sampleUV, specularMIPLevel );\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = texture2D( envTexture, sampleUV, specularMIPLevel );\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\treturn envMapColor.rgb * environmentIntensity;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\treturn vec3(0, 0, 0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}\n\n\t\t\t\t\t// Given the directLight, accumulates onto the reflectedLight the irradiance as the BRDF function.\n\t\t\t\t\tvoid RE_Direct_Physical( IncidentLight directLight, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getIncomingLight( directLight, geometry );\n\t\t\t\t\t\tirradiance *= PI;\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectDiffuse_Physical( vec3 irradiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectSpecular_Physical( vec3 radiance, vec3 irradiance, vec3 clearCoatRadiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t\t\t\t\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t}\n\n\t\t\t\t\t#define RE_Direct RE_Direct_Physical\n\t\t\t\t\t#define Material_BlinnShininessExponent( material ) GGXRoughnessToBlinnExponent( material.specularRoughness )\n\t\t\t\t\t#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n\t\t\t\t\t#define RE_IndirectSpecular RE_IndirectSpecular_Physical\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tvec4 diffuseColor = vec4( color, 1.0 );\n\t\t\t\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t\t\t\t\t\t#ifdef colorMap\n\t\t\t\t\t\t\tvec4 texelColor = texture2D(colorTexture, localUV);\n\t\t\t\t\t\t\tdiffuseColor *= texelColor;\n\t\t\t\t\t\t\topacity = texelColor.a;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// PBR variables\n\t\t\t\t\t\tfloat roughnessFactor;\n\t\t\t\t\t\tfloat metalnessFactor;\n\n\t\t\t\t\t\troughnessFactor = roughness;\n\t\t\t\t\t\t#ifdef roughnessMap\n\t\t\t\t\t\t\troughnessFactor *= texture2D( roughnessTexture, localUV ).g;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tmetalnessFactor = metalness;\n\t\t\t\t\t\t#ifdef metalnessMap\n\t\t\t\t\t\t\tmetalnessFactor *= texture2D( metalnessTexture, localUV ).b;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tPhysicalMaterial material;\n\t\t\t\t\t\tmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\t\t\t\t\t\tmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\t\t\t\t\t\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n\t\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\t\tgeometry.viewDir = -normalize(cameraSpacePosition);\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tgeometry.normal = normalize((modelMatrix * vec4(getNormalFromMap(), 0.)).xyz);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tgeometry.normal = modelNormal;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Env Light\n\t\t\t\t\t\tvec3 irradiance = ambientLightColor;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tirradiance += getEnvLight(geometry.normal, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec3 radiance = ambientLightColor / 2.0;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add emissivity.\n\t\t\t\t\t\tvec3 totalEmissiveRadiance = emissiveColor;\n\t\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\t\ttotalEmissiveRadiance *= texture2D(emissiveTexture, localUV).rgb;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add direct radiance.\n\t\t\t\t\t\tvec3 totalDirectIrradiance = ambientLightColor / 2.0;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\ttotalDirectIrradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\t\t\tdirectLight.color = lightColors[i];\n\t\t\t\t\t\t\tdirectLight.direction = -normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\tdirectLight.color = getLightColorFromShadowEntities(directLight.color, directLight.direction, lightPositions[i], lightRadii[i], geometry.normal);\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\tRE_Direct(directLight, geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\tradiance += getLightProbeIndirectRadiance(geometry, Material_BlinnShininessExponent(material), maxMipLevel);\n\t\t\t\t\t\t\tRE_IndirectDiffuse(irradiance, geometry, material, reflectedLight);\n\t\t\t\t\t\t\tRE_IndirectSpecular(radiance, irradiance, vec3(0.0), geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\t// Modify env light by total incoming light.\n\t\t\t\t\t\t\ttotalDirectIrradiance += getIncomingLight(directLight, geometry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multiply in the direct irradiance.\n\t\t\t\t\t\treflectedLight.indirectSpecular *= totalDirectIrradiance;\n\n\t\t\t\t\t\t// If there's ambience, remove the direct light components.\n\t\t\t\t\t\treflectedLight.directDiffuse *= vec3(1, 1, 1) - ambientLightColor;\n\t\t\t\t\t\treflectedLight.directSpecular *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Add the reflected light to the outgoing light.\n\t\t\t\t\t\tvec3 outgoingLight = totalEmissiveRadiance + reflectedLight.directDiffuse + reflectedLight.directSpecular + reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;\n\n\t\t\t\t\t\t// Set the frag color based on the total outgoing light.\n\t\t\t\t\t\tgl_FragColor = vec4( outgoingLight, opacity );\n\n\t\t\t\t\t\t// Gamma correction\n\t\t\t\t\t\tgl_FragColor = vec4( pow( abs(gl_FragColor.rgb), vec3( 1.0 / gammaCorrectionFactor ) ), gl_FragColor.a );\n\n\t\t\t\t\t\t// Convert to sRGB.\n\t\t\t\t\t\tgl_FragColor = LinearTosRGB(gl_FragColor);\n\n\t\t\t\t\t\t// Multiply the alphaMultiplier.\n\t\t\t\t\t\tgl_FragColor.a *= alphaMultiplier;\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}"}));const t=MaterialUtilsStandard._material.clone();for(let e=0;e<t.uniforms.shadowEntityPositions.value.length;e++)t.uniforms.shadowEntityPositions.value[e]=MaterialUtilsStandard._material.uniforms.shadowEntityPositions.value[e].clone();return s.ThreeJsHelper.setupLogDepthBuffering(t),s.Capabilities.hasGLExtension("EXT_shader_texture_lod")&&(t.extensions.shaderTextureLOD=!0),t.extensions.derivatives=!0,t.needsUpdate=!0,t}}MaterialUtilsStandard._material=null,e.default=MaterialUtilsStandard},function(t,e,i){"use strict";i.r(e);var s=i(6);class MaterialUtils{static setLightSourceUniforms(t,e,i){const n=e.getScene(),o=s.Color.pool.get();for(let e=0,s=n.getNumLightSources();e<Math.min(s,5);e++){const s=n.getLightSource(e);if(null!==s){const n=s.getEntity().getCameraSpacePosition(i),a=1;o.mult(s.getColor(),a);const r=null===s.getEntity().getComponentByType("camera")?s.getEntity().getOcclusionRadius():Number.NaN;for(let i=0,s=t.length;i<s;i++)void 0!==t[i].uniforms.lightPositions&&(t[i].uniforms.lightPositions.value[e].set(n.x,n.y,n.z),t[i].uniforms.lightColors.value[e].set(o.r,o.g,o.b),t[i].uniforms.lightRadii.value[e]=r)}}for(let e=0,i=t.length;e<i;e++)void 0!==t[e].uniforms.numLights&&(t[e].uniforms.numLights.value=n.getNumLightSources());s.Color.pool.release(o)}static setUniforms(t,e,i,n,o,a){const r=i.getScene().getEngine().getTime(),l=i.getScene().getAmbientLightColor();MaterialUtils.setLightSourceUniforms(t,i,e);for(let c=0,h=t.length;c<h;c++){const h=t[c],u=h.uniforms;if(s.Capabilities.hasFragDepth()||(u.nearDistance.value=e.getAutoNearDistance(),u.midDistance.value=e.getAutoMidDistance()),h instanceof s.THREE.RawShaderMaterial)void 0!==u.time&&(u.time.value=s.MathUtils.wrap(r,0,3600));else{const o=i.getCameraSpacePosition(e);if(u.entityPos.value.set(o.x,o.y,o.z),u.ambientLightColor.value.setRGB(l.r,l.g,l.b),void 0!==n&&n.length>0){let t=0;for(let i=0;i<n.length;i++){const s=n[i];if("string"!=typeof s){const i=s.getCameraSpacePosition(e);u.shadowEntityPositions.value[t].set(i.x,i.y,i.z),u.shadowEntityRadii.value[t]=s.getOcclusionRadius();const n=s.get("atmosphere");u.shadowEntityRayleighAmount.value[t]=null!==n?5*n.getSunsetIntensity():0,t+=1}else u.shadowEntityRadii.value[t]=0}u.numShadowEntities.value=t}if(t[c].defines.shadowRings){const t=i.get("rings");if(null!==t){const e=s.Vector3.pool.get();i.getOrientation().getAxis(e,2),u.shadowRingsInnerRadius.value=t.getInnerRadius(),u.shadowRingsOuterRadius.value=t.getOuterRadius(),u.shadowRingsTexture.value=t.getTopTexture(),u.shadowRingsNormal.value.set(e.x,e.y,e.z),s.Vector3.pool.release(e)}}}if(null===o||"loaded"!==o.getLoadState()||o.isExcludedFromCamera(e)||void 0===u.atmospherePosition)!0===h.defines.atmosphere&&(delete h.defines.atmosphere,h.needsUpdate=!0);else{const t=o.getSpheroid(),i=o.getEntity().getCameraSpacePosition(e),s=o.getEntity().getOrientation(),n=o.getColor(),r=o.getSunsetColor();u.atmospherePosition.value.set(i.x,i.y,i.z),u.atmosphereOrientation.value.set(s.x,s.y,s.z,s.w),null!==t?(u.atmosphereEquatorialRadius.value=t.getEquatorialRadius(),u.atmospherePolarRadius.value=t.getPolarRadius()):(u.atmosphereEquatorialRadius.value=0,u.atmospherePolarRadius.value=0),u.atmosphereDensity.value=o.getDensity(),u.atmosphereScaleHeight.value=o.getScaleHeight(),u.atmosphereEmissivity.value=o.getEmissivity(),u.atmosphereColor.value.set(n.r,n.g,n.b),u.atmosphereSunsetColor.value.set(r.r,r.g,r.b),u.atmosphereSunsetIntensity.value=o.getSunsetIntensity(),u.atmosphereGroundIsSpheroid.value=a?1:0,void 0===h.defines.atmosphere&&(h.defines.atmosphere=!0,h.needsUpdate=!0)}}}}MaterialUtils.get=s.MaterialUtilsPhong.get,MaterialUtils.getPBR=s.MaterialUtilsStandard.get,e.default=MaterialUtils},function(t,e,i){"use strict";i.r(e);var s=i(6);e.default=class ShaderFix{static fix(t,e){const i=s.Capabilities.isWebGL2(),n=s.Capabilities.hasFragDepth();return i?"vertex"===e?"#version 300 es\n\t\t\t\t\t#define attribute in\n\t\t\t\t\t#define varying out\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\t"+t:"#version 300 es\n\t\t\t\t\t#define varying in\n\t\t\t\t\tout highp vec4 pc_fragColor;\n\t\t\t\t\t#define gl_FragColor pc_fragColor\n\t\t\t\t\t#define gl_FragDepthEXT gl_FragDepth\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\t#define textureCube texture\n\t\t\t\t\t#define texture2DProj textureProj\n\t\t\t\t\t#define texture2DLodEXT textureLod\n\t\t\t\t\t#define texture2DProjLodEXT textureProjLod\n\t\t\t\t\t#define textureCubeLodEXT textureLod\n\t\t\t\t\t#define texture2DGradEXT textureGrad\n\t\t\t\t\t#define texture2DProjGradEXT textureProjGrad\n\t\t\t\t\t#define textureCubeGradEXT textureGrad\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t"+t:(n?"\n\t\t\t\t#extension GL_EXT_frag_depth : enable\n\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t":"")+"\n\t\t\t\tprecision highp float;\n\t\t\t\tprecision highp int;\n\t\t\t\t"+t}}},function(t,e,i){"use strict";i.r(e);var s=i(6);e.default=class SpriteParticles{constructor(t){this._component=t,this._relativeToEntityOrientation=!0,this._offsetArray=new Float32Array(0),this._colorArray=new Float32Array(0),this._scaleArray=new Float32Array(0),this._threeJsGeometry=null,this._threeJsMaterial=null,this._threeJsObject=null,this._threeJsGeometry=new s.THREE.InstancedBufferGeometry,this._threeJsGeometry.setAttribute("position",new s.THREE.BufferAttribute(new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1]),3)),this._threeJsGeometry.setIndex(new s.THREE.BufferAttribute(new Uint16Array([0,1,2,2,3,0]),1)),this._threeJsGeometry.setAttribute("offset",new s.THREE.InstancedBufferAttribute(this._offsetArray,3)),this._threeJsGeometry.setAttribute("color",new s.THREE.InstancedBufferAttribute(this._colorArray,4)),this._threeJsGeometry.setAttribute("scale",new s.THREE.InstancedBufferAttribute(this._scaleArray,1)),this._threeJsMaterial=this._component.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("sprite_particles"),this._threeJsObject=s.ThreeJsHelper.createMeshObjectGivenGeometry(t,this._threeJsMaterial,this._threeJsGeometry)}getThreeJsObject(){return this._threeJsObject}getThreeJsMaterial(){return this._threeJsMaterial}setParticleOffsets(t){this._setAttribute("offset",t,3)}setParticleColors(t){this._setAttribute("color",t,4)}setParticleScales(t){this._setAttribute("scale",t,1)}getRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t}prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this._threeJsObject,this._component.getEntity(),t),this._relativeToEntityOrientation&&s.ThreeJsHelper.setOrientationToEntity(this._threeJsObject,this._component.getEntity())}_setAttribute(t,e,i){let n=this._threeJsGeometry.getAttribute(t);n instanceof s.THREE.InstancedBufferAttribute&&n.count!==e.length/i&&(this._offsetArray=new Float32Array(e.length/i*3),this._colorArray=new Float32Array(e.length/i*4),this._scaleArray=new Float32Array(e.length/i*1),this._threeJsGeometry.instanceCount=e.length/i,this._threeJsGeometry.setAttribute("offset",new s.THREE.InstancedBufferAttribute(this._offsetArray,3)),this._threeJsGeometry.setAttribute("color",new s.THREE.InstancedBufferAttribute(this._colorArray,4)),this._threeJsGeometry.setAttribute("scale",new s.THREE.InstancedBufferAttribute(this._scaleArray,1))),n=this._threeJsGeometry.getAttribute(t),n instanceof s.THREE.InstancedBufferAttribute&&(n.copyArray(e),n.needsUpdate=!0)}}},function(t,e,i){"use strict";i.r(e);i(6);e.default=class TextureLOD{constructor(t){this._engine=t.getEntity().getScene().getEngine(),this._component=t,this._uniform=null,this._url="",this._sizes=[],this._currentSize=0,this._forcedSize=void 0,this._useCompressed=!1,this._loadedPromise=Promise.resolve(),this._loading=!1}getUrl(){return this._url}setUrl(t){this._url=t,this._currentSize=0}getUniform(){return this._uniform}setUniform(t){this._uniform=t,this._currentSize=0}getSizes(){return this._sizes.slice()}setSizes(t){this._sizes=t.slice(),this._currentSize=0}getCurrentSize(){return this._currentSize}getForcedSize(){return this._forcedSize}setForcedSize(t){this._forcedSize=t}getUseCompression(){return this._useCompression}setUseCompression(t){this._useCompression=t,this._currentSize=0}getLoadedPromise(){return this._loadedPromise}update(){if(this._loading||null===this._uniform)return;if(""===this._url||0===this._sizes.length||"loaded"!==this._component.getLoadState()&&void 0===this._forcedSize)return void(null!==this._uniform.value&&(this._uniform.value.dispose(),this._uniform.value=null,this._currentSize=0));let t=this._sizes[0];t=void 0!==this._forcedSize?this._forcedSize:this._component.getEntity().getGreatestPixelSpaceExtentsRadius();let e=0;for(let i=0,s=this._sizes.length;i<s;i++){const n=this._sizes[i];if(i===s-1&&(e=i),n>=t||n>=this._engine.getConfig().getValue("maxTextureSize")&&void 0===this._forcedSize){e=i;break}}this._currentSize!==this._sizes[e]&&(this._currentSize=this._sizes[e],this._loadTexture(this._currentSize))}_loadTexture(t){const e=this._url.replace("$SIZE",t.toString());this._loading=!0;const i=this._useCompression?this._engine.getTextureLoaderCompressed():this._engine.getTextureLoader();this._loadedPromise=i.loadIntoUniform(this._uniform,e,!0).then((()=>{this._loading=!1})).catch((t=>{throw Error(t)}))}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class ThreeJsHelper{static createGeometry(t,e){const i=new s.THREE.BufferGeometry;if(e){let e=0;for(let i=0;i<t.length;i++)e+=t[i].dimensions;const n=new s.THREE.InterleavedBuffer(new Float32Array(0),e);let o=0;for(let e=0;e<t.length;e++)i.setAttribute(t[e].name,new s.THREE.InterleavedBufferAttribute(n,t[e].dimensions,o)),o+=t[e].dimensions}else for(let e=0;e<t.length;e++)i.setAttribute(t[e].name,new s.THREE.BufferAttribute(new Float32Array(0),t[e].dimensions));return i.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1)),i}static setupObject(t,e){e.name=t+"."+Math.floor(1e4*Math.random()),e.matrixAutoUpdate=!1,e.frustumCulled=!1,e.visible=!1,t.getEntity().getScene().getThreeJsScene().add(e)}static createMeshObjectGivenGeometry(t,e,i){const n=new s.THREE.Mesh(i,e);return this.setupObject(t,n),n}static createMeshObject(t,e,i,s){const n=this.createGeometry(i,s);return this.createMeshObjectGivenGeometry(t,e,n)}static destroyGeometry(t){t.dispose()}static destroyObject(t){for(;t.children.length>0;)this.destroyObject(t.children[t.children.length-1]);null!==t.parent&&t.parent.remove(t),t instanceof s.THREE.Mesh&&this.destroyGeometry(t.geometry)}static destroyMaterial(t){const e=t.uniforms;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t].value&&void 0!==e[t].value.dispose&&e[t].value.dispose();t.dispose()}static destroyAllObjectsAndMaterials(t){const e=t.getThreeJsObjects(),i=t.getThreeJsMaterials();for(let t=0;t<e.length;t++)this.destroyObject(e[t]);for(let t=0;t<i.length;t++)this.destroyMaterial(i[t])}static setPosition(t,e){if(t)if(Array.isArray(t))for(let i=0,s=t.length;i<s;i++)t[i].position.set(e.x,e.y,e.z);else t.position.set(e.x,e.y,e.z)}static setPositionToEntity(t,e,i,n,o){if(!t)return;const a=e.getCameraSpacePosition(i);if(this._tempThreeJsVector3.set(a.x,a.y,a.z),n){const t=s.Vector3.pool.get();o?t.rotate(e.getOrientation(),n):t.copy(n),this._tempThreeJsVector3.x+=t.x,this._tempThreeJsVector3.y+=t.y,this._tempThreeJsVector3.z+=t.z,s.Vector3.pool.release(t)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].position.copy(this._tempThreeJsVector3);else t.position.copy(this._tempThreeJsVector3)}static setScale(t,e){if(t)if(Array.isArray(t))for(let i=0,s=t.length;i<s;i++)"number"==typeof e?t[i].scale.set(e,e,e):t[i].scale.set(e.x,e.y,e.z);else"number"==typeof e?t.scale.set(e,e,e):t.scale.set(e.x,e.y,e.z)}static setOrientation(t,e){if(t)if(s.BaseComponent._tempThreeJsQuaternion.set(e.x,e.y,e.z,e.w),Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion)}static setOrientationToBillboard(t,e,i){if(!t)return;const n=s.Quaternion.pool.get(),o=s.Vector3.pool.get(),a=s.Vector3.pool.get();if(o.normalize(e.getCameraSpacePosition(i)),i.getEntity().getOrientation().getAxis(a,0),a.setNormalTo(o,a),n.setFromAxes(a,void 0,o),s.BaseComponent._tempThreeJsQuaternion.set(n.x,n.y,n.z,n.w),Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);s.Quaternion.pool.release(n),s.Vector3.pool.release(o),s.Vector3.pool.release(a)}static setOrientationToEntity(t,e,i){if(!t)return;const n=e.getOrientation();if(void 0===i)s.BaseComponent._tempThreeJsQuaternion.set(n.x,n.y,n.z,n.w);else{const t=s.Quaternion.pool.get();t.mult(n,i),s.BaseComponent._tempThreeJsQuaternion.set(t.x,t.y,t.z,t.w),s.Quaternion.pool.release(t)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion)}static useInDynEnvMap(t,e){e?t.layers.enable(1):t.layers.disable(1)}static setVertices(t,e,i){const n=t.getAttribute(e);n instanceof s.THREE.BufferAttribute&&(n.array.length===i.length?(n.copyArray(i),n.needsUpdate=!0):t.setAttribute(e,new s.THREE.BufferAttribute(i,t.getAttribute(e).itemSize)))}static setIndices(t,e){const i=t.getIndex();i.array.length===e.length?(i.copyArray(e),i.needsUpdate=!0):t.setIndex(new s.THREE.BufferAttribute(e,1))}static computeTangents(t){t.computeTangents()}static setRenderOrder(t,e){t&&(t.renderOrder=e)}static setupLogDepthBuffering(t){s.Capabilities.hasFragDepth()?(t.defines={L_EXT_frag_depth:!0},t.extensions.fragDepth=!0):(t.uniforms.nearDistance=new s.THREE.Uniform(1e-4),t.uniforms.midDistance=new s.THREE.Uniform(3)),t.needsUpdate=!0}static loadTexture(t,e,i,s){const n=t.getEntity().getScene().getEngine();return(s?n.getTextureLoaderCompressed():n.getTextureLoader()).loadTexture(e,i)}static loadTextureFromCanvas(t){const e=new s.THREE.CanvasTexture(t);return e.magFilter=s.THREE.NearestFilter,e.minFilter=s.THREE.NearestFilter,e.flipY=!1,e.needsUpdate=!0,e}static async loadTextureIntoUniform(t,e,i,s,n,o){if(!e)return;const a=t.getEntity().getScene().getEngine(),r=o?a.getTextureLoaderCompressed():a.getTextureLoader(),l=await r.loadTexture(s,n);if(t.getThreeJsMaterials().includes(e)){const s=e.uniforms[i];if(void 0===s)throw new Error(`Material in ${t} doesn't have uniform name '${i}'.`);null!==s.value&&s.value.dispose(),s.value=l}else l.dispose()}static setOverlay(t,e){t&&(t.depthFunc=e?s.THREE.AlwaysDepth:s.THREE.LessEqualDepth)}static setTransparent(t,e){t&&(t.transparent=e,t.depthWrite=!e)}static setBlending(t,e){if(t){switch(e){case"normal":t.blending=s.THREE.NormalBlending;break;case"additive":t.blending=s.THREE.AdditiveBlending;break;case"subtractive":t.blending=s.THREE.SubtractiveBlending;break;case"multiply":t.blending=s.THREE.MultiplyBlending;break;case"custom":t.blending=s.THREE.CustomBlending;break;default:t.blending=s.THREE.NoBlending}t.needsUpdate=!0}}static setDefine(t,e,i){i&&!t.defines[e]?(t.defines[e]=!0,t.needsUpdate=!0):i||!0!==t.defines[e]||(delete t.defines[e],t.needsUpdate=!0)}static setUniformNumber(t,e,i){t&&(t.uniforms[e].value=i)}static setUniformVector2(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y)}static setUniformVector3(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y,i.z)}static setUniformColorRGB(t,e,i){t&&t.uniforms[e].value.set(i.r,i.g,i.b)}static setUniformColorRGBA(t,e,i,s=1){t&&t.uniforms[e].value.set(i.r,i.g,i.b,i.a*s)}static setUniformQuaternion(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y,i.z,i.w)}static setUniformTexture(t,e,i){t&&(null!==t.uniforms[e].value&&t.uniforms[e].value.dispose(),t.uniforms[e].value=i)}}ThreeJsHelper._tempThreeJsVector3=new s.THREE.Vector3,e.default=ThreeJsHelper},function(t,e,i){"use strict";i.r(e);const s=new Map;let n=null,o="";const a=new Map([["astc","astc"],["s3tc","dxt"],["pvrtc","pvrtc"],["etc","etc2"],["etc1","etc1"]]);e.default=class Capabilities{static isWebGL2(){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext}static hasFragDepth(){return this.isWebGL2()||this.hasGLExtension("EXT_frag_depth")}static hasGLExtension(t){if(null===n)return!1;let e=s.get(t);return void 0===e&&(e=null!==n.getExtension(t),s.set(t,e)),e}static __getCompressedTextureExtension(){return o}static __setContext(t){n=t,a.forEach(((t,e)=>{!0!==this.hasGLExtension("WEBGL_compressed_texture_"+e)&&!0!==this.hasGLExtension("WEBKIT_WEBGL_compressed_texture_"+e)||""===o&&(o=t)}))}}},function(t,e,i){"use strict";i.r(e);e.default=class Config{constructor(){this._valueMap=new Map,this._callbacksMap=new Map,this.setValue("maxTextureSize",512),this.setValue("useTextureCompression",!0),this.setValue("fontFamily","Arial"),this.setValue("fontSize",16),this.setValue("gammaCorrection",1)}getValue(t){return this._valueMap.get(t)}setValue(t,e){if(this._valueMap.get(t)!==e){this._valueMap.set(t,e);const i=this._callbacksMap.get(t);if(i)for(let s=0;s<i.length;s++)i[s](t,e)}}addEventListener(t,e){let i=this._callbacksMap.get(t);void 0===i&&(i=[],this._callbacksMap.set(t,i)),i.push(e)}removeEventListener(t,e){const i=this._callbacksMap.get(t);if(i)for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}}}},function(t,e,i){"use strict";i.r(e);class Download{constructor(t,e){this.url=t,this.actualUrl=e,this.progress=0,this.totalBytes=0,this.content=void 0,this.status="downloading",this.errorMessage=""}}class DownloadData{constructor(t,e){this.download=new Download(t,e),this.promise=null,this.progressCallbacks=[],this.request=null}}e.default=class Downloader{constructor(){this._replacements=new Map,this._currentDownloads=new Map}getReplacement(t){return this._replacements.get(t)}setReplacement(t,e){this._replacements.set(t,e)}cancel(t){const e=this.processUrl(t),i=this._currentDownloads.get(e);void 0!==i&&null!==i.request&&i.request.abort()}processUrl(t){let e=t;for(const[t,i]of this._replacements)e=e.replace("$"+t,i);return e}download(t,e,i){const s=this.processUrl(t);let n=this._currentDownloads.get(s);return void 0!==n&&null!==n.promise?(i&&n.progressCallbacks.push(i),n.promise):(n=new DownloadData(t,s),this._currentDownloads.set(s,n),n.promise=new Promise((t=>{const i=new XMLHttpRequest;i.addEventListener("load",(()=>{200<=i.status&&i.status<=299?(n.download.content=i.response,n.download.status="completed"):(n.download.content=void 0,n.download.status="failed"),this._currentDownloads.delete(n.download.actualUrl),t(n.download)})),i.addEventListener("progress",(t=>{n.download.progress=t.lengthComputable?t.loaded/t.total:0,n.download.totalBytes=t.lengthComputable?t.total:0;for(const t of n.progressCallbacks)t(n.download)})),i.addEventListener("abort",(()=>{n.download.content=void 0,n.download.status="cancelled",this._currentDownloads.delete(n.download.actualUrl),t(n.download)})),i.addEventListener("error",(()=>{n.download.content=void 0,n.download.status="failed",n.download.errorMessage=i.statusText,this._currentDownloads.delete(n.download.actualUrl),t(n.download)})),i.responseType=e?"arraybuffer":"text",n.request=i,i.open("GET",s),i.send()})),n.promise)}}},function(t,e,i){"use strict";i.r(e);var s=i(6);e.default=class Engine{constructor(t){if(!(t instanceof HTMLDivElement))throw new Error("The root div param is not an actual div element.");this._rootDiv=t,this._canvas=null,this._renderSize=new s.Vector2,this._renderSize.freeze(),this._input=new s.Input(this),this._config=new s.Config,this._downloader=new s.Downloader,this._textureLoader=null,this._textureLoaderCompressed=null,this._materialManager=null,this._scenes=new s.Collection(this,new Map([["scene",s.Scene]])),this._viewports=new s.Collection(this,new Map([["viewport",s.Viewport]])),this._lastAppTime=Date.now(),this._realDeltaTime=0,this._fps=new s.FPS,this._fpsLimit=Number.POSITIVE_INFINITY,this._time=0,this._timeRate=0,this._callbacks=[],this._callbacksToRemove=[],this._thisLoop=this._loop.bind(this),this._threeJsRenderer=null,this._viewportDiv=null,"relative"!==this._rootDiv.style.position&&"absolute"!==this._rootDiv.style.position&&(this._rootDiv.style.position="relative"),this._rootDiv.style.userSelect="none",this._rootDiv.style.webkitUserSelect="none",this._rootDiv.style.touchAction="none",this._canvas=document.createElement("canvas"),this._canvas.style.position="absolute",this._canvas.style.left="0px",this._canvas.style.top="0px",this._canvas.style.width="100%",this._canvas.style.height="100%",this._rootDiv.appendChild(this._canvas),this._viewportDiv=document.createElement("div"),this._viewportDiv.style.position="absolute",this._viewportDiv.style.left="0px",this._viewportDiv.style.top="0px",this._viewportDiv.style.width="100%",this._viewportDiv.style.height="100%",this._viewportDiv.style.overflow="hidden",this._rootDiv.appendChild(this._viewportDiv);try{this._threeJsRenderer=new s.THREE.WebGLRenderer({canvas:this._canvas,antialias:!0}),this._threeJsRenderer.setScissorTest(!0),this._threeJsRenderer.setPixelRatio(window.devicePixelRatio),this._textureLoader=new s.TextureLoader(this._downloader,this._threeJsRenderer),this._textureLoaderCompressed=new s.TextureLoaderCompressed(this._downloader,this._config,this._threeJsRenderer),s.THREE.Cache.enabled=!1;const t=this._threeJsRenderer.getContext().getShaderInfoLog.bind(this._threeJsRenderer.getContext());this._threeJsRenderer.getContext().getShaderInfoLog=e=>{const i=t(e);return i.includes("GL_ARB_gpu_shader5")?"":i},s.Capabilities.__setContext(this._threeJsRenderer.getContext()),this._materialManager=new s.MaterialManager(this._downloader)}catch(t){throw console.log(t),t}requestAnimationFrame(this._thisLoop)}getVersion(){return s.Version}getRootDiv(){return this._rootDiv}getRenderSize(){return this._renderSize}getCanvas(){return this._canvas}getViewportDiv(){return this._viewportDiv}getConfig(){return this._config}getInput(){return this._input}getDownloader(){return this._downloader}getTextureLoader(){return this._textureLoader}getTextureLoaderCompressed(){return this._textureLoaderCompressed}getMaterialManager(){return this._materialManager}getScene(t){return this._scenes.get(t)}getNumScenes(){return this._scenes.size}addScene(t){return this._scenes.add("scene",t)}removeScene(t){this._scenes.remove(t)}get(t,e,i,s=0){const n=this._scenes.get(t);return void 0===e||null===n?n:n.get(e,i,s)}getViewport(t){return this._viewports.get(t)}getNumViewports(){return this._viewports.size}addViewport(t=""){return this._viewports.add("viewport",t)}removeViewport(t){this._viewports.remove(t)}getTime(){return this._time}setTime(t){this._time=t}getTimeRate(){return this._timeRate}setTimeRate(t){this._timeRate=t}getFPS(){return this._fps.getFPS()}getFPSLimit(){return this._fpsLimit}setFPSLimit(t){this._fpsLimit=t}getDeltaTime(){return this._realDeltaTime}isComponentTypeRegistered(t){return s.Types.Components.has(t)}registerComponentType(t,e){if(s.Types.Components.has(t))throw new Error("Already registered component type '"+t+"'.");s.Types.Components.set(t,e)}unregisterComponentType(t){s.Types.Components.delete(t)}isControllerTypeRegistered(t){return s.Types.Controllers.has(t)}registerControllerType(t,e){if(s.Types.Controllers.has(t))throw new Error("Already registered controller type '"+t+"'.");s.Types.Controllers.set(t,e)}unregisterControllerType(t){s.Types.Controllers.delete(t)}waitUntilNextFrame(){return new Promise((t=>{this.addCallback((()=>{t()}),!1)}))}addCallback(t,e){this._callbacks.push({callback:t,recurring:e})}removeCallback(t){this._callbacksToRemove.push(t)}__getThreeJsRenderer(){return this._threeJsRenderer}_loop(){try{const t=Date.now();if(this._realDeltaTime=(t-this._lastAppTime)/1e3,this._realDeltaTime<1/this._fpsLimit)return void requestAnimationFrame(this._thisLoop);this._lastAppTime=t,this._fps.update(this._realDeltaTime),this._time+=this._timeRate*this._realDeltaTime,this._renderSize.x===this._rootDiv.clientWidth&&this._renderSize.y===this._rootDiv.clientHeight||(this._renderSize.thaw(),this._renderSize.set(this._rootDiv.clientWidth,this._rootDiv.clientHeight),this._renderSize.freeze(),this._threeJsRenderer.setSize(this._renderSize.x,this._renderSize.y,!1));for(let t=0;t<this._scenes.size;t++)this._scenes.get(t).__update();for(let t=0;t<this._viewports.size;t++)this._viewports.get(t).__updateViewportVariables();for(let t=0;t<this._scenes.size;t++)this._scenes.get(t).__updateVisuals();this._threeJsRenderer.setViewport(0,0,this._renderSize.x,this._renderSize.y),this._threeJsRenderer.setScissor(0,0,this._renderSize.x,this._renderSize.y),this._threeJsRenderer.clear();for(let t=0;t<this._viewports.size;t++)this._viewports.get(t).__render();for(let t=0;t<this._callbacks.length;t++)this._callbacks[t].callback(),this._callbacks[t].recurring||this._callbacksToRemove.push(this._callbacks[t].callback);for(let t=0,e=this._callbacksToRemove.length;t<e;t++)for(let e=0,i=this._callbacks.length;e<i;e++)if(this._callbacks[e].callback===this._callbacksToRemove[t]){this._callbacks.splice(e,1);break}this._input.__resetStatesForNextFrame()}catch(t){throw console.log(t),t}requestAnimationFrame(this._thisLoop)}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class Entity extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._disabledByAncestor=!1,this._destroyed=!1,this._parent=null,this._lastParent=null,this._children=[],this._parentingTable=[],this._parentChangedCallbacks=[],this._childChangedCallbacks=[],this._position=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._position.freeze(),this._velocity=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._velocity.freeze(),this._orientation=new s.Quaternion(Number.NaN,Number.NaN,Number.NaN,Number.NaN),this._orientation.freeze(),this._angularVelocity=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._angularVelocity.freeze(),this._cameraSpacePosition=new s.FastMap,this._normalSpacePosition=new s.FastMap,this._pixelSpacePosition=new s.FastMap,this._normalSpaceExtentsRadius=new s.FastMap,this._pixelSpaceExtentsRadius=new s.FastMap,this._greatestPixelSpaceExtentsRadius=0,this._components=new s.Collection(this,s.Types.Components),this._controllers=new s.Collection(this,s.Types.Controllers),this._occlusionRadius=0,this._extentsRadius=0,this._canOcclude=!0,this._positionCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._positionCoverage.freeze(),this._orientationCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._orientationCoverage.freeze(),this._isInPositionCoverage=!1,this._isInOrientationCoverage=!1}getScene(){return this.__getCollectionParent()}isEnabled(){return this._enabled&&!this._disabledByAncestor}isDisabledByAncestor(){return this._disabledByAncestor}setEnabled(t){this._enabled!==t&&(this._enabled=t,this._updateEnabled())}_updateEnabled(){for(let t=0;t<this._components.size;t++)this._components.get(t).__updateLoadState();for(let t=0,e=this._children.length;t<e;t++)this._children[t]._updateDisabledByAncestor()}_updateDisabledByAncestor(){let t=!1,e=this._parent;for(;null!==e;){if(!e._enabled||e._disabledByAncestor){t=!0;break}e=e._parent}this._disabledByAncestor!==t&&(this._disabledByAncestor=t,this._updateEnabled())}isDestroyed(){return this._destroyed}getPosition(){return this._position}setPosition(t){this._position.thaw(),this._position.copy(t),this._position.freeze()}getVelocity(){return this._velocity}setVelocity(t){this._velocity.thaw(),this._velocity.copy(t),this._velocity.freeze()}getOrientation(){return this._orientation}setOrientation(t){this._orientation.thaw(),this._orientation.copy(t),this._orientation.freeze()}getAngularVelocity(){return this._angularVelocity}setAngularVelocity(t){this._angularVelocity.thaw(),this._angularVelocity.copy(t),this._angularVelocity.freeze()}getPositionRelativeToEntity(t,e,i,n){let o=this;if(t.copy(e),void 0===n){const e=this.getLowestCommonAncestor(i);if(null===e)return void t.copy(s.Vector3.NaN);for(t.add(t,o.getPosition());o!==e;)o=o.getParent(),t.add(t,o.getPosition());if(null!==i)for(o=i,t.sub(t,o.getPosition());o!==e;)o=o.getParent(),t.sub(t,o.getPosition())}else{const e=this.getScene(),a=s.Vector3.pool.get(),r=this.getLowestCommonAncestorAtTime(i,n);if(null!==r){for(o.getPositionAtTime(a,n),t.add(t,a);o!==r;){const i=o.getParentAtTime(n);if(o=e.getEntity(i),null===o)return void t.copy(s.Vector3.NaN);o.getPositionAtTime(a,n),t.add(t,a)}if(null!==i)for(o=i,o.getPositionAtTime(a,n),t.sub(t,a);o!==r;){const i=o.getParentAtTime(n);if(o=e.getEntity(i),null===o)return void t.copy(s.Vector3.NaN);o.getPositionAtTime(a,n),t.sub(t,a)}}else t.copy(s.Vector3.NaN);s.Vector3.pool.release(a)}}getVelocityRelativeToEntity(t,e,i,n){let o=this;if(t.copy(e),void 0===n){const e=this.getLowestCommonAncestor(i);if(null===e)return void t.copy(s.Vector3.NaN);for(t.add(t,o.getVelocity());o!==e;)o=o.getParent(),t.add(t,o.getVelocity());if(null!==i)for(o=i,t.sub(t,o.getVelocity());o!==e;)o=o.getParent(),t.sub(t,o.getVelocity())}else{const e=this.getScene(),a=s.Vector3.pool.get(),r=this.getLowestCommonAncestorAtTime(i,n);if(null!==r){for(o.getVelocityAtTime(a,n),t.add(t,a);o!==r;){const i=o.getParentAtTime(n);if(o=e.getEntity(i),null===o)return void t.copy(s.Vector3.NaN);o.getVelocityAtTime(a,n),t.add(t,a)}if(null!==i)for(o=i,o.getVelocityAtTime(a,n),t.sub(t,a);o!==r;){const i=o.getParentAtTime(n);if(o=e.getEntity(i),null===o)return void t.copy(s.Vector3.NaN);o.getVelocityAtTime(a,n),t.sub(t,a)}}else t.copy(s.Vector3.NaN);s.Vector3.pool.release(a)}}getPositionAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._position);else if(t.set(Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("position")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updatePositionAtTime(t,e)}else t.copy(this._position);else t.set(Number.NaN,Number.NaN,Number.NaN)}getVelocityAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._velocity);else if(t.set(Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("velocity")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updateVelocityAtTime(t,e)}else t.copy(this._velocity);else t.set(Number.NaN,Number.NaN,Number.NaN)}getOrientationAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._orientation);else if(t.set(Number.NaN,Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("orientation")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updateOrientationAtTime(t,e)}else t.copy(this._orientation);else t.set(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}getOcclusionRadius(){return this._occlusionRadius}getExtentsRadius(){return this._extentsRadius}setOcclusionRadius(t){this._occlusionRadius=t}setExtentsRadius(t){this._extentsRadius=t}getPositionCoverage(){return this._positionCoverage}getOrientationCoverage(){return this._orientationCoverage}isInPositionCoverage(){return this._isInPositionCoverage}isInOrientationCoverage(){return this._isInOrientationCoverage}__updateCoverage(){let t=0,e=0;this._positionCoverage.thaw(),this._orientationCoverage.thaw(),this._positionCoverage.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),this._orientationCoverage.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.isEnabled()&&(s.hasModifiedState("position")&&(this._positionCoverage.union(this._positionCoverage,s.getCoverage()),t++),s.hasModifiedState("orientation")&&(this._orientationCoverage.union(this._orientationCoverage,s.getCoverage()),e++))}0===t&&this._positionCoverage.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),0===e&&this._orientationCoverage.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._positionCoverage.freeze(),this._orientationCoverage.freeze()}canOcclude(){return this._canOcclude}setCanOcclude(t){this._canOcclude=t}isOccludingPosition(t,e){if(!this._canOcclude||!this.isInPositionCoverage())return!1;const i=Math.min(this._occlusionRadius,this.getCameraSpacePosition(t).magnitude()),n=s.Interval.pool.get();s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(n,e,this.getCameraSpacePosition(t),i);const o=n.min<n.max&&0<=n.min+n.max&&n.min+n.max<2;return s.Interval.pool.release(n),o}getParent(){return this._parent}getParentAtTime(t){const e=s.Sort.getIndex(t,this._parentingTable,a);return e<this._parentingTable.length&&t===this._parentingTable[e][0]?this._parentingTable[e][1]:e>0?this._parentingTable[e-1][1]:this._parentingTable.length>0?"":null!==this._parent?this._parent.getName():""}setParent(t){if(t===this._parent)return;const e=s.Vector3.pool.get();if(this.getPositionRelativeToEntity(e,s.Vector3.Zero,t),e.isNaN()||this.setPosition(e),s.Vector3.pool.release(e),null!==this._parent)for(let t=0;t<this._parent._children.length;t++){this._parent._children[t]===this&&this._parent._children.splice(t,1)}const i=this._parent;this._parent=t,null!==this._parent&&this._parent._children.push(this),this._clearCameraReferences(),this._updateDisabledByAncestor();for(let t=0,e=this._parentChangedCallbacks.length;t<e;t++)this._parentChangedCallbacks[t](this,i,this._parent);if(null!==i)for(let t=0,e=i._childChangedCallbacks.length;t<e;t++)i._childChangedCallbacks[t](i,this,!1);if(null!==this._parent)for(let t=0,e=this._parent._childChangedCallbacks.length;t<e;t++)this._parent._childChangedCallbacks[t](this._parent,this,!0)}_clearCameraReferences(){this._cameraSpacePosition.clear(),this._normalSpacePosition.clear(),this._pixelSpacePosition.clear(),this._normalSpaceExtentsRadius.clear(),this._pixelSpaceExtentsRadius.clear();for(let t=0,e=this._components.size;t<e;t++){this._components.get(t).__clearCameraDependentsBase()}for(let t=0,e=this._children.length;t<e;t++)this._children[t]._clearCameraReferences()}getNumChildren(){return this._children.length}getChild(t){return this._children[t]}getLowestCommonAncestor(t){if(null===t)return null;let e=this,i=t,s=0,n=0;for(;null!==e.getParent();)s+=1,e=e.getParent();for(;null!==i.getParent();)n+=1,i=i.getParent();for(e=this,i=t;s>n;)s-=1,e=e.getParent();for(;n>s;)n-=1,i=i.getParent();for(;e!==i&&null!==e;)e=e.getParent(),i=i.getParent();return e}getLowestCommonAncestorAtTime(t,e){if(null===t)return null;let i=this,s=t,n=0,o=0;const a=this.getScene();for(;;){const t=i.getParentAtTime(e);if(""===t)break;const s=a.getEntity(t);if(null===s)return null;n+=1,i=s}for(;;){const t=s.getParentAtTime(e);if(""===t)break;const i=a.getEntity(t);if(null===i)return null;o+=1,s=i}for(i=this,s=t;n>o;){n-=1;const t=i.getParentAtTime(e),s=a.getEntity(t);if(null===s)return null;i=s}for(;o>n;){o-=1;const t=s.getParentAtTime(e),i=a.getEntity(t);if(null===i)return null;s=i}for(;i!==s&&null!==i;){const t=i.getParentAtTime(e),n=a.getEntity(t);if(null===n)return null;i=n;const o=s.getParentAtTime(e),r=a.getEntity(o);if(null===r)return null;s=r}return i}getNumParentingTableEntries(){return this._parentingTable.length}getParentingTableEntry(t){return this._parentingTable[t]}addParentingTableEntry(t,e){s.Sort.add([t,e],this._parentingTable,n,o)}removeParentingTableEntry(t){const e=s.Sort.getIndex(t,this._parentingTable,a);e<this._parentingTable.length&&this._parentingTable[e][0]===t&&this._parentingTable.splice(e)}addParentChangedCallback(t){this._parentChangedCallbacks.push(t)}removeParentChangedCallback(t){const e=this._parentChangedCallbacks.indexOf(t);-1!==e&&this._parentChangedCallbacks.splice(e,1)}addChildChangedCallback(t){this._childChangedCallbacks.push(t)}removeChildChangedCallback(t){const e=this._childChangedCallbacks.indexOf(t);-1!==e&&this._childChangedCallbacks.splice(e,1)}getNumComponents(){return this._components.size}getComponent(t){return this._components.get(t)}getComponentByType(t,e=0){return this._components.getByType(t,e)}addComponent(t,e,i){return this._components.add(t,e,i)}removeComponent(t){this._components.remove(t)}clearComponents(){this._components.clear()}getNumControllers(){return this._controllers.size}getController(t){return this._controllers.get(t)}getControllerByType(t,e=0){return this._controllers.getByType(t,e)}addController(t,e,i){const s=this._controllers.add(t,e,i);return this.__updateCoverage(),s}removeController(t){this._controllers.remove(t),this.__updateCoverage()}clearControllers(){this._controllers.clear(),this.__updateCoverage()}getCameraSpacePosition(t){const e=this._cameraSpacePosition.get(t);return void 0!==e?e:s.Vector3.NaN}getNormalSpacePosition(t){const e=this._normalSpacePosition.get(t);return void 0!==e?e:s.Vector3.NaN}getPixelSpacePosition(t){const e=this._pixelSpacePosition.get(t);return void 0!==e?e:s.Vector2.NaN}getNormalSpaceOcclusionRadius(t){return 0!==this._extentsRadius?this.getNormalSpaceExtentsRadius(t)*this._occlusionRadius/this._extentsRadius:0}getNormalSpaceExtentsRadius(t){const e=this._normalSpaceExtentsRadius.get(t);return void 0!==e?e:Number.NaN}getPixelSpaceOcclusionRadius(t){return 0!==this._extentsRadius?this.getPixelSpaceExtentsRadius(t)*this._occlusionRadius/this._extentsRadius:0}getPixelSpaceExtentsRadius(t){const e=this._pixelSpaceExtentsRadius.get(t);return void 0!==e?e:Number.NaN}getGreatestPixelSpaceOcclusionRadius(){return 0!==this._extentsRadius?this.getGreatestPixelSpaceExtentsRadius()*this._occlusionRadius/this._extentsRadius:0}getGreatestPixelSpaceExtentsRadius(){return this._greatestPixelSpaceExtentsRadius}__setCameraDependentVariables(t,e){const i=t.getViewport();if(null===i)return;let n=this._cameraSpacePosition.get(t);void 0===n?(n=new s.Vector3,this._cameraSpacePosition.set(t,n)):n.thaw(),n.copy(e),n.freeze();let o=this._normalSpacePosition.get(t);void 0===o?(o=new s.Vector3,this._normalSpacePosition.set(t,o)):o.thaw(),t.getNormalSpacePositionFromCameraSpacePosition(o,n),o.freeze();let a=this._pixelSpacePosition.get(t);void 0===a?(a=new s.Vector2,this._pixelSpacePosition.set(t,a)):a.thaw(),i.getPixelSpacePositionFromNormalSpacePosition(a,o),a.freeze();const r=t.getNormalSpaceRadiusFromRadius(this._extentsRadius,n.magnitude());this._normalSpaceExtentsRadius.set(t,r);const l=i.getPixelSpaceRadiusFromNormalSpaceRadius(r);this._pixelSpaceExtentsRadius.set(t,l)}__removeCameraDependents(t){this._cameraSpacePosition.delete(t),this._normalSpacePosition.delete(t),this._pixelSpacePosition.delete(t),this._normalSpaceExtentsRadius.delete(t),this._pixelSpaceExtentsRadius.delete(t);for(let e=0;e<this._components.size;e++)this._components.get(e).__removeCameraDependentsBase(t)}get(t,e=0){const i=this._components.getByType(t,e);return null!==i?i:this._controllers.getByType(t,e)}getLoadedPromise(){const t=[];if(this.isEnabled()){for(let e=0;e<this._controllers.size;e++)t.push(this._controllers.get(e).getLoadedPromise());for(let e=0;e<this._components.size;e++)t.push(this._components.get(e).getLoadedPromise())}return Promise.all(t).then()}toString(){return this.getName()}__destroy(){this._destroyed=!0,super.__destroy();for(let t=0;t<this._children.length;t++)this._children[t].setParent(null);null!==this._parent&&this.setParent(null),this._controllers.__destroy(),this._components.__destroy()}__updateParent(t){const e=this.getParentAtTime(t);if(""!==e){const t=this.getScene().getEntity(e);t!==this._parent&&this.setParent(t)}else null!==this._parent&&this.setParent(null);this._parent!==this._lastParent&&(this.getScene().getControllerDependencyGraph().needsSorting(),this._lastParent=this._parent)}__updateIsInCoverages(t){this._isInPositionCoverage=this._positionCoverage.contains(t),this._isInOrientationCoverage=this._orientationCoverage.contains(t);for(let t=0;t<this._components.size;t++)this._components.get(t).__updateLoadState()}__updateVisuals(){this._greatestPixelSpaceExtentsRadius=0;for(let t=0,e=this._pixelSpaceExtentsRadius.size;t<e;t++){const e=this._pixelSpaceExtentsRadius.getAt(t).value;this._greatestPixelSpaceExtentsRadius<e&&(this._greatestPixelSpaceExtentsRadius=e)}for(let t=0,e=this._components.size;t<e;t++){const e=this._components.get(t);e.isEnabled()&&e.__updateBase()}}__updateCameraVariables(t,e,i){if(this.isEnabled()){const n=s.Vector3.pool.get();this===t.getEntity()?n.set(0,0,0):i?n.sub(e.getCameraSpacePosition(t),e.getPosition()):n.add(e.getCameraSpacePosition(t),this._position),this.__setCameraDependentVariables(t,n),this._canOcclude&&this.getPixelSpaceOcclusionRadius(t)>=1&&t.__addToOccludingEntities(this),s.Vector3.pool.release(n);for(let e=0,i=this._components.size;e<i;e++){const i=this._components.get(e);i!==t&&i.isEnabled()&&i.__updateCameraVariablesBase(t)}}null===this._parent||!i&&this!==t.getEntity()||this._parent.__updateCameraVariables(t,this,!0);for(let i=0,s=this._children.length;i<s;i++){const s=this._children[i];s!==e&&s.__updateCameraVariables(t,this,!1)}}__prepareForRender(t){for(let e=0,i=this._components.size;e<i;e++){const i=this._components.get(e);"camera"!==i.getType()&&i.__prepareForRenderBase(t)}}}function n(t,e){return t[0]<e[0]}function o(t,e){return t[0]===e[0]}function a(t,e){return t[0]<e}e.default=Entity},function(t,e,i){"use strict";i.r(e);var s=i(6);class EntityItem extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._destroyed=!1}getEntity(){return this.__getCollectionParent()}isDestroyed(){return this._destroyed}__destroy(){this._destroyed=!0,super.__destroy()}isEnabled(){return this._enabled}setEnabled(t){this._enabled=t}getLoadedPromise(){return Promise.resolve()}__update(){}}e.default=EntityItem},function(t,e,i){"use strict";i.r(e);var s=i(6);class Touch{constructor(){this.identifier=0,this.pressedPosition=new s.Vector2,this.pressedTime=0,this.lastFramePosition=new s.Vector2,this.thisFramePosition=new s.Vector2}}const n=new Set(["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","ScrollLock","Shift","Super","Symbol","SymbolLock"]);e.default=class Input{constructor(t){this._engine=t,this._activeViewport=null,this._draggedOffset=new s.Vector2,this._draggedOffset.freeze(),this._zoomedOffset=0,this._rotatedOffset=0,this._shiftPressed=!1,this._keysPressed=new Set,this._maxSelectTime=.5,this._maxSelectDistance=5,this._cursorPosition=new s.Vector2,this._selected=!1,this._selectedPosition=new s.Vector2,this._selectedPosition.freeze(),this._touches=[],window.addEventListener("blur",(()=>{this._touches=[],this._keysPressed.clear(),this._shiftPressed=!1})),window.addEventListener("keydown",(t=>{t.target instanceof HTMLElement&&["INPUT","SELECT","TEXTAREA"].includes(t.target.tagName)||("Shift"===t.key?this._shiftPressed=!0:n.has(t.key)?(this._keysPressed.clear(),this._shiftPressed=!1):this._keysPressed.add(t.key.toLowerCase()))})),window.addEventListener("keyup",(t=>{"Shift"===t.key?this._shiftPressed=!1:n.has(t.key)||this._keysPressed.delete(t.key.toLowerCase())})),this._engine.getRootDiv().addEventListener("mousedown",(t=>{if(0===t.button&&(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),0===this._touches.length)){const e=this._engine.getRootDiv().getBoundingClientRect();let i=null;for(let t=0;t<this._touches.length;t++)0===this._touches[t].identifier&&(i=this._touches[t]);null===i&&(i=new Touch),i.identifier=0,i.pressedPosition.set(t.clientX-e.left,t.clientY-e.top),i.pressedTime=Date.now(),i.lastFramePosition.copy(i.pressedPosition),i.thisFramePosition.copy(i.pressedPosition),this._touches.push(i),this._updateActiveViewport()}})),window.addEventListener("mousemove",(t=>{const e=this._engine.getRootDiv().getBoundingClientRect();if(1===this._touches.length&&0===this._touches[0].identifier){const i=this._touches[0];i.thisFramePosition.set(t.clientX-e.left,t.clientY-e.top),this._draggedOffset.thaw(),this._draggedOffset.sub(i.thisFramePosition,i.lastFramePosition);const s=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&s<=this._maxSelectDistance&&this._draggedOffset.set(0,0),this._draggedOffset.freeze()}this._touches.length<=1&&this._cursorPosition.set(t.clientX-e.left,t.clientY-e.top)})),window.addEventListener("mouseup",(t=>{if(0===t.button&&1===this._touches.length&&0===this._touches[0].identifier){const e=this._engine.getRootDiv().getBoundingClientRect(),i=this._touches[0];i.thisFramePosition.set(t.clientX-e.left,t.clientY-e.top);const s=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&s<=this._maxSelectDistance&&(this._selected=!0,this._selectedPosition.thaw(),this._selectedPosition.copy(i.thisFramePosition),this._selectedPosition.freeze()),this._touches.splice(0,1)}})),this._engine.getRootDiv().addEventListener("wheel",(t=>{if(t.deltaY){let e=1;1===t.deltaMode?e=16:2===t.deltaMode&&(e=64),this._zoomedOffset+=t.deltaY*e}t.preventDefault()}),{passive:!1}),this._engine.getRootDiv().addEventListener("touchstart",(t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const s=t.changedTouches[i];let n=null;for(let t=0;t<this._touches.length;t++)this._touches[t].identifier===s.identifier&&(n=this._touches[t]);null===n&&(n=new Touch),n.identifier=s.identifier,n.pressedPosition.thaw(),n.pressedPosition.set(s.pageX-window.pageXOffset-e.left,s.pageY-window.pageYOffset-e.top),n.pressedPosition.freeze(),n.pressedTime=Date.now(),n.lastFramePosition.copy(n.pressedPosition),n.thisFramePosition.copy(n.pressedPosition),this._touches.push(n),1===this._touches.length&&this._cursorPosition.copy(n.thisFramePosition),this._updateActiveViewport()}}),{passive:!1}),window.addEventListener("touchmove",(t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const n=t.changedTouches[i];for(let t=0;t<this._touches.length;t++){const o=this._touches[t];if(o.identifier===n.identifier)if(o.thisFramePosition.set(n.pageX-window.pageXOffset-e.left,n.pageY-window.pageYOffset-e.top),1===this._touches.length){this._draggedOffset.thaw(),this._draggedOffset.sub(o.thisFramePosition,o.lastFramePosition);const t=Math.max(Math.abs(o.thisFramePosition.x-o.pressedPosition.x),Math.abs(o.thisFramePosition.y-o.pressedPosition.y));(Date.now()-o.pressedTime)/1e3<=this._maxSelectTime&&t<=this._maxSelectDistance&&this._draggedOffset.set(0,0),this._draggedOffset.freeze(),this._cursorPosition.copy(o.thisFramePosition)}else if(2===this._touches.length){const t=s.Vector2.pool.get();t.sub(this._touches[i].thisFramePosition,this._touches[1-i].thisFramePosition);const e=s.Vector2.pool.get();e.sub(this._touches[i].thisFramePosition,this._touches[i].lastFramePosition);const n=e.dot(t)/t.magnitude()/e.magnitude(),a=e.cross(t)/t.magnitude()/e.magnitude();n<-.7?this._zoomedOffset+=-(n+.7)*e.magnitude():n>.7?this._zoomedOffset+=-(n-.7)*e.magnitude():Math.abs(a)>.3&&(this._rotatedOffset+=a*e.magnitude()),s.Vector2.pool.release(e),s.Vector2.pool.release(t);const r=Math.max(Math.abs(o.thisFramePosition.x-o.pressedPosition.x),Math.abs(o.thisFramePosition.y-o.pressedPosition.y));(Date.now()-o.pressedTime)/1e3<=this._maxSelectTime&&r<=this._maxSelectDistance&&(this._zoomedOffset=0,this._rotatedOffset=0)}}}})),window.addEventListener("touchend",(t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const s=t.changedTouches[i];for(let t=0;t<this._touches.length;t++){const i=this._touches[t];if(i.identifier===s.identifier){if(i.thisFramePosition.set(s.pageX-window.pageXOffset-e.left,s.pageY-window.pageYOffset-e.top),1===this._touches.length){const t=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&t<=this._maxSelectDistance&&(this._selected=!0,this._selectedPosition.thaw(),this._selectedPosition.copy(i.thisFramePosition),this._selectedPosition.freeze())}this._touches.splice(t,1)}}}})),window.addEventListener("touchcancel",(()=>{}))}getActiveViewport(){return this._activeViewport}getDraggedOffset(){return this._draggedOffset}getZoomedOffset(){return this._zoomedOffset}getRotatedOffset(){return this._rotatedOffset}isShiftPressed(){return this._shiftPressed}isKeyPressed(t){return this._keysPressed.has(t)}isSelected(){return this._selected}getSelectedPosition(){return this._selectedPosition}getCursorPosition(){return this._cursorPosition}__setActiveViewport(t){this._activeViewport=t}__resetStatesForNextFrame(){for(let t=0;t<this._touches.length;t++)this._touches[t].lastFramePosition.copy(this._touches[t].thisFramePosition);this._selected=!1,this._altSelected=!1,this._draggedOffset.thaw(),this._draggedOffset.set(0,0),this._draggedOffset.freeze(),this._zoomedOffset=0,this._rotatedOffset=0}_updateActiveViewport(){this._activeViewport=null;for(let t=this._engine.getNumViewports()-1;t>=0;t--){const e=this._engine.getViewport(t).getBounds();if(this._engine.getViewport(t).isEnabled()&&e.contains(this._touches[0].pressedPosition)){this._activeViewport=this._engine.getViewport(t);break}}}}},function(t,e,i){"use strict";i.r(e);var s=i(6),n=i(65),o=i(66),a=i(67),r=i(68),l=i(69),c=i(70),h=i(71);class Resource{constructor(t){this.value=t,this.useCount=0}}e.default=class MaterialManager{constructor(t){this._downloader=t,this._cache=new Map,this._clonedMaterials=new Map,this._promises=new Map,this._preload()}async get(t){let e=this._cache.get(t);if(void 0===e){const i=this._promises.get(t);void 0!==i&&(e=await i)}if(void 0===e){const i=await this._downloader.download(t,!1);if("completed"!==i.status||"string"!=typeof i.content)throw new Error('Failed to download material "'+t+'".');const s=JSON.parse(i.content);e=new Resource(await this._load(t,s)),this._cache.set(t,e)}return e.useCount+=1,this._clone(e.value,t)}getPreloaded(t){const e=this._cache.get(t);if(void 0===e)throw new Error('Invalid pre-loaded material "'+t+'".');return e.useCount+=1,this._clone(e.value,t)}release(t){const e=this._clonedMaterials.get(t);if(void 0===e)return;this._clonedMaterials.delete(t);const i=this._cache.get(e);i&&(i.useCount-=1,0===i.useCount&&(this._unload(i.value),this._cache.delete(e)))}_unload(t){const e=t.uniforms;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t].value&&void 0!==e[t].value.dispose&&e[t].value.dispose();t.dispose()}_preload(){const t=new Map;t.set("basic",n),t.set("basic_alpha",o),t.set("line",a.default),t.set("plumes",r),t.set("sprite",l),t.set("sprite_particles",c),t.set("trail",h.default);for(const[e,i]of t){const t=this._load(e,i),s=new Resource(t);s.useCount+=1,this._cache.set(e,s)}}_load(t,e){try{const t={};if(e.uniforms)for(const[i,n]of Object.entries(e.uniforms))["modelMatrix","modelViewMatrix","projectionMatrix","viewMatrix","normalMatrix","cameraPosition"].includes(i)||(t[i]=new s.THREE.Uniform(this._getUniformValueFromType(n)));let i=!1,n=!0,o=s.THREE.FrontSide,a=s.THREE.NoBlending;if(e.properties){switch(!0===e.properties.transparent&&(i=!0),!1===e.properties.depthWrite&&(n=!1),e.properties.side){case"front":o=s.THREE.FrontSide;break;case"back":o=s.THREE.BackSide;break;case"double":o=s.THREE.DoubleSide}switch(e.properties.blending){case"normal":a=s.THREE.NormalBlending;break;case"additive":a=s.THREE.AdditiveBlending;break;case"subtractive":a=s.THREE.SubtractiveBlending;break;case"multiply":a=s.THREE.MultiplyBlending;break;case"custom":a=s.THREE.CustomBlending}}if("object"!=typeof e.vertex||"string"!=typeof e.vertex.code)throw new Error("Missing vertex stage code.");if("object"!=typeof e.fragment||"string"!=typeof e.fragment.code)throw new Error("Missing fragment stage code.");if(Array.isArray(e.vertex.extensions)){let t="";for(const i of e.vertex.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#extension GL_"+i+": enable\n");for(const i of e.vertex.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#define L_"+i+" true\n"),s.Capabilities.isWebGL2()&&"EXT_frag_depth"===i&&(t+="#define L_"+i+" true\n");e.vertex.code=t+e.vertex.code}if(Array.isArray(e.fragment.extensions)){let t="";for(const i of e.fragment.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#extension GL_"+i+": enable\n");for(const i of e.fragment.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#define L_"+i+" true\n");e.fragment.code=t+e.fragment.code}const r=new s.THREE.RawShaderMaterial({uniforms:t,vertexShader:s.ShaderFix.fix(e.vertex.code,"vertex"),fragmentShader:s.ShaderFix.fix(e.fragment.code,"fragment"),transparent:i,depthWrite:n,side:o,blending:a});return r.needsUpdate=!0,r}catch(e){throw new Error('while processing material "'+t+'", '+e.message)}}_getUniformValueFromType(t){switch(t=t.replace(/.* /,"")){case"int":case"float":return 0;case"ivec2":case"vec2":return new s.THREE.Vector2(0,0);case"ivec3":case"vec3":return new s.THREE.Vector3(0,0,0);case"ivec4":case"vec4":return new s.THREE.Vector4(0,0,0,0);case"mat3":return new s.THREE.Matrix3;case"mat4":return new s.THREE.Matrix4;case"sampler2D":case"samplerCube":return null}if(t.endsWith("]")){const e=t.indexOf("["),i=t.indexOf("]"),s=t.substring(0,e),n=Number.parseInt(t.substring(e+1,i)),o=[];for(let t=0;t<n;t++)o.push(this._getUniformValueFromType(s));return o}throw new Error("Unrecognized type: "+t+".")}_clone(t,e){const i=t.clone();for(const[e,i]of Object.entries(t.uniforms)){const s=i.value;if(Array.isArray(s)){const i=s[0];if(i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)){t.uniforms[e].value=[];for(let i=0;i<s.length;i++)t.uniforms[e].value[i]=s[i].clone()}}}return i.needsUpdate=!0,this._clonedMaterials.set(i,e),i}}},function(t){"use strict";t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","color":"vec4"},"properties":{},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nvarying highp float vDepth;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t){"use strict";t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","color":"vec4"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nvarying highp float vDepth;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t,e,i){"use strict";i.r(e),e.default={uniforms:{modelViewMatrix:"mat4",projectionMatrix:"highp mat4",nearDistance:"float",midDistance:"float",pixelSize:"vec2",alphaMultiplier:"float",dashLength:"float",dashGapLength:"float",glowWidth:"float"},properties:{transparent:!0,depthWrite:!1,side:"double",blending:"additive"},vertex:{extensions:["EXT_frag_depth"],code:"\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec3 positionPrev;\n\t\t\tattribute vec3 positionNext;\n\t\t\tattribute vec4 color;\n\t\t\tattribute float width;\n\t\t\tattribute float dashOffset;\n\n\t\t\tuniform mat4 modelViewMatrix;\n\t\t\tuniform mat4 projectionMatrix;\n\t\t\tuniform float nearDistance;\n\t\t\tuniform float midDistance;\n\t\t\tuniform vec2 pixelSize;\n\t\t\tuniform mediump float glowWidth;\n\n\t\t\tvarying highp float fDepth;\n\t\t\tvarying vec4 fColor;\n\t\t\tvarying float fDashOffset;\n\t\t\tvarying float fWidth;\n\t\t\tvarying float fOffsetScalar;\n\n\t\t\tvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\n\t\t\t\t#ifndef L_EXT_frag_depth\n\t\t\t\t\tfloat z = projectedPosition.w;\n\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t\t\t\t}\n\t\t\t\t#else\n\t\t\t\t\tprojectedPosition.w = viewPosition.y;\n\t\t\t\t#endif\n\t\t\t\treturn projectedPosition;\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\t// Get the line vertices into pixel space.\n\t\t\t\tvec4 view_center = modelViewMatrix * vec4(position, 1.0);\n\t\t\t\tvec4 view_prev = modelViewMatrix * vec4(positionPrev, 1.0);\n\t\t\t\tvec4 view_next = modelViewMatrix * vec4(positionNext, 1.0);\n\t\t\t\tvec4 projected_center = projectionMatrix * view_center;\n\t\t\t\tvec4 projected_prev = projectionMatrix * view_prev;\n\t\t\t\tvec4 projected_next = projectionMatrix * view_next;\n\t\t\t\tvec2 ndc_center = projected_center.xy / view_center.y;\n\t\t\t\tvec2 ndc_prev = projected_prev.xy / view_prev.y;\n\t\t\t\tvec2 ndc_next = projected_next.xy / view_next.y;\n\t\t\t\tvec2 pixel_center = (ndc_center.xy + 1.0) / 2.0 * pixelSize;\n\t\t\t\tvec2 pixel_prev = (ndc_prev.xy + 1.0) / 2.0 * pixelSize;\n\t\t\t\tvec2 pixel_next = (ndc_next.xy + 1.0) / 2.0 * pixelSize;\n\n\t\t\t\t// Get the offset of the part perpendicular to the lines.\n\t\t\t\tvec2 l0 = normalize(pixel_center - pixel_prev);\n\t\t\t\tvec2 l1 = normalize(pixel_next - pixel_center);\n\t\t\t\tfloat offsetScalar = sign(width) * (abs(width) / 2.0 + glowWidth);\n\t\t\t\tvec2 offset = vec2(offsetScalar, offsetScalar);\n\t\t\t\tif (pixel_center == pixel_prev) {\n\t\t\t\t\tif (pixel_center == pixel_next) {\n\t\t\t\t\t\toffset = vec2(0.0, 0.0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\toffset *= vec2(-l1.y, l1.x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pixel_center == pixel_next) {\n\t\t\t\t\toffset *= vec2(-l0.y, l0.x);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\toffset *= normalize(vec2(-l0.y - l1.y, l0.x + l1.x));\n\t\t\t\t\toffset /= max(0.25, sqrt((1.0 + dot(l0, l1)) / 2.0));\n\t\t\t\t}\n\n\t\t\t\t// Re-add the perpendicular part to the center as the final vertex.\n\t\t\t\tndc_center = (pixel_center + offset) / pixelSize * 2.0 - 1.0;\n\t\t\t\tprojected_center = vec4(ndc_center * view_center.y, projected_center.z, projected_center.w);\n\t\t\t\tvec4 log_depth_vert = log_depth_vert_func(projected_center, view_center, nearDistance, midDistance);\n\t\t\t\tgl_Position = log_depth_vert;\n\n\t\t\t\t// Set the varyings.\n\t\t\t\tfDepth = projected_center.w;\n\t\t\t\tfColor = color;\n\t\t\t\tfDashOffset = dashOffset;\n\t\t\t\tfWidth = width;\n\t\t\t\tfOffsetScalar = offsetScalar;\n\t\t\t}\n\t\t"},fragment:{extensions:["EXT_frag_depth"],code:"\n\t\t\tprecision mediump float;\n\n\t\t\tuniform highp mat4 projectionMatrix;\n\t\t\tuniform float alphaMultiplier;\n\t\t\tuniform float dashLength;\n\t\t\tuniform float dashGapLength;\n\t\t\tuniform float glowWidth;\n\n\t\t\tvarying highp float fDepth;\n\t\t\tvarying vec4 fColor;\n\t\t\tvarying float fDashOffset;\n\t\t\tvarying float fWidth;\n\t\t\tvarying float fOffsetScalar;\n\n\t\t\thighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t#else\n\t\t\t\t\treturn 0.0;\n\t\t\t\t#endif\n\t\t\t}\n\n\t\t\tfloat line_dash_func() {\n\t\t\t\tfloat u = mod(fDashOffset, dashLength + dashGapLength);\n\t\t\t\treturn float(u < dashLength);\n\t\t\t}\n\n\t\t\tfloat edgeGlow() {\n\t\t\t\tif (glowWidth > 0.0) {\n\t\t\t\t\tfloat value = clamp((fWidth / 2.0 + glowWidth - abs(fOffsetScalar)) / glowWidth, 0.0, 1.0);\n\t\t\t\t\tif (value < 1.0) {\n\t\t\t\t\t\tvalue *= 0.75;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t\treturn 1.0;\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\thighp float log_depth_frag = log_depth_frag_func(fDepth, projectionMatrix);\n\t\t\t\tgl_FragColor = fColor;\n\t\t\t\tgl_FragColor.a *= alphaMultiplier * edgeGlow() * line_dash_func();\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\tgl_FragDepthEXT = log_depth_frag;\n\t\t\t\t#endif\n\t\t\t}\n\t\t"}}},function(t){"use strict";t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","colorTexture":"sampler2D","colorMultiplier":"vec4","speed":"float","time":"float"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec2 uv;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n\\tvUV = uv;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform sampler2D colorTexture;\\nuniform vec4 colorMultiplier;\\nuniform float speed;\\nuniform float time;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvec2 v2_construct_func(float x, float y) {\\n\\treturn vec2(x, y);\\n}\\nfloat s_mult_func(float s1, float s2) {\\n\\treturn s1 * s2;\\n}\\nfloat s_mod_func(float s1, float s2) {\\n\\treturn mod(s1, s2);\\n}\\nvec2 v2s_mult_func(vec2 v, float s) {\\n\\treturn v * s;\\n}\\nvec2 v2_add_func(vec2 v1, vec2 v2) {\\n\\treturn v1 + v2;\\n}\\nvec4 texture_func(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\\n\\treturn v1 * v2;\\n}\\nfloat s_sub_func(float s1, float s2) {\\n\\treturn s1 - s2;\\n}\\nvec4 alpha_mult_func(vec4 color, float alpha) {\\n\\treturn vec4(color.rgb, color.a * alpha);\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tvec2 yAxis = v2_construct_func(0.0, 1.0);\\n\\tfloat yMultiplier = s_mult_func(time, speed);\\n\\tfloat yMultiplierMod = s_mod_func(yMultiplier, 1.0);\\n\\tvec2 uvOffset = v2s_mult_func(yAxis, yMultiplierMod);\\n\\tvec2 finalUV = v2_add_func(vUV, uvOffset);\\n\\tvec4 textureOffset = texture_func(colorTexture, finalUV);\\n\\tvec4 color = v4v4_mult_func(textureOffset, colorMultiplier);\\n\\tfloat fade = s_sub_func(1.0, vUV.y);\\n\\tvec4 color_with_fade = alpha_mult_func(color, fade);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color_with_fade;\\n}\\n"}}')},function(t){"use strict";t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","pixelBased":"float","color":"vec4","colorTexture":"sampler2D"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec2 uv;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nuniform float pixelBased;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvec4 pixel_based_func(float pixelBased, vec4 projectedPosition) {\\n\\tif (pixelBased != 0.0) {\\n\\t\\tprojectedPosition /= abs(projectedPosition.w);\\n\\t}\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tvec4 pixel_based_projected_position = pixel_based_func(pixelBased, log_depth_vert);\\n\\tgl_Position = pixel_based_projected_position;\\n\\tvDepth = projected_position.w;\\n\\tvUV = uv;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nuniform sampler2D colorTexture;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvec4 texture_func(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\\n\\treturn v1 * v2;\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tvec4 textureColor = texture_func(colorTexture, vUV);\\n\\tvec4 finalColor = v4v4_mult_func(textureColor, color);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = finalColor;\\n}\\n"}}')},function(t){"use strict";t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"additive"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec4 color;\\nattribute vec3 offset;\\nattribute float scale;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying vec2 fPosition;\\nvec4 v4v4_add_func(vec4 v1, vec4 v2) {\\n\\treturn v1 + v2;\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 v3s_extend_func(vec3 v, float s) {\\n\\treturn vec4(v, s);\\n}\\nvec4 v4s_mult_func(vec4 v, float s) {\\n\\treturn v * s;\\n}\\nvoid main() {\\n\\tvec4 view_offset = mv3_mult_func(modelViewMatrix, offset, 1.0);\\n\\tvec4 position_v4 = v3s_extend_func(position, 0.0);\\n\\tvec4 position_scaled = v4s_mult_func(position_v4, scale);\\n\\tvec4 view_position = v4v4_add_func(view_offset, position_scaled);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n\\tfColor = color;\\n\\tfPosition = position.xz;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying vec2 fPosition;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nfloat v2_length_func(vec2 v) {\\n\\treturn length(v);\\n}\\nfloat s_sub_func(float s1, float s2) {\\n\\treturn s1 - s2;\\n}\\nvec4 v4_construct_func(float x, float y, float z, float w) {\\n\\treturn vec4(x, y, z, w);\\n}\\nvec4 v4s_mult_func(vec4 v, float s) {\\n\\treturn v * s;\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tfloat distance_from_center = v2_length_func(fPosition);\\n\\tfloat distance_from_edge = s_sub_func(1.0, distance_from_center);\\n\\tvec4 c2olor = v4_construct_func(1.0, 1.0, 1.0, 1.0);\\n\\tvec4 color = v4s_mult_func(fColor, distance_from_edge);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t,e,i){"use strict";i.r(e),e.default={uniforms:{modelViewMatrix:"mat4",projectionMatrix:"highp mat4",nearDistance:"float",midDistance:"float",pixelSize:"vec2",alphaMultiplier:"float",dashLength:"float",dashGapLength:"float",glowWidth:"float",indexStart:"float",indexCount:"float",indexLength:"float",color:"vec4",alphaFade:"float",widthMin:"float",widthMax:"float"},properties:{transparent:!0,depthWrite:!1,side:"double",blending:"additive"},vertex:{extensions:["EXT_frag_depth"],code:"\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec3 positionPrev;\n\t\t\tattribute vec3 positionNext;\n\t\t\tattribute float side;\n\t\t\tattribute float index;\n\t\t\tattribute float dashOffset;\n\n\t\t\tuniform mat4 modelViewMatrix;\n\t\t\tuniform mat4 projectionMatrix;\n\t\t\tuniform float nearDistance;\n\t\t\tuniform float midDistance;\n\t\t\tuniform vec2 pixelSize;\n\t\t\tuniform mediump float glowWidth;\n\t\t\tuniform float indexStart;\n\t\t\tuniform float indexCount;\n\t\t\tuniform float indexLength;\n\t\t\tuniform float widthMin;\n\t\t\tuniform float widthMax;\n\n\t\t\tvarying highp float fDepth;\n\t\t\tvarying vec4 fColor;\n\t\t\tvarying float fDashOffset;\n\t\t\tvarying float fWidth;\n\t\t\tvarying float fOffsetScalar;\n\t\t\tvarying float fIndexU;\n\n\t\t\tvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\n\t\t\t\t#ifndef L_EXT_frag_depth\n\t\t\t\t\tfloat z = projectedPosition.w;\n\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t\t\t\t}\n\t\t\t\t#else\n\t\t\t\t\tprojectedPosition.w = viewPosition.y;\n\t\t\t\t#endif\n\t\t\t\treturn projectedPosition;\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\t// Get the width depending on the length.\n\t\t\t\tfloat indexU = mod(index - indexStart + indexLength, indexLength) / (indexCount - 1.0);\n\t\t\t\tfloat width = mix(widthMin, widthMax, indexU);\n\n\t\t\t\t// Get the line vertices into pixel space.\n\t\t\t\tvec4 view_center = modelViewMatrix * vec4(position, 1.0);\n\t\t\t\tvec4 view_prev = modelViewMatrix * vec4(positionPrev, 1.0);\n\t\t\t\tvec4 view_next = modelViewMatrix * vec4(positionNext, 1.0);\n\t\t\t\tvec4 projected_center = projectionMatrix * view_center;\n\t\t\t\tvec4 projected_prev = projectionMatrix * view_prev;\n\t\t\t\tvec4 projected_next = projectionMatrix * view_next;\n\t\t\t\tvec2 ndc_center = projected_center.xy / view_center.y;\n\t\t\t\tvec2 ndc_prev = projected_prev.xy / view_prev.y;\n\t\t\t\tvec2 ndc_next = projected_next.xy / view_next.y;\n\t\t\t\tvec2 pixel_center = (ndc_center.xy + 1.0) / 2.0 * pixelSize;\n\t\t\t\tvec2 pixel_prev = (ndc_prev.xy + 1.0) / 2.0 * pixelSize;\n\t\t\t\tvec2 pixel_next = (ndc_next.xy + 1.0) / 2.0 * pixelSize;\n\n\t\t\t\t// Get the offset of the part perpendicular to the lines.\n\t\t\t\tvec2 l0 = normalize(pixel_center - pixel_prev);\n\t\t\t\tvec2 l1 = normalize(pixel_next - pixel_center);\n\t\t\t\tfloat offsetScalar = side * (width / 2.0 + glowWidth);\n\t\t\t\tvec2 offset = vec2(offsetScalar, offsetScalar);\n\t\t\t\tif (pixel_center == pixel_prev) {\n\t\t\t\t\tif (pixel_center == pixel_next) {\n\t\t\t\t\t\toffset = vec2(0.0, 0.0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\toffset *= vec2(-l1.y, l1.x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (pixel_center == pixel_next) {\n\t\t\t\t\toffset *= vec2(-l0.y, l0.x);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\toffset *= normalize(vec2(-l0.y - l1.y, l0.x + l1.x));\n\t\t\t\t\toffset /= max(0.25, sqrt((1.0 + dot(l0, l1)) / 2.0));\n\t\t\t\t}\n\n\t\t\t\t// Re-add the perpendicular part to the center as the final vertex.\n\t\t\t\tndc_center = (pixel_center + offset) / pixelSize * 2.0 - 1.0;\n\t\t\t\tprojected_center = vec4(ndc_center * view_center.y, projected_center.z, projected_center.w);\n\t\t\t\tvec4 log_depth_vert = log_depth_vert_func(projected_center, view_center, nearDistance, midDistance);\n\t\t\t\tgl_Position = log_depth_vert;\n\n\t\t\t\t// Set the varyings.\n\t\t\t\tfDepth = projected_center.w;\n\t\t\t\tfIndexU = indexU;\n\t\t\t\tfDashOffset = dashOffset;\n\t\t\t\tfWidth = width;\n\t\t\t\tfOffsetScalar = offsetScalar;\n\t\t\t}\n\t\t"},fragment:{extensions:["EXT_frag_depth"],code:"\n\t\t\tprecision mediump float;\n\n\t\t\tuniform highp mat4 projectionMatrix;\n\t\t\tuniform vec4 color;\n\t\t\tuniform float alphaMultiplier;\n\t\t\tuniform float alphaFade;\n\t\t\tuniform float dashLength;\n\t\t\tuniform float dashGapLength;\n\t\t\tuniform float glowWidth;\n\n\t\t\tvarying highp float fDepth;\n\t\t\tvarying float fIndexU;\n\t\t\tvarying float fDashOffset;\n\t\t\tvarying float fWidth;\n\t\t\tvarying float fOffsetScalar;\n\n\t\t\thighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t#else\n\t\t\t\t\treturn 0.0;\n\t\t\t\t#endif\n\t\t\t}\n\n\t\t\tfloat line_dash_func() {\n\t\t\t\tfloat u = mod(fDashOffset, dashLength + dashGapLength);\n\t\t\t\treturn float(u < dashLength);\n\t\t\t}\n\n\t\t\tfloat edgeGlow() {\n\t\t\t\tif (glowWidth > 0.0) {\n\t\t\t\t\tfloat value = clamp((fWidth / 2.0 + glowWidth - abs(fOffsetScalar)) / glowWidth, 0.0, 1.0);\n\t\t\t\t\tif (value < 1.0) {\n\t\t\t\t\t\tvalue *= 0.75;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t\treturn 1.0;\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\thighp float log_depth_frag = log_depth_frag_func(fDepth, projectionMatrix);\n\t\t\t\tgl_FragColor = color;\n\t\t\t\tgl_FragColor.a *= alphaMultiplier * edgeGlow() * line_dash_func() * mix(alphaFade, 1.0, fIndexU);\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\tgl_FragDepthEXT = log_depth_frag;\n\t\t\t\t#endif\n\t\t\t}\n\t\t\t"}}},function(t,e,i){"use strict";i.r(e);var s=i(6);class Scene extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._entities=new s.Collection(this,new Map([["entity",s.Entity]])),this._controllerDependencyGraph=new s.DependencyGraph,this._ambientLightColor=new s.Color(.02,.02,.02),this._ambientLightColor.freeze(),this._lightSources=[],this._threeJsScene=null,this._threeJsScene=new s.THREE.Scene,this._controllerDependencyGraph.setUpdateItemCallback((function(t){t.getEntity().isEnabled()&&t.getCoverage().contains(t.getEntity().getScene().getEngine().getTime())&&t.isEnabled()&&t.__update()})),this._controllerDependencyGraph.setCompareItemCallback((function(t,e){if(t===e)return!1;if(!(t.getEntity().isEnabled()&&e.getEntity().isEnabled()&&t.isEnabled()&&e.isEnabled()))return!1;const i=t.getEntity().getScene().getEngine().getTime();if(!t.getCoverage().contains(i)||!e.getCoverage().contains(i))return!1;if(t.getEntity()===e.getEntity()){const i=t.getEntity();for(let s=0,n=i.getNumControllers();s<n;s++){const n=i.getController(s);if(e===n)return!0;if(t===n)break}}if(t.getEntity().getParent()===e.getEntity()){if(t.hasModifiedState("position")&&e.hasModifiedState("position")||t.hasModifiedState("velocity")&&e.hasModifiedState("velocity"))return!0;for(const i of e.__modifiedStates)if(t.hasDependentState("parent",i))return!0}for(const i of e.__modifiedStates)if(t.hasDependentState(e.getEntity().getName(),i))return!0;return!1}))}getEngine(){return this.__getCollectionParent()}getEntity(t){return this._entities.get(t)}getNumEntities(){return this._entities.size}addEntity(t){return this._entities.add("entity",t)}removeEntity(t){this._entities.remove(t)}get(t,e,i=0){const s=this._entities.get(t);return void 0===e||null===s?s:s.get(e,i)}getControllerDependencyGraph(){return this._controllerDependencyGraph}getAmbientLightColor(){return this._ambientLightColor}setAmbientLightColor(t){this._ambientLightColor.thaw(),this._ambientLightColor.copy(t),this._ambientLightColor.freeze()}__addLightSource(t,e=0){for(let i=0,s=this._lightSources.length;i<s;i++){const s=this._lightSources[i];if(s.getEntityName()===t&&s.getComponentTypeIndex()===e)throw new Error(`Light source on ${t} with type index ${e} already added.`)}const i=new s.ComponentRef(this);i.setByType(t,"lightSource",e),this._lightSources.push(i)}__removeLightSource(t,e=0){for(let i=0,s=this._lightSources.length;i<s;i++){const s=this._lightSources[i];if(s.getEntityName()===t&&s.getComponentTypeIndex()===e)return void this._lightSources.splice(i,1)}throw new Error(`Light source on ${t} with type index ${e} not found.`)}getLightSource(t){return 0<=t&&t<this._lightSources.length?this._lightSources[t].get():null}getNumLightSources(){return this._lightSources.length}getLoadedPromise(){const t=[];for(let e=0,i=this._entities.size;e<i;e++)t.push(this._entities.get(e).getLoadedPromise());return Promise.all(t).then()}__destroy(){super.__destroy(),this._entities.__destroy()}getThreeJsScene(){return this._threeJsScene}__update(){const t=this.getEngine().getTime();for(let e=this._entities.size-1;e>=0;e--){const i=this._entities.get(e);i.__updateParent(t),i.__updateIsInCoverages(t)}this._controllerDependencyGraph.update()}__updateVisuals(){for(let t=this._entities.size-1;t>=0;t--){const e=this._entities.get(t);e.isInPositionCoverage()&&e.isEnabled()&&this._entities.get(t).__updateVisuals()}}__removeCameraDependents(t){for(let e=this._entities.size-1;e>=0;e--)this._entities.get(e).__removeCameraDependents(t)}}e.default=Scene},function(t,e,i){"use strict";i.r(e);var s=i(6);class TextureLoader extends s.THREE.Loader{constructor(t,e){super(),this._downloader=t,this._renderer=e,this._crossOrigin="anonymous",this._path=void 0,this._white=null,this._black=null,this._clear=null,this._pink=null,this._gray=null,this._threeJsTextureLoader=new s.THREE.TextureLoader,this._threeJsTextureLoader.setCrossOrigin(this._crossOrigin),this._threeJsTextureLoader.setPath(this._path),this._white=TextureLoader._newTexture(new s.Color(1,1,1,1)),this._black=TextureLoader._newTexture(new s.Color(0,0,0,1)),this._clear=TextureLoader._newTexture(new s.Color(0,0,0,0)),this._pink=TextureLoader._newTexture(new s.Color(1,105/255,180/255,1)),this._gray=TextureLoader._newTexture(new s.Color(.4,.4,.4,1)),s.THREE.DefaultLoadingManager.addHandler(/.$/i,this)}async loadIntoUniform(t,e,i){return this.loadTexture(e,i).then((e=>{null!==t.value&&t.value.dispose(),t.value=e}))}async loadCubeTexture(t,e){const i=new s.THREE.CubeTexture,o=[];for(let s=0;s<6;s++){const a=t.replace("$FACE",n[s]);o.push(new Promise((t=>{this.loadTexture(a,e).then((e=>{i.images[s]=e.image,t()}))})))}return Promise.all(o).then((()=>(i.needsUpdate=!0,i)))}async loadTexture(t,e){return new Promise(((i,s)=>{this.load(t,(t=>{i(t)}),void 0,(e=>{s(new Error(`Failed to load ${t}: ${e}`))}),e)}))}generateEnvMap(t){let e=t;if(!(t instanceof s.THREE.CubeTexture)){const i={depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!0,minFilter:s.THREE.LinearMipMapLinearFilter,magFilter:s.THREE.LinearFilter};e=new s.THREE.WebGLCubeRenderTarget(512,i).fromEquirectangularTexture(this._renderer,t).texture}const i=new s.THREE.PMREMGenerator(this._renderer);i.compileEquirectangularShader();return i.fromEquirectangular(e).texture}load(t,e,i,n,o){t=this._downloader.processUrl(t);let a=null;if("white"===t?a=this._white:"black"===t?a=this._black:"clear"===t?a=this._clear:"pink"===t?a=this._pink:"gray"===t&&(a=this._gray),null!==a)e(a);else if(t.includes(".mp4")){const i=document.createElement("video");i.src=t,i.muted=!0,i.playsInline=!0,i.autoplay=!0,i.loop=!1,i.crossOrigin="anonymous",i.play(),a=new s.THREE.VideoTexture(i),a.format=s.THREE.RGBAFormat,a.flipY=!1,a.needsUpdate=!0,i.onplaying=()=>{e(a)},i.onerror=t=>{n(t.toString())}}else this._threeJsTextureLoader.load(t,(t=>{t.flipY=!1,!1===o&&(t.minFilter=s.THREE.LinearFilter,t.generateMipmaps=!1),t.needsUpdate=!0,e(t)}),void 0,(t=>{n(t.message)}));return a}get crossOrigin(){return this._crossOrigin}set crossOrigin(t){this._crossOrigin=t,this._threeJsTextureLoader&&this._threeJsTextureLoader.setCrossOrigin(this._crossOrigin)}setCrossOrigin(t){return this.crossOrigin=t,this}get path(){return this._path}set path(t){this._path=t,this._threeJsTextureLoader&&this._threeJsTextureLoader.setPath(this._path)}setPath(t){return this.path=t,this}static _newTexture(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d");return i.fillStyle="rgba("+255*t.r+","+255*t.g+","+255*t.b+","+255*t.a+")",i.fillRect(0,0,1,1),new s.THREE.CanvasTexture(e)}}const n=["posx","negx","posy","negy","posz","negz"];e.default=TextureLoader},function(t,e,i){"use strict";i.r(e);var s=i(6);class TextureLoaderCompressed extends s.TextureLoader{constructor(t,e,i){super(t,i),this._config=e,this._threeJsKTXLoader=new s.ThreeJsKTXLoader,this._threeJsKTXLoader.setCrossOrigin(this._crossOrigin),this._threeJsKTXLoader.setPath(this._path)}load(t,e,i,n,o){if(null!==t.match(/_n\.[^.]+$/))return super.load(t,e,i,n,o);let a=null;return"white"===(t=this._downloader.processUrl(t))?a=this._white:"black"===t?a=this._black:"clear"===t?a=this._clear:"pink"===t&&(a=this._pink),null!==a?e(a):(t=t.replace(/\.(\w+)$/,"-"+s.Capabilities.__getCompressedTextureExtension()+".ktx"),this._threeJsKTXLoader.load(t,(t=>{t.flipY=!1,t.needsUpdate=!0,!1===o&&(t.minFilter=s.THREE.LinearFilter,t.generateMipmaps=!1),t.ktxFormat=t.format,e(t)}),void 0,(t=>{n(t.message)}))),a}}e.default=TextureLoaderCompressed},function(t,e,i){"use strict";i.r(e),e.default="44.0.0"},function(t,e,i){"use strict";i.r(e);var s=i(6);class Viewport extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._camera=null,this._div=document.createElement("div"),this._bounds=new s.Rect(0,0,0,0),this._bounds.freeze(),this._backgroundColor=new s.Color(0,0,0,1),this._backgroundColor.freeze(),this._threeJsBackgroundColor=new s.THREE.Color,this._div.style.position="absolute",this._div.style.overflow="hidden",this._div.id=e||"",this._div.classList.add("viewport"),this._enabled||(this._div.style.display="none"),this.getEngine().getViewportDiv().appendChild(this._div);const n=this.getEngine().getRootDiv();this._bounds.thaw(),this._bounds.set(this._div.offsetLeft-n.offsetLeft,this._div.offsetTop-n.offsetTop,this._div.offsetWidth,this._div.offsetHeight),this._bounds.freeze();const o=this.getEngine().getInput();null===o.getActiveViewport()&&o.__setActiveViewport(this)}getEngine(){return this.__getCollectionParent()}getDiv(){return this._div}getBounds(){return this._bounds}getBackgroundColor(){return this._backgroundColor}setBackgroundColor(t){this._backgroundColor.thaw(),this._backgroundColor=t,this._backgroundColor.freeze(),this._threeJsBackgroundColor.setRGB(this._backgroundColor.r,this._backgroundColor.g,this._backgroundColor.b)}getCamera(){return this._camera}setCamera(t){this._camera=t,null!==this._camera&&this._camera.__setViewport(this)}isEnabled(){return this._enabled}setEnabled(t){this._enabled=t,this._enabled?this._div.style.display="block":this._div.style.display="none"}getNormalSpacePositionFromPixelSpacePosition(t,e){t.x=2*(e.x-this._bounds.origin.x)/this._bounds.size.x-1,t.y=1-2*(e.y-this._bounds.origin.y)/this._bounds.size.y,t.z=1}getPixelSpacePositionFromNormalSpacePosition(t,e){-1<e.z&&e.z<1?(t.x=this._bounds.size.x*(e.x+1)/2+this._bounds.origin.x,t.y=this._bounds.size.y*(1-e.y)/2+this._bounds.origin.y):t.copy(s.Vector2.NaN)}getPixelSpaceRadiusFromNormalSpaceRadius(t){return t*Math.max(this._bounds.size.x,this._bounds.size.y)}getNormalSpaceRadiusFromPixelSpaceRadius(t){return t/Math.max(this._bounds.size.x,this._bounds.size.y)}__destroy(){super.__destroy(),this._div.parentNode.removeChild(this._div)}__updateViewportVariables(){this._enabled&&(this._bounds.thaw(),this._bounds.set(this._div.offsetLeft,this._div.offsetTop,this._div.offsetWidth,this._div.offsetHeight),this._bounds.freeze(),null!==this._camera&&this._camera.__updateCameraVariablesForConnectedScene())}__render(){if(!this._enabled)return;const t=this.getEngine().__getThreeJsRenderer(),e=this.getEngine().getRootDiv().offsetHeight-this._div.offsetTop-this._div.offsetHeight;t.setViewport(this._bounds.origin.x,e,this._bounds.size.x,this._bounds.size.y),t.setScissor(this._bounds.origin.x,e,this._bounds.size.x,this._bounds.size.y),this._threeJsBackgroundColor.setRGB(this._backgroundColor.r,this._backgroundColor.g,this._backgroundColor.b),t.setClearColor(this._threeJsBackgroundColor,this._backgroundColor.a),null!==this._camera?(this._camera.__prepareForRender(),this._camera.__render()):this.getEngine().__getThreeJsRenderer().clear()}}e.default=Viewport},function(t,e,i){"use strict";i.r(e);var s=i(6);class BaseComponent extends s.EntityItem{constructor(t,e,i){super(t,e,i),this._radius=.5,this._pixelSpaceRadiusPerCamera=new s.FastMap,this._greatestPixelSpaceRadius=0,this._loadState="unloaded",this._forceLoaded=!1,this._resourcesLoadedCallback=null,this._resourcesUnloadedCallback=null,this._loadedPromise=Promise.resolve(),this._excludedCameras=new Set,this._threeJsObjects=[],this._threeJsMaterials=[],this._usesEntityOrientation=!1}__destroy(){"loaded"===this._loadState&&this._unloadResources(),super.__destroy()}setEnabled(t){super.setEnabled(t),this.__updateLoadState()}getRadius(){return this._radius}__setRadius(t){this._radius=t}getPixelSpaceRadiusInCamera(t){return this._pixelSpaceRadiusPerCamera.get(t)}getGreatestPixelSpaceRadius(){return this._greatestPixelSpaceRadius}getThreeJsObjects(){return this._threeJsObjects}getThreeJsMaterials(){return this._threeJsMaterials}getThreeJsObjectByName(t){for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e];if(i.name===t)return i}return null}getLoadState(){return this._loadState}setForceLoaded(t){this._forceLoaded=t,this._forceLoaded&&"unloaded"===this._loadState&&this._loadResources()}__updateLoadState(){const t=this.getEntity(),e=t.isEnabled()&&this.isEnabled(),i=t.isInPositionCoverage()&&(t.isInOrientationCoverage()||!this._usesEntityOrientation);e&&(this._forceLoaded||i&&this._greatestPixelSpaceRadius>.5)&&"unloaded"===this._loadState?this._loadResources():e&&(this._forceLoaded||i&&!(this._greatestPixelSpaceRadius<.25))||"loaded"!==this._loadState||this._unloadResources()}resetResources(){"loading"===this._loadState?this._loadState="unloaded":"loaded"===this._loadState&&this._unloadResources()}setResourcesLoadedCallback(t){this._resourcesLoadedCallback=t}setResourcesUnloadedCallback(t){this._resourcesUnloadedCallback=t}_loadResources(){this._loadState="loading",this._loadedPromise=this.__loadResources().then((()=>{"loading"===this._loadState?(this._loadState="loaded",null!==this._resourcesLoadedCallback&&this._resourcesLoadedCallback()):this._unloadResources()}))}_unloadResources(){this.__unloadResources(),this._loadState="unloaded",this._threeJsObjects=[],this._threeJsMaterials=[],null!==this._resourcesUnloadedCallback&&this._resourcesUnloadedCallback()}__loadResources(){return Promise.resolve()}__unloadResources(){}getLoadedPromise(){return this._loadedPromise}__updateCameraVariablesBase(t){const e=t.getViewport(),i=t.getNormalSpaceRadiusFromRadius(this._radius,this.getEntity().getCameraSpacePosition(t).magnitude()),s=e.getPixelSpaceRadiusFromNormalSpaceRadius(i);this._pixelSpaceRadiusPerCamera.set(t,s),this.__updateCameraVariables(t)}__updateBase(){this._greatestPixelSpaceRadius=0;for(let t=0,e=this._pixelSpaceRadiusPerCamera.size;t<e;t++){const e=this._pixelSpaceRadiusPerCamera.getAt(t).value;this._greatestPixelSpaceRadius<e&&(this._greatestPixelSpaceRadius=e)}this.__updateLoadState(),this.__update()}__prepareForRenderBase(t){if("loaded"===this._loadState)if(this._excludedCameras.has(t))for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].visible=!1;else{for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].visible=!0;if(this.__prepareForRender(t),!s.Capabilities.hasFragDepth())for(let e=0;e<this._threeJsMaterials.length;e++){const i=this._threeJsMaterials[e].uniforms;void 0!==i.nearDistance&&(i.nearDistance.value=t.getAutoNearDistance(),i.midDistance.value=t.getAutoMidDistance())}for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].updateMatrix()}}__updateCameraVariables(t){}__prepareForRender(t){}getUsesEntityOrientation(){return this._usesEntityOrientation}__setUsesEntityOrientation(t){this._usesEntityOrientation=t,this.__updateLoadState()}isExcludedFromCamera(t){return this._excludedCameras.has(t)}setExcludedFromCamera(t,e){!e&&this._excludedCameras.has(t)?this._excludedCameras.delete(t):e&&!this._excludedCameras.has(t)&&(this.__removeCameraDependents(t),this._excludedCameras.add(t))}__removeCameraDependentsBase(t){this._pixelSpaceRadiusPerCamera.delete(t),this.__removeCameraDependents(t)}__clearCameraDependentsBase(){this._pixelSpaceRadiusPerCamera.clear(),this.__clearCameraDependents()}__removeCameraDependents(t){}__clearCameraDependents(){}toString(){let t=0;for(let e=0,i=this.getEntity().getNumComponents();e<i;e++){const i=this.getEntity().getComponent(e);if(this===i)break;this.getType()===i.getType()&&(t+=1)}return this.getEntity().getName()+"."+this.getType()+"."+t}}BaseComponent._tempThreeJsQuaternion=new s.THREE.Quaternion,e.default=BaseComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class AtmosphereComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._density=0,this._scaleHeight=1,this._emissivity=0,this._color=new s.Color,this._color.freeze(),this._sunBrightness=1,this._sunsetColor=new s.Color,this._sunsetColor.freeze(),this._sunsetIntensity=0,this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getSpheroid(){return this._spheroidComponentRef.get()}getDensity(){return this._density}setDensity(t){this._density=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"density",t)}getScaleHeight(){return this._scaleHeight}setScaleHeight(t){this._scaleHeight=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"scaleHeight",t)}getEmissivity(){return this._emissivity}setEmissivity(t){this._emissivity=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"emissivity",t)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGB(this.getThreeJsMaterials()[0],"color",t)}getSunBrightness(){return this._sunBrightness}setSunBrightness(t){this._sunBrightness=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"sunBrightness",t)}getSunsetColor(){return this._sunsetColor}setSunsetColor(t){this._sunsetColor.thaw(),this._sunsetColor.copy(t),this._sunsetColor.freeze(),s.ThreeJsHelper.setUniformColorRGB(this.getThreeJsMaterials()[0],"sunsetColor",t)}getSunsetIntensity(){return this._sunsetIntensity}setSunsetIntensity(t){this._sunsetIntensity=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"sunsetIntensity",t)}setSpheroidReference(t){"string"==typeof t?this._spheroidComponentRef.setByName(this.getEntity().getName(),t):this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid",t)}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){this._spheroidComponentRef.update()}__prepareForRender(t){const e=s.Vector3.pool.get();e.neg(this.getEntity().getCameraSpacePosition(t)),e.rotateInverse(this.getEntity().getOrientation(),e),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"cameraPosition",e),s.Vector3.pool.release(e),s.MaterialUtils.setLightSourceUniforms(this.getThreeJsMaterials(),this.getEntity(),t),s.ThreeJsHelper.setUniformQuaternion(this.getThreeJsMaterials()[0],"entityOrientation",this.getEntity().getOrientation()),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}__loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),density:new s.THREE.Uniform(this._density),scaleHeight:new s.THREE.Uniform(this._scaleHeight),emissivity:new s.THREE.Uniform(this._emissivity),equatorialRadius:new s.THREE.Uniform(1),polarRadius:new s.THREE.Uniform(1),cameraPosition:new s.THREE.Uniform(new s.THREE.Vector3(1,0,0)),entityOrientation:new s.THREE.Uniform(new s.THREE.Vector4(1,0,0,0)),color:new s.THREE.Uniform(new s.THREE.Vector3(this._color.r,this._color.g,this._color.b)),sunBrightness:new s.THREE.Uniform(this._sunBrightness),sunsetColor:new s.THREE.Uniform(new s.THREE.Vector3(this._sunsetColor.r,this._sunsetColor.g,this._sunsetColor.b)),sunsetIntensity:new s.THREE.Uniform(this._sunsetIntensity),nearDistance:new s.THREE.Uniform(0),midDistance:new s.THREE.Uniform(0)},vertexShader:s.ShaderFix.fix(n,"vertex"),fragmentShader:s.ShaderFix.fix(o,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.NormalBlending});this.getThreeJsMaterials().push(t);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);this.getThreeJsObjects().push(e);const i=128,a=s.MathUtils.pi/63,r=s.MathUtils.twoPi/i,l=new Float32Array(24768),c=new Uint16Array(48384),h=s.Vector3.pool.get(),u=s.LatLonAlt.pool.get();for(let t=0;t<64;t++){u.lat=t*a-s.MathUtils.halfPi,u.alt=0;const e=Math.cos(u.lat),n=Math.sin(u.lat);for(let o=0;o<129;o++){u.lon=o*r-s.MathUtils.pi;const a=129*t+o;l[3*a+0]=e*Math.cos(u.lon),l[3*a+1]=e*Math.sin(u.lon),l[3*a+2]=n;const h=t*i+o;t<63&&o<i&&(c[6*h+0]=129*(t+0)+(o+0),c[6*h+1]=129*(t+1)+(o+0),c[6*h+2]=129*(t+1)+(o+1),c[6*h+3]=129*(t+0)+(o+0),c[6*h+4]=129*(t+1)+(o+1),c[6*h+5]=129*(t+0)+(o+1))}}return s.LatLonAlt.pool.release(u),s.Vector3.pool.release(h),s.ThreeJsHelper.setVertices(e.geometry,"position",l),s.ThreeJsHelper.setIndices(e.geometry,c),s.ThreeJsHelper.setRenderOrder(e,-1),s.ThreeJsHelper.useInDynEnvMap(e,!0),this._spheroidChangedCallback(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get(),e=this.getThreeJsMaterials()[0];null!==t?(this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())),void 0!==e&&(s.ThreeJsHelper.setUniformNumber(e,"equatorialRadius",t.getEquatorialRadius()),s.ThreeJsHelper.setUniformNumber(e,"polarRadius",t.getPolarRadius()))):(this.__setRadius(0),void 0!==e&&(s.ThreeJsHelper.setUniformNumber(e,"equatorialRadius",0),s.ThreeJsHelper.setUniformNumber(e,"polarRadius",0)))}}const n="\n\tattribute vec3 position;\n\tuniform mat4 projectionMatrix;\n\tuniform mat4 modelViewMatrix;\n\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tvoid main() {\n\t\tfloat scaleHeightMultiplier = 20.0;\n\t\tlocalPosition = vec3(position.x * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.y * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.z * (polarRadius + scaleHeight * scaleHeightMultiplier));\n\t\tvec4 viewPosition = modelViewMatrix * vec4(localPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",o="\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float density;\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\tuniform vec3 cameraPosition;\n\tuniform vec4 entityOrientation;\n\tuniform vec3 color;\n\tuniform float emissivity;\n\tuniform float sunBrightness;\n\tuniform vec3 sunsetColor;\n\tuniform float sunsetIntensity;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tconst int numIterations = 5;\n\n\t// Inverse rotate a vector by a quaternion.\n\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\treturn vec3(x, y, z);\n\t}\n\n\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t// Get the along the ray perpendicular to the sphere.\n\t\tfloat perpD = -dot(origin, direction);\n\t\tvec3 perp = origin + direction * perpD;\n\n\t\t// Figure out the sample distance.\n\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t// Figure out starting and ending sample points, and step distance.\n\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t}\n\n\t// Gets the density of the atmosphere at a given position.\n\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\treturn density * exp(min(radius - length(position), 0.0) / atmosphereScaleHeight);\n\t}\n\n\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\tfloat perpD = -dot(origin, direction);\n\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\tif (depth < 0.0) { // day\n\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t}\n\t\telse { // night\n\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t}\n\t}\n\n\tfloat easeInOut(float x, float sharpness) {\n\t\tfloat b = sharpness;\n\t\tif (x < 0.5) {\n\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t\telse {\n\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t}\n\n\tvec3 adjustOverbrightness(vec3 color) {\n\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\tif (maxColor > 1.0) {\n\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t}\n\t\treturn color;\n\t}\n\n\t// Calculates a glow around the light direction (the star).\n\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t}\n\n\t// Gets the color for an atmosphere.\n\tvec4 getColor(float totalDensity, vec3 lightColor, vec3 lightPosition, float spheroidRatio, vec3 positionS, vec3 cameraPositionS, vec3 cameraToPositionUnit) {\n\t\t// The color that will be added onto gl_FragColor.\n\t\tvec4 outColor;\n\n\t\t// Apply the total density to the transparency of the atmosphere.\n\t\toutColor.a = clamp(totalDensity, 0.0, 1.0);\n\n\t\t// Multiply it all together with the source light color.\n\t\toutColor.rgb = lightColor * color * clamp(pow(15.0 * totalDensity / (density * equatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t// Make it more opaque when lower down.\n\t\toutColor.a = mix(outColor.a, 1.0, getDensity(cameraPositionS, equatorialRadius + scaleHeight, 1.0, 2.0 * scaleHeight));\n\n\t\t// Make the alpha dependent on the brightness of the light.\n\t\toutColor.a *= length(lightColor) / sqrt(3.0);\n\n\t\t// Clamp it to make it clean for the day/night transition.\n\t\toutColor.a = clamp(outColor.a, 0.0, 1.0);\n\n\t\thighp vec3 lightPositionS = quatRotInv(entityOrientation, lightPosition);\n\t\tlightPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 lightToPosition = positionS - lightPositionS;\n\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t// Get the day level, from 0 to 1, and apply it to the alpha. Lots of tricks to get it looking good on earth.\n\t\tvec3 dayRefUp = normalize(cameraPositionS - min(0.0, dot(cameraPositionS, cameraToPositionUnit)) * cameraToPositionUnit);\n\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\toutColor.rgb *= mix(emissivity, 1.0, easeInOut(0.5 + 2.0 * dayLevel, 2.0));\n\t\toutColor.a *= mix(emissivity, 1.0, easeInOut(1.0 + 2.0 * dayLevel, 2.0));\n\n\t\t// Brighten up the atmosphere when looking from space toward the sun.\n\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\toutColor.a = clamp(outColor.a * (1.0 + glow(0.004, 1.0, lightDotCamera)), 0.0, 1.0);\n\n\t\t// Add narrower sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.00004, 1.0, lightDotCamera));\n\n\t\t// Add broader sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t// Apply the sunset.\n\t\tfloat lightDotHorizon = pow(clamp(1.0 - dot(lightToPositionUnit, dayRefUp), 0.0, 1.0), 2.0);\n\t\tfloat cameraDotHorizon = pow(clamp(1.0 - dot(cameraToPositionUnit, dayRefUp), 0.0, 1.0), 8.0);\n\t\tfloat sunsetAmount = sunsetIntensity * lightDotHorizon * cameraDotHorizon * glow(0.04, 0.5, lightDotCamera);\n\t\toutColor.rgb = mix(outColor.rgb, sunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\treturn outColor;\n\t}\n\n\tvoid main(void) {\n\t\t// Convert everything into a sphere frame.\n\t\tfloat spheroidRatio = equatorialRadius / polarRadius;\n\t\thighp vec3 positionS = localPosition;\n\t\thighp vec3 cameraPositionS = cameraPosition;\n\t\tpositionS.z *= spheroidRatio;\n\t\tcameraPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 cameraToPosition = positionS - cameraPositionS;\n\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t// Get the start and end of the sampling from the camera to the position.\n\t\tfloat start;\n\t\tfloat end;\n\t\tgetStartEndSamples(start, end, cameraPositionS, cameraToPositionUnit, 1.0e24, equatorialRadius, scaleHeight);\n\t\tfloat step = 1.0 / float(numIterations - 1);\n\t\tfloat stepDist = step * (end - start);\n\n\t\t// Do the sampling.\n\t\tfloat totalDensity = 0.0;\n\t\tfloat segmentStart = start;\n\t\tfor (int j = 0; j < numIterations; j++) {\n\t\t\t// Get the distance that this segment covers.\n\t\t\tfloat segDist = stepDist;\n\t\t\tif (j == 0 || j == numIterations - 1) {\n\t\t\t\tsegDist *= 0.5;\n\t\t\t}\n\n\t\t\t// Get the segment start that we're looking at.\n\t\t\tvec3 p = cameraPositionS + segmentStart * cameraToPositionUnit;\n\n\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\tfloat densityAtP = getDensity(p, equatorialRadius, density, scaleHeight);\n\n\t\t\t// Add it to the total density.\n\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t// Next step.\n\t\t\tsegmentStart += stepDist;\n\t\t}\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// If it's not a camera light,\n\t\t\tif (length(lightPositions[i]) > 0.0) {\n\t\t\t\t// Add on the color for the light.\n\t\t\t\tgl_FragColor += getColor(totalDensity, lightColors[i], lightPositions[i], spheroidRatio, positionS, cameraPositionS, cameraToPositionUnit);\n\t\t\t}\n\t\t}\n\n\t\t// Adjust for values that are greater than one.\n\t\tgl_FragColor.rgb = adjustOverbrightness(gl_FragColor.rgb);\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}";e.default=AtmosphereComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class CameraComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._threeJsRenderer=this.getEntity().getScene().getEngine().__getThreeJsRenderer(),this._viewport=null,this._threeJsScene=i.getScene().getThreeJsScene(),this._fieldOfView=1.0471975512,this._nearDistance=void 0,this._autoNearDistance=0,this._midDistance=void 0,this._autoMidDistance=0,this._aspectRatio=1,this._renderSize=new s.Vector2,this._occludingEntities=[],this._threeJsCamera=new s.THREE.PerspectiveCamera(75,this._aspectRatio,.1,1e3),this._threeJsComposer=null,this._outlinePass=new s.ThreeJsOutlinePass(void 0,this._threeJsScene,this._threeJsCamera,[]),this._outlinePass.enabled=!1,this._threeJsUnrealBloomPass=new s.ThreeJsUnrealBloomPass(void 0,0,0,0),this._threeJsUnrealBloomPass.enabled=!1,this.__setupEffectComposer()}getViewport(){return this._viewport}getFieldOfView(){return this._fieldOfView}getHorizontalFieldOfView(){return this._aspectRatio>=1?this._fieldOfView:2*Math.atan(Math.tan(this._fieldOfView/2)*this._aspectRatio)}getVerticalFieldOfView(){return this._aspectRatio>1?2*Math.atan(Math.tan(this._fieldOfView/2)/this._aspectRatio):this._fieldOfView}setFieldOfView(t){this._fieldOfView=t}getNearDistance(){return this._nearDistance}setNearDistance(t){this._nearDistance=t}getAutoNearDistance(){return this._autoNearDistance}getMidDistance(){return this._midDistance}setMidDistance(t){this._midDistance=t}getAutoMidDistance(){return this._autoMidDistance}getNormalSpacePositionFromCameraSpacePosition(t,e){const i=s.Quaternion.pool.get();i.copy(this.getEntity().getOrientation()),i.inverse(i);const n=s.Vector3.pool.get();n.rotate(i,e),s.Quaternion.pool.release(i),t.x=this._threeJsCamera.projectionMatrix.elements[0]*n.x/n.y,t.y=this._threeJsCamera.projectionMatrix.elements[9]*n.z/n.y,t.z=this._threeJsCamera.projectionMatrix.elements[6]+this._threeJsCamera.projectionMatrix.elements[14]/n.y,s.Vector3.pool.release(n)}getNormalSpaceRadiusFromRadius(t,e){return t/e/Math.tan(this._fieldOfView/2)}getCameraSpacePositionFromNormalSpacePosition(t,e){const i=s.Vector3.pool.get();i.y=this._threeJsCamera.projectionMatrix.elements[14]/(e.z-this._threeJsCamera.projectionMatrix.elements[6]),i.x=e.x*i.y/this._threeJsCamera.projectionMatrix.elements[0],i.z=e.y*i.y/this._threeJsCamera.projectionMatrix.elements[9],t.rotate(this.getEntity().getOrientation(),i),s.Vector3.pool.release(i)}getRadiusFromNormalSpaceRadius(t,e){return t*e*Math.tan(this._fieldOfView/2)}isPositionOccluded(t){for(let e=0;e<this._occludingEntities.length;e++)if(this._occludingEntities[e].isOccludingPosition(this,t))return!0;return!1}getNearestIntersectingEntity(t){let e=Number.POSITIVE_INFINITY,i=null;const n=s.Interval.pool.get();for(let o=0;o<this._occludingEntities.length;o++){const a=this._occludingEntities[o].getCameraSpacePosition(this);if(s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(n,t,a,this._occludingEntities[o].getOcclusionRadius()),!Number.isNaN(n.min)&&n.min>=0){const t=n.min*a.magnitude();t<e&&(e=t,i=this._occludingEntities[o])}}return s.Interval.pool.release(n),i}setBloom(t){this._threeJsUnrealBloomPass.enabled=t>0,this._threeJsUnrealBloomPass.strength=t}setOutline(t,e,i){if(this._outlinePass.enabled=null!==e,null!==e){if(void 0!==i)this._outlinePass.selectedObjects=[e.getThreeJsObjectByName(i)];else{const t=e.getThreeJsObjects();this._outlinePass.selectedObjects=[];for(let e=0,i=t.length;e<i;e++)t[e].parent===this._threeJsScene&&this._outlinePass.selectedObjects.push(t[e])}this._outlinePass.visibleEdgeColor.setRGB(t.r,t.g,t.b),this._outlinePass.hiddenEdgeColor.setRGB(t.r/4,t.g/4,t.b/4)}this.__setupEffectComposer()}__addToOccludingEntities(t){for(let e=0;e<this._occludingEntities.length;e++)if(this._occludingEntities[e]===t)return;this._occludingEntities.push(t)}__destroy(){super.__destroy(),this.getEntity().getScene().__removeCameraDependents(this),null!==this._viewport&&this._viewport.setCamera(null)}__updateCameraVariablesForConnectedScene(){const t=this._viewport.getBounds().size;if(!t.equals(this._renderSize)){const e=t.x/t.y;this._aspectRatio!==e&&(this._aspectRatio=e),this._threeJsComposer.setSize(t.x,t.y),this._renderSize.copy(t)}s.Capabilities.hasFragDepth()||(void 0===this._midDistance?null!==this.getEntity().getParent()&&(this._autoMidDistance=this.getEntity().getPosition().magnitude()+10*this.getEntity().getParent().getExtentsRadius()):this._autoMidDistance=this._midDistance),void 0===this._nearDistance?null!==this.getEntity().getParent()?this._autoNearDistance=Math.max(1e-5,.01*(this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getExtentsRadius())):this._autoNearDistance=Math.max(1e-5,.01*this.getEntity().getPosition().magnitude()):this._autoNearDistance=this._nearDistance,this._updateProjectionMatrix(),this.getEntity().__updateCameraVariables(this,null,!1);for(let t=0;t<this._occludingEntities.length;t++)(this._occludingEntities[t].getPixelSpaceOcclusionRadius(this)<1||!this._occludingEntities[t].isEnabled()||!this._occludingEntities[t].canOcclude()||null===this.getEntity().getScene().get(this._occludingEntities[t].getName()))&&(this._occludingEntities.splice(t,1),t--)}__prepareForRender(){const t=this.getEntity().getScene();for(let e=0;e<t.getNumEntities();e++){const i=t.getEntity(e);i.isEnabled()&&i.__prepareForRender(this)}const e=this.getEntity().get("dynEnvMap");null!==e&&e.__render()}__render(){const t=this.getEntity().getOrientation();CameraComponent._tempThreeJsQuaternion.set(t.x,t.y,t.z,t.w),this._threeJsCamera.setRotationFromQuaternion(CameraComponent._tempThreeJsQuaternion),this._threeJsComposer.render()}__setViewport(t){null!==this._viewport&&this._viewport!==t&&this._viewport.setCamera(null),this._viewport=t}__setupEffectComposer(){const t=new s.THREE.Vector2;this._threeJsRenderer.getSize(t);const e={samples:s.Capabilities.isWebGL2()&&!this._outlinePass.enabled?4:0},i=new s.THREE.WebGLRenderTarget(t.x,t.y,e);if(null!==this._threeJsComposer)this._threeJsComposer.reset(i);else{this._threeJsComposer=new s.ThreeJsEffectComposer(this._threeJsRenderer,i);const t=new s.ThreeJsRenderPass(this._threeJsScene,this._threeJsCamera);this._threeJsComposer.addPass(t),this._threeJsComposer.addPass(this._outlinePass),this._threeJsComposer.addPass(this._threeJsUnrealBloomPass)}}_updateProjectionMatrix(){if(this._fieldOfView>0&&this._fieldOfView<180&&this._aspectRatio>0){const t=Math.tan(this._fieldOfView/2);let e=0,i=0;this._aspectRatio>=1?(e=1/t,i=this._aspectRatio/t):(e=1/(t*this._aspectRatio),i=1/t);const n=Number.EPSILON-1,o=this._autoNearDistance*(2-Number.EPSILON),a=new s.THREE.Matrix4;a.set(e,0,0,0,0,0,i,0,0,n,0,o,0,1,0,0),this._threeJsCamera.projectionMatrix=a;const r=new s.THREE.Matrix4;r.set(1/e,0,0,0,0,0,0,1,0,1/i,0,0,0,0,1/o,-n/o),this._threeJsCamera.projectionMatrixInverse=r}}__loadResources(){return Promise.resolve()}__unloadResources(){}}e.default=CameraComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class CMTSComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._threeJsScene=this.getEntity().getScene().getThreeJsScene(),this._endPoints=new s.FastMap,this._heightScale=1,this._numEndPointsLoading=0,this._minLevel=Number.NEGATIVE_INFINITY,this._maxLevel=Number.POSITIVE_INFINITY,this._tileOffsets=[],this._splitJoinThresholdFactor=512,this._colorTileSize=512,this._shadowEntities=[],this._engine=this.getEntity().getScene().getEngine(),this._cameraPositions=[],this._rootTiles=[null,null,null,null,null,null],this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,this._textureCache=new s.Cache((t=>this.getEntity().getScene().getEngine().getTextureLoader().loadTexture(t,!0)),(t=>{t.then((t=>{t.dispose()}))})),this._numLoadsThisFrame=0,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}setBaseUrl(t,e){this.resetResources(),this._endPoints.set(t,{url:e,configuration:null})}getHeightScale(){return this._heightScale}setHeightScale(t){this._heightScale=t,this.resetResources()}getMinLevel(){return this._minLevel}setMinLevel(t){this._minLevel=t}getMaxLevel(){return this._maxLevel}setMaxLevel(t){this._maxLevel=t}addTileOffset(t,e,i,n,o,a,r){this._tileOffsets.push({offset:t,face:e,level:i,min:new s.Vector2(n,o),max:new s.Vector2(a,r)}),this.resetResources()}removeTileOffset(t,e,i,s,n,o){for(let a=0;a<this._tileOffsets.length;a++){const r=this._tileOffsets[a];if(r.face===e&&r.level===t&&r.min.x===i&&r.min.y===s&&r.max.x===n&&r.max.y===o)return this._tileOffsets.splice(a,1),void this.resetResources()}}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0);const e=t.length>0;for(let t=0,i=this.getThreeJsMaterials().length;t<i;t++)s.ThreeJsHelper.setDefine(this.getThreeJsMaterials()[t],"shadowEntities",e)}getGroundPosition(t,e,i){const n=this._spheroidComponentRef.get();if(null===n)return void t.set(NaN,NaN,NaN);const o=s.LatLonAlt.pool.get();n.llaFromXYZ(o,e),o.alt=0,n.xyzFromLLA(t,o);const a=s.Vector3.pool.get();n.upFromLLA(a,o);const r=this._endPoints.get("height");if(void 0!==r){const e=s.Vector3.pool.get();s.CubeMap.xyzToUVFace(e,t);let n=this._rootTiles[e.z];if(null==n)return t.addMult(t,a,i),s.LatLonAlt.pool.release(o),void s.Vector3.pool.release(a);for(;n.children.length>0;){const t=1<<n.getLevel()+1,i=Math.floor(e.x*t-2*n.getTileCoord().x),s=Math.floor(e.y*t-2*n.getTileCoord().y);n=n.children[2*s+i]}const l=n.getHeightData();if(null!==l){const i=1<<n.getLevel(),s=(e.x*i-n.getTileCoord().x)*(l.width-2)+1,o=(1-(e.y*i-n.getTileCoord().y))*(l.width-2)+1,c=CMTSTile.getLinearInterpolatedHeightPixel(s,o,l.data,l.width),h=r.configuration,u=h.height_range.min*this._heightScale,d=(h.height_range.max-h.height_range.min)*this._heightScale;t.addMult(t,a,u+c*d)}s.Vector3.pool.release(e)}t.addMult(t,a,i),s.LatLonAlt.pool.release(o),s.Vector3.pool.release(a)}areTilesLoaded(){return null===this._tilesLoadedPromise}getTilesLoadedPromise(){return this._tilesLoadedPromise||Promise.resolve()}setSpheroidReference(t){"string"==typeof t?this._spheroidComponentRef.setByName(this.getEntity().getName(),t):this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid",t)}__destroy(){for(let t=0;t<6;t++)null!==this._rootTiles[t]&&this._rootTiles[t].destroy();const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){if(this._spheroidComponentRef.update(),"loaded"!==this.getLoadState()||null===this._spheroidComponentRef.get())return;if(null===this._rootTiles[0]){if(0!==this._numEndPointsLoading)return;for(let t=0;t<6;t++)this._rootTiles[t]=new CMTSTile(this,null,t,0,new s.Vector2(0,0)),this._rootTiles[t].forceLoad()}let t=!1;for(;this._cameraPositions.length>this._engine.getNumViewports();)this._cameraPositions.pop();for(;this._cameraPositions.length<this._engine.getNumViewports();)this._cameraPositions.push(new s.Vector3);for(let t=0,e=this._engine.getNumViewports();t<e;t++){const e=this._cameraPositions[t];this._engine.getViewport(t).getCamera().getEntity().getPositionRelativeToEntity(e,s.Vector3.Zero,this.getEntity()),e.rotateInverse(this.getEntity().getOrientation(),e)}this._numLoadsThisFrame=0;for(let e=0;e<6;e++)t=this._rootTiles[e].update()||t;if(null===this._tilesLoadedPromise&&t&&(this._tilesLoadedPromise=new Promise((t=>{this._transitionsCompleteCallback=t}))),null!==this._tilesLoadedPromise&&!t){const t=this._transitionsCompleteCallback;this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,t()}}__prepareForRender(t){if(null===this._rootTiles[0])return;s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects(),this.getEntity());for(let e=0;e<6;e++)this._rootTiles[e].prepareForRender(t);for(let t=0,e=this._shadowEntities.length;t<e;t++){let e=this._shadowEntities[t];if("string"==typeof e){const t=this.getEntity().getScene().getEntity(e);null!==t&&(e=t)}null!==e&&(this._shadowEntities[t]=e)}const e=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,e,!0)}__loadResources(){const t=[];for(let e=0,i=this._endPoints.size;e<i;e++){const i=this._endPoints.getAt(e),s=i.value.url;this._numEndPointsLoading+=1;const n=this.getEntity().getScene().getEngine().getDownloader().download(s+"/configuration.json",!1).then((t=>{if("failed"===t.status)throw new Error("Failed to download "+s+"/configuration.json");if("completed"===t.status&&"string"==typeof t.content){const e=JSON.parse(t.content);i.value.configuration=e,"color"===i.key&&(this._colorTileSize=e.tile_size),this._numEndPointsLoading-=1}}));t.push(n)}return Promise.all(t)}__unloadResources(){for(let t=0;t<6;t++)null!==this._rootTiles[t]&&this._rootTiles[t].destroy();this._rootTiles=[null,null,null,null,null,null];for(let t=0,e=this._endPoints.size;t<e;t++)this._endPoints.getAt(t).value.configuration=null}__getNumLoadsThisFrame(){return this._numLoadsThisFrame}__incNumLoadsThisFrame(){this._numLoadsThisFrame+=1}__getEndPoints(){return this._endPoints}__endPointsAreLoaded(){return 0===this._numEndPointsLoading}__getTileOffsets(){return this._tileOffsets}__getTextureCache(){return this._textureCache}__getCameraPositions(){return this._cameraPositions}__getThreeJsScene(){return this._threeJsScene}__getSplitJoinThresholdFactor(){return this._splitJoinThresholdFactor}__getColorTileSize(){return this._colorTileSize}__getSpheroidComponent(){return this._spheroidComponentRef.get()}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}class CMTSTile extends s.Tile{constructor(t,e,i,n,o){super(e),this._component=t,this._face=i,this._level=n,this._tile=new s.Vector2,this._tile.copy(o),this._isLeaf=!0,this._center=new s.Vector3,this._radius=0,this._threeJsMaterial=null,this._textureLevels=new s.FastMap,this._texturePromises=new s.FastMap,this._nonPositiveTextureLoading=!1,this._threeJsObject=null,this._heightData=null,this._tileOffset=this._getTileOffset();for(let t=0;t<2;t++)for(let e=0;e<2;e++)for(let i=0;i<this._component.__getEndPoints().size;i++){const n=this._component.__getEndPoints().getAt(i).value.configuration;this._isLeaf=this._isLeaf&&!CMTSTile._isInABoundary(n,this._face,this._level+1,new s.Vector2(2*this._tile.x+e,2*this._tile.y+t))}const a=t.__getSpheroidComponent();CMTSTile.cmtsCoordToPosition(this._center,this._face,this._level,this._tile.x+.5,this._tile.y+.5,a);const r=new s.Vector3,l=new s.Vector3,c=new s.Vector3,h=new s.Vector3;CMTSTile.cmtsCoordToPosition(r,this._face,this._level,this._tile.x,this._tile.y,a),CMTSTile.cmtsCoordToPosition(l,this._face,this._level,this._tile.x+1,this._tile.y,a),CMTSTile.cmtsCoordToPosition(c,this._face,this._level,this._tile.x+1,this._tile.y+1,a),CMTSTile.cmtsCoordToPosition(h,this._face,this._level,this._tile.x,this._tile.y+1,a),r.sub(this._center,r),l.sub(this._center,l),c.sub(this._center,c),h.sub(this._center,h),this._radius=Math.max(r.magnitude(),l.magnitude(),c.magnitude(),h.magnitude());const u=this._component.__getEndPoints();for(let t=0;t<u.size;t++){const e=u.getAt(t).key,i=u.getAt(t).value,s=0===this._level?this._getNonPositiveLevel(e):0;if(CMTSTile._isInABoundary(i.configuration,this._face,this._level,this._tile)){const t=0===this._level?s:this._level;this._textureLevels.set(e,t)}else{let i=this.getParent();for(;null!==i&&i._level!==i._textureLevels.getAt(t).value;)i=i.getParent();null!==i?this._textureLevels.set(e,i._textureLevels.getAt(t).value):this._textureLevels.set(e,0)}}}getLevel(){return this._level}getTileCoord(){return this._tile}getHeightData(){return this._heightData}createNewTile(t,e,i){const n=this._level+1,o=new s.Vector2(2*t._tile.x+i,2*t._tile.y+e);return new CMTSTile(t._component,this,this._face,n,o)}checkSplit(){if(this._isLeaf||this._level>=this._component.getMaxLevel())return!1;if(this._component.__getNumLoadsThisFrame()>1)return!1;if(this._level<this._component.getMinLevel())return!0;const t=this._component.__getColorTileSize();return this._getNearestDistance()<this._component.__getSplitJoinThresholdFactor()*this._radius/t}checkJoin(){if(this._level>=this._component.getMaxLevel())return!0;if(this._level<this._component.getMinLevel())return!1;const t=this._component.__getColorTileSize();return this._getNearestDistance()>this._component.__getSplitJoinThresholdFactor()*this._radius/t*4}async load(){if(this._component.__incNumLoadsThisFrame(),null!==this._threeJsMaterial)throw new Error("Tile already has material.");this._threeJsMaterial=s.MaterialUtils.get(),this._component.getThreeJsMaterials().push(this._threeJsMaterial),this._threeJsMaterial.defines.shadowEntities=this._component.getNumShadowEntities()>0;const t=this._component.__getEndPoints(),e=[];for(let i=0;i<t.size;i++){const s=t.getAt(i).key,n=t.getAt(i).value;let o=null;const a=this._textureLevels.get(s),r=this._tile.x>>this._level-a,l=this._tile.y>>this._level-a,c=n.url+"/"+this._face+"/"+a+"/"+r+"/"+l+"."+n.configuration.extension;o=this._component.__getTextureCache().get(c),this._texturePromises.set(s,o),e.push(o.then((t=>{this._setTexture(s,t)})).catch((()=>(this._component.__getTextureCache().release(o),o=this._component.__getTextureCache().get("pink"),o.then((t=>{this._setTexture(s,t)}))))))}return Promise.all(e)}async unload(){if(null===this._threeJsMaterial)throw new Error("Tile has no material to unload.");const t=this._component.getThreeJsMaterials();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsMaterial){t.splice(e,1);break}this._threeJsMaterial.dispose(),this._threeJsMaterial=null;for(let t=0;t<this._texturePromises.size;t++)this._component.__getTextureCache().release(this._texturePromises.getAt(t).value)}async activate(){if(null!==this._threeJsObject||null===this._threeJsMaterial)throw new Error("NULL");const t=[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}];this._textureLevels.has("normal")&&(t.push({name:"tangent",dimensions:3}),t.push({name:"bitangent",dimensions:3}));for(let e=0;e<this._textureLevels.size;e++){const i=this._textureLevels.getAt(e).key;"color"!==i&&"height"!==i&&t.push({name:i+"UV",dimensions:2})}this._threeJsObject=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,t,!1),this._component.getThreeJsObjects().push(this._threeJsObject),s.ThreeJsHelper.useInDynEnvMap(this._threeJsObject,!0),this._setupMesh()}async deactivate(){const t=this._component.getThreeJsObjects();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsObject){t.splice(e,1);break}s.ThreeJsHelper.destroyObject(this._threeJsObject),this._threeJsObject=null}update(){if(!this._component.__endPointsAreLoaded())return!1;let t=this.check();for(let e=0,i=this.children.length;e<i;e++)t=this.children[e].update()||t;if(!t&&!this._nonPositiveTextureLoading&&0===this._level&&0===this.children.length){const e=this._component.__getEndPoints();for(let i=0;i<e.size;i++){const s=e.getAt(i).key,n=e.getAt(i).value,o=this._getNonPositiveLevel(s);if(o!==this._textureLevels.get(s)){this._nonPositiveTextureLoading=!0,this._textureLevels.set(s,o),t=!0;const e=n.url+"/"+this._face+"/"+o+"/0/0."+n.configuration.extension,i=this._texturePromises.get(s);let a=this._component.__getTextureCache().get(e);this._texturePromises.set(s,a),a.then((t=>{this._setTexture(s,t),this._setupMesh(),this._nonPositiveTextureLoading=!1})).catch((()=>(this._component.__getTextureCache().release(a),a=this._component.__getTextureCache().get("pink"),a.then((t=>{this._setTexture(s,t),this._nonPositiveTextureLoading=!1}))))).finally((()=>{"height"!==s&&this._component.__getTextureCache().release(i)}))}}}return t=this._nonPositiveTextureLoading||t,t}_setupMesh(){const t=this._threeJsMaterial.uniforms.colorTexture.value.image.width-4,e=new s.FastMap,i=new s.FastMap,n=new s.FastMap;for(let t=0;t<this._textureLevels.size;t++){const e=this._textureLevels.getAt(t).key,o=1<<this._level-Math.max(0,this._textureLevels.get(e));i.set(e,new s.Vector2((this._tile.x-Math.floor(this._tile.x/o)*o)/o,(this._tile.y-Math.floor(this._tile.y/o)*o)/o)),n.set(e,new s.Vector2(1/o,1/o))}const o=this._textureLevels.has("normal"),a=this._heightData?s.MathUtils.clamp(Math.ceil(this._heightData.width*n.get("height").x)-2,5,129):5<<s.MathUtils.clamp(2-this._level/2,0,2),r=this._heightData?s.MathUtils.clamp(Math.ceil(this._heightData.height*n.get("height").y)-2,5,129):5<<s.MathUtils.clamp(2-this._level/2,0,2),l=a*r,c=new Float32Array(3*l),h=new Float32Array(3*l);let u=null,d=null;o&&(u=new Float32Array(3*l),d=new Float32Array(3*l));const p=new Uint16Array((a-1)*(r-1)*6);for(let t=0;t<this._textureLevels.size;t++){const i=this._textureLevels.getAt(t).key;e.set(i,new Float32Array(2*l))}let _=0,g=0;if(this._textureLevels.has("height")){const t=this._component.__getEndPoints().get("height").configuration;_=t.height_range.min*this._component.getHeightScale(),g=(t.height_range.max-t.height_range.min)*this._component.getHeightScale()}const m=new s.Vector2,y=new s.Vector3,f=new s.Vector3,b=new s.Vector3,T=new s.Vector3,v=new s.LatLonAlt,E=this._component.__getSpheroidComponent();for(let l=0;l<r;l++)for(let x=0;x<a;x++){const S=l*a+x;if(m.set(this._tile.x+(x-1)/(a-3),this._tile.y+(l-1)/(r-3)),CMTSTile.cmtsCoordToPosition(y,this._face,this._level,m.x,m.y,E),o&&(CMTSTile.cmtsCoordToTangent(b,this._face,this._level,m.x,m.y,E),CMTSTile.cmtsCoordToBitangent(T,this._face,this._level,m.x,m.y,E)),E.llaFromXYZ(v,y),E.upFromLLA(f,v),this._heightData){const t=this._heightData.data,e=i.get("height"),o=n.get("height"),c=this._heightData.width-4;if(CMTSTile.getHeightPos(y,f,x,l,t,e,a,r,o,c,_,g),!this._textureLevels.has("normal")){const i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),h=s.Vector3.pool.get(),u=s.Vector3.pool.get(),d=s.Vector3.pool.get(),p=s.Vector3.pool.get(),y=s.Vector3.pool.get(),b=s.Vector3.pool.get();CMTSTile.cmtsCoordToPosition(i,this._face,this._level,m.x-1/(a-3),m.y,E),CMTSTile.getHeightPos(i,f,x-1,l,t,e,a,r,o,c,_,g),CMTSTile.cmtsCoordToPosition(n,this._face,this._level,m.x+1/(a-3),m.y,E),CMTSTile.getHeightPos(n,f,x+1,l,t,e,a,r,o,c,_,g),CMTSTile.cmtsCoordToPosition(h,this._face,this._level,m.x,m.y-1/(r-3),E),CMTSTile.getHeightPos(h,f,x,l-1,t,e,a,r,o,c,_,g),CMTSTile.cmtsCoordToPosition(u,this._face,this._level,m.x,m.y+1/(r-3),E),CMTSTile.getHeightPos(u,f,x,l+1,t,e,a,r,o,c,_,g),CMTSTile.cmtsCoordToPosition(d,this._face,this._level,m.x-1/(a-3),m.y-1/(r-3),E),CMTSTile.getHeightPos(d,f,x-1,l-1,t,e,a,r,o,c,_,g),CMTSTile.cmtsCoordToPosition(p,this._face,this._level,m.x+1/(a-3),m.y+1/(r-3),E),CMTSTile.getHeightPos(p,f,x+1,l+1,t,e,a,r,o,c,_,g),i.sub(n,i),h.sub(u,h),f.cross(i,h),f.normalize(f),s.Vector3.pool.release(i),s.Vector3.pool.release(n),s.Vector3.pool.release(h),s.Vector3.pool.release(u),s.Vector3.pool.release(d),s.Vector3.pool.release(p),s.Vector3.pool.release(y),s.Vector3.pool.release(b)}}0!==x&&0!==l&&x!==a-1&&l!==r-1||(this._textureLevels.has("height")?y.setMagnitude(y,y.magnitude()-2*g):y.mult(y,.9)),y.sub(y,this._tileOffset),c[3*S+0]=y.x,c[3*S+1]=y.y,c[3*S+2]=y.z,h[3*S+0]=f.x,h[3*S+1]=f.y,h[3*S+2]=f.z,o&&(u[3*S+0]=b.x,u[3*S+1]=b.y,u[3*S+2]=b.z,d[3*S+0]=T.x,d[3*S+1]=T.y,d[3*S+2]=T.z);for(let s=0;s<this._textureLevels.size;s++){const o=this._textureLevels.getAt(s).key,c=i.get(o),h=n.get(o),u=e.get(o);u[2*S+0]=(c.x+(x-1)/(a-3)*h.x)*t/(t+4)+2/(t+4),u[2*S+1]=1-((c.y+(l-1)/(r-3)*h.y)*t/(t+4)+2/(t+4))}if(x<a-1&&l<r-1){const t=l*(a-1)+x;p[6*t+0]=a*(l+0)+(x+0),p[6*t+1]=a*(l+0)+(x+1),p[6*t+2]=a*(l+1)+(x+1),p[6*t+3]=a*(l+0)+(x+0),p[6*t+4]=a*(l+1)+(x+1),p[6*t+5]=a*(l+1)+(x+0)}}s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"position",c),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"normal",h),o&&(s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"tangent",u),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"bitangent",d));for(let t=0;t<this._textureLevels.size;t++){const i=this._textureLevels.getAt(t).key,n=e.get(i);"height"!==i&&("color"===i?s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"uv",n):s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,i+"UV",n))}s.ThreeJsHelper.setIndices(this._threeJsObject.geometry,p)}_getNonPositiveLevel(t){const e=this._getNearestDistance(),i=this._component.__getEndPoints().get(t),n=i.configuration.tile_size;return s.MathUtils.clamp(4-Math.floor(Math.log2(e/this._radius/this._component.__getSplitJoinThresholdFactor()*n*4)),i.configuration.first_level,0)}_getNearestDistance(){let t=Number.POSITIVE_INFINITY;const e=this._component.__getCameraPositions();for(let i=0,s=e.length;i<s;i++){const s=e[i];CMTSTile._pos.sub(s,this._center);const n=Math.max(0,CMTSTile._pos.magnitude()-this._radius);t>n&&(t=n)}return t}toString(){return this._face+"/"+this._level+"/"+this._tile.x+"/"+this._tile.y}prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this._threeJsObject,this._component.getEntity(),t,this._tileOffset,!0);for(let e=0,i=this.children.length;e<i;e++)this.children[e].prepareForRender(t)}_setTexture(t,e){if("loaded"===this._component.getLoadState())if("height"===t){const t=document.createElement("canvas");t.width=e.image.width,t.height=e.image.height;const i=t.getContext("2d",{desynchronized:!0,alpha:!1});i.drawImage(e.image,0,0),e.dispose(),this._heightData=i.getImageData(0,0,e.image.width,e.image.height),this._component.__getTextureCache().release(this._texturePromises.get("height")),this._texturePromises.delete("height");const n=this._component.__getSpheroidComponent();CMTSTile.cmtsCoordToPosition(this._center,this._face,this._level,this._tile.x+.5,this._tile.y+.5,n);const o=s.Vector3.pool.get(),a=s.LatLonAlt.pool.get();n.llaFromXYZ(a,this._center),n.upFromLLA(o,a);const r=CMTSTile.getLinearInterpolatedHeightPixel(this._heightData.width/2,this._heightData.height/2,this._heightData.data,this._heightData.width),l=this._component.__getEndPoints().get("height").configuration,c=l.height_range.min*this._component.getHeightScale(),h=(l.height_range.max-l.height_range.min)*this._component.getHeightScale();this._center.addMult(this._center,o,c+r*h),s.Vector3.pool.release(o),s.LatLonAlt.pool.release(a)}else this._threeJsMaterial.uniforms[t+"Texture"].value=e,"normal"===t?(this._threeJsMaterial.defines.normalMap=!0,this._threeJsMaterial.defines.normalUVs=!0,this._threeJsMaterial.defines.hasBitangents=!0,this._threeJsMaterial.uniforms.normalScale.value.set(this._component.getHeightScale(),this._component.getHeightScale()),this._threeJsMaterial.uniforms.specularIntensity.value=0,this._threeJsMaterial.uniforms.specularHardness.value=100):"specular"===t?(this._threeJsMaterial.defines.specularMap=!0,this._threeJsMaterial.defines.specularUVs=!0):"night"===t?(this._threeJsMaterial.defines.nightMap=!0,this._threeJsMaterial.defines.nightUVs=!0):"decal"===t&&(this._threeJsMaterial.defines.decalMap=!0,this._threeJsMaterial.defines.decalUVs=!0)}static _getGreatestLevel(t,e,i,s){let n=Number.NEGATIVE_INFINITY;for(let o=0,a=t.boundaries.length;o<a;o++){const a=t.boundaries[o];if(a.face!==e)continue;const r=a.last_level-i;a.min[0]<=s.x>>r&&s.x>>r<=a.max[0]&&a.min[1]<=s.y>>r&&s.y>>r<=a.max[1]&&n<a.last_level&&(n=a.last_level)}return n}static _isInABoundary(t,e,i,s){let n=!1;for(let o=0,a=t.boundaries.length;o<a;o++){const a=t.boundaries[o];if(a.face!==e)continue;if(a.last_level<i)continue;const r=1<<a.last_level-i;s.x<Math.floor(a.min[0]/r)||Math.floor(a.max[0]/r)<s.x||(s.y<Math.floor(a.min[1]/r)||Math.floor(a.max[1]/r)<s.y||(n=!0))}return n}_getTileOffset(){const t=this._component.__getTileOffsets();for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.face!==this._face||i.level>this._level)continue;const s=1<<this._level-i.level;if(i.min.x*s<=this._tile.x&&this._tile.x<(i.max.x+1)*s&&i.min.y*s<=this._tile.y&&this._tile.y<(i.max.y+1)*s)return i.offset}return s.Vector3.Zero}static getHeightPos(t,e,i,s,n,o,a,r,l,c,h,u){const d=((o.x+(i-1)/(a-3)*l.x)*c/(c+4)+2/(c+4))*(c+4),p=(1-((o.y+(s-1)/(r-3)*l.y)*c/(c+4)+2/(c+4)))*(c+4),_=this.getLinearInterpolatedHeightPixel(d,p,n,c+4);t.addMult(t,e,h+_*u)}static getLinearInterpolatedHeightPixel(t,e,i,s){const n=Math.floor(t),o=Math.floor(e),a=t-n,r=e-o,l=Math.abs(a-.5),c=Math.abs(r-.5);let h=this.getHeightFromPixel(n,o,i,s)*((1-l)*(1-c));return a>=.5?(h+=this.getHeightFromPixel(n+1,o,i,s)*(l*(1-c)),r<.5?h+=this.getHeightFromPixel(n+1,o-1,i,s)*(l*c):r>=.5&&(h+=this.getHeightFromPixel(n+1,o+1,i,s)*(l*c))):a<.5&&(h+=this.getHeightFromPixel(n-1,o,i,s)*(l*(1-c)),r<.5?h+=this.getHeightFromPixel(n-1,o-1,i,s)*(l*c):r>=.5&&(h+=this.getHeightFromPixel(n-1,o+1,i,s)*(l*c))),r>=.5?h+=this.getHeightFromPixel(n,o+1,i,s)*((1-l)*c):r<.5&&(h+=this.getHeightFromPixel(n,o-1,i,s)*((1-l)*c)),h}static getHeightFromPixel(t,e,i,n){t=s.MathUtils.clamp(t,0,n-1);const o=4*((e=s.MathUtils.clamp(e,0,n-1))*n+t);return i[o+0]/256+i[o+1]/65536+i[o+2]/16777216}static cmtsCoordToPosition(t,e,i,n,o,a){let r=n/(1<<Math.max(i,0)),l=o/(1<<Math.max(i,0));for(;r<0||r>1||l<0||l>1;)if(0<=e&&e<=3){if(r>1)r-=1,e=(e+1)%4;else if(r<0)r+=1,e=(e+3)%4;else if(0===e)l<0?(l+=1,e=5):l>1&&(l-=1,e=4);else if(1===e){if(l<0){const t=r;r=l+1,l=1-t,e=5}else if(l>1){const t=r;r=2-l,l=t,e=4}}else if(2===e)l<0?(r=1-r,l=0-l,e=5):l>1&&(r=1-r,l=2-l,e=4);else if(3===e)if(l<0){const t=r;r=0-l,l=t,e=5}else if(l>1){const t=r;r=l-1,l=1-t,e=4}}else if(4===e)if(r<0){const t=r;r=1-l,l=t+1,e=3}else if(r>1){const t=r;r=l,l=2-t,e=1}else l<0?(l+=1,e=0):l>1&&(r=1-r,l=2-l,e=2);else if(5===e)if(r<0){const t=r;r=l,l=0-t,e=3}else if(r>1){const t=r;r=1-l,l=t-1,e=1}else l<0?(r=1-r,l=0-l,e=2):l>1&&(l-=1,e=0);const c=2*r-1,h=2*l-1,u=this._basis[e];t.set(u[0].x*c+u[1].x*h+u[2].x,u[0].y*c+u[1].y*h+u[2].y,u[0].z*c+u[1].z*h+u[2].z),t.normalize(t),s.Geometry.getLLAFromXYZOnSphere(this._lla,t,0),this._lla.alt=0,a.xyzFromLLA(t,this._lla)}static cmtsCoordToTangent(t,e,i,s,n,o){this.cmtsCoordToPosition(t,e,i,s,n,o);const a=this._basis[e];t.setNormalTo(t,a[0])}static cmtsCoordToBitangent(t,e,i,s,n,o){this.cmtsCoordToPosition(t,e,i,s,n,o);const a=this._basis[e];t.setNormalTo(t,a[1])}}CMTSTile._basis=[[s.Vector3.YAxis,s.Vector3.ZAxis,s.Vector3.XAxis],[s.Vector3.XAxisNeg,s.Vector3.ZAxis,s.Vector3.YAxis],[s.Vector3.YAxisNeg,s.Vector3.ZAxis,s.Vector3.XAxisNeg],[s.Vector3.XAxis,s.Vector3.ZAxis,s.Vector3.YAxisNeg],[s.Vector3.YAxis,s.Vector3.XAxisNeg,s.Vector3.ZAxis],[s.Vector3.YAxis,s.Vector3.XAxis,s.Vector3.ZAxisNeg]],CMTSTile._lla=new s.LatLonAlt,CMTSTile._pos=new s.Vector3,e.default=CMTSComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class CometTailComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._lightSource=new s.EntityRef(this.getEntity().getScene()),this._timeLength=6e5,this._numberOfParticles=200,this._color=new s.Color,this._color.freeze(),this._starAccelerationMultiplier=1,this._timeOfParticle0=0}getLightSource(){return this._lightSource.getName()}setLightSource(t){this._lightSource.setName(t)}getTimeLength(){return this._timeLength}setTimeLength(t){this._timeLength=t,this.resetResources()}getStarAccelerationMultiplier(){return this._starAccelerationMultiplier}setStarAccelerationMultiplier(t){this._starAccelerationMultiplier=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAccelerationMultiplier",this._starAccelerationMultiplier)}getNumberOfParticles(){return this._numberOfParticles}setNumberOfParticles(t){this._numberOfParticles=t,this.resetResources()}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}__update(){if(this.__setRadius(Math.max(this.getEntity().getExtentsRadius(),this._timeLength*this.getEntity().getVelocity().magnitude())),"loaded"!==this.getLoadState())return;const t=this.getEntity().getScene().getEngine().getTime(),e=this.getThreeJsObjects()[0].geometry.attributes.originTime.array;for(let i=0,n=this._numberOfParticles;i<n;i++){const n=e[i]+this._timeOfParticle0;(n<t-this._timeLength||n>t)&&this._newParticle(i,s.MathUtils.wrap(n,t-this._timeLength,t))}this._numberOfParticles>1?s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",t-this._timeOfParticle0):s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",0);const i=this._lightSource.get();if(null!==i){const t=i.getComponentByType("lightSource");null!==t&&s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAbsoluteMagnitude",t.getAbsoluteMagnitude());const e=s.Vector3.pool.get();this.getEntity().getPositionRelativeToEntity(e,s.Vector3.Zero,i),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"positionOfEntity",e),s.Vector3.pool.release(e)}}__prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);const e=this.getEntity().getCameraSpacePosition(t);if(s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"positionInCamera",e),e.magnitude()<4e4)this.getThreeJsObjects()[0].visible=!1;else{const t=(e.magnitude()-4e4)/4e5;this.getThreeJsMaterials()[0].uniforms.color.value.w=this._color.a*s.MathUtils.clamp01(t),this.getThreeJsObjects()[0].visible=!0}}async __loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{time:new s.THREE.Uniform(0),timeLength:new s.THREE.Uniform(0),positionInCamera:new s.THREE.Uniform(new s.THREE.Vector3),starAbsoluteMagnitude:new s.THREE.Uniform(0),starAccelerationMultiplier:new s.THREE.Uniform(0),positionOfEntity:new s.THREE.Uniform(new s.THREE.Vector3),color:new s.THREE.Uniform(new s.THREE.Vector4)},vertexShader:s.ShaderFix.fix(CometTailComponent.vertexShader,"vertex"),fragmentShader:s.ShaderFix.fix(CometTailComponent.fragmentShader,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.AdditiveBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(t);const e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),i=new Uint16Array([0,1,2,2,3,0]),n=new Float32Array(1*this._numberOfParticles),o=new Float32Array(3*this._numberOfParticles),a=new Float32Array(1*this._numberOfParticles),r=new s.THREE.InstancedBufferGeometry;r.setAttribute("position",new s.THREE.BufferAttribute(e,3)),r.setAttribute("originTime",new s.THREE.InstancedBufferAttribute(n,1)),r.setAttribute("originPosition",new s.THREE.InstancedBufferAttribute(o,3)),r.setAttribute("accelerationMultiplier",new s.THREE.InstancedBufferAttribute(a,1)),r.setIndex(new s.THREE.BufferAttribute(i,1)),r.instanceCount=this._numberOfParticles;const l=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,r);this.getThreeJsObjects().push(l);const c=this.getEntity().getScene().getEngine().getTime();for(let t=0,e=this._numberOfParticles;t<e;t++)this._newParticle(t,c-t/e*this._timeLength);s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"timeLength",this._timeLength),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAccelerationMultiplier",this._starAccelerationMultiplier),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_newParticle(t,e){const i=e,n=this.getThreeJsObjects()[0].geometry.attributes.originTime,o=n.array;if(t>0)o[t]=i-this._timeOfParticle0;else{for(let t=1,e=this._numberOfParticles;t<e;t++)o[t]+=this._timeOfParticle0-i;this._timeOfParticle0=i,o[0]=0}n.needsUpdate=!0;const a=s.Vector3.pool.get(),r=this._lightSource.get();null!==r&&this.getEntity().getPositionRelativeToEntity(a,s.Vector3.Zero,r,i);const l=this.getThreeJsObjects()[0].geometry.attributes.originPosition,c=l.array;c[3*t+0]=a.x,c[3*t+1]=a.y,c[3*t+2]=a.z,l.needsUpdate=!0,s.Vector3.pool.release(a);const h=this.getThreeJsObjects()[0].geometry.attributes.accelerationMultiplier;h.array[t]=0+1*Math.random(),h.needsUpdate=!0}}CometTailComponent.vertexShader="\n\tattribute vec3 position;\n\tattribute float originTime;\n\tattribute vec3 originPosition;\n\tattribute vec3 originStarPosition;\n\tattribute vec3 originExternalAcceleration;\n\tattribute float accelerationMultiplier;\n\n\tuniform float time;\n\tuniform float timeLength;\n\tuniform vec3 positionInCamera;\n\tuniform float starAbsoluteMagnitude;\n\tuniform float starAccelerationMultiplier;\n\tuniform vec3 positionOfEntity;\n\tuniform mat4 viewMatrix;\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\t// Get the position of the center point of the quad in model space.\n\t\tfloat deltaTime = time - originTime;\n\t\tvec3 externalAcceleration = starAccelerationMultiplier * accelerationMultiplier * normalize(originPosition) * 5.0e7 * pow(2.51188643151, 20.0 - starAbsoluteMagnitude) / dot(originPosition, originPosition);\n\t\tvec3 modelPosition = externalAcceleration * pow(deltaTime, 1.5);\n\n\t\t// Get a general expansion scale in all directions.\n\t\tfloat expansion = 0.2 * max(1.0e5, length(modelPosition));\n\n\t\t// Get the stretch direction in view space.\n\t\tvec3 modelStretch = modelPosition;\n\t\tvec3 cameraDirection = normalize(positionInCamera);\n\t\tmodelStretch = modelStretch - dot(cameraDirection, modelStretch) * cameraDirection;\n\t\tvec4 viewStretch = viewMatrix * vec4(modelStretch, 1.0);\n\n\t\t// Get the stretch amounts in the x and y directions.\n\t\tvec2 stretch2d = vec2(max(expansion, 2.0 * length(viewStretch.xz)), expansion);\n\n\t\t// Do the stretch calculation on the vertex position in view space.\n\t\t// It translates it, rotates it, stretches it, and unrotates it.\n\t\tvec2 translate = 0.5 * normalize(vec2(viewStretch.xz));\n\t\tfloat angle = length(viewStretch.xz) > 0.0 ? atan(viewStretch.z, viewStretch.x) : 0.0;\n\t\tfloat cosAngle = cos(angle);\n\t\tfloat sinAngle = sin(angle);\n\t\tfloat stretchedX = (stretch2d.x * cosAngle * cosAngle + stretch2d.y * sinAngle * sinAngle) * 0.5 * (position.x + translate.x) + (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.y + translate.y);\n\t\tfloat stretchedY = (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.x + translate.x) + (stretch2d.x * sinAngle * sinAngle + stretch2d.y * cosAngle * cosAngle) * 0.5 * (position.y + translate.y);\n\n\t\t// Get the position in view space and then in normalized space.\n\t\tvec4 viewPosition = vec4(stretchedX, 0.0, stretchedY, 0.0) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t// Set the varying variables for adjusting te\n\t\tvPosition = vec2(cosAngle * position.x + sinAngle * position.y, -sinAngle * position.x + cosAngle * position.y);\n\t\tvAlpha = sqrt(1.0 - sqrt(deltaTime / timeLength));\n\n\t\t// Make the gas fade far from the star.\n\t\tvAlpha *= min(1.0, 1.0 - length(originPosition) / 7.0e8);\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",CometTailComponent.fragmentShader="\n\tuniform vec4 color;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color.\n\t\tgl_FragColor = vec4(color.rgb, 0.5 * color.a) * max(0.0, 1.0 - dot(vPosition, vPosition)) * vAlpha;\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=CometTailComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class ConnectedSpriteComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._entity1=new s.EntityRef(this.getEntity().getScene()),this._entity1Offset=new s.Vector3,this._entity1Offset.freeze(),this._entity2=new s.EntityRef(this.getEntity().getScene()),this._entity2Offset=new s.Vector3,this._entity2Offset.freeze(),this._width=1,this._widthUnits="km",this._textureUrl="",this._textureAspectRatio=1,this._textureRepeat=!0,this._textureStretch=1,this._textureYOffset=0,this._uOffsetStart=0,this._uOffsetEnd=1,this._colorMultiplier=new s.Color(1,1,1,1),this._colorMultiplier.freeze(),this._blending="normal"}getEntity1(){return this._entity1.getName()}setEntity1(t){this._entity1.setName(t)}getEntity1Offset(){return this._entity1Offset}setEntity1Offset(t){this._entity1Offset.thaw(),this._entity1Offset.copy(t),this._entity1Offset.freeze()}getEntity2(){return this._entity2.getName()}setEntity2(t){this._entity2.setName(t)}getEntity2Offset(){return this._entity2Offset}setEntity2Offset(t){this._entity2Offset.thaw(),this._entity2Offset.copy(t),this._entity2Offset.freeze()}getWidth(){return this._width}setWidth(t){this._width=t}getWidthUnits(){return this._widthUnits}setWidthUnits(t){this._widthUnits=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"pixelBased","px"===t?1:0)}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}getTextureRepeat(){return this._textureRepeat}setTextureRepeat(t){this._textureRepeat=t}getTextureStretch(){return this._textureStretch}setTextureStretch(t){this._textureStretch=t}getTextureYOffset(){return this._textureYOffset}setTextureYOffset(t){this._textureYOffset=t}getUOffsetStart(){return this._uOffsetStart}setUOffsetStart(t){this._uOffsetStart=t}getUOffsetEnd(){return this._uOffsetEnd}setUOffsetEnd(t){this._uOffsetEnd=t}getColorMultiplier(){return this._colorMultiplier}setColorMultiplier(t){this._colorMultiplier.thaw(),this._colorMultiplier.copy(t),this._colorMultiplier.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._colorMultiplier,1)}setBlending(t){this._blending=t,s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],t)}__update(){const t=this._entity1.get(),e=this._entity2.get();if(null===t||null===e)return;const i=s.Vector3.pool.get();t.getPositionRelativeToEntity(i,s.Vector3.Zero,e),this.__setRadius(i.magnitude()+t.getExtentsRadius()+e.getExtentsRadius()),s.Vector3.pool.release(i)}__prepareForRender(t){const e=this._entity1.get(),i=this._entity2.get();if(null===e||null===i)return void(this.getThreeJsObjects()[0].visible=!1);const n=e.getCameraSpacePosition(t),o=i.getCameraSpacePosition(t),a=s.Vector3.pool.get(),r=s.Vector3.pool.get(),l=s.Vector3.pool.get();a.rotate(e.getOrientation(),this._entity1Offset),a.add(n,a),l.rotate(i.getOrientation(),this._entity2Offset),l.add(o,l),r.copy(a),a.lerp(a,l,this._uOffsetStart),l.lerp(r,l,this._uOffsetEnd),s.Vector3.pool.release(r);const c=s.Vector3.pool.get(),h=s.Vector3.pool.get();if("px"===this._widthUnits){t.getNormalSpacePositionFromCameraSpacePosition(c,a),t.getNormalSpacePositionFromCameraSpacePosition(h,l),c.div(c,Math.max(Math.sign(c.z+1),c.z+1)),h.div(h,Math.max(Math.sign(h.z+1),h.z+1));const e=Math.max(1,Math.abs(c.x),Math.abs(c.y)),i=Math.max(1,Math.abs(h.x),Math.abs(h.y));c.x/=e,c.y/=e,c.z=0,h.x/=i,h.y/=i,h.z=0,t.getCameraSpacePositionFromNormalSpacePosition(a,c),t.getCameraSpacePositionFromNormalSpacePosition(l,h)}const u=a.magnitude(),d=l.magnitude(),p=s.Vector3.pool.get(),_=s.Vector3.pool.get();p.sub(l,a),u<d?_.copy(a):_.copy(l),_.cross(_,p),_.normalize(_);let g=1/this._textureStretch;if("px"===this._widthUnits){if(this._textureRepeat){const e=s.Vector2.pool.get(),i=s.Vector2.pool.get();t.getViewport().getPixelSpacePositionFromNormalSpacePosition(e,c),t.getViewport().getPixelSpacePositionFromNormalSpacePosition(i,h);const n=s.Vector2.pool.get();n.sub(e,i),g*=n.magnitude()/this._width*this._textureAspectRatio,s.Vector2.pool.release(n),s.Vector2.pool.release(e),s.Vector2.pool.release(i)}}else this._textureRepeat&&(g*=p.magnitude()/this._width*this._textureAspectRatio);s.Vector3.pool.release(c),s.Vector3.pool.release(h);let m=this._width/2,y=this._width/2,f=this._width/2,b=1;if("px"===this._widthUnits){m=y=f=t.getViewport().getNormalSpaceRadiusFromPixelSpaceRadius(this._width),m=t.getRadiusFromNormalSpaceRadius(m,u),f=t.getRadiusFromNormalSpaceRadius(f,d);const e=s.Vector3.pool.get();e.copy(p),b=s.MathUtils.clamp01(-e.dot(a)/e.dot(e)),e.addMult(a,e,b),y=t.getRadiusFromNormalSpaceRadius(y,e.magnitude()),s.Vector3.pool.release(e)}g>1e3&&(b=1e3/g,u>d&&(b=1-b));let T=this.getThreeJsObjects()[0].geometry.getAttribute("position"),v=T.array;u<d||"px"===this._widthUnits?(this.getThreeJsObjects()[0].position.set(a.x,a.y,a.z),v[0]=0-_.x*m,v[1]=0-_.y*m,v[2]=0-_.z*m,v[3]=0+_.x*m,v[4]=0+_.y*m,v[5]=0+_.z*m,v[6]=p.x*b-_.x*y,v[7]=p.y*b-_.y*y,v[8]=p.z*b-_.z*y,v[9]=p.x*b+_.x*y,v[10]=p.y*b+_.y*y,v[11]=p.z*b+_.z*y,v[12]=p.x-_.x*f,v[13]=p.y-_.y*f,v[14]=p.z-_.z*f,v[15]=p.x+_.x*f,v[16]=p.y+_.y*f,v[17]=p.z+_.z*f):(this.getThreeJsObjects()[0].position.set(l.x,l.y,l.z),v[0]=0-_.x*f,v[1]=0-_.y*f,v[2]=0-_.z*f,v[3]=0+_.x*f,v[4]=0+_.y*f,v[5]=0+_.z*f,v[6]=-p.x*(1-b)-_.x*y,v[7]=-p.y*(1-b)-_.y*y,v[8]=-p.z*(1-b)-_.z*y,v[9]=-p.x*(1-b)+_.x*y,v[10]=-p.y*(1-b)+_.y*y,v[11]=-p.z*(1-b)+_.z*y,v[12]=-p.x-_.x*m,v[13]=-p.y-_.y*m,v[14]=-p.z-_.z*m,v[15]=-p.x+_.x*m,v[16]=-p.y+_.y*m,v[17]=-p.z+_.z*m),T.needsUpdate=!0,T=this.getThreeJsObjects()[0].geometry.getAttribute("uv"),v=T.array,v[0]=0,v[2]=1,v[4]=0,v[6]=1,v[8]=0,v[10]=1,this._textureRepeat?(v[1]=this._textureYOffset+0,v[3]=this._textureYOffset+0,u<d||"px"===this._widthUnits?(v[5]=this._textureYOffset+g*b,v[7]=this._textureYOffset+g*b,v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g):(v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g)):u<d||"px"===this._widthUnits?(v[1]=this._textureYOffset+g,v[3]=this._textureYOffset+g,v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+0,v[11]=this._textureYOffset+0):(v[1]=this._textureYOffset+0,v[3]=this._textureYOffset+0,v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g),T.needsUpdate=!0,s.Vector3.pool.release(a),s.Vector3.pool.release(l),s.Vector3.pool.release(p),s.Vector3.pool.release(_)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if(t.wrapT=s.THREE.RepeatWrapping,this._textureAspectRatio=t.image.width/t.image.height,"loading"!==this.getLoadState())return void t.dispose();const e=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("sprite");this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],this._blending),s.ThreeJsHelper.setUniformColorRGBA(e,"color",this._colorMultiplier,1),s.ThreeJsHelper.setUniformTexture(e,"colorTexture",t),s.ThreeJsHelper.setUniformNumber(e,"pixelBased","px"===this._widthUnits?1:0);const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.setVertices(i.geometry,"position",new Float32Array(18)),s.ThreeJsHelper.setVertices(i.geometry,"uv",new Float32Array(12)),s.ThreeJsHelper.setIndices(i.geometry,new Uint16Array([0,2,3,3,1,0,2,4,5,5,3,2]))}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}}e.default=ConnectedSpriteComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class DivComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._activeCamera=null,this._fadeWhenCloseToCamera=!0,this._fadeWhenCloseToEntity=new s.EntityRef(this.getEntity().getScene()),this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.left="0",this._div.style.top="0",this._div.style.transform="translate(0%, 0%);",this._alignment=new s.Vector2(0,.5),this._alignment.freeze(),this._sizeInPx=new s.Vector2(0,0),this._currentHTML="",this.__setRadius(Number.POSITIVE_INFINITY)}getDiv(){return this._div}getActiveCamera(){return this._activeCamera}setActiveCamera(t){this._activeCamera=t,this.resetResources()}getFadeWhenCloseToCamera(){return this._fadeWhenCloseToCamera}setFadeWhenCloseToCamera(t){this._fadeWhenCloseToCamera=t}getFadeWhenCloseToEntity(){return this._fadeWhenCloseToEntity.getName()}setFadeWhenCloseToEntity(t){this._fadeWhenCloseToEntity.setName(t)}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze()}__loadResources(){return Promise.resolve()}__unloadResources(){null!==this._div.parentNode&&this._div.parentNode.removeChild(this._div)}__prepareForRender(t){if(null===this._activeCamera){const t=this.getEntity().getScene().getEngine().getViewport(0);null!==t&&(this._activeCamera=t.getCamera())}if(this._activeCamera!==t||null===this._activeCamera||null===this._activeCamera.getViewport())return;this._activeCamera.getViewport().getDiv()!==this._div.parentNode&&this._activeCamera.getViewport().getDiv().appendChild(this._div);let e=1;if(e>0&&this._fadeWhenCloseToCamera){const i=this.getEntity().getNormalSpaceExtentsRadius(t);e*=s.MathUtils.clamp01((.02-i)/.02)}const i=this.getEntity().getCameraSpacePosition(t);if(e>0){let i=null;if(i=""===this._fadeWhenCloseToEntity.getName()?this.getEntity().getParent():this._fadeWhenCloseToEntity.get(),null!==i){const n=s.Vector3.pool.get();n.sub(this.getEntity().getNormalSpacePosition(t),i.getNormalSpacePosition(t));const o=n.magnitude();s.Vector3.pool.release(n);i.getNormalSpaceExtentsRadius(t)<.02&&(e*=s.MathUtils.clamp01((o-.02)/.02))}}if(e>0&&(null!==this.getEntity().getParent()&&this.getEntity().getParent().isOccludingPosition(t,i)||t.isPositionOccluded(i))&&(e=0),e>0){const i=s.Vector3.pool.get();t.getEntity().getOrientation().getAxis(i,1),i.dot(this.getEntity().getCameraSpacePosition(t))<=0&&(e=0),s.Vector3.pool.release(i)}if(this._div.style.opacity!==""+e&&(this._div.style.opacity=""+e,this._div.style.pointerEvents=0===e?"none":""),e>0){this._currentHTML!==this._div.innerHTML&&(this._sizeInPx.set(this._div.offsetWidth,this._div.offsetHeight),this._currentHTML=this._div.innerHTML);const e=t.getViewport().getBounds(),i=this.getEntity().getPixelSpacePosition(t),s=i.x-this._sizeInPx.x*this._alignment.x-e.origin.x+(e.size.x%2==0?-.5:0),n=i.y-this._sizeInPx.y*this._alignment.y-e.origin.y+(e.size.y%2==0?-.5:0);this._div.style.transform=`translate(${s}px, ${n}px)`}}}e.default=DivComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class DynamicEnvironmentMapComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._faceSize=64,this._threeJsRenderer=this.getEntity().getScene().getEngine().__getThreeJsRenderer(),this._threeJsFaceCameras=[],this._threeJsFaceRenderTargets=[],this._threeJsQuad=new s.THREE.Mesh,this._threeJsScene=new s.THREE.Scene,this._threeJsCubeCamera=new s.THREE.OrthographicCamera(-1,1,-1,1,-1,1),this._envMapTexture=new s.THREE.WebGLRenderTarget(4*this._faceSize,4*this._faceSize,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter,wrapS:s.THREE.ClampToEdgeWrapping,wrapT:s.THREE.ClampToEdgeWrapping}),this._setupFaceCameras(),this._setupQuad()}getFaceSize(){return this._faceSize}setFaceSize(t){this._faceSize=t,this._envMapTexture.width!==4*this._faceSize&&(this._envMapTexture.setSize(4*this._faceSize,4*this._faceSize),this._threeJsQuad.material.uniforms.faceSize.value=this._faceSize);for(let t=0;t<6;t++)this._threeJsFaceRenderTargets[t].setSize(this._faceSize,this._faceSize)}getTexture(){return this._envMapTexture.texture}__destroy(){this._threeJsQuad.geometry.dispose(),this._threeJsQuad.material.dispose(),this._envMapTexture.dispose();for(let t=0;t<this._threeJsFaceRenderTargets.length;t++)this._threeJsFaceRenderTargets[t].dispose();super.__destroy()}__render(){this._updateProjectionMatrix();const t=.7071067811865476;n.set(0,0,-t,t),this._threeJsFaceCameras[0].setRotationFromQuaternion(n),n.set(0,0,0,1),this._threeJsFaceCameras[1].setRotationFromQuaternion(n),n.set(0,0,t,t),this._threeJsFaceCameras[2].setRotationFromQuaternion(n),n.set(0,0,1,0),this._threeJsFaceCameras[3].setRotationFromQuaternion(n),n.set(.5,-.5,-.5,.5),this._threeJsFaceCameras[4].setRotationFromQuaternion(n),n.set(-.5,.5,-.5,.5),this._threeJsFaceCameras[5].setRotationFromQuaternion(n);for(let t=0;t<6;t++)this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[t]),this._threeJsRenderer.render(this.getEntity().getScene().getThreeJsScene(),this._threeJsFaceCameras[t]);this._threeJsRenderer.setRenderTarget(this._envMapTexture),this._threeJsRenderer.render(this._threeJsScene,this._threeJsCubeCamera)}_setupFaceCameras(){for(let t=0;t<6;t++){this._threeJsFaceCameras.push(new s.THREE.PerspectiveCamera(90,1,.1,1e3));const e=new s.THREE.Matrix4;e.set(1,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0),this._threeJsFaceCameras[t].projectionMatrix=e;const i=new s.THREE.Matrix4;i.set(1,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0),this._threeJsFaceCameras[t].projectionMatrixInverse=i,this._threeJsFaceCameras[t].layers.set(1);const n=new s.THREE.WebGLRenderTarget(this._faceSize,this._faceSize,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter});this._threeJsFaceRenderTargets.push(n)}}_updateProjectionMatrix(){const t=this.getEntity().get("camera");if(null===t)return;const e=1-Number.EPSILON,i=-t.getAutoNearDistance()*(2-Number.EPSILON);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[6]=e,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=i,this._threeJsFaceCameras[t].projectionMatrixInverse.elements[11]=1/i,this._threeJsFaceCameras[t].projectionMatrixInverse.elements[15]=-e/i}_setupQuad(){const t=new s.THREE.BufferGeometry,e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Uint16Array([0,1,2,0,2,3]);t.setAttribute("position",new s.THREE.BufferAttribute(e,2)),t.setIndex(new s.THREE.BufferAttribute(i,1));const n={textures:new s.THREE.Uniform([]),faceSize:new s.THREE.Uniform(this._faceSize)};for(let t=0;t<6;t++)n.textures.value.push(this._threeJsFaceRenderTargets[t].texture);const o=new s.THREE.RawShaderMaterial({uniforms:n,vertexShader:"\n\t\t\t\tattribute vec2 position;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}",fragmentShader:"\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\t\t\t\tuniform float faceSize;\n\n\t\t\t\tvarying vec2 xy;\n\n\t\t\t\tvoid adjustTextureCoordsForBorders(inout int textureIndex, inout vec2 xyInTexture, in float pixelSize) {\n\t\t\t\t\t// Get the pixells in pixel-space.\n\t\t\t\t\tvec2 xyInPixels = xyInTexture * pixelSize;\n\n\t\t\t\t\t// Flip the x since this code is for surface cubes, but we're inside out.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// If it's a border, adjust the pixel it's reading the next pixel in one face over.\n\t\t\t\t\t// This allows for nice linear filtering to happen on the material side of things.\n\t\t\t\t\tif (xyInPixels.x < 0.6 || xyInPixels.x > pixelSize - 0.6 || xyInPixels.y < 0.6 || xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\tif (0 <= textureIndex && textureIndex <= 3) { // One of the horizontal faces\n\t\t\t\t\t\t\tif (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = (textureIndex + 1);\n\t\t\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = textureIndex - 1;\n\t\t\t\t\t\t\t\tif (textureIndex == -1) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 0) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 1) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 2) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 3) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 5) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Shrink all pixels so that they fit within the border.\n\t\t\t\t\t// The border pixels have already been modified so that they work with this equation.\n\t\t\t\t\txyInPixels.x = ((pixelSize - 1.0) * xyInPixels.x - pixelSize) / (pixelSize - 3.0);\n\t\t\t\t\txyInPixels.y = ((pixelSize - 1.0) * xyInPixels.y - pixelSize) / (pixelSize - 3.0);\n\n\t\t\t\t\t// Flip the x back.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// Go back into unit-space.\n\t\t\t\t\txyInTexture = xyInPixels / pixelSize;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\t// Make it pink everywhere else for easy debugging.\n\t\t\t\t\tvec3 color = vec3(1.0, 0.0, 0.5);\n\t\t\t\t\t// Get the mip level, size, and offset.\n\t\t\t\t\tfloat level = floor(1.0 - log2(1.0 - xy.y)); // 0 is base, then 1, etc.\n\t\t\t\t\tfloat mipSizeX = pow(2.0, -level); // 1, .5, .25, .125, etc.\n\t\t\t\t\tfloat mipOffsetY = 1.0 - pow(2.0, -level); // 0, .5, .75, .875, etc.\n\t\t\t\t\t// Get the xy within the mip level. Note the x value is * 3 for less computing further on.\n\t\t\t\t\tvec2 xyInMip;\n\t\t\t\t\txyInMip.x = 0.5 * (xy.x + 1.0) / mipSizeX * 4.0;\n\t\t\t\t\txyInMip.y = (xy.y + 1.0 - 2.0 * mipOffsetY) / mipSizeX;\n\t\t\t\t\tif (xyInMip.x <= 3.0) {\n\t\t\t\t\t\tint textureIndex = int(floor(xyInMip.y * 2.0) * 3.0 + floor(xyInMip.x));\n\t\t\t\t\t\t// Get the xy within the face/texture.\n\t\t\t\t\t\tvec2 xyInTexture;\n\t\t\t\t\t\txyInTexture.x = 1.0 - xyInMip.x + floor(xyInMip.x);\n\t\t\t\t\t\txyInTexture.y = 2.0 * (xyInMip.y - floor(xyInMip.y * 2.0) / 2.0);\n\t\t\t\t\t\t// Adjust the coordinates and face to account for borders.\n\t\t\t\t\t\tadjustTextureCoordsForBorders(textureIndex, xyInTexture, faceSize * mipSizeX);\n\t\t\t\t\t\t// Set the color based on the face (textureIndex) and the coords.\n\t\t\t\t\t\tif (textureIndex == 0) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[0], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (textureIndex == 1) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[1], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (textureIndex == 2) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[2], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (textureIndex == 3) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[3], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (textureIndex == 4) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[4], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (textureIndex == 5) {\n\t\t\t\t\t\t\tcolor = texture2D(textures[5], xyInTexture).rgb;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(color, 1.0);\n\t\t\t\t}",depthTest:!1,depthWrite:!1});this._threeJsQuad=new s.THREE.Mesh(t,o),this._threeJsQuad.frustumCulled=!1,this._threeJsScene.add(this._threeJsQuad)}}const n=new s.THREE.Quaternion;e.default=DynamicEnvironmentMapComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class GizmoComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._size=void 0,this._relativeToEntity=!0,this._joint="",this._jointObject=null,this._model=null,this._lineMesh=null,this.__setRadius(2*i.getExtentsRadius()),this.__setUsesEntityOrientation(this._relativeToEntity)}getSize(){return void 0!==this._size?this._size:Math.max(1e-4,2*this.getEntity().getExtentsRadius())}setSize(t){this._size=t,this.__setRadius(this.getSize())}isRelativeToEntity(){return this._relativeToEntity}setRelativeToEntity(t){this._relativeToEntity=t,this.__setUsesEntityOrientation(this._relativeToEntity)}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}}__prepareForRender(t){if(""===this._joint||null!==this._jointObject&&this._jointObject.name===this._joint||null===this._model||(this._jointObject=this._model.getThreeJsObjectByName(this._joint)),null!==this._jointObject){const e=s.Vector3.pool.get();let i=this._jointObject;for(GizmoComponent._tempThreeJsVector3.copy(i.position),GizmoComponent._tempThreeJsQuaternion.copy(i.quaternion);null!==i.parent&&i.parent!==this._model.getThreeJsObjects()[0];)i=i.parent,GizmoComponent._tempThreeJsVector3.add(i.position),GizmoComponent._tempThreeJsQuaternion.multiplyQuaternions(i.quaternion,GizmoComponent._tempThreeJsQuaternion);e.copyFromThreeJs(GizmoComponent._tempThreeJsVector3),e.mult(e,.001),e.rotate(this._model.getRotation(),e),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t,e,!0),s.Vector3.pool.release(e);const n=s.Quaternion.pool.get();n.copyFromThreeJs(GizmoComponent._tempThreeJsQuaternion),n.mult(this._model.getRotation(),n),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity(),n),s.Quaternion.pool.release(n)}else this._relativeToEntity?s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()):s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t);s.ThreeJsHelper.setScale(this.getThreeJsObjects()[0],this.getSize()),this._lineMesh.prepareForRender(t)}__loadResources(){this._lineMesh=new s.LineMesh(this);const t=[];t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(1,0,0)),t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(0,1,0)),t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(0,0,1)),this._lineMesh.setPositions(t);const e=[];e.push(new s.Color(1,0,0)),e.push(new s.Color(1,0,0)),e.push(new s.Color(0,1,0)),e.push(new s.Color(0,1,0)),e.push(new s.Color(0,0,1)),e.push(new s.Color(0,0,1)),this._lineMesh.setColors(e);const i=[];return i.push(2),i.push(2),i.push(2),i.push(2),i.push(2),i.push(2),this._lineMesh.setWidths(i),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}}GizmoComponent._tempThreeJsVector3=new s.THREE.Vector3,e.default=GizmoComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class LabelComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._text="<PLACEHOLDER>",this._fontFamily="Arial",this._fontSize=16,this._color=new s.Color,this._color.freeze(),this._ignoreDistance=!1,this._alignment=new s.Vector2(0,.5),this._alignment.freeze(),this._pixelOffset=new s.Vector2(0,0),this._pixelOffset.freeze(),this._pixelSize=new s.Vector2,this._devicePixelRatio=1,this._canvas=null,this._normalSpaceBounds=new Map;const n=i.getScene().getEngine().getConfig().getValue("fontFamily");"string"==typeof n&&(this._fontFamily=n);const o=i.getScene().getEngine().getConfig().getValue("fontSize");"number"==typeof o&&(this._fontSize=o),this.__setRadius(Number.POSITIVE_INFINITY)}getText(){return this._text}setText(t){this._text=t,this._updateText()}getFontFamily(){return this._fontFamily}setFontFamily(t){this._fontFamily=t,this._updateText()}getFontSize(){return this._fontSize}setFontSize(t){this._fontSize=t,this._updateText()}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze()}setIgnoreDistance(t){this._ignoreDistance=t}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze(),this._updateText()}getPixelOffset(){return this._pixelOffset}setPixelOffset(t){this._pixelOffset.thaw(),this._pixelOffset.copy(t),this._pixelOffset.freeze()}getNormalSpaceBounds(t){return this._normalSpaceBounds.get(t)}__prepareForRender(t){const e=this.getEntity().getCameraSpacePosition(t);s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity);let i=1;const n=s.Vector2.pool.get();if("spout"===t.getType()){const e=t;i=4,n.set(e.getRenderWidth(),e.getRenderWidth())}else n.copy(t.getViewport().getBounds().size);const o=s.Vector2.pool.get(),a=s.Vector2.pool.get(),r=s.Vector3.pool.get(),l=s.Vector3.pool.get();if(o.set((this._pixelOffset.x-this._alignment.x*this._canvas.width)*i,(this._pixelOffset.y-this._alignment.y*this._canvas.height)*i),a.set(this._canvas.width*i,this._canvas.height*i),t.getEntity().getOrientation().getAxis(r,2),t.getEntity().getOrientation().getAxis(l,0),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"pixelOffset",o),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"pixelSize",a),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"renderSize",Math.max(n.x,n.y)),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"renderUp",r),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"renderRight",l),"spout"!==t.getType()){this._normalSpaceBounds.has(t)||this._normalSpaceBounds.set(t,new s.Rect);const e=this._normalSpaceBounds.get(t);e.thaw();const o=this.getEntity().getNormalSpacePosition(t);e.origin.x=o.x+2*(this._pixelOffset.x-this._alignment.x*this._pixelSize.x)*i/n.x,e.origin.y=o.y+2*(this._pixelOffset.y-this._alignment.y*this._pixelSize.y)*i/n.y,e.size.x=2*this._pixelSize.x*i/n.x,e.size.y=2*this._pixelSize.y*i/n.y,e.freeze()}s.Vector2.pool.release(a),s.Vector2.pool.release(o),s.Vector3.pool.release(r),s.Vector3.pool.release(l),s.Vector2.pool.release(n);let c=1;const h=this.getEntity().getNormalSpaceExtentsRadius(t);if(this._ignoreDistance||(c*=s.MathUtils.clamp01((.02-h)/.02)),null!==this.getEntity().getParent()){const i=t.getNormalSpaceRadiusFromRadius(this.getEntity().getPosition().magnitude(),e.magnitude()),n=this.getEntity().getParent().getNormalSpaceExtentsRadius(t);!this._ignoreDistance&&n<.02&&(c*=s.MathUtils.clamp01((i-.02)/.02))}(null!==this.getEntity().getParent()&&this.getEntity().getParent().isOccludingPosition(t,e)||t.isPositionOccluded(e))&&(c=0);const u=s.Color.pool.get();u.copy(this._color),u.a*=c,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"colorMultiplier",u),s.Color.pool.release(u)}async __loadResources(){0===LabelComponent._useCount&&(LabelComponent._threeJsGeometry=s.ThreeJsHelper.createGeometry([{name:"position",dimensions:2},{name:"uv",dimensions:2}],!1),s.ThreeJsHelper.setVertices(LabelComponent._threeJsGeometry,"position",new Float32Array([0,0,1,0,1,1,0,1])),s.ThreeJsHelper.setVertices(LabelComponent._threeJsGeometry,"uv",new Float32Array([0,1,1,1,1,0,0,0])),s.ThreeJsHelper.setIndices(LabelComponent._threeJsGeometry,new Uint16Array([0,1,2,2,3,0])),LabelComponent._threeJsMaterial=new s.THREE.ShaderMaterial({uniforms:{colorMultiplier:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1)),colorTexture:new s.THREE.Uniform(null),pixelOffset:new s.THREE.Uniform(new s.THREE.Vector2(0,0)),pixelSize:new s.THREE.Uniform(new s.THREE.Vector2(1,1)),renderSize:new s.THREE.Uniform(1),renderUp:new s.THREE.Uniform(new s.THREE.Vector3(0,1,0)),renderRight:new s.THREE.Uniform(new s.THREE.Vector3(1,0,0))},vertexShader:"\n\t\t\t\t\tuniform vec2 pixelOffset;\n\t\t\t\t\tuniform vec2 pixelSize;\n\t\t\t\t\tuniform float renderSize;\n\t\t\t\t\tuniform vec3 renderUp;\n\t\t\t\t\tuniform vec3 renderRight;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t// Get a frame for the label to be on the x-y axis.\n\t\t\t\t\t\tvec3 forward = (modelMatrix * vec4(0, 0, 0, 1.)).xyz;\n\t\t\t\t\t\tfloat distance = length(forward);\n\t\t\t\t\t\tforward = normalize(forward);\n\t\t\t\t\t\tvec3 up = normalize(renderUp);\n\t\t\t\t\t\tvec3 right = normalize(cross(forward, up));\n\n\t\t\t\t\t\t// Setup the up and right vectors.\n\t\t\t\t\t\tup *= (position.y * pixelSize.y + pixelOffset.y) / renderSize * distance;\n\t\t\t\t\t\tright *= (position.x * pixelSize.x + pixelOffset.x) / renderSize * distance * projectionMatrix[1][3];\n\n\t\t\t\t\t\t// Do the transforms.\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4(up + right, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\tfUV = uv;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",side:s.THREE.DoubleSide}),s.ThreeJsHelper.setupLogDepthBuffering(LabelComponent._threeJsMaterial)),LabelComponent._useCount+=1;const t=LabelComponent._threeJsMaterial.clone();this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setTransparent(t,!0),s.ThreeJsHelper.setOverlay(t,!0),s.ThreeJsHelper.setUniformColorRGBA(t,"colorMultiplier",this._color);const e=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,LabelComponent._threeJsGeometry);this.getThreeJsObjects().push(e),this._canvas=document.createElement("canvas"),this._canvas.width=1,this._canvas.height=1,this._updateText()}__unloadResources(){LabelComponent._useCount-=1,0===LabelComponent._useCount&&(s.ThreeJsHelper.destroyGeometry(LabelComponent._threeJsGeometry),s.ThreeJsHelper.destroyMaterial(LabelComponent._threeJsMaterial));const t=this.getThreeJsObjects()[0];null!==t.parent&&t.parent.remove(t),this.getThreeJsMaterials()[0].dispose(),this._canvas=null}_updateText(){if(null===this._canvas)return;const t=this._canvas.getContext("2d");this._devicePixelRatio=window.devicePixelRatio,t.font=this._fontSize+"px "+this._fontFamily;const e=t.measureText(this._text);this._pixelSize.set(e.width*this._devicePixelRatio,this._fontSize*this._devicePixelRatio);const i=s.MathUtils.ceilPow2(this._pixelSize.x),n=s.MathUtils.ceilPow2(this._pixelSize.y);i===this._canvas.width&&n===this._canvas.height||(this._canvas.width=i,this._canvas.height=n),t.clearRect(0,0,this._canvas.width,this._canvas.height),this._canvas.style.width=i/this._devicePixelRatio+"px",this._canvas.style.height=n/this._devicePixelRatio+"px",t.font=this._pixelSize.y+"px "+this._fontFamily,t.fillStyle="rgba(255, 255, 255, 255)",t.fillText(this._text,(this._canvas.width-this._pixelSize.x)*s.MathUtils.clamp01(this._alignment.x),this._canvas.height-.1875*this._pixelSize.y-(this._canvas.height-this._pixelSize.y)*s.MathUtils.clamp01(this._alignment.y));const o=this.getThreeJsMaterials()[0];s.ThreeJsHelper.setUniformTexture(o,"colorTexture",s.ThreeJsHelper.loadTextureFromCanvas(this._canvas))}}LabelComponent._threeJsMaterial=null,LabelComponent._threeJsGeometry=null,LabelComponent._useCount=0,e.default=LabelComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class LightSourceComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1),this._color.freeze(),this._absoluteMagnitude=1,this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze()}getAbsoluteMagnitude(){return this._absoluteMagnitude}setAbsoluteMagnitude(t){this._absoluteMagnitude=t}__loadResources(){return this.getEntity().getScene().__addLightSource(this.getEntity().getName(),this.getTypeIndex()),Promise.resolve()}__unloadResources(){this.getEntity().getScene().__removeLightSource(this.getEntity().getName(),this.getTypeIndex())}__setTypeIndex(t){"loaded"===this.getLoadState()&&this.getEntity().getScene().__removeLightSource(this.getEntity().getName(),this.getTypeIndex()),super.__setTypeIndex(t),"loaded"===this.getLoadState()&&this.getEntity().getScene().__addLightSource(this.getEntity().getName(),this.getTypeIndex())}}e.default=LightSourceComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class ModelComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this._shadowEntities=[],this._translation=new s.Vector3,this._translation.freeze(),this._rotation=new s.Quaternion,this._rotation.freeze(),this._urlReferenceMap=new Map,this._threeJsAnimationClips=new Map,this._hiddenObjects=new s.FastMap,this._scale=new s.Vector3(.001,.001,.001),this._scale.freeze(),this._modelRadius=NaN,this._environmentCubemapUrl="",this._environmentCylindricalUrl="",this._environmentCubemap=null,this._environmentIntensity=.5,this._dynamicEnvironmentMapComponent=null,this._pixelRadiusVisibleInterval=void 0,this._useCompressedTextures=!1,this._onConfigChanged=this._onConfigChanged.bind(this),this.__setRadius(this.getEntity().getExtentsRadius())}getUrl(){return this._url}setUrl(t){""!==this._url&&this.getEntity().getScene().getEngine().getDownloader().cancel(this._url),this.resetResources(),this._modelRadius=NaN,this._loading=!1,this._url=t}setHiddenObject(t,e){e&&!this._hiddenObjects.has(t)?this._hiddenObjects.set(t,null):!e&&this._hiddenObjects.has(t)&&this._hiddenObjects.delete(t)}getTranslation(){return this._translation}setTranslation(t){this._translation.thaw(),this._translation=t,this._translation.freeze()}getScale(){return this._scale}setScale(t){this._scale.thaw(),"number"==typeof t?this._scale.set(t,t,t):this._scale.copy(t),this._scale.freeze(),s.ThreeJsHelper.setScale(this.getThreeJsObjects()[0],this._scale),isNaN(this._modelRadius)?this.__setRadius(this.getEntity().getExtentsRadius()):this.__setRadius(Math.max(this._scale.x,this._scale.y,this._scale.z)*this._modelRadius)}getRotation(){return this._rotation}setRotation(t){this._rotation.thaw(),this._rotation.copy(t),this._rotation.freeze()}getEnvironmentCubemapUrl(){return this._environmentCubemapUrl}setEnvironmentCubemapUrl(t){this._environmentCubemapUrl=t}getEnvironmentIntensity(){return this._environmentIntensity}setEnvironmentIntensity(t){this._environmentIntensity=t;for(let t=0,e=this.getThreeJsMaterials().length;t<e;t++)s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[t],"environmentIntensity",this._environmentIntensity)}getEnvironmentCylindricalUrl(){return this._environmentCylindricalUrl}setEnvironmentCylindricalUrl(t){this._environmentCylindricalUrl=t}setPixelRadiusVisibleInterval(t){if(void 0!==t)void 0===this._pixelRadiusVisibleInterval?this._pixelRadiusVisibleInterval=new s.Interval(t.min,t.max):this._pixelRadiusVisibleInterval.copy(t);else{this._pixelRadiusVisibleInterval=void 0;for(const t of this.getThreeJsMaterials())s.ThreeJsHelper.setUniformNumber(t,"alphaMultiplier",1)}}setDynamicEnvironmentMapComponent(t){this._dynamicEnvironmentMapComponent=t;for(let e=0,i=this.getThreeJsMaterials().length;e<i;e++){const i=this.getThreeJsMaterials()[e];void 0!==i.uniforms.dynEnvTexture&&(s.ThreeJsHelper.setDefine(i,"dynEnvMap",!0),s.ThreeJsHelper.setUniformTexture(i,"dynEnvTexture",this._dynamicEnvironmentMapComponent.getTexture()),s.ThreeJsHelper.setUniformNumber(i,"dynEnvFaceSize",t.getFaceSize()))}null!==this._environmentCubemap&&(this._environmentCubemap.dispose(),this._environmentCubemap=null)}getUseCompressedTextures(){return this._useCompressedTextures}setUseCompressedTextures(t){this._useCompressedTextures=t}setURLReferenceMap(t){this._urlReferenceMap.clear();for(const e of t)this._urlReferenceMap.set(e[0],e[1])}getAnimationClip(t){return this._threeJsAnimationClips.get(t)||null}getMaterial(t){const e=this.getThreeJsMaterials();for(let i=0,s=e.length;i<s;i++)if(e[i].name===t)return e[i];return null}updateMaterial(t,e){const i=this.getThreeJsMaterials();let n;for(let s=0;s<i.length;s++){const o=i[s];if(o.name===t){n=o,i.splice(s,1),i.push(e);break}}if(!n)throw new Error(`No material with the name ${t} was found in ${this}.`);for(let i=0,o=this.getThreeJsObjects().length;i<o;i++){const o=this.getThreeJsObjects()[i];o instanceof s.THREE.Mesh&&o.material===n&&(o.material=e,o.material.name=t)}}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0);const e=t.length>0;for(let t=0,i=this.getThreeJsMaterials().length;t<i;t++)s.ThreeJsHelper.setDefine(this.getThreeJsMaterials()[t],"shadowEntities",e)}__prepareForRender(t){for(let t=0,e=this._hiddenObjects.size;t<e;t++){const e=this._hiddenObjects.getAt(t);null===e.value&&(e.value=this.getThreeJsObjectByName(e.key)),null!==e.value&&(e.value.visible=!1)}if(void 0!==this._pixelRadiusVisibleInterval){const e=this.getEntity().getPixelSpaceExtentsRadius(t),i=s.MathUtils.clamp01(Math.min(1+2*(e-this._pixelRadiusVisibleInterval.min)/this._pixelRadiusVisibleInterval.min,isFinite(this._pixelRadiusVisibleInterval.max)?1-2*(e-this._pixelRadiusVisibleInterval.max)/this._pixelRadiusVisibleInterval.max:1));for(const t of this.getThreeJsMaterials())s.ThreeJsHelper.setUniformNumber(t,"alphaMultiplier",i)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t,this._translation,!0),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity(),this._rotation);for(let t=0,e=this._shadowEntities.length;t<e;t++){const e=this._shadowEntities[t];if("string"==typeof e){const i=this.getEntity().getScene().getEntity(e);null!==i&&(this._shadowEntities[t]=i)}}s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,null,!1)}async __loadResources(){const t=this.getEntity().getScene().getEngine(),e=this._url.startsWith("blob:")||this._url.endsWith(".glb");try{const i=await t.getDownloader().download(this._url,e);if("loading"!==this.getLoadState()||"cancelled"===i.status)return;if("failed"===i.status)throw new Error('Failed to load model component file "'+i.url+'": '+i.errorMessage);if(!i.actualUrl.endsWith(".gltf")&&!i.actualUrl.endsWith(".glb")&&!i.actualUrl.startsWith("blob:"))throw new Error("Unknown model format.");const n=new s.THREE.LoadingManager;0===this._urlReferenceMap.size&&n.addHandler(/.$/,this._useCompressedTextures?t.getTextureLoaderCompressed():t.getTextureLoader()),n.setURLModifier((t=>{const e=t.substring(t.lastIndexOf("/")+1);return this._urlReferenceMap.has(e)?this._urlReferenceMap.get(e):t}));const o=new s.ThreeJsGLTFLoader(n);await new Promise(((e,n)=>{o.parse(i.content,s.THREE.LoaderUtils.extractUrlBase(i.actualUrl),(async i=>{const n=i.scene;this._populateThreeJsObjectsAndMaterials(i.scene),"loading"!==this.getLoadState()&&s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._clean(),s.ThreeJsHelper.setupObject(this,n),s.ThreeJsHelper.setScale(n,this._scale);const o=(new s.THREE.Box3).setFromObject(n);this._modelRadius=Math.max(o.min.length(),o.max.length()),this.__setRadius(Math.max(this._scale.x,this._scale.y,this._scale.z)*this._modelRadius);for(let t=0;t<i.animations.length;t++)this._threeJsAnimationClips.set(i.animations[t].name,i.animations[t]);null===this._dynamicEnvironmentMapComponent&&null===this._environmentCubemap&&(""!==this._environmentCubemapUrl?await t.getTextureLoader().loadCubeTexture(this._environmentCubemapUrl,!0).then((e=>{this._environmentCubemap=t.getTextureLoader().generateEnvMap(e)})):""!==this._environmentCylindricalUrl&&await t.getTextureLoader().loadTexture(this._environmentCylindricalUrl,!0).then((e=>{this._environmentCubemap=t.getTextureLoader().generateEnvMap(e)}))),this._updateMaterials(),this.getEntity().getScene().getEngine().getConfig().addEventListener("gammaCorrection",this._onConfigChanged),e()}),(t=>{n(new Error(`Error loading gltf: ${t}`))}))}))}catch(t){throw new Error(`While loading model "${this._url}": ${t}`)}}__unloadResources(){for(let t=0,e=this._hiddenObjects.size;t<e;t++)this._hiddenObjects.getAt(t).value=null;this.getEntity().getScene().getEngine().getConfig().removeEventListener("gammaCorrection",this._onConfigChanged),s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_populateThreeJsObjectsAndMaterials(t){if(this.getThreeJsObjects().push(t),t instanceof s.THREE.Mesh){let e=t.material;Array.isArray(e)||(e=[e]);for(const t of e){let e=!1;for(let i=0,s=this.getThreeJsMaterials().length;i<s;i++)if(this.getThreeJsMaterials()[i]===t){e=!0;break}e||this.getThreeJsMaterials().push(t)}}for(let e=0;e<t.children.length;e++)this._populateThreeJsObjectsAndMaterials(t.children[e])}_clean(){const t=/_(lamp|hemi)/i;for(let e=0;e<this.getThreeJsObjects().length;e++){const i=this.getThreeJsObjects()[e];i.name.match(t)&&(i.parent&&i.parent.remove(i),this.getThreeJsObjects().splice(e,1),e--)}for(let t=0,e=this.getThreeJsObjects().length;t<e;t++){let e=!1;const i=this.getThreeJsObjects()[t];i instanceof s.THREE.Mesh&&i.geometry instanceof s.THREE.BufferGeometry&&(i.name.startsWith("_root")&&(e=!0),i instanceof s.THREE.Mesh&&i.material instanceof s.THREE.Material&&"transparent"===i.material.name&&(e=!0),e&&(i.geometry.deleteAttribute("position"),i.geometry.deleteAttribute("normal")))}}_onConfigChanged(){this._updateMaterials()}_updateMaterials(){for(let t=0,e=this.getThreeJsMaterials().length;t<e;t++){const e=this.getThreeJsMaterials()[t];if(!(e instanceof s.THREE.MeshStandardMaterial))continue;const i=this._getNewPioneerMaterial(e);this.getThreeJsMaterials()[t]=i;let n=!1;i.defines.normalMap&&(n=!0);for(const t of this.getThreeJsObjects())if(t instanceof s.THREE.Mesh){let o=!1;if(Array.isArray(t.material))for(let s=0,n=t.material.length;s<n;s++)t.material[s]===e&&(t.material[s]=i,o=!0);else t.material===e&&(t.material=i,o=!0);o&&n&&t.geometry instanceof s.THREE.BufferGeometry&&void 0===t.geometry.getAttribute("tangent")&&s.ThreeJsHelper.computeTangents(t.geometry)}e.dispose()}}_getNewPioneerMaterial(t){const e=s.MaterialUtils.getPBR();if(e.name=t.name,e.transparent=t.transparent,e.depthWrite=t.depthWrite,e.side=t.side,null!==t.map){const i=t.map.ktxFormat;void 0!==i&&(t.map.format=i),e.uniforms.colorTexture.value=t.map,e.defines.colorMap=!0}t.roughnessMap&&(e.uniforms.roughnessTexture.value=t.roughnessMap,e.defines.roughnessMap=!0),t.metalnessMap&&(e.uniforms.metalnessTexture.value=t.metalnessMap,e.defines.metalnessMap=!0),null!==t.normalMap&&(e.uniforms.normalTexture.value=t.normalMap,e.uniforms.normalScale.value=t.normalScale,e.defines.normalMap=!0),e.uniforms.emissiveColor.value.copy(t.emissive),e.uniforms.emissiveColor.value.multiplyScalar(t.emissiveIntensity),null!==t.emissiveMap&&(e.uniforms.emissiveTexture.value=t.emissiveMap,e.defines.emissiveMap=!0),e.uniforms.color.value=t.color,e.uniforms.roughness.value=t.roughness,e.uniforms.metalness.value=t.metalness;let i=0;return null!==this._dynamicEnvironmentMapComponent?(e.defines.dynEnvMap=!0,e.uniforms.dynEnvTexture.value=this._dynamicEnvironmentMapComponent.getTexture(),e.uniforms.dynEnvFaceSize.value=this._dynamicEnvironmentMapComponent.getFaceSize()):null!==this._environmentCubemap&&(e.defines.envMap=!0,e.defines.envIsCubeUV=!0,e.uniforms.envTexture.value=this._environmentCubemap,i=this._environmentCubemap.image.height,e.uniforms.maxMipLevel.value=Math.log(i)*Math.LOG2E),e.uniforms.environmentIntensity.value=this._environmentIntensity,e.uniforms.gammaCorrectionFactor.value=this.getEntity().getScene().getEngine().getConfig().getValue("gammaCorrection"),this._shadowEntities.length>0&&(e.defines.shadowEntities=!0),e.needsUpdate=!0,e}}e.default=ModelComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class OrbitalParticlesComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._scaleOfParticles=1,this._loadFunction=null,this._orbitalElementsList=[],this._offsetArray=new Float32Array(0),this._spriteParticles=null,this.__setRadius(100*this.getEntity().getExtentsRadius())}getScaleOfParticles(){return this._scaleOfParticles}setScaleOfParticles(t){this._scaleOfParticles=t,this.resetResources()}setLoadFunction(t){this._loadFunction=t,this.resetResources()}__update(){if(null===this._spriteParticles)return;const t=s.Vector3.pool.get(),e=s.Vector3.pool.get(),i=this.getEntity().getScene().getEngine().getTime();for(let s=0,n=this._orbitalElementsList.length;s<n;s++)this._orbitalElementsList[s].project(t,e,i),this._offsetArray[3*s+0]=t.x,this._offsetArray[3*s+1]=t.y,this._offsetArray[3*s+2]=t.z;s.Vector3.pool.release(t),s.Vector3.pool.release(e),this._spriteParticles.setParticleOffsets(this._offsetArray)}__prepareForRender(t){this._spriteParticles.prepareForRender(t)}async __loadResources(){this._spriteParticles=new s.SpriteParticles(this),this.getThreeJsMaterials().push(this._spriteParticles.getThreeJsMaterial()),this.getThreeJsObjects().push(this._spriteParticles.getThreeJsObject()),await this._initializeParticles()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._spriteParticles=null}async _initializeParticles(){if(null===this._loadFunction)return;const t=await this._loadFunction(),e=t.orbitalElements.length;this._orbitalElementsList=[];let i=0;for(let n=0,o=e;n<o;n++){const e=new s.OrbitalElements;e.copy(t.orbitalElements[n]),this._orbitalElementsList.push(e);const o=e.semiMajorAxis*(1+e.eccentricity);i=Math.max(i,o)}this.__setRadius(i),this._offsetArray=new Float32Array(3*e);const n=new Float32Array(4*e),o=new Float32Array(1*e);for(let i=0,s=e;i<s;i++)n[4*i+0]=t.colors[i].r,n[4*i+1]=t.colors[i].g,n[4*i+2]=t.colors[i].b,n[4*i+3]=t.colors[i].a,o[1*i+0]=t.scales[i]*this._scaleOfParticles;this._spriteParticles.setParticleColors(n),this._spriteParticles.setParticleScales(o)}}e.default=OrbitalParticlesComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class ParticleSprayComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._length=1,this._spread=30,this._numberOfParticles=0,this._speedOfParticles=.1,this._sizeOfParticles=.1,this._particleSpacingRandom=!0,this._colorOfParticles=new s.Color,this._colorOfParticles.freeze(),this._originOffset=new s.Vector3,this._originOffset.freeze(),this._direction=new s.Vector3,this._direction.freeze(),this._relativeToEntityOrientation=!0,this.__setRadius(this._length)}getLength(){return this._length}setLength(t){this._length=t,this.__setRadius(this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"length",this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles)}getSpread(){return this._spread}setSpread(t){this._spread=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"spread",s.MathUtils.degToRad(this._spread))}getNumberOfParticles(){return this._numberOfParticles}setNumberOfParticles(t){this._numberOfParticles=t,this.resetResources()}getSpeedOfParticles(){return this._speedOfParticles}setSpeedOfParticles(t){this._speedOfParticles=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles)}getSizeOfParticles(){return this._sizeOfParticles}setSizeOfParticles(t){this._sizeOfParticles=t,this.resetResources()}getParticleSpacingRandom(){return this._particleSpacingRandom}setParticleSpacingRandom(t){this._particleSpacingRandom=t,this.resetResources()}getColorOfParticles(){return this._colorOfParticles}setColorOfParticles(t){this._colorOfParticles.thaw(),this._colorOfParticles.copy(t),this._colorOfParticles.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"globalColor",this._colorOfParticles)}getOriginOffset(){return this._originOffset}setOriginOffset(t){this._originOffset.thaw(),this._originOffset.copy(t),this._originOffset.freeze(),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",this._originOffset)}getDirection(){return this._direction}setDirection(t){this._direction.thaw(),this._direction.normalize(t),this._direction.freeze(),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",this._direction);const e=s.Vector3.pool.get();e.cross(this._direction,s.Vector3.XAxis),e.isZero()&&e.cross(this._direction,s.Vector3.YAxis),e.normalize(e),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",e),s.Vector3.pool.release(e)}getRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t}__prepareForRender(t){const e=s.MathUtils.wrap(this.getEntity().getScene().getEngine().getTime(),0,this._length/this._speedOfParticles);if(s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",e),this._relativeToEntityOrientation){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();t.rotate(this.getEntity().getOrientation(),this._originOffset),e.rotate(this.getEntity().getOrientation(),this._direction),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",t),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",e);const i=s.Vector3.pool.get();i.cross(e,s.Vector3.XAxis),i.isZero()&&i.cross(e,s.Vector3.YAxis),i.normalize(i),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",i),s.Vector3.pool.release(i),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{spread:new s.THREE.Uniform(0),originOffset:new s.THREE.Uniform(new s.THREE.Vector3),direction:new s.THREE.Uniform(new s.THREE.Vector3),directionPerp:new s.THREE.Uniform(new s.THREE.Vector3),length:new s.THREE.Uniform(0),time:new s.THREE.Uniform(0),totalTime:new s.THREE.Uniform(0),globalColor:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1))},vertexShader:s.ShaderFix.fix(ParticleSprayComponent.vertexShader,"vertex"),fragmentShader:s.ShaderFix.fix(ParticleSprayComponent.fragmentShader,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.AdditiveBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(t);const e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Float32Array(3*this._numberOfParticles),n=new Float32Array(4*this._numberOfParticles),o=new Float32Array(1*this._numberOfParticles),a=new Uint16Array([0,1,2,2,3,0]),r=new s.THREE.InstancedBufferGeometry;r.setAttribute("position",new s.THREE.BufferAttribute(e,2)),r.setAttribute("params",new s.THREE.InstancedBufferAttribute(i,3)),r.setAttribute("color",new s.THREE.InstancedBufferAttribute(n,4)),r.setAttribute("size",new s.THREE.InstancedBufferAttribute(o,1)),r.setIndex(new s.THREE.BufferAttribute(a,1)),r.instanceCount=this._numberOfParticles;const l=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,r);this.getThreeJsObjects().push(l),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity),this._initializeParticles(),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"length",this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"spread",s.MathUtils.degToRad(this._spread)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",this._originOffset),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",this._direction),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"globalColor",this._colorOfParticles);const c=s.Vector3.pool.get();c.cross(this._direction,s.Vector3.XAxis),c.isZero()&&c.cross(this._direction,s.Vector3.YAxis),c.normalize(c),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",c),s.Vector3.pool.release(c)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_initializeParticles(){const t=this.getThreeJsObjects()[0].geometry.attributes.params,e=this.getThreeJsObjects()[0].geometry.attributes.color,i=this.getThreeJsObjects()[0].geometry.attributes.size,s=t.array,n=e.array,o=i.array;for(let t=0,e=this._numberOfParticles;t<e;t++)s[3*t+0]=2*Math.random()-1,s[3*t+1]=2*Math.random()-1,this._particleSpacingRandom?s[3*t+2]=Math.random():s[3*t+2]=t/this._numberOfParticles,n[4*t+0]=1,n[4*t+1]=1,n[4*t+2]=1,n[4*t+3]=1,o[1*t+0]=this._sizeOfParticles;t.needsUpdate=!0,e.needsUpdate=!0,i.needsUpdate=!0}}ParticleSprayComponent.vertexShader="\n\tattribute vec2 position;\n\tattribute vec3 params; // x, y are in plane made by direction if z were 1, z is 0 to 1 where the particle is in the total length at time = 0\n\tattribute vec4 color;\n\tattribute float size;\n\n\tuniform float spread;\n\tuniform vec3 originOffset; // in model-space\n\tuniform vec3 direction; // in model-space\n\tuniform vec3 directionPerp; // in model-space\n\tuniform float length;\n\tuniform float time;\n\tuniform float totalTime;\n\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tfloat u = mod(params.z + time / totalTime, 1.0);\n\t\tfloat sinSpread = sin(spread);\n\t\tfloat uSpread = sinSpread > 0.0 ? u : (1.0 - u);\n\t\tfloat sizeAtU = size * max(0.1, uSpread);\n\t\tvec3 directionPerp2 = cross(direction, directionPerp);\n\t\tvec3 modelPosition = originOffset + (directionPerp * params.x * sinSpread * uSpread + directionPerp2 * params.y * sinSpread * uSpread + direction * u) * length;\n\t\tvec4 viewPosition = vec4(position.x * sizeAtU, 0, position.y * sizeAtU, 1) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t// Set the varying variables.\n\t\tvPosition = position;\n\t\tvColor = color * (1.0 - u);\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",ParticleSprayComponent.fragmentShader="\n\tuniform vec4 globalColor;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color and globalColor.\n\t\tgl_FragColor = globalColor * vColor * max(0.0, 1.0 - dot(vPosition, vPosition));\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=ParticleSprayComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class RingsComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._topTextureUrl="",this._bottomTextureUrl="",this._innerRadius=0,this._outerRadius=0,this._fadeDistance=0,this._shadowEntities=[],this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getTopTextureUrl(){return this._topTextureUrl}setTopTextureUrl(t){this._topTextureUrl=t,s.ThreeJsHelper.loadTextureIntoUniform(this,this.getThreeJsMaterials()[0],"topTexture",this._topTextureUrl,!0,!1)}getBottomTextureUrl(){return this._bottomTextureUrl}setBottomTextureUrl(t){this._bottomTextureUrl=t,s.ThreeJsHelper.loadTextureIntoUniform(this,this.getThreeJsMaterials()[0],"bottomTexture",this._bottomTextureUrl,!0,!1)}getInnerRadius(){return this._innerRadius}setInnerRadius(t){this._innerRadius=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"innerRadius",this._innerRadius)}getOuterRadius(){return this._outerRadius}setOuterRadius(t){this._outerRadius=t,this.__setRadius(this._outerRadius),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"outerRadius",this._outerRadius)}getTopTexture(){const t=this.getThreeJsMaterials()[0];return void 0!==t?t.uniforms.topTexture.value:null}getFadeDistance(){return this._fadeDistance}setFadeDistance(t){this._fadeDistance=t}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){this._spheroidComponentRef.update()}__prepareForRender(t){if(this._fadeDistance>0){const e=s.Vector3.pool.get(),i=s.Quaternion.pool.get(),n=this.getThreeJsObjects()[0].quaternion;i.copyFromThreeJs(n),e.rotateInverse(this.getEntity().getOrientation(),this.getEntity().getCameraSpacePosition(t)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFadeMultiplier",s.MathUtils.lerp(0,1,s.MathUtils.clamp01(2*(Math.abs(e.z)/this._fadeDistance-1)+1))),s.Quaternion.pool.release(i),s.Vector3.pool.release(e)}s.MaterialUtils.setLightSourceUniforms(this.getThreeJsMaterials(),this.getEntity(),t),s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,null,!1),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=s.ThreeJsHelper.loadTexture(this,this._topTextureUrl,!0,!1),e=s.ThreeJsHelper.loadTexture(this,this._bottomTextureUrl,!0,!1),[i,n]=await Promise.all([t,e]);if(this.isDestroyed())return i.dispose(),void n.dispose();const o=new s.THREE.ShaderMaterial({uniforms:{ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),entityPos:new s.THREE.Uniform(new s.THREE.Vector3),innerRadius:new s.THREE.Uniform(this._innerRadius),outerRadius:new s.THREE.Uniform(this._outerRadius),topTexture:new s.THREE.Uniform(i),bottomTexture:new s.THREE.Uniform(n),alphaFadeMultiplier:new s.THREE.Uniform(1),spheroidEquatorialRadius:new s.THREE.Uniform(0),spheroidPolarRadius:new s.THREE.Uniform(0)},vertexShader:RingsComponent.vertexShader,fragmentShader:RingsComponent.fragmentShader,transparent:!0,depthWrite:!1,blending:s.THREE.NormalBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(o),s.ThreeJsHelper.setupLogDepthBuffering(o);const a=s.ThreeJsHelper.createMeshObject(this,o,[{name:"position",dimensions:3},{name:"normal",dimensions:3}],!1),r=10,l=new Float32Array(300),c=new Float32Array(300),h=new Uint16Array(486);for(let t=0;t<r;t++)for(let e=0;e<r;e++){const i=e+t*r;l[3*i+0]=e/9*2-1,l[3*i+1]=t/9*2-1,l[3*i+2]=0,c[3*i+0]=0,c[3*i+1]=0,c[3*i+2]=1,e+1<r&&t+1<r&&(h[6*(e+9*t)+0]=e+0+(t+0)*r,h[6*(e+9*t)+1]=e+0+(t+1)*r,h[6*(e+9*t)+2]=e+1+(t+0)*r,h[6*(e+9*t)+3]=e+1+(t+0)*r,h[6*(e+9*t)+4]=e+0+(t+1)*r,h[6*(e+9*t)+5]=e+1+(t+1)*r)}s.ThreeJsHelper.setVertices(a.geometry,"position",l),s.ThreeJsHelper.setVertices(a.geometry,"normal",c),s.ThreeJsHelper.setIndices(a.geometry,h),a.material=o,this.getThreeJsObjects().push(a),this._spheroidChangedCallback()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this.getThreeJsMaterials()[0];if(null!==t){const e=this._spheroidComponentRef.get();null!==e?(s.ThreeJsHelper.setUniformNumber(t,"spheroidEquatorialRadius",e.getEquatorialRadius()),s.ThreeJsHelper.setUniformNumber(t,"spheroidPolarRadius",e.getPolarRadius())):(s.ThreeJsHelper.setUniformNumber(t,"spheroidEquatorialRadius",0),s.ThreeJsHelper.setUniformNumber(t,"spheroidPolarRadius",0))}}}RingsComponent.vertexShader="\n\tuniform float outerRadius;\n\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tlocalPosition = position * outerRadius;\n\t\tmodelPosition = (modelMatrix * vec4(localPosition, 1.)).xyz;\n\t\tmodelNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\tvec4 viewPosition = viewMatrix * vec4(modelPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance *(z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",RingsComponent.fragmentShader="\n\t#ifndef saturate\n\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t#endif\n\n\tuniform vec3 ambientLightColor;\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float innerRadius;\n\tuniform float outerRadius;\n\tuniform sampler2D topTexture;\n\tuniform sampler2D bottomTexture;\n\tuniform float alphaFadeMultiplier;\n\tuniform float spheroidEquatorialRadius;\n\tuniform float spheroidPolarRadius;\n\tuniform vec3 entityPos;\n\n\t// The varying attributes.\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tfloat spheroidShadow(vec3 lightDir, float lightCosAngle, float spheroidScaling, vec3 normal, vec3 ringPos) {\n\t\tvec3 sunDirScaled = normalize(lightDir - (spheroidScaling - 1.0) * lightCosAngle * normal);\n\t\tfloat pDotLScaled = dot(ringPos, sunDirScaled);\n\t\tif(dot(ringPos, ringPos) - pDotLScaled * pDotLScaled < spheroidEquatorialRadius * spheroidEquatorialRadius && pDotLScaled > 0.0) {\n\t\t\treturn 0.0;\n\t\t}\n\t\telse {\n\t\t\treturn 1.0;\n\t\t}\n\t}\n\n\tvoid main(void) {\n\t\tfloat spheroidScaling = spheroidEquatorialRadius / spheroidPolarRadius;\n\t\tvec3 positionDir = normalize(modelPosition);\n\t\tvec3 ringPos = modelPosition - entityPos;\n\t\tvec3 normal = normalize(modelNormal);\n\t\tfloat cameraCosAngle = -dot(positionDir, normal);\n\n\t\t// Calculate the UVs.\n\t\tvec2 uv;\n\t\tuv.x = (length(localPosition) - innerRadius) / (outerRadius - innerRadius);\n\t\tif (uv.x < 0.0 || uv.x > 1.0) {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\treturn;\n\t\t}\n\t\tuv.y = 0.0;\n\n\t\t// Get the pixels at those uvs.\n\t\tvec4 topPixel = texture2D(topTexture, uv);\n\t\tvec4 bottomPixel = texture2D(bottomTexture, uv);\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec3 lightDir = normalize(modelPosition - lightPositions[i]);\n\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\tfloat cameraDirDotLight = dot(positionDir, lightDir);\n\t\t\tfloat bottomTopRatio = (1.0 + 0.2 * cameraDirDotLight) * sign(cameraCosAngle) * lightCosAngle;\n\t\t\tfloat shadow = spheroidShadow(lightDir, lightCosAngle, spheroidScaling, normal, ringPos);\n\t\t\tvec3 bottomColor = saturate(ambientLightColor + lightColors[i] * (1.0 - bottomTopRatio) * shadow);\n\t\t\tvec3 topColor = 2.0 * saturate(ambientLightColor + lightColors[i] * bottomTopRatio * shadow);\n\n\t\t\tvec3 color = mix(bottomPixel.rgb * bottomColor, topPixel.rgb * topColor, bottomTopRatio);\n\t\t\tgl_FragColor.rgb += color;\n\t\t}\n\n\t\tgl_FragColor.a = topPixel.a;\n\t\tgl_FragColor.a *= alphaFadeMultiplier;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=RingsComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class SkyboxComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._numLatVerts=20,this._textureUrl="",this.__setRadius(1e24),this.__setUsesEntityOrientation(!0)}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if("loading"!==this.getLoadState())return void t.dispose();const e=s.MaterialUtils.get();this.getThreeJsMaterials().push(e),e.defines.colorMapEmmissive=!0,e.needsUpdate=!0,e.uniforms.colorTexture.value=t;const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.useInDynEnvMap(i,!0);const n=s.MathUtils.pi/(this._numLatVerts-1),o=s.MathUtils.pi/this._numLatVerts,a=(2*this._numLatVerts+1)*this._numLatVerts,r=new Float32Array(3*a),l=new Float32Array(2*a),c=new Uint16Array(this._numLatVerts*(this._numLatVerts-1)*12),h=s.Vector3.pool.get(),u=s.LatLonAlt.pool.get();for(let t=0;t<this._numLatVerts;t++)for(let e=0;e<2*this._numLatVerts+1;e++){u.lat=t*n-s.MathUtils.halfPi,u.lon=e*o-s.MathUtils.pi,u.alt=0,h.x=5e23*Math.cos(u.lat)*Math.cos(u.lon),h.y=5e23*Math.cos(u.lat)*Math.sin(u.lon),h.z=5e23*Math.sin(u.lat);const i=t*(2*this._numLatVerts+1)+e;r[3*i+0]=h.x,r[3*i+1]=h.y,r[3*i+2]=h.z,l[2*i+0]=.5-u.lon/s.MathUtils.twoPi,l[2*i+1]=.5-u.lat/s.MathUtils.pi;const a=t*this._numLatVerts*2+e;t<this._numLatVerts-1&&e<2*this._numLatVerts&&(c[6*a+0]=(2*this._numLatVerts+1)*(t+0)+(e+0),c[6*a+1]=(2*this._numLatVerts+1)*(t+1)+(e+0),c[6*a+2]=(2*this._numLatVerts+1)*(t+1)+(e+1),c[6*a+3]=(2*this._numLatVerts+1)*(t+0)+(e+0),c[6*a+4]=(2*this._numLatVerts+1)*(t+1)+(e+1),c[6*a+5]=(2*this._numLatVerts+1)*(t+0)+(e+1))}s.LatLonAlt.pool.release(u),s.Vector3.pool.release(h);const d=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(d,"position",r),s.ThreeJsHelper.setVertices(d,"uv",l),s.ThreeJsHelper.setIndices(d,c)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}}e.default=SkyboxComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class SpheroidComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._equatorialRadius=1,this._polarRadius=1,this._planetographic=!1,this._changed=!0,this._changedCallbacks=new s.FastSet}getEquatorialRadius(){return this._equatorialRadius}setEquatorialRadius(t){this._equatorialRadius=t,this._changed=!0}getPolarRadius(){return this._polarRadius}setPolarRadius(t){this._polarRadius=t,this._changed=!0}isPlanetographic(){return this._planetographic}setPlanetographic(t){this._planetographic=t,this._changed=!0}addChangedCallback(t){this._changedCallbacks.add(t)}removeChangedCallback(t){this._changedCallbacks.delete(t)}__update(){if(this._changed){for(let t=0,e=this._changedCallbacks.size;t<e;t++)this._changedCallbacks.getAt(t)();this._changed=!1}}xyzFromLLA(t,e){const i=Math.cos(e.lat),s=Math.sin(e.lat);if(this._planetographic){const n=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius),o=this._equatorialRadius/Math.sqrt(1-n*s*s);t.x=(o+e.alt)*i*Math.cos(e.lon),t.y=(o+e.alt)*i*Math.sin(e.lon),t.z=((1-n)*o+e.alt)*s}else{const n=this._equatorialRadius,o=this._polarRadius,a=n*o/Math.sqrt(o*o*i*i+n*n*s*s);t.x=(a+e.alt)*i*Math.cos(e.lon),t.y=(a+e.alt)*i*Math.sin(e.lon),t.z=(a+e.alt)*s}}radiusFromXYZ(t,e=5){if(this._planetographic){const i=t.magnitudeXY(),s=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius);let n=Math.atan(t.z/((1-s)*i)),o=0;for(let a=0;a<e;a++){const e=Math.sin(n);o=this._equatorialRadius/Math.sqrt(1-s*e*e),n=Math.atan((t.z+o*s*e)/i)}return o}{const e=t.z*t.z/(t.x*t.x+t.y*t.y),i=1/(1+e),s=e*i,n=this._equatorialRadius,o=this._polarRadius;return n*o/Math.sqrt(o*o*i+n*n*s)}}llaFromXYZ(t,e,i=5){if(this._planetographic){t.lon=Math.atan2(e.y,e.x);const s=e.magnitudeXY(),n=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius);t.lat=Math.atan(e.z/((1-n)*s));let o=0;for(let a=0;a<i;a++){const i=Math.sin(t.lat);o=1/Math.sqrt(1-n*i*i),t.lat=Math.atan((e.z+this._equatorialRadius*o*n*i)/s)}t.alt=s/Math.cos(t.lat)-this._equatorialRadius*o}else{const i=e.magnitudeXY();t.lon=Math.atan2(e.y,e.x),t.lat=Math.atan(e.z/i);const s=Math.cos(t.lat),n=Math.sin(t.lat),o=this._equatorialRadius,a=this._polarRadius,r=o*a/Math.sqrt(a*a*s*s+o*o*n*n);t.alt=e.magnitude()-r}}llaToggleGraphicCentric(t,e){const i=s.Vector3.pool.get();this.xyzFromLLA(i,e),this._planetographic=!this._planetographic,this.llaFromXYZ(t,i),this._planetographic=!this._planetographic,s.Vector3.pool.release(i)}upFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e),t.x=Math.cos(i.lat)*Math.cos(i.lon),t.y=Math.cos(i.lat)*Math.sin(i.lon),t.z=Math.sin(i.lat),s.LatLonAlt.pool.release(i)}eastFromLLA(t,e){t.x=-Math.sin(e.lon),t.y=Math.cos(e.lon),t.z=0}northFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e),t.x=-Math.sin(i.lat)*Math.cos(i.lon),t.y=-Math.sin(i.lat)*Math.sin(i.lon),t.z=Math.cos(i.lat),s.LatLonAlt.pool.release(i)}orientationFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e);const n=Math.sin(i.lat),o=Math.sin(i.lon),a=Math.cos(i.lon);t.w=.5*Math.sqrt((1+n)*(1-o)),t.x=.5*Math.sqrt((1-n)*(1-o)),t.y=.5*Math.sqrt((1-n)*(1+o))*Math.sign(a),t.z=.5*Math.sqrt((1+n)*(1+o))*Math.sign(a),s.LatLonAlt.pool.release(i)}aerFromXYZRelToLLA(t,e,i){const n=s.Vector3.pool.get();this.xyzFromLLA(n,i);const o=s.LatLonAlt.pool.get();this._planetographic?o.copy(i):this.llaFromXYZ(o,n),n.sub(e,n),t.range=n.magnitude(),n.mult(n,1/t.range);const a=s.Vector3.pool.get();this.upFromLLA(a,o);const r=n.dot(a);t.elevation=s.MathUtils.halfPi-Math.acos(r),n.addMult(n,a,-r),s.Vector3.pool.release(a);const l=s.Vector3.pool.get();this.northFromLLA(l,o);const c=s.Vector3.pool.get();this.eastFromLLA(c,o),t.azimuth=Math.atan2(n.dot(c),n.dot(l)),s.Vector3.pool.release(l),s.Vector3.pool.release(c),s.LatLonAlt.pool.release(o),s.Vector3.pool.release(n)}getRayIntersection(t,e,i){const n=this._equatorialRadius/this._polarRadius,o=s.Vector3.pool.get(),a=s.Vector3.pool.get();o.set(e.x,e.y,e.z*n),a.set(i.x,i.y,i.z*n);const r=s.Geometry.getLineSphereIntersectionWithSphereAtOrigin(o,a,this._equatorialRadius);t.addMult(o,a,r),s.Vector3.pool.release(o),s.Vector3.pool.release(a),t.z/=n}getGroundPosition(t,e,i){const n=s.LatLonAlt.pool.get();this.llaFromXYZ(n,e),n.alt=0,this.xyzFromLLA(t,n);const o=s.Vector3.pool.get();this.upFromLLA(o,n),t.addMult(t,o,i),s.LatLonAlt.pool.release(n),s.Vector3.pool.release(o)}}e.default=SpheroidComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class SpheroidLODComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._textureUrls=new s.FastMap,this._textureLODs=new s.FastMap,this._textureSizes=new s.FastMap,this._mapping="cylinder",this._longitudinalRotation=0,this._numFaces=1,this._lowerLeftBounds=new s.LatLonAlt(-s.MathUtils.halfPi,-s.MathUtils.pi,0),this._upperRightBounds=new s.LatLonAlt(+s.MathUtils.halfPi,s.MathUtils.pi,0),this._cubeMapFaceFrames=s.CubeMap._defaultCubeMapFaceFrames,this._shadowEntities=[],this._features=new Set,this._useCompression=!1,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getTextureNames(){const t=[];for(let e=0;e<this._textureUrls.size;e++)t.push(this._textureUrls.getAt(e).key);return t}getTextureUrl(t){return this._textureUrls.get(t)}getTextureSizes(t){return this._textureSizes.get(t)}setTexture(t,e,i=[4,512,4096]){SpheroidLODComponent._textureToFeature.has(t)&&this.setFeature(SpheroidLODComponent._textureToFeature.get(t),""!==e),this._textureUrls.set(t,e),this._textureSizes.set(t,[...i]);let n=this._textureLODs.get(t);if(void 0===n){n=[];const e=this.getThreeJsMaterials();for(let i=0,o=this._numFaces;i<o;i++){const o=new s.TextureLOD(this);if(e.length>0){const s=e[i].uniforms[t+"Texture"];void 0!==s&&o.setUniform(s)}n.push(o)}this._textureLODs.set(t,n)}for(let t=0,s=this._numFaces;t<s;t++)n[t].setUrl(e.replace("$FACE",t.toString())),n[t].setSizes(i)}forceTextureSize(t,e){const i=this._textureLODs.get(t);if(void 0===i)throw new Error('No texture named "'+t+'" has been defined.');for(let t=0;t<i.length;t++)i[t].setForcedSize(e)}unsetTexture(t){SpheroidLODComponent._textureToFeature.has(t)&&this.setFeature(SpheroidLODComponent._textureToFeature.get(t),!1),this._textureUrls.delete(t),this._textureLODs.delete(t),this._textureSizes.delete(t);const e=this.getThreeJsMaterials();for(let i=0,s=e.length;i<s;i++){const s=e[i].uniforms[t+"Texture"];void 0!==s&&(s.value.dispose(),s.value=null)}}getTextureCurrentSize(t,e){const i=this._textureLODs.get(t);if(void 0!==i&&void 0!==i[e])return i[e].getCurrentSize()}isFeatureEnabled(t){return this._features.has(t)}setFeature(t,e){const i=this.getThreeJsMaterials();if(e&&!this._features.has(t)){this._features.add(t);for(let e=0,s=i.length;e<s;e++){const s=i[e];s.defines[t]=!0,s.needsUpdate=!0}"normalMap"===t&&this._updateMeshes()}else if(!e&&this._features.has(t)){this._features.delete(t);for(let e=0,s=i.length;e<s;e++){const s=i[e];delete s.defines[t],s.needsUpdate=!0}"normalMap"===t&&this._updateMeshes()}}getMapping(){return this._mapping}setMapping(t){const e=this._numFaces;if("cylinder"===t)this._numFaces=1;else{if("cube"!==t)throw new Error("Invalid mapping type.");this._numFaces=6}if(this._numFaces!==e)for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).key,i=[];for(let t=0,n=this._numFaces;t<n;t++){const n=new s.TextureLOD(this);n.setUrl(this._textureUrls.get(e).replace("$FACE",t.toString())),n.setSizes(this._textureSizes.get(e)),i.push(n)}this._textureLODs.set(e,i)}this._mapping=t,this.resetResources()}setBounds(t,e){this._lowerLeftBounds.copy(t),this._upperRightBounds.copy(e),this.resetResources()}setCubeMapLayout(t){this._cubeMapFaceFrames=[];for(let e=0;e<6;e++){this._cubeMapFaceFrames.push([]);for(let i=0;i<3;i++){let n=null;switch(t[e][i]){case"+x":n=s.Vector3.XAxis;break;case"-x":n=s.Vector3.XAxisNeg;break;case"+y":n=s.Vector3.YAxis;break;case"-y":n=s.Vector3.YAxisNeg;break;case"+z":n=s.Vector3.ZAxis;break;case"-z":n=s.Vector3.ZAxisNeg;break;default:throw new Error("Invalid cubemap layout component.")}this._cubeMapFaceFrames[e][i]=n}}this.resetResources()}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0)}getUseCompression(){return this._useCompression}setUseCompression(t){this._useCompression=t}getLongitudeRotation(){return this._longitudinalRotation}setLongitudeRotation(t){this._longitudinalRotation=t}getLoadedPromise(){const t=[super.getLoadedPromise()];for(let e=0;e<this._textureLODs.size;e++){const i=this._textureLODs.getAt(e).value;for(let e=0,s=i.length;e<s;e++)t.push(i[e].getLoadedPromise())}return Promise.all(t).then()}getColorAtPosition(t,e,i){const n=s.Vector3.pool.get();if("cube"===this._mapping)s.CubeMap.xyzToUVFace(n,e,this._cubeMapFaceFrames);else if("cylinder"===this._mapping){const e=s.LatLonAlt.pool.get();if(null===this._spheroidComponentRef.get())return void t.set(0,0,0);n.set(e.lon/s.MathUtils.twoPi+.5,e.lat/Math.PI+.5,0),s.LatLonAlt.pool.release(e)}const o=this._textureLODs.get(i);if(void 0===o)throw new Error("Invalid texture name.");const a=o[n.z].getUniform().value,r=document.createElement("canvas");r.width=a.image.width,r.height=a.image.height;const l=r.getContext("2d");l.drawImage(a.image,0,0);const c=l.getImageData(0,0,a.image.width,a.image.height),h=a.format===s.THREE.RGBAFormat?4:3,u=(Math.floor((1-n.y)*c.height)*c.width+Math.floor(n.x*c.width))*h;t.set(c.data[u+0],c.data[u+1],c.data[u+2],4===h?c.data[u+3]:1),s.Vector3.pool.release(n)}setSpheroidReference(t){"string"==typeof t?this._spheroidComponentRef.setByName(this.getEntity().getName(),t):this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid",t)}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).value;for(let t=0,i=e.length;t<i;t++)e[t].update()}this._spheroidComponentRef.update()}__prepareForRender(t){const e=this.getThreeJsObjects(),i=s.Quaternion.pool.get();i.setFromAxisAngle(s.Vector3.ZAxis,this._longitudinalRotation);for(let n=0;n<e.length;n++)s.ThreeJsHelper.setOrientationToEntity(e[n],this.getEntity(),i),s.ThreeJsHelper.setPositionToEntity(e[n],this.getEntity(),t);s.Quaternion.pool.release(i);for(let t=0,e=this._shadowEntities.length;t<e;t++){let e=this._shadowEntities[t];if("string"==typeof e){const t=this.getEntity().getScene().get(e);t instanceof s.Entity&&(e=t)}null!==e&&(this._shadowEntities[t]=e)}const n=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,n,!0)}__loadResources(){for(let t=0;t<this._numFaces;t++){const e=s.MaterialUtils.get();this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setupLogDepthBuffering(e);for(const t of this._features)e.defines[t]=!0,e.needsUpdate=!0;const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.useInDynEnvMap(i,!0);for(let i=0;i<this._textureLODs.size;i++){const s=this._textureLODs.getAt(i).key,n=e.uniforms[s+"Texture"];void 0!==n&&this._textureLODs.get(s)[t].setUniform(n)}}return this._updateMeshes(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this);for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).key;for(let t=0;t<this._numFaces;t++)this._textureLODs.get(e)[t].setUniform(null)}}_updateMeshes(){if(0===this.getThreeJsObjects().length)return;const t=this._spheroidComponentRef.get();if(null!==t)if("cylinder"===this._mapping){const e=this._upperRightBounds.lat-this._lowerLeftBounds.lat,i=this._upperRightBounds.lon-this._lowerLeftBounds.lon,n=Math.max(Math.ceil(100*e/s.MathUtils.pi),4),o=Math.max(Math.ceil(200*i/s.MathUtils.twoPi),4),a=e/(n-1),r=i/(o-1),l=o*n,c=new Float32Array(3*l),h=new Float32Array(3*l),u=new Float32Array(2*l),d=new Uint16Array((o-1)*(n-1)*6),p=s.Vector3.pool.get(),_=s.LatLonAlt.pool.get();for(let e=0;e<n;e++)for(let i=0;i<o;i++){_.lat=this._lowerLeftBounds.lat+e*a,_.lon=this._lowerLeftBounds.lon+i*r,_.alt=0;const s=e*o+i;if(t.xyzFromLLA(p,_),c[3*s+0]=p.x,c[3*s+1]=p.y,c[3*s+2]=p.z,t.upFromLLA(p,_),h[3*s+0]=p.x,h[3*s+1]=p.y,h[3*s+2]=p.z,u[2*s+0]=i/(o-1),u[2*s+1]=1-e/(n-1),e+1<n&&i+1<o){const t=e*(o-1)+i;d[6*t+0]=o*(e+0)+(i+0),d[6*t+1]=o*(e+1)+(i+1),d[6*t+2]=o*(e+1)+(i+0),d[6*t+3]=o*(e+0)+(i+0),d[6*t+4]=o*(e+0)+(i+1),d[6*t+5]=o*(e+1)+(i+1)}}s.LatLonAlt.pool.release(_),s.Vector3.pool.release(p);const g=this.getThreeJsObjects()[0];s.ThreeJsHelper.setVertices(g.geometry,"position",c),s.ThreeJsHelper.setVertices(g.geometry,"normal",h),s.ThreeJsHelper.setVertices(g.geometry,"uv",u),s.ThreeJsHelper.setIndices(g.geometry,d),this._features.has("normalMap")&&s.ThreeJsHelper.computeTangents(g.geometry)}else if("cube"===this._mapping){const e=50,i=s.Vector3.pool.get(),n=s.LatLonAlt.pool.get();for(let o=0;o<6;o++){const a=new Float32Array(e*e*3),r=new Float32Array(e*e*3),l=new Float32Array(e*e*2),c=new Uint16Array((e-1)*(e-1)*6);let h=!1;const u=s.Vector3.pool.get();u.cross(this._cubeMapFaceFrames[o][0],this._cubeMapFaceFrames[o][1]),u.x===this._cubeMapFaceFrames[o][2].x&&u.y===this._cubeMapFaceFrames[o][2].y&&u.z===this._cubeMapFaceFrames[o][2].z||(h=!0),s.Vector3.pool.release(u);let d=0,p=0;for(let u=0;u<e;u++)for(let _=0;_<e;_++)i.mult(this._cubeMapFaceFrames[o][0],2*_/(e-1)-1),i.addMult(i,this._cubeMapFaceFrames[o][1],2*u/(e-1)-1),i.addMult(i,this._cubeMapFaceFrames[o][2],1),i.normalize(i),s.Geometry.getLLAFromXYZOnSphere(n,i,0),n.alt=0,t.xyzFromLLA(i,n),a[3*d+0]=i.x,a[3*d+1]=i.y,a[3*d+2]=i.z,t.upFromLLA(i,n),r[3*d+0]=i.x,r[3*d+1]=i.y,r[3*d+2]=i.z,l[2*d+0]=_/(e-1),l[2*d+1]=1-u/(e-1),_<e-1&&u<e-1&&(c[6*p+0]=(u+0)*e+(_+0),c[6*p+3]=(u+1)*e+(_+1),h?(c[6*p+1]=(u+1)*e+(_+1),c[6*p+2]=(u+0)*e+(_+1),c[6*p+4]=(u+0)*e+(_+0),c[6*p+5]=(u+1)*e+(_+0)):(c[6*p+1]=(u+0)*e+(_+1),c[6*p+2]=(u+1)*e+(_+1),c[6*p+4]=(u+1)*e+(_+0),c[6*p+5]=(u+0)*e+(_+0)),p+=1),d+=1;const _=this.getThreeJsObjects()[o];s.ThreeJsHelper.setVertices(_.geometry,"position",a),s.ThreeJsHelper.setVertices(_.geometry,"normal",r),s.ThreeJsHelper.setVertices(_.geometry,"uv",l),s.ThreeJsHelper.setIndices(_.geometry,c),this._features.has("normalMap")&&s.ThreeJsHelper.computeTangents(_.geometry)}s.LatLonAlt.pool.release(n),s.Vector3.pool.release(i)}}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}SpheroidLODComponent._textureToFeature=new Map([["normal","normalMap"],["night","nightMap"],["decal","decalMap"],["specular","specularMap"]]),e.default=SpheroidLODComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class SpoutComponent extends s.CameraComponent{constructor(t,e,i){super(t,e,i),this._renderWidth=2048,this._forGlobe=!1,this._globeDistance=1,this._threeJsFaceCameras=[],this._threeJsFaceRenderTargets=[],this._threeJsQuad=new s.THREE.Mesh,this._threeJsSpoutScene=new s.THREE.Scene,this._threeJsCubeCamera=new s.THREE.OrthographicCamera(-1,1,-1,1,-1,1),this._tagStart=new s.THREE.WebGLRenderTarget(2,3,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._tagEnd=new s.THREE.WebGLRenderTarget(3,2,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._tagSend=new s.THREE.WebGLRenderTarget(3,3,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._spoutTexture=new s.THREE.WebGLRenderTarget(this._renderWidth,this._renderWidth/2,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._setupFaceCameras(),this._setupQuad()}getRenderWidth(){return this._renderWidth}setRenderWidth(t){this._renderWidth=t,this._spoutTexture.width!==this._renderWidth&&this._spoutTexture.setSize(this._renderWidth,this._renderWidth/2);for(let t=0;t<6;t++)this._threeJsFaceRenderTargets[t].setSize(this._renderWidth/4,this._renderWidth/4)}setForGlobe(t,e){this._forGlobe!==t&&(this._forGlobe=t,this._globeDistance=e)}__render(){this._updateProjectionMatrices();const t=.7071067811865476,e=this.getEntity().getOrientation();n.set(e.x,e.y,e.z,e.w),this._threeJsFaceCameras[0].setRotationFromQuaternion(n),this._forGlobe?n.set(t*(e.x+e.y),t*(-e.x+e.y),t*(e.w+e.z),t*(e.w-e.z)):n.set(t*(e.x-e.y),t*(e.x+e.y),t*(-e.w+e.z),t*(e.w+e.z)),this._threeJsFaceCameras[1].setRotationFromQuaternion(n),n.set(e.y,-e.x,e.w,-e.z),this._threeJsFaceCameras[2].setRotationFromQuaternion(n),this._forGlobe?n.set(t*(e.x-e.y),t*(e.x+e.y),t*(-e.w+e.z),t*(e.w+e.z)):n.set(t*(e.x+e.y),t*(-e.x+e.y),t*(e.w+e.z),t*(e.w-e.z)),this._threeJsFaceCameras[3].setRotationFromQuaternion(n),n.set(t*(e.w+e.x),t*(e.y+e.z),t*(-e.y+e.z),t*(e.w-e.x)),this._threeJsFaceCameras[4].setRotationFromQuaternion(n),n.set(t*(-e.w+e.x),t*(e.y-e.z),t*(e.y+e.z),t*(e.w+e.x)),this._threeJsFaceCameras[5].setRotationFromQuaternion(n);for(let t=0;t<6;t++)this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[t]),this._threeJsRenderer.render(this.getEntity().getScene().getThreeJsScene(),this._threeJsFaceCameras[t]);this._threeJsRenderer.setRenderTarget(this._tagStart),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._spoutTexture),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._tagEnd),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._spoutTexture),this._threeJsRenderer.render(this._threeJsSpoutScene,this._threeJsCubeCamera),this._threeJsRenderer.setRenderTarget(this._tagSend),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(null)}_setupFaceCameras(){for(let t=0;t<6;t++){this._threeJsFaceCameras.push(new s.THREE.PerspectiveCamera(90,1,.1,1e3));const e=new s.THREE.Matrix4;e.set(1,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0),this._threeJsFaceCameras[t].projectionMatrix=e,this._threeJsFaceCameras[t].projectionMatrixInverse.copy(e).invert();const i=new s.THREE.WebGLRenderTarget(this._renderWidth/4,this._renderWidth/4,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter});this._threeJsFaceRenderTargets.push(i)}}_updateProjectionMatrices(){if(this._forGlobe){const t=Math.max(.1,.5*this.getEntity().getParent().getOcclusionRadius()),e=this._globeDistance,i=(t+e)*(1-Number.EPSILON)/(t-e),s=-2*t*e*(1-Number.EPSILON)/(t-e);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[0]=-1,this._threeJsFaceCameras[t].projectionMatrix.elements[7]=-1,this._threeJsFaceCameras[t].projectionMatrix.elements[11]=1,this._threeJsFaceCameras[t].projectionMatrix.elements[6]=i,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=s}else{const t=this.getAutoNearDistance(),e=Number.EPSILON-1,i=t*(2-Number.EPSILON);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[6]=e,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=i}}_setupQuad(){const t=new s.THREE.BufferGeometry,e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Uint16Array([0,1,2,0,2,3]);t.setAttribute("position",new s.THREE.BufferAttribute(e,2)),t.setIndex(new s.THREE.BufferAttribute(i,1));const n={textures:new s.THREE.Uniform([])};for(let t=0;t<6;t++)n.textures.value.push(this._threeJsFaceRenderTargets[t].texture);const o=new s.THREE.RawShaderMaterial({uniforms:n,vertexShader:"\n\t\t\t\tattribute vec2 position;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}",fragmentShader:"\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tconst float PI = 3.1415926535897932384626433832795;\n\n\t\t\t\tvec3 xyToUvFace(vec2 xy) {\n\t\t\t\t\tvec3 xyz = vec3(\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * cos(xy.x * PI),\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * sin(xy.x * PI),\n\t\t\t\t\t\tsin(-xy.y * PI / 2.0));\n\n\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\tfloat face;\n\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 uv = vec3(\n\t\t\t\t\t\tbasis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z,\n\t\t\t\t\t\tbasis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z,\n\t\t\t\t\t\tbasis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z);\n\t\t\t\t\tuv.x /= uv.z;\n\t\t\t\t\tuv.y /= uv.z;\n\n\t\t\t\t\treturn vec3(0.5 * (uv.x + 1.0), 0.5 * (uv.y + 1.0), face);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 uvFace = xyToUvFace(xy);\n\n\t\t\t\t\tvec4 pixel;\n\t\t\t\t\tint face = int(uvFace.z);\n\n\t\t\t\t\tif (face == 0) {\n\t\t\t\t\t\tpixel = texture2D(textures[0], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 1) {\n\t\t\t\t\t\tpixel = texture2D(textures[1], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 2) {\n\t\t\t\t\t\tpixel = texture2D(textures[2], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 3) {\n\t\t\t\t\t\tpixel = texture2D(textures[3], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 4) {\n\t\t\t\t\t\tpixel = texture2D(textures[4], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 5) {\n\t\t\t\t\t\tpixel = texture2D(textures[5], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\n\t\t\t\t\tgl_FragColor = pixel;\n\t\t\t\t}",depthTest:!1,depthWrite:!1,side:s.THREE.DoubleSide});this._threeJsQuad=new s.THREE.Mesh(t,o),this._threeJsQuad.frustumCulled=!1,this._threeJsSpoutScene.add(this._threeJsQuad)}}const n=new s.THREE.Quaternion;e.default=SpoutComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class SpriteComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._textureUrl="",this._size=new s.Vector2(1,Number.NaN),this._size.freeze(),this._sizeUnits="km",this._colorMultiplier=new s.Color(1,1,1,1),this._colorMultiplier.freeze(),this._alignment=new s.Vector2(.5,.5),this._alignment.freeze(),this._fadeDistance=0,this._transparent=!1,this._blending="normal",this._billboard=!1,this._renderOrder=0}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}getSize(){return this._size}setSize(t){this._size.thaw(),this._size.copy(t),this._size.freeze(),this._updateSizeUniform()}getSizeUnits(){return this._sizeUnits}setSizeUnits(t){this._sizeUnits=t,this._updateSizeUniform()}getColorMultiplier(){return this._colorMultiplier}setColorMultiplier(t){this._colorMultiplier.thaw(),this._colorMultiplier.copy(t),this._colorMultiplier.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"colorMultiplier",t)}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze(),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"origin",this._alignment)}getFadeDistance(){return this._fadeDistance}setFadeDistance(t){this._fadeDistance=t}isBillboard(){return this._billboard}setBillboard(t){this._billboard=t}getTransparent(){return this._transparent}setTransparent(t){this._transparent=t,s.ThreeJsHelper.setTransparent(this.getThreeJsMaterials()[0],this._transparent)}setBlending(t){this._blending=t,s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],this._blending)}getRenderOrder(){return this._renderOrder}setRenderOrder(t){this._renderOrder=t,s.ThreeJsHelper.setRenderOrder(this.getThreeJsObjects()[0],this._renderOrder)}__prepareForRender(t){if("pixels"===this._sizeUnits){const e=s.Vector2.pool.get(),i=this.getEntity().getExtentsRadius()/this.getEntity().getPixelSpaceExtentsRadius(t);e.mult(this._size,i),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"size",e),s.Vector2.pool.release(e)}if(this.getThreeJsObjects().length>0&&(this._billboard?s.ThreeJsHelper.setOrientationToBillboard(this.getThreeJsObjects()[0],this.getEntity(),t):s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity())),this._fadeDistance>0){const e=s.Vector3.pool.get(),i=s.Quaternion.pool.get(),n=this.getThreeJsObjects()[0].quaternion;i.copyFromThreeJs(n),e.rotateInverse(this.getEntity().getOrientation(),this.getEntity().getCameraSpacePosition(t)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFadeMultiplier",s.MathUtils.lerp(0,1,s.MathUtils.clamp01(2*(Math.abs(e.z)/this._fadeDistance-1)+1))),s.Quaternion.pool.release(i),s.Vector3.pool.release(e)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if("loading"!==this.getLoadState())return void t.dispose();0===SpriteComponent._useCount&&(SpriteComponent._threeJsGeometry=s.ThreeJsHelper.createGeometry([{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1),s.ThreeJsHelper.setVertices(SpriteComponent._threeJsGeometry,"position",new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])),s.ThreeJsHelper.setVertices(SpriteComponent._threeJsGeometry,"uv",new Float32Array([0,1,1,1,1,0,0,0])),s.ThreeJsHelper.setIndices(SpriteComponent._threeJsGeometry,new Uint16Array([0,1,2,2,3,0])),SpriteComponent._threeJsMaterial=new s.THREE.ShaderMaterial({uniforms:{colorMultiplier:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1)),alphaFadeMultiplier:new s.THREE.Uniform(1),size:new s.THREE.Uniform(new s.THREE.Vector2(1,1)),colorTexture:new s.THREE.Uniform(null),origin:new s.THREE.Uniform(new s.THREE.Vector2(0,0))},vertexShader:"\n\t\t\t\t\tuniform vec2 size;\n\t\t\t\t\tuniform vec2 origin;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4((position.x - origin.x) * size.x, (position.y - origin.y) * size.y, 0.0, 1.0);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\t\t\t\t\t\tfUV = uv;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform float alphaFadeMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\t\t\t\t\t\tgl_FragColor.a *= alphaFadeMultiplier;\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",side:s.THREE.DoubleSide}),s.ThreeJsHelper.setupLogDepthBuffering(SpriteComponent._threeJsMaterial)),SpriteComponent._useCount+=1;const e=SpriteComponent._threeJsMaterial.clone();this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setTransparent(e,this._transparent),s.ThreeJsHelper.setBlending(e,this._blending),s.ThreeJsHelper.setUniformColorRGBA(e,"colorMultiplier",this._colorMultiplier),s.ThreeJsHelper.setUniformNumber(e,"alphaFadeMultiplier",1),s.ThreeJsHelper.setUniformVector2(e,"origin",this._alignment),s.ThreeJsHelper.setUniformTexture(e,"colorTexture",t);const i=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,e,SpriteComponent._threeJsGeometry);this.getThreeJsObjects().push(i),s.ThreeJsHelper.setRenderOrder(i,this._renderOrder),this._updateSizeUniform()}__unloadResources(){s.ThreeJsHelper.destroyMaterial(this.getThreeJsMaterials()[0]);const t=this.getThreeJsObjects()[0];void 0!==t.parent&&t.parent.remove(t),SpriteComponent._useCount-=1,0===SpriteComponent._useCount&&(s.ThreeJsHelper.destroyGeometry(SpriteComponent._threeJsGeometry),s.ThreeJsHelper.destroyMaterial(SpriteComponent._threeJsMaterial))}_updateSizeUniform(){if(this.getThreeJsMaterials().length>0){const t=this.getThreeJsMaterials()[0].uniforms.colorTexture.value;if(null!==t){const e=t.image.width/t.image.height,i=s.Vector2.pool.get();Number.isNaN(this._size.x)?i.set(this._size.y*e,this._size.y):Number.isNaN(this._size.y)?i.set(this._size.x,this._size.x/e):i.set(this._size.x,this._size.y),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"size",i),s.Vector2.pool.release(i),"km"===this._sizeUnits?this.__setRadius(Math.max(i.x,i.y)):this.__setRadius(Number.POSITIVE_INFINITY)}}else"km"===this._sizeUnits?Number.isNaN(this._size.x)||Number.isNaN(this._size.y)?this.__setRadius(this._size.y):this.__setRadius(Math.max(this._size.x,this._size.y)):this.__setRadius(Number.POSITIVE_INFINITY)}}SpriteComponent._threeJsMaterial=null,SpriteComponent._threeJsGeometry=null,SpriteComponent._useCount=0,e.default=SpriteComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);const n=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);class Star{constructor(){this.mag=0,this.absMag=0,this.color=new s.Color,this.position=new s.Vector3,this.particle=null}}class StarfieldComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this.__setRadius(1e24)}getUrl(){return this._url}setUrl(t){this._url=t,this.resetResources()}__prepareForRender(t){const e=s.Vector2.pool.get();if("spout"===t.getType()){const i=t;e.set(i.getRenderWidth(),.5*i.getRenderWidth())}else e.copy(t.getViewport().getBounds().size);const i=Math.sqrt(Math.max(e.x,e.y)*window.devicePixelRatio)/60;s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"resolutionFactor",i),s.Vector2.pool.release(e),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await this._loadStars();if(this.isDestroyed())return;const e=new s.THREE.ShaderMaterial({vertexShader:StarfieldComponent.vertexShader,fragmentShader:StarfieldComponent.fragmentShader,transparent:!0,blending:s.THREE.AdditiveBlending,depthWrite:!1,uniforms:{resolutionFactor:new s.THREE.Uniform(1),nearDistance:new s.THREE.Uniform(0),midDistance:new s.THREE.Uniform(0)}});s.ThreeJsHelper.setupLogDepthBuffering(e),this.getThreeJsMaterials().push(e);const i=new s.THREE.BufferGeometry;i.setAttribute("position",new s.THREE.BufferAttribute(new Float32Array(0),3)),i.setAttribute("color",new s.THREE.BufferAttribute(new Float32Array(0),4)),i.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1));const n=new s.THREE.Points(i,e);s.ThreeJsHelper.setupObject(this,n),n.renderOrder=-2,this.getThreeJsObjects().push(n);const o=new Float32Array(3*t.length),a=new Float32Array(4*t.length),r=new Uint16Array(t.length);for(let e=0;e<t.length;e++){const i=t[e];o[3*e+0]=i.position.x,o[3*e+1]=i.position.y,o[3*e+2]=i.position.z,a[4*e+0]=i.color.r,a[4*e+1]=i.color.g,a[4*e+2]=i.color.b,a[4*e+3]=i.absMag,r[e]=e}s.ThreeJsHelper.setVertices(i,"position",o),s.ThreeJsHelper.setVertices(i,"color",a),s.ThreeJsHelper.setIndices(i,r)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_loadStars(){return this.getEntity().getScene().getEngine().getDownloader().download(this._url,!0).then((t=>{if("cancelled"===t.status)return Promise.resolve([]);if("failed"===t.status)return Promise.reject(new Error('Failed to load starfield component file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load starfield component file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content),i=e.readInt32(),o=[];for(let t=0;t<i;t++){const t=new Star;t.mag=e.readFloat32(),t.absMag=e.readFloat32(),t.color.r=e.readByte()/255,t.color.g=e.readByte()/255,t.color.b=e.readByte()/255,t.color.div(t.color,t.color.max()),t.position.y=-e.readFloat32(),t.position.z=e.readFloat32(),t.position.x=e.readFloat32(),t.position.rotate(n,t.position),o.push(t)}return o}))}}StarfieldComponent.vertexShader="\n\t#define PI 3.1415926538\n\n\tattribute vec4 color;\n\tvarying vec4 fColor;\n\n\tuniform float resolutionFactor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\t// Returns the watts per km^2.\n\tfloat absoluteMagnitudeToFlux(float absoluteMagnitude, float distance) {\n\t\tfloat luminosityInWatts = 3.0128e28 * pow(10.0, absoluteMagnitude / -2.5);\n\t\treturn luminosityInWatts / (4.0 * PI * distance * distance);\n\t}\n\n\tvoid main() {\n\t\tvec4 viewPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\t\tfColor = color;\n\n\t\t// Get the flux and brightness of the star at the camera's point.\n\t\tfloat absMag = color.a;\n\t\tfloat distance = length(viewPosition);\n\t\tfloat flux = absoluteMagnitudeToFlux(absMag, distance);\n\t\tfloat brightness = 2.0 * log(1.0 + flux * 1e4);\n\n\t\t// Adjust the color and size so that it is visually pleasing.\n\t\tfColor.a = clamp(brightness * resolutionFactor, 0.05, 1.0);\n\t\tgl_PointSize = clamp(brightness * 4.0 * resolutionFactor, 5.0, 24.0);\n\n\t\t// If it is too close, fade the star.\n\t\tfColor.a = mix(0.0, fColor.a, clamp((distance - 1.0e12) / 9.0e12, 0.0, 1.0));\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",StarfieldComponent.fragmentShader="\n\tvarying vec4 fColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\tfloat distanceFromEdge = clamp(1.0 - 2.0 * length(gl_PointCoord - vec2(0.5, 0.5)), 0.0, 1.0);\n\t\tfloat a = pow(distanceFromEdge, 5.0);\n\t\tgl_FragColor.rgb = fColor.rgb;\n\t\tgl_FragColor.a = fColor.a * a;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=StarfieldComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class Point{constructor(){this.time=0,this.position=new s.Vector3,this.velocity=new s.Vector3}}class TrailComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._alphaFade=0,this._widthMin=0,this._widthMax=2,this._ignoreDistance=!1,this._startTime=void 0,this._endTime=0,this._relativeStartTime=!0,this._relativeEndTime=!0,this._relativeToEntity=new s.EntityRef(this.getEntity().getScene()),this._relativeToEntityOrientation=!1,this._angleCurveThreshold=.05235987755,this._initialTimeStep=void 0,this._points=[],this._pointsStart=0,this._pointsCount=0,this._currentRelativeToEntity=new s.EntityRef(this.getEntity().getScene()),this._dashLength=1,this._dashGapLength=0,this._glowWidth=0,this._dashOffsetTime=0,this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}getAlphaFade(){return this._alphaFade}setWidths(t,e){this._widthMin=t,this._widthMax=e,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"widthMin",t),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"widthMax",e)}setAlphaFade(t){this._alphaFade=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFade",t)}setDashLength(t,e){this._dashLength=t,this._dashGapLength=e,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"dashLength",t),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"dashGapLength",e)}setGlowWidth(t){this._glowWidth=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"glowWidth",this._glowWidth)}getStartTime(){return this._startTime}setStartTime(t){this._startTime=t}getEndTime(){return this._endTime}setEndTime(t){this._endTime=t}isRelativeStartTime(){return this._relativeStartTime}setRelativeStartTime(t){this._relativeStartTime=t,this.resetPoints()}isRelativeEndTime(){return this._relativeEndTime}setRelativeEndTime(t){this._relativeEndTime=t,this.resetPoints()}getRelativeToEntity(){return this._relativeToEntity.getName()}setRelativeToEntity(t){this._relativeToEntity.setName(t),this._currentRelativeToEntity.setName(t),this.resetPoints()}isRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t,t||s.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),s.Quaternion.Identity),this.resetPoints()}getAngleCurveThreshold(){return this._angleCurveThreshold}setAngleCurveThreshold(t){this._angleCurveThreshold=t,this.resetPoints()}getInitialTimeStep(){return this._initialTimeStep}setInitialTimeStep(t){this._initialTimeStep=t,this.resetPoints()}setIgnoreDistance(t){this._ignoreDistance=t}resetPoints(){if(this._points=[],this._pointsCount=0,this._pointsStart=0,this.getThreeJsObjects().length>0){const t=this.getThreeJsObjects()[0].geometry,e=new Float32Array(0),i=new s.THREE.InterleavedBuffer(e,TrailComponent.VERTEX_SIZE);t.setAttribute("position",new s.THREE.InterleavedBufferAttribute(i,3,0,!1)),t.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(i,3,3,!1)),t.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(i,3,6,!1)),t.setAttribute("side",new s.THREE.InterleavedBufferAttribute(i,1,9,!1)),t.setAttribute("index",new s.THREE.InterleavedBufferAttribute(i,1,10,!1)),t.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(i,1,11,!1)),t.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1))}}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("trail");this.getThreeJsMaterials().push(t),t.uniforms.dashLength.value=this._dashLength,t.uniforms.dashGapLength.value=this._dashGapLength,t.uniforms.indexStart.value=0,t.uniforms.indexCount.value=0,t.uniforms.indexLength.value=0,t.uniforms.color.value.set(this._color.r,this._color.g,this._color.b,this._color.a),t.uniforms.widthMin.value=this._widthMin,t.uniforms.widthMax.value=this._widthMax,t.uniforms.glowWidth.value=this._glowWidth,t.uniforms.alphaFade.value=this._alphaFade;const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3},{name:"positionPrev",dimensions:3},{name:"positionNext",dimensions:3},{name:"side",dimensions:1},{name:"index",dimensions:1},{name:"dashOffset",dimensions:1}],!0);return this.getThreeJsObjects().push(e),Promise.resolve()}__unloadResources(){this.getEntity().getScene().getEngine().getMaterialManager().release(this.getThreeJsMaterials()[0]),s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._points=[],this._pointsCount=0,this._pointsStart=0}__prepareForRender(t){if(""===this._relativeToEntity.getName()&&null!==this.getEntity().getParent()&&this._currentRelativeToEntity.get()!==this.getEntity().getParent()&&(this._currentRelativeToEntity.setName(this.getEntity().getParent().getName()),this.resetPoints()),null===this._currentRelativeToEntity)return;this._updatePoints();const e=this.getThreeJsMaterials()[0];e.uniforms.indexStart.value=this._pointsStart,e.uniforms.indexCount.value=this._pointsCount,e.uniforms.indexLength.value=this._points.length;let i=1;if(!this._ignoreDistance){i*=(.02-this.getEntity().getNormalSpaceExtentsRadius(t))/.02;const e=this.getEntity().getCameraSpacePosition(t).magnitude()/this.getEntity().getPosition().magnitude();i*=s.MathUtils.clamp01(1e3*e)}s.ThreeJsHelper.setUniformNumber(e,"alphaMultiplier",i);const n=s.Vector2.pool.get();t instanceof s.SpoutComponent?n.set(.1*t.getRenderWidth(),.5*t.getRenderWidth()*.1):n.copy(t.getViewport().getBounds().size),s.ThreeJsHelper.setUniformVector2(e,"pixelSize",n),s.Vector2.pool.release(n);const o=this._currentRelativeToEntity.get();null!==o&&(s.ThreeJsHelper.setPosition(this.getThreeJsObjects(),o.getCameraSpacePosition(t)),this._relativeToEntityOrientation&&s.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),o.getOrientation()))}_updatePoints(){const t=s.Interval.pool.get();if(this._getIntervalForUpdate(t),isNaN(t.min)||isNaN(t.max))return void s.Interval.pool.release(t);const e=this._initialTimeStep??t.length()*this._angleCurveThreshold/(2*Math.PI),i=s.Interval.pool.get();for(i.set(Number.POSITIVE_INFINITY,0),this._relativeStartTime&&this._pointsCount>0&&this._points[this._pointsStart].time!==t.min&&this._popFrontPoint(i);this._pointsCount>0&&this._points[this._pointsStart].time<t.min;)this._popFrontPoint(i);const n=s.Quaternion.pool.get();for(;(0===this._pointsCount||this._points[this._pointsStart].time>t.min)&&!(this._pointsCount>=16e3&&this._relativeStartTime);){this._pushFrontPoint(i);const s=this._points[this._pointsStart];let o=0,a=Number.POSITIVE_INFINITY,r=e;this._pointsCount>2&&(r=this._points[(this._pointsStart+2)%this._points.length].time-this._points[(this._pointsStart+1)%this._points.length].time);let l=0;for(;l<20;){let e=t.max;if(this._pointsCount>1&&(e=this._points[(this._pointsStart+1)%this._points.length].time-r),e<t.min&&(e=t.min),s.time=e,this._getPositionAndVelocity(s.position,s.velocity,s.time),s.position.isNaN()||this._relativeToEntityOrientation&&n.isNaN())break;let i=0;if(this._pointsCount>=2&&(i=this._points[(this._pointsStart+1)%this._points.length].velocity.angle(s.velocity)),i>this._angleCurveThreshold)a=r,r=(o+r)/2;else{if(!(this._pointsCount>1&&i<this._angleCurveThreshold/3&&e!==t.min))break;o=r,a===Number.POSITIVE_INFINITY?r*=2:r=(r+a)/2}l++}if(s.position.isNaN()||this._relativeToEntityOrientation&&n.isNaN()){this._popFrontPoint(i);break}}for(this._relativeEndTime&&this._pointsCount>0&&this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time!==t.max&&this._popBackPoint(i);this._pointsCount>0&&this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time>t.max;)this._popBackPoint(i);for(;(0===this._pointsCount||this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time<t.max)&&!(this._pointsCount>=16e3&&this._relativeEndTime);){this._pushBackPoint(i);const s=this._points[(this._pointsStart+this._pointsCount-1)%this._points.length];let o=0,a=Number.POSITIVE_INFINITY,r=e;this._pointsCount>2&&(r=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].time-this._points[(this._pointsStart+this._pointsCount-3)%this._points.length].time);let l=0;for(;l<20;){let e=t.min;if(this._pointsCount>1&&(e=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].time+r),e>t.max&&(e=t.max),s.time=e,this._getPositionAndVelocity(s.position,s.velocity,s.time),s.position.isNaN()||this._relativeToEntityOrientation&&n.isNaN())break;let i=0;if(this._pointsCount>=2&&(i=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].velocity.angle(s.velocity)),i>this._angleCurveThreshold)a=r,r=(o+r)/2;else{if(!(this._pointsCount>1&&i<this._angleCurveThreshold/3&&e!==t.max))break;o=r,a===Number.POSITIVE_INFINITY?r*=2:r=(r+a)/2}l++}if(s.position.isNaN()||this._relativeToEntityOrientation&&n.isNaN()){this._popBackPoint(i);break}}s.Interval.pool.release(t),s.Quaternion.pool.release(n);const o=this.getThreeJsObjects()[0].geometry.attributes.position.data,a=o.array;for(let t=i.min,e=Math.min(this._points.length-1,i.max);t<=e;t++){const e=this._points[t].position,i=isNaN(this._points[(t+this._points.length-1)%this._points.length].position.x)?e:this._points[(t+this._points.length-1)%this._points.length].position,s=isNaN(this._points[(t+1)%this._points.length].position.x)?e:this._points[(t+1)%this._points.length].position;a[2*t*TrailComponent.VERTEX_SIZE+0]=e.x,a[2*t*TrailComponent.VERTEX_SIZE+1]=e.y,a[2*t*TrailComponent.VERTEX_SIZE+2]=e.z,a[(2*t+1)*TrailComponent.VERTEX_SIZE+0]=e.x,a[(2*t+1)*TrailComponent.VERTEX_SIZE+1]=e.y,a[(2*t+1)*TrailComponent.VERTEX_SIZE+2]=e.z,a[2*t*TrailComponent.VERTEX_SIZE+3]=i.x,a[2*t*TrailComponent.VERTEX_SIZE+4]=i.y,a[2*t*TrailComponent.VERTEX_SIZE+5]=i.z,a[(2*t+1)*TrailComponent.VERTEX_SIZE+3]=i.x,a[(2*t+1)*TrailComponent.VERTEX_SIZE+4]=i.y,a[(2*t+1)*TrailComponent.VERTEX_SIZE+5]=i.z,a[2*t*TrailComponent.VERTEX_SIZE+6]=s.x,a[2*t*TrailComponent.VERTEX_SIZE+7]=s.y,a[2*t*TrailComponent.VERTEX_SIZE+8]=s.z,a[(2*t+1)*TrailComponent.VERTEX_SIZE+6]=s.x,a[(2*t+1)*TrailComponent.VERTEX_SIZE+7]=s.y,a[(2*t+1)*TrailComponent.VERTEX_SIZE+8]=s.z,a[2*t*TrailComponent.VERTEX_SIZE+9]=1,a[(2*t+1)*TrailComponent.VERTEX_SIZE+9]=-1,a[2*t*TrailComponent.VERTEX_SIZE+10]=t,a[(2*t+1)*TrailComponent.VERTEX_SIZE+10]=t,a[2*t*TrailComponent.VERTEX_SIZE+11]=this._points[t].time-this._dashOffsetTime,a[(2*t+1)*TrailComponent.VERTEX_SIZE+11]=this._points[t].time-this._dashOffsetTime}o.needsUpdate=!0,o.updateRange.offset=i.max<i.min?0:2*i.min*TrailComponent.VERTEX_SIZE,o.updateRange.count=i.max<i.min?-1:2*(i.length()+1)*TrailComponent.VERTEX_SIZE,s.Interval.pool.release(i)}_getIntervalForUpdate(t){const e=this._relativeStartTime||this._relativeEndTime?this.getEntity().getScene().getEngine().getTime():void 0;if(this._relativeStartTime)if(void 0!==this._startTime)t.min=e-this._startTime;else{let i=null;for(let t=0;;t++){const s=this.getEntity().getControllerByType("dynamo",t);if(null===s)break;"orb"===s.getPointType()&&s.getCoverage().contains(e)&&(i=s)}if(null!==i){const s=i.getSemiMajorAxis(e),n=i.getEccentricity(e),o=i.getHeaderValue("gravitationalParameter1")+i.getHeaderValue("gravitationalParameter2"),a=s*(n<1?1:16*Math.min(100,n)),r=2*Math.PI*a*Math.sqrt(a/o);t.min=e-r}else t.min=e-2*Math.PI*this.getEntity().getPosition().magnitude()/this.getEntity().getVelocity().magnitude()}else t.min=this._startTime;if(this._relativeEndTime)if(void 0!==this._endTime)t.max=e+this._endTime;else{let i=this.getEntity().getPosition().magnitude();for(let t=0;;t++){const s=this.getEntity().getControllerByType("dynamo",t);if(null===s)break;if(s.getCoverage().contains(e)){const t=s.getSemiMajorAxis(e);if(!isNaN(t)){i=t*Math.sqrt((2*t-i)/i);break}}}t.max=e+2*Math.PI*i/this.getEntity().getVelocity().magnitude()}else t.max=this._endTime;t.intersection(t,this.getEntity().getPositionCoverage())}_popFrontPoint(t){this._pointsCount>0&&(this._resize(this._pointsCount-1,t),t.expandTo(this._pointsStart),this._pointsCount>1&&t.expandTo((this._pointsStart+1)%this._points.length),this._points[this._pointsStart].position.x=NaN,this._pointsStart=(this._pointsStart+1)%this._points.length,this._pointsCount-=1)}_popBackPoint(t){this._pointsCount>0&&(this._resize(this._pointsCount-1,t),this._pointsCount-=1,t.expandTo((this._pointsStart+this._pointsCount)%this._points.length),this._pointsCount>0&&t.expandTo((this._pointsStart+this._pointsCount-1)%this._points.length),this._points[(this._pointsStart+this._pointsCount)%this._points.length].position.x=NaN)}_pushFrontPoint(t){this._resize(this._pointsCount+1,t),this._pointsStart=(this._pointsStart+this._points.length-1)%this._points.length,t.expandTo(this._pointsStart),this._pointsCount>0&&t.expandTo((this._pointsStart+1)%this._points.length),this._pointsCount+=1}_pushBackPoint(t){this._resize(this._pointsCount+1,t),this._pointsCount+=1,t.expandTo((this._pointsStart+this._pointsCount-1)%this._points.length),this._pointsCount>1&&t.expandTo((this._pointsStart+this._pointsCount-2)%this._points.length)}_resize(t,e){let i=!1,n=this._points.length;if((t+1>this._points.length||t<=this._points.length/4&&t>=8)&&(i=!0),i){n=Math.max(8,s.MathUtils.ceilPow2(t+1));const i=[];for(let t=0,e=this._pointsCount;t<e;t++)i.push(this._points[(this._pointsStart+t)%this._points.length]);this._pointsStart=0;for(let t=this._pointsCount,e=n;t<e;t++){const t=new Point;t.position.x=Number.NaN,i.push(t)}this._points=i;const o=this.getThreeJsObjects()[0].geometry,a=new Float32Array(2*this._points.length*TrailComponent.VERTEX_SIZE),r=new s.THREE.InterleavedBuffer(a,TrailComponent.VERTEX_SIZE);o.setAttribute("position",new s.THREE.InterleavedBufferAttribute(r,3,0,!1)),o.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(r,3,3,!1)),o.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(r,3,6,!1)),o.setAttribute("side",new s.THREE.InterleavedBufferAttribute(r,1,9,!1)),o.setAttribute("index",new s.THREE.InterleavedBufferAttribute(r,1,10,!1)),o.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(r,1,11,!1));const l=new Uint16Array(6*this._points.length);for(let t=0;t<this._points.length;t++)l[6*t+0]=(2*t+0)%(2*this._points.length),l[6*t+1]=(2*t+2)%(2*this._points.length),l[6*t+2]=(2*t+3)%(2*this._points.length),l[6*t+3]=(2*t+3)%(2*this._points.length),l[6*t+4]=(2*t+1)%(2*this._points.length),l[6*t+5]=(2*t+0)%(2*this._points.length);o.setIndex(new s.THREE.BufferAttribute(l,1)),this._dashOffsetTime=this._points[this._pointsStart].time,e.min=0,e.max=n}}_getPositionAndVelocity(t,e,i){const n=""!==this._relativeToEntity.getName()?this._relativeToEntity.get():this.getEntity().getParent();if(""===this._relativeToEntity.getName()){this.getEntity().getPositionAtTime(t,i),this.getEntity().getVelocityAtTime(e,i);const n=this.getEntity().getParentAtTime(i),o=this._currentRelativeToEntity.get();if(null!==o&&""!==n&&n!==o.getName()){const a=this.getEntity().getScene().getEntity(n);null!==a?(a.getPositionRelativeToEntity(t,t,o,i),a.getVelocityRelativeToEntity(e,e,o,i)):(t.copy(s.Vector3.NaN),e.copy(s.Vector3.NaN))}}else null!==n?(this.getEntity().getPositionRelativeToEntity(t,s.Vector3.Zero,n,i),this.getEntity().getVelocityRelativeToEntity(e,s.Vector3.Zero,n,i)):(t.copy(s.Vector3.NaN),e.copy(s.Vector3.NaN));if(this._relativeToEntityOrientation&&null!==n){const o=s.Quaternion.pool.get();n.getOrientationAtTime(o,i),t.rotateInverse(o,t),e.rotateInverse(o,e),s.Quaternion.pool.release(o)}}}TrailComponent.VERTEX_SIZE=12,e.default=TrailComponent},function(t,e,i){"use strict";i.r(e);var s=i(6);class BaseController extends s.EntityItem{constructor(t,e,i){super(t,e,i),this._coverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._coverage.freeze(),this._modifiedStates=new Set,this._dependentStates=new Set,this.getEntity().getScene().getControllerDependencyGraph().addItem(this)}__destroy(){this.getEntity().getScene().getControllerDependencyGraph().removeItem(this),super.__destroy()}addModifiedState(t){this._modifiedStates.has(t)||(this._modifiedStates.add(t),this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),"position"!==t&&"orientation"!==t||this.getEntity().__updateCoverage())}removeModifiedState(t){this._modifiedStates.delete(t)&&(this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),"position"!==t&&"orientation"!==t||this.getEntity().__updateCoverage())}hasModifiedState(t){return this._modifiedStates.has(t)}addDependentState(t,e){this._dependentStates.has(t+"."+e)||(this._dependentStates.add(t+"."+e),this.getEntity().getScene().getControllerDependencyGraph().needsSorting())}removeDependentState(t,e){this._dependentStates.delete(t+"."+e)&&this.getEntity().getScene().getControllerDependencyGraph().needsSorting()}hasDependentState(t,e){return this._dependentStates.has(t+"."+e)}get __modifiedStates(){return this._modifiedStates}getCoverage(){return this._coverage}setCoverage(t){this._coverage.thaw(),this._coverage.copy(t),this._coverage.freeze(),this.getEntity().__updateCoverage()}__updatePositionAtTime(t,e){}__updateVelocityAtTime(t,e){}__updateOrientationAtTime(t,e){}toString(){let t=0;for(let e=0,i=this.getEntity().getNumControllers();e<i;e++){const i=this.getEntity().getController(e);if(this===i)break;this.getType()===i.getType()&&(t+=1)}return this.getEntity().getName()+"."+this.getType()+"."+t}}e.default=BaseController},function(t,e,i){"use strict";i.r(e);var s=i(6);class AlignController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._primaryAlignType="none",this._primaryAxis=new s.Vector3(1,0,0),this._primaryAxis.freeze(),this._primaryTargetEntity=new s.EntityRef(this.getEntity().getScene()),this._primaryTargetEntity.setRefChangedCallback(((t,e)=>{this._removeDependentStates(t,this._primaryAlignType),this._addDependentStates(e,this._primaryAlignType)})),this._primaryTargetAxis=new s.Vector3(1,0,0),this._primaryTargetAxis.freeze(),this._secondaryAlignType="none",this._secondaryAxis=new s.Vector3(0,1,0),this._secondaryAxis.freeze(),this._secondaryTargetEntity=new s.EntityRef(this.getEntity().getScene()),this._secondaryTargetEntity.setRefChangedCallback(((t,e)=>{this._removeDependentStates(t,this._secondaryAlignType),this._addDependentStates(e,this._secondaryAlignType)})),this._secondaryTargetAxis=new s.Vector3(0,1,0),this._secondaryTargetAxis.freeze(),this._joint="",this._jointObject=null,this._model=null,this._modelRootId=0,this.addModifiedState("orientation")}getPrimaryAlignType(){return this._primaryAlignType}setPrimaryAlignType(t){this._primaryAlignType!==t&&(this._removeDependentStates(this._primaryTargetEntity.get(),this._primaryAlignType),this._primaryAlignType=t,this._addDependentStates(this._primaryTargetEntity.get(),this._primaryAlignType))}getPrimaryAxis(){return this._primaryAxis}setPrimaryAxis(t){this._primaryAxis.thaw(),this._primaryAxis.copy(t),this._primaryAxis.freeze()}getPrimaryTargetEntity(){return this._primaryTargetEntity.getName()}setPrimaryTargetEntity(t){this._primaryTargetEntity.setName(t)}getPrimaryTargetAxis(){return this._primaryTargetAxis}setPrimaryTargetAxis(t){this._primaryTargetAxis.thaw(),this._primaryTargetAxis.copy(t),this._primaryTargetAxis.freeze()}getSecondaryAlignType(){return this._secondaryAlignType}setSecondaryAlignType(t){this._secondaryAlignType!==t&&(this._removeDependentStates(this._secondaryTargetEntity.get(),this._secondaryAlignType),this._secondaryAlignType=t,this._addDependentStates(this._secondaryTargetEntity.get(),this._secondaryAlignType))}getSecondaryAxis(){return this._secondaryAxis}setSecondaryAxis(t){this._secondaryAxis.thaw(),this._secondaryAxis.copy(t),this._secondaryAxis.freeze()}getSecondaryTargetEntity(){return this._secondaryTargetEntity.getName()}setSecondaryTargetEntity(t){this._secondaryTargetEntity.setName(t)}getSecondaryTargetAxis(){return this._secondaryTargetAxis}setSecondaryTargetAxis(t){this._secondaryTargetAxis.thaw(),this._secondaryTargetAxis.copy(t),this._secondaryTargetAxis.freeze()}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}""!==this._joint?(this.addDependentState(this.getEntity().getName(),"orientation"),this.removeModifiedState("orientation")):(this.removeDependentState(this.getEntity().getName(),"orientation"),this.addModifiedState("orientation"))}__updateOrientationAtTime(t,e){""===this._joint&&this._getOrientation(t,e)}__update(){const t=s.Quaternion.pool.get();this._jointObject,t.copy(this.getEntity().getOrientation()),this._getOrientation(t),null!==this._jointObject?this._jointObject.quaternion.set(t.x,t.y,t.z,t.w):this.getEntity().setOrientation(t),s.Quaternion.pool.release(t)}_getOrientation(t,e){if(""!==this._joint&&null!==this._model){const t=this._model.getThreeJsObjects()[0];if(void 0!==t&&(null===this._jointObject||this._jointObject.name!==this._joint||t.id!==this._modelRootId)){const e=this._model.getThreeJsObjectByName(this._joint);null!==e&&(this._jointObject=e,this._modelRootId=t.id)}if(null===this._jointObject)return}const i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),o=s.Quaternion.pool.get(),a=s.Quaternion.pool.get();if(null!==this._jointObject){let e=this._jointObject;for(AlignController._tempThreeJsQuaternion.set(0,0,0,1);null!==e.parent&&e.parent!==this._model.getThreeJsObjects()[0];)e=e.parent,AlignController._tempThreeJsQuaternion.multiplyQuaternions(e.quaternion,AlignController._tempThreeJsQuaternion);a.copyFromThreeJs(AlignController._tempThreeJsQuaternion),a.mult(this._model.getRotation(),a),a.mult(t,a)}else a.copy(t);if(a.isNaN()&&a.copy(s.Quaternion.Identity),n.rotate(a,this._primaryAxis),this._getAxis(i,this._primaryAlignType,this._primaryTargetEntity,this._primaryTargetAxis,n,e),i.isNaN()&&i.set(1,0,0),o.setFromVectorFromTo(n,i),t.mult(o,a),t.isNaN()&&t.copy(s.Quaternion.Identity),s.Vector3.pool.release(n),s.Quaternion.pool.release(o),"none"!==this._secondaryAlignType&&null!==this._secondaryTargetEntity&&(this._getAxis(i,this._secondaryAlignType,this._secondaryTargetEntity,this._secondaryTargetAxis,n,e),!i.isNaN())){const e=s.Quaternion.pool.get(),n=s.Vector3.pool.get(),o=s.Vector3.pool.get();n.rotate(t,this._primaryAxis),o.rotate(t,this._secondaryAxis);const a=o.angleAroundAxis(i,n);e.setFromAxisAngle(n,a),t.mult(e,t),s.Quaternion.pool.release(e),s.Vector3.pool.release(n),s.Vector3.pool.release(o)}t.normalize(t),null!==this._jointObject&&t.multInverseL(a,t),s.Quaternion.pool.release(a),s.Vector3.pool.release(i)}_getAxis(t,e,i,n,o,a){const r=i.get();if("align"===e&&null!==r){const e=s.Quaternion.pool.get();r.getOrientationAtTime(e,a),t.rotate(e,n),s.Quaternion.pool.release(e)}else"velocity"===e&&null!==r?(r.getVelocityAtTime(t,a),t.normalize(t)):"point"===e&&null!==r?(r.getPositionRelativeToEntity(t,s.Vector3.Zero,this.getEntity(),a),t.normalize(t)):"position"===e&&null!==r?t.normalize(r.getPosition()):t.copy(o)}_removeDependentStates(t,e){null!==t&&("align"===e?this.removeDependentState(t.getName(),"orientation"):"velocity"===e?this.removeDependentState(t.getName(),"velocity"):"point"===e?(this.removeDependentState(this.getEntity().getName(),"position"),this.removeDependentState(t.getName(),"position")):"position"===e&&this.removeDependentState(t.getName(),"position"))}_addDependentStates(t,e){null!==t&&("align"===e?this.addDependentState(t.getName(),"orientation"):"velocity"===e?this.addDependentState(t.getName(),"velocity"):"point"===e?(this.addDependentState(this.getEntity().getName(),"position"),this.addDependentState(t.getName(),"position")):"position"===e&&this.addDependentState(t.getName(),"position"))}}AlignController._tempThreeJsQuaternion=new s.THREE.Quaternion,e.default=AlignController},function(t,e,i){"use strict";i.r(e);var s=i(6);const n=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);class State{read(t){}interpolate(t,e,i,s){}}class PosState extends State{constructor(){super(),this.position=new s.Vector3,this.velocity=new s.Vector3}read(t){this.position.y=-t.readFloat64(),this.position.z=t.readFloat64(),this.position.x=t.readFloat64(),this.velocity.y=-t.readFloat64(),this.velocity.z=t.readFloat64(),this.velocity.x=t.readFloat64(),this.position.rotate(n,this.position),this.velocity.rotate(n,this.velocity)}interpolate(t,e,i,s){const n=1-s,o=n*n,a=s*s,r=(1+2*s)*o,l=s*o,c=a*(3-2*s),h=a*-n;this.position.mult(t.position,r),this.position.addMult(this.position,t.velocity,i*l),this.position.addMult(this.position,e.position,c),this.position.addMult(this.position,e.velocity,i*h);const u=6*(a-s),d=u,p=3*a-4*s+1,_=-u,g=3*a-2*s;this.velocity.mult(t.position,d/i),this.velocity.addMult(this.velocity,t.velocity,p),this.velocity.addMult(this.velocity,e.position,_/i),this.velocity.addMult(this.velocity,e.velocity,g)}}class OriState extends State{constructor(){super(),this.orientation=new s.Quaternion}read(t){this.orientation.y=t.readFloat32(),this.orientation.z=-t.readFloat32(),this.orientation.x=-t.readFloat32(),this.orientation.w=t.readFloat32(),this.orientation.mult(n,this.orientation)}interpolate(t,e,i,s){this.orientation.slerp(t.orientation,e.orientation,s)}}class DataPoint{constructor(t){this.interval=new s.Interval,this.state=t.__getNewState()}read(t){this.interval.min=t.readFloat64(),this.interval.max=t.readFloat64(),this.state.read(t)}}class AnimdataFile{constructor(t,e,i){this.interval=new s.Interval,this.dataPoints=[];const n=t.getUrl()+"/"+t.getStateType()+"_data/"+("00"+e).slice(-3)+"."+("000"+(i+1)).slice(-4)+".animdata";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(n,!0).then((async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content);this.interval.min=i.readFloat64(),this.interval.max=i.readFloat64();const n=i.readInt32();for(let e=0;e<n;e++){const e=new DataPoint(t);e.read(i),this.dataPoints.push(e)}}))}}class FileOverlap{constructor(){this.fileIndex=0,this.interval=new s.Interval}}class BucketOverlap{constructor(){this.fileIndex=0,this.dataPointIndices=[]}}class Bucket{constructor(){this.bucketOverlaps=[]}}class AniminfoFile{constructor(t,e,i){this.fileOverlaps=new Map,this.buckets=[];const n=t.getUrl()+"/"+t.getStateType()+"_info/"+("00"+e).slice(-3)+"."+("000"+i).slice(-4)+".animinfo";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(n,!0).then((async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load animdata controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content),i=e.readInt16();for(let t=0;t<i;t++){const t=new FileOverlap;t.fileIndex=e.readInt16(),t.interval.min=e.readFloat64(),t.interval.max=e.readFloat64(),this.fileOverlaps.set(t.fileIndex,t)}const n=e.readInt16();for(let t=0;t<n;t++){const t=new Bucket,i=e.readInt16();for(let s=0;s<i;s++){const i=new BucketOverlap;i.fileIndex=e.readInt16();const s=e.readInt16();for(let t=0;t<s;t++)i.dataPointIndices.push(e.readInt16());t.bucketOverlaps.push(i)}this.buckets.push(t)}}))}}class Coverage{constructor(){this.interval=new s.Interval,this.numDataFiles=0,this.numBuckets=0,this.bucketStepSize=0,this.numBucketsPerAniminfoFile=0,this.animinfos=new Map,this.animdatas=new Map}}class AnimdefFile{constructor(t){this.coverages=[];const e=t.getUrl()+"/"+t.getStateType()+".animdef";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(e,!0).then((async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content),n=i.readInt16();for(let t=0;t<n;t++){const t=new Coverage;t.interval.min=i.readFloat64(),t.interval.max=i.readFloat64(),t.numDataFiles=i.readInt16(),t.numBuckets=i.readInt32(),t.bucketStepSize=i.readFloat64(),t.numBucketsPerAniminfoFile=i.readInt16(),this.coverages.push(t)}t.__updateCoverage()}))}}class AnimdataController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._baseUrl="",this._stateType="",this._animdef=null,this._currentDataPoint=null,this._tempDataPoint=null,this._engine=this.getEntity().getScene().getEngine(),this._forcedCoverage=new s.Interval,this._forcedCoverage.copy(this.getCoverage())}getUrl(){return this._baseUrl}getStateType(){return this._stateType}setBaseUrlAndStateType(t,e){this._baseUrl=t,this._stateType=e,this._currentDataPoint=new DataPoint(this),this._tempDataPoint=new DataPoint(this),this._animdef=new AnimdefFile(this),"pos"===this._stateType?(this.addModifiedState("position"),this.addModifiedState("velocity")):"ori"===this._stateType&&this.addModifiedState("orientation")}setCoverage(t){this._forcedCoverage.copy(t),this.__updateCoverage()}__updateCoverage(){const t=s.Interval.pool.get();if(null!==this._animdef&&this._animdef.coverages.length>0){t.copy(this._animdef.coverages[0].interval);for(let e=1;e<this._animdef.coverages.length;e++)t.union(t,this._animdef.coverages[e].interval);t.intersection(t,this._forcedCoverage)}else t.copy(this._forcedCoverage),t.max=t.min;super.setCoverage(t),s.Interval.pool.release(t)}__updatePositionAtTime(t,e){if("pos"===this._stateType){const i=this._tempDataPoint.state;this._tempDataPoint.interval.min!==e?this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.position):t.copy(i.position)}}__updateVelocityAtTime(t,e){if("pos"===this._stateType){const i=this._tempDataPoint.state;this._tempDataPoint.interval.min!==e?this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.velocity):t.copy(i.velocity)}}__updateOrientationAtTime(t,e){if("ori"===this._stateType){const i=this._tempDataPoint.state;this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.orientation)}}getLoadedPromise(){return this.downloadDataForInterval(new s.Interval(this._engine.getTime(),this._engine.getTime()))}downloadDataForInterval(t){return null===this._animdef?null:this._animdef.promise.then((async()=>{const e=[];for(let i=0;i<this._animdef.coverages.length;i++){const s=this._animdef.coverages[i];if(s.interval.intersects(t)){const n=Math.floor((Math.max(t.min,s.interval.min)-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile),o=Math.floor((Math.min(t.max,s.interval.max)-1e-4-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile);for(let a=n;a<=o;a++){s.animinfos.has(a)||s.animinfos.set(a,new AniminfoFile(this,i,a));const n=s.animinfos.get(a);e.push(n.promise.then((()=>{const e=[];for(const o of n.fileOverlaps.values())if(o.interval.intersects(t)){const t=o.fileIndex;s.animdatas.has(t)||s.animdatas.set(t,new AnimdataFile(this,i,t));const n=s.animdatas.get(t);e.push(n.promise)}return Promise.all(e).then()})))}return Promise.all(e).then()}}}))}__getNewState(){return"pos"===this._stateType?new PosState:"ori"===this._stateType?new OriState:null}__update(){if(null!==this._currentDataPoint&&this._getDataPointAtTime(this._currentDataPoint,this._engine.getTime())){if("pos"===this._stateType){const t=this._currentDataPoint.state;this.getEntity().setPosition(t.position),this.getEntity().setVelocity(t.velocity)}if("ori"===this._stateType){const t=this._currentDataPoint.state;this.getEntity().setOrientation(t.orientation)}}}_getDataPointAtTime(t,e){for(let i=0;i<this._animdef.coverages.length;i++){const s=this._animdef.coverages[i];if(s.interval.contains(e)){const n=Math.floor((e-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile);if(s.animinfos.has(n)){const o=s.animinfos.get(n),a=Math.floor((e-s.interval.min)/s.bucketStepSize)-n*s.numBucketsPerAniminfoFile,r=o.buckets[a];if(void 0===r)return!1;for(let n=0;n<r.bucketOverlaps.length;n++){const a=r.bucketOverlaps[n],l=a.fileIndex;if(o.fileOverlaps.get(l).interval.contains(e)){if(s.animdatas.has(l)){const i=s.animdatas.get(l);for(let s=0;s<a.dataPointIndices.length;s++){const n=a.dataPointIndices[s],o=i.dataPoints[n];if(void 0===o)return!1;if(o.interval.contains(e)){const s=(e-o.interval.min)/o.interval.length();return t.interval.min=e,t.interval.max=e,t.state.interpolate(o.state,i.dataPoints[n+1].state,o.interval.length(),s),!0}}return!1}return s.animdatas.set(l,new AnimdataFile(this,i,l)),!1}}return!1}return s.animinfos.set(n,new AniminfoFile(this,i,n)),!1}}return!1}}e.default=AnimdataController},function(t,e,i){"use strict";i.r(e);var s=i(6);class Coverage{constructor(t,e,i,n){this.timeInterval=new s.Interval(t.min,t.max),this.timeInterval.freeze(),this.enterFunction=e,this.exitFunction=i,this.updateFunction=n,this.active=!1}}class CoverageController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._coverages=[]}addCoverage(t,e,i,s){this._coverages.push(new Coverage(t,e,i,s))}clearCoverages(){this._coverages=[]}getStartOfAllCoverages(){let t=Number.POSITIVE_INFINITY;for(let e=0,i=this._coverages.length;e<i;e++)t>this._coverages[e].timeInterval.min&&(t=this._coverages[e].timeInterval.min);return t}getEndOfAllCoverages(){let t=Number.NEGATIVE_INFINITY;for(let e=0,i=this._coverages.length;e<i;e++)t<this._coverages[e].timeInterval.max&&(t=this._coverages[e].timeInterval.max);return t}coverageContains(t,e){const i=this._coverages[t];return void 0!==i&&i.timeInterval.contains(e)}__update(){const t=this.getEntity().getScene().getEngine().getTime();for(let e=0,i=this._coverages.length;e<i;e++){const i=this._coverages[e],s=i.timeInterval.contains(t);i.active&&!s&&(i.exitFunction&&i.exitFunction(this.getEntity()),i.active=s)}for(let e=0,i=this._coverages.length;e<i;e++){const i=this._coverages[e],s=i.timeInterval.contains(t);!i.active&&s&&(i.enterFunction&&i.enterFunction(this.getEntity()),i.active=s),s&&i.updateFunction&&i.updateFunction(this.getEntity())}}}e.default=CoverageController},function(t,e,i){"use strict";i.r(e);var s=i(6);let n=null,o=null;class Point{load(t){this.time=t.readFloat64()}calculate(t,e,i,s,n){}apply(t){}isNaN(t){return!1}setNaN(t){}static readHeader(t){return{}}}class PosPoint extends Point{constructor(){super(),this.position=new s.Vector3,this.velocity=new s.Vector3}load(t){super.load(t),this.position=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64()),this.velocity=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,n,o){this.time=i;const a=s.MathUtils.clamp01((i-t.time)/(e.time-t.time)),r=s.Vector3.pool.get(),l=s.Vector3.pool.get();r.addMult(t.position,t.velocity,i-t.time),l.addMult(e.position,e.velocity,i-e.time),this.position.lerp(r,l,a),s.Vector3.pool.release(r),s.Vector3.pool.release(l),this.velocity.lerp(t.velocity,e.velocity,a)}apply(t){t.setPosition(this.position),t.setVelocity(this.velocity)}isNaN(t){return t.getPosition().isNaN()}setNaN(t){t.setPosition(s.Vector3.NaN),t.setVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class OriPoint extends Point{constructor(){super(),this.orientation=new s.Quaternion,this.angularVelocity=new s.Vector3}load(t){super.load(t),this.orientation=new s.Quaternion(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64()),this.angularVelocity=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,n,o){this.time=i;const a=s.Quaternion.pool.get(),r=s.Quaternion.pool.get(),l=(i-t.time)/(e.time-t.time);t._project(a,i,o),e._project(r,i,o),this.orientation.slerp(a,r,l),s.Quaternion.pool.release(a),s.Quaternion.pool.release(r),this.angularVelocity.slerp(t.angularVelocity,e.angularVelocity,l),this.angularVelocity.neg(this.angularVelocity),this.angularVelocity.rotate(this.orientation,this.angularVelocity)}apply(t){t.setOrientation(this.orientation),t.setAngularVelocity(this.angularVelocity)}_project(t,e,i){const n=s.Vector3.pool.get(),o=s.Quaternion.pool.get();n.normalize(this.angularVelocity),o.setFromAxisAngle(n,this.angularVelocity.magnitude()*(e-this.time)),s.Vector3.pool.release(n),i?(o.multInverseR(this.orientation,o),t.mult(t,o)):t.multInverseR(this.orientation,o),s.Quaternion.pool.release(o)}isNaN(t){return t.getOrientation().isNaN()}setNaN(t){t.setOrientation(s.Quaternion.NaN),t.setAngularVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class QuatPoint extends Point{constructor(){super(),this.orientation=new s.Quaternion,this.angularVelocity=new s.Vector3}load(t){super.load(t),this.orientation=new s.Quaternion(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,n,o){this.time=i;const a=s.MathUtils.clamp01((i-t.time)/(e.time-t.time));this.orientation.slerp(t.orientation,e.orientation,a)}apply(t){t.setOrientation(this.orientation),t.setAngularVelocity(s.Vector3.Zero)}isNaN(t){return t.getOrientation().isNaN()}setNaN(t){t.setOrientation(s.Quaternion.NaN),t.setAngularVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class OrbPoint extends Point{constructor(){super(),this.oe=new s.OrbitalElements,this.oe.orbitOrientation.freeze(),this.position=new s.Vector3,this.velocity=new s.Vector3}load(t){super.load(t),this.oe.epoch=this.time,this.oe.semiMajorAxis=t.readFloat64(),this.oe.eccentricity=t.readFloat64(),this.oe.meanAngularMotion=t.readFloat64(),this.oe.meanAnomalyAtEpoch=t.readFloat64(),this.oe.orbitOrientation.thaw(),this.oe.orbitOrientation.set(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64()),this.oe.orbitOrientation.freeze()}calculate(t,e,i,n,o){this.time=i,this.oe.epoch=i;const a=s.Vector3.pool.get(),r=s.Vector3.pool.get(),l=s.Vector3.pool.get(),c=s.Vector3.pool.get(),h=s.MathUtils.clamp01((i-t.time)/(e.time-t.time));t._project(a,l,i,n,o),e._project(r,c,i,n,o),this.position.lerp(a,r,h),this.velocity.lerp(l,c,h),s.Vector3.pool.release(a),s.Vector3.pool.release(r),s.Vector3.pool.release(l),s.Vector3.pool.release(c)}apply(t){t.setPosition(this.position),t.setVelocity(this.velocity)}_project(t,e,i,n,o){const a=s.Vector3.pool.get(),r=s.Vector3.pool.get();this.oe.project(a,r,i);let l=1;1===n.body?l=n.gravitationalParameter2/(n.gravitationalParameter1+n.gravitationalParameter2):2===n.body&&(l=-n.gravitationalParameter1/(n.gravitationalParameter1+n.gravitationalParameter2)),a.mult(a,l),r.mult(r,l),o?t.add(a,t):t.copy(a),e.copy(r),s.Vector3.pool.release(a),s.Vector3.pool.release(r)}isNaN(t){return t.getPosition().isNaN()}setNaN(t){t.setPosition(s.Vector3.NaN),t.setVelocity(s.Vector3.NaN)}static readHeader(t){return{gravitationalParameter1:t.readFloat64(),gravitationalParameter2:t.readFloat64()}}}class PointSet{constructor(t,e,i,n){this._PointClass=t,this._version=e,this._numberOfDigits=i,this._name=n,this._pointSets=[],this._points=[],this._hintIndex=0,this._interval=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),this._loadedState=PointSet.State.NOT_LOADED,this._accessedTime=Number.POSITIVE_INFINITY}getName(){return this._name}getLoadedState(){return this._loadedState}getLoadedTime(){return this._accessedTime}hasPointSets(){return 0!==this._pointSets.length}hasPoints(){return 0!==this._points.length}load(t){let e=!0;if((2===this._version||1===this._version&&"def"===this._name)&&(e=1===t.readByte()),e){const e=t.readInt32();for(let i=0;i<e;i++){const e=new this._PointClass;e.load(t),this._points.push(e)}this._points.length>0&&(this._interval.min=this._points[0].time,this._interval.max=this._points[this._points.length-1].time)}else{const e=t.readInt32();1===this._version&&(this._numberOfDigits=Math.ceil(Math.log10(e)));for(let i=0;i<e;i++){let e="";e="def"===this._name?(i+"").padStart(this._numberOfDigits,"0"):this._name+"_"+(i+"").padStart(this._numberOfDigits,"0");const s=new PointSet(this._PointClass,this._version,this._numberOfDigits,e);s._interval.min=t.readFloat64(),1===this._version?s._interval.max=t.readFloat64():i>0&&(this._pointSets[i-1]._interval.max=s._interval.min),this._pointSets.push(s)}2===this._version&&this._pointSets.splice(this._pointSets.length-1,1),this._pointSets.length>0&&(this._interval.min=this._pointSets[0]._interval.min,this._interval.max=this._pointSets[this._pointSets.length-1]._interval.max)}this._loadedState=PointSet.State.LOADED,this._accessedTime=Date.now()}loadFromUrl(t,e){this._loadedState=PointSet.State.LOADING,t.download(e+"/"+this._name+".dyn",!0).then((async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content);this.load(e)}))}unloadOldPointSet(){for(let t=0,e=this._pointSets.length;t<e;t++){const e=this._pointSets[t];if(e._loadedState===PointSet.State.LOADED){if(Date.now()-e._accessedTime>15e3)return e.unload(),!0;if(e.unloadOldPointSet())return!0}}return!1}unload(){this._loadedState=PointSet.State.NOT_LOADED,this._accessedTime=Number.POSITIVE_INFINITY,this._pointSets=[],this._points=[]}getPointSet(t){if(this._accessedTime=Date.now(),0===this._pointSets.length)return null;if(this._pointSets[this._hintIndex]._interval.contains(t));else if(this._hintIndex-1>=0&&this._pointSets[this._hintIndex-1]._interval.contains(t))this._hintIndex-=1;else if(this._hintIndex+1<this._pointSets.length&&this._pointSets[this._hintIndex+1]._interval.contains(t))this._hintIndex+=1;else{let e=0,i=this._pointSets.length-1,s=0;for(;e!==i;)s=Math.ceil((e+i)/2),t<this._pointSets[s]._interval.min?i=s-1:e=s;this._hintIndex=e}return this._pointSets[this._hintIndex]}getPoints(t){if(this._accessedTime=Date.now(),0===this._points.length)return n=null,void(o=null);if(this._hintIndex+1<this._points.length&&this._points[this._hintIndex].time<=t&&t<this._points[this._hintIndex+1].time);else if(this._hintIndex-1>=0&&this._points[this._hintIndex-1].time<=t&&t<this._points[this._hintIndex].time)this._hintIndex-=1;else if(this._hintIndex+2<this._points.length&&this._points[this._hintIndex+1].time<=t&&t<this._points[this._hintIndex+2].time)this._hintIndex+=1;else{let e=0,i=this._points.length-2,s=0;for(;e!==i;)s=Math.ceil((e+i)/2),t<this._points[s].time?i=s-1:e=s;this._hintIndex=e}n=this._points[this._hintIndex],o=this._points[this._hintIndex+1]}}PointSet.State={NOT_LOADED:0,LOADING:1,LOADED:2};class DynamoController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._baseUrl="",this._dataLoadedAtCurrentTime=!1,this._timeOffset=0,this._version=0,this._pointType="",this._PointClass=null,this._numberOfDigits=0,this._header={body:0},this._incremental=!1,this._pointSet=null,this._downloader=i.getScene().getEngine().getDownloader(),this._lastP0=null,this._lastP1=null,this._lastTime=Number.NaN,this._pCalc=null,this._userCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._userCoverage.freeze()}getPointType(){return this._pointType}getHeaderValue(t){return this._header[t]}setHeaderValue(t,e){this._header[t]=e}isIncremental(){return this._incremental}setIncremental(t){this._incremental=t}getBaseUrl(){return this._baseUrl}setBaseUrl(t){""!==this._baseUrl&&(this._downloader.cancel(this._baseUrl+"/def.dyn"),this._pointSet=null,this._PointClass=null,this._userCoverage.thaw(),this._userCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._userCoverage.freeze(),super.setCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)),this.addModifiedState("position"),this.addModifiedState("velocity"),this.addModifiedState("orientation"),this.addModifiedState("angularVelocity"),this._dataLoadedAtCurrentTime=!1),this._baseUrl=t,this._baseUrl.endsWith("/")&&(this._baseUrl=this._baseUrl.slice(0,-1)),this._loadDef()}getLoadedPromise(){return new Promise((t=>{const e=this.getEntity().getScene().getEngine(),i=()=>{const s=e.getTime();(this.isDestroyed()||!this.isEnabled()||!this.getEntity().isEnabled()||""===this._baseUrl||null!==this._pointSet&&!this.getCoverage().contains(s)||this._dataLoadedAtCurrentTime)&&(e.removeCallback(i),t())};e.addCallback(i,!0)}))}getTimeOffset(){return this._timeOffset}setTimeOffset(t){const e=this._timeOffset;this._timeOffset=t;const i=new s.Interval;i.copy(this.getCoverage()),i.min+=this._timeOffset-e,i.max+=this._timeOffset-e,super.setCoverage(i)}setCoverage(t){this._userCoverage.thaw(),this._userCoverage.copy(t),this._userCoverage.freeze();const e=s.Interval.pool.get();null!==this._pointSet?e.intersection(this._userCoverage,this._pointSet._interval):e.copy(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),e.min+=this._timeOffset,e.max+=this._timeOffset,super.setCoverage(e),s.Interval.pool.release(e)}getOrbitalElements(t,e){if(this._PointClass===OrbPoint&&null!==this._pointSet&&(this._getPointsAtTime(e),null!==n&&(this._lastP0=n,this._lastP1=o),null!==this._lastP0)){const i=this._lastP0.oe,n=this._lastP1.oe,o=s.MathUtils.clamp01((e-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));t.eccentricity=s.MathUtils.lerp(i.eccentricity,n.eccentricity,o),t.semiMajorAxis=s.MathUtils.lerp(i.semiMajorAxis,n.semiMajorAxis,o),t.epoch=s.MathUtils.lerp(i.epoch,n.epoch,o),t.meanAngularMotion=s.MathUtils.lerp(i.meanAngularMotion,n.meanAngularMotion,o),t.meanAnomalyAtEpoch=s.MathUtils.lerpAngle(i.meanAnomalyAtEpoch,n.meanAnomalyAtEpoch,o),t.orbitOrientation.slerp(i.orbitOrientation,n.orbitOrientation,o)}}getEccentricity(t){if(this._PointClass===OrbPoint&&null!==this._pointSet&&(this._getPointsAtTime(t),null!==n&&(this._lastP0=n,this._lastP1=o),null!==this._lastP0)){const e=s.MathUtils.clamp01((t-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));return s.MathUtils.lerp(this._lastP0.oe.eccentricity,this._lastP1.oe.eccentricity,e)}return Number.NaN}getSemiMajorAxis(t){if(this._PointClass===OrbPoint&&null!==this._pointSet&&(this._getPointsAtTime(t),null!==n&&(this._lastP0=n,this._lastP1=o),null!==this._lastP0)){const e=s.MathUtils.clamp01((t-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));return s.MathUtils.lerp(this._lastP0.oe.semiMajorAxis,this._lastP1.oe.semiMajorAxis,e)}return Number.NaN}getOrbitOrientation(t,e){if(this._PointClass===OrbPoint&&null!==this._pointSet&&(this._getPointsAtTime(e),null!==n&&(this._lastP0=n,this._lastP1=o),null!==this._lastP0)){const i=s.MathUtils.clamp01((e-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));t.slerp(this._lastP0.oe.orbitOrientation,this._lastP1.oe.orbitOrientation,i)}}__destroy(){""!==this._baseUrl&&this._downloader.cancel(this._baseUrl+"/def.dyn"),super.__destroy()}__updatePositionAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.position&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===n)return void t.copy(s.Vector3.NaN);this._pCalc.calculate(n,o,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.position)}}else t.copy(s.Vector3.NaN)}__updateVelocityAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.velocity&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===n)return void t.copy(s.Vector3.NaN);this._pCalc.calculate(n,o,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.velocity)}}else t.copy(s.Vector3.NaN)}__updateOrientationAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.orientation&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===n)return void t.copy(s.Quaternion.NaN);this._pCalc.calculate(n,o,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.orientation)}}else t.copy(s.Quaternion.NaN)}__update(){const t=this.getEntity(),e=t.getScene().getEngine(),i=e.getTime();if(null!==this._pointSet)if(this._pointSet.unloadOldPointSet(),this._getPointsAtTime(i),null!==n)this._pCalc.calculate(n,o,i-this._timeOffset,this._header,this._incremental),this._pCalc.apply(t),this._lastP0=n,this._lastP1=o,this._dataLoadedAtCurrentTime=!0;else if(this._pCalc.isNaN(t))this._dataLoadedAtCurrentTime=!1;else{Math.abs(i-(this._lastTime+e.getTimeRate()*e.getDeltaTime()))>Math.abs(e.getTimeRate()*e.getDeltaTime()*2)?this._pCalc.apply(t):null!==this._lastP0&&(this._pCalc.calculate(this._lastP0,this._lastP1,i-this._timeOffset,this._header,this._incremental),this._pCalc.apply(t)),this._dataLoadedAtCurrentTime=!1}else this.getEntity().setPosition(s.Vector3.NaN),this.getEntity().setVelocity(s.Vector3.NaN),this.getEntity().setOrientation(s.Quaternion.NaN),this.getEntity().setAngularVelocity(s.Vector3.NaN),this._dataLoadedAtCurrentTime=!1;this._lastTime=i}async _loadDef(){const t=this._baseUrl;return this._downloader.download(this._baseUrl+"/def.dyn",!0).then((async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content);if(this._version=e.readInt16(),1!==this._version&&2!==this._version)throw new Error(t.url+" is not Dynamo version 1 or 2");this._pointType=e.readString(),"pos"===this._pointType?this._PointClass=PosPoint:"ori"===this._pointType?this._PointClass=OriPoint:"quat"===this._pointType?this._PointClass=QuatPoint:"orb"===this._pointType&&(this._PointClass=OrbPoint),this._pCalc=new this._PointClass,this._PointClass===PosPoint||this._PointClass===OrbPoint?(this.addModifiedState("position"),this.addModifiedState("velocity"),this.removeModifiedState("orientation"),this.removeModifiedState("angularVelocity")):this._PointClass!==OriPoint&&this._PointClass!==QuatPoint||(this.addModifiedState("orientation"),this.addModifiedState("angularVelocity"),this.removeModifiedState("position"),this.removeModifiedState("velocity")),2===this._version&&(this._numberOfDigits=e.readByte()),this._header=Object.assign(this._header,this._PointClass.readHeader(e)),this._pointSet=new PointSet(this._PointClass,this._version,this._numberOfDigits,"def"),this._pointSet.load(e);const i=s.Interval.pool.get();i.intersection(this._userCoverage,this._pointSet._interval),i.min+=this._timeOffset,i.max+=this._timeOffset,super.setCoverage(i),s.Interval.pool.release(i)})).catch((e=>{throw new Error(`While loading dynamo "${t}/def.dyn": ${e}`)}))}_getPointsAtTime(t){let e=this._pointSet;for(;;){if(e.hasPoints())return void e.getPoints(t-this._timeOffset);if(e.getLoadedState()!==PointSet.State.LOADED)return e.getLoadedState()===PointSet.State.NOT_LOADED?(e.loadFromUrl(this._downloader,this._baseUrl),n=null,void(o=null)):(n=null,void(o=null));if(e=e.getPointSet(t-this._timeOffset),null===e)return n=null,void(o=null)}}}DynamoController.maxLoadedPointSetsPerController=5,e.default=DynamoController},function(t,e,i){"use strict";i.r(e);var s=i(6);class FixedController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._position=null,this._orientation=null}getPosition(){return this._position}setPosition(t){null!==t?(null===this._position&&(this._position=new s.Vector3),this._position.thaw(),this._position.copy(t),this._position.freeze()):this._position=null,null!==t?(this.addModifiedState("position"),this.addModifiedState("velocity")):(this.removeModifiedState("position"),this.removeModifiedState("velocity"))}getOrientation(){return this._orientation}setOrientation(t){null!==t?(null===this._orientation&&(this._orientation=new s.Quaternion),this._orientation.thaw(),this._orientation.copy(t),this._orientation.freeze()):this._orientation=null,null!==t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){null!==this._position&&t.copy(this._position)}__updateVelocityAtTime(t,e){null!==this._position&&t.set(0,0,0)}__updateOrientationAtTime(t,e){null!==this._orientation&&t.copy(this._orientation)}__update(){null!==this._position&&(this.getEntity().setPosition(this._position),this.getEntity().setVelocity(s.Vector3.Zero)),null!==this._orientation&&this.getEntity().setOrientation(this._orientation)}}e.default=FixedController},function(t,e,i){"use strict";i.r(e);var s=i(6);class FixedToParentController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._lastParentOrientation=new s.Quaternion;const n=this.getEntity().getParent();null!==n&&this._lastParentOrientation.copy(n.getOrientation()),this.addModifiedState("position"),this.addModifiedState("orientation"),this.addDependentState("parent","orientation")}__update(){const t=this.getEntity().getParent();if(null!==t){const e=s.Quaternion.pool.get();e.inverse(this._lastParentOrientation),e.mult(t.getOrientation(),e);const i=s.Vector3.pool.get(),n=s.Quaternion.pool.get();i.rotate(e,this.getEntity().getPosition()),this.getEntity().setPosition(i),n.mult(e,this.getEntity().getOrientation()),this.getEntity().setOrientation(n),s.Quaternion.pool.release(n),s.Vector3.pool.release(i),s.Quaternion.pool.release(e),this._lastParentOrientation.copy(t.getOrientation())}}}e.default=FixedToParentController},function(t,e,i){"use strict";i.r(e);var s=i(6);class FreeFlyController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._moveSmoothedValue=new s.Vector3(0,0,0),this._changeParentToNearestEntity=!0,this._forcedMoving=new s.Vector3,this._isMoving=!1,this.addModifiedState("position"),this.addDependentState("parent","orientation"),this.addDependentState("parent","radius")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getChangeParentToNearestEntity(){return this._changeParentToNearestEntity}setChangeParentToNearestEntity(t){this._changeParentToNearestEntity=t}getForcedMoving(){return this._forcedMoving}setForcedMoving(t){this._forcedMoving=t}__update(){if(null===this.getEntity().getParent())return;if(this._changeParentToNearestEntity&&(null===this.getEntity().getParent()||this._isMoving)){const t=this.getEntity().getScene(),e=this.getEntity().get("camera");let i=null,s=Number.POSITIVE_INFINITY;for(let n=0,o=t.getNumEntities();n<o;n++){const o=t.getEntity(n);if(o===this.getEntity()||!o.canOcclude())continue;const a=o.getCameraSpacePosition(e).magnitude()-o.getOcclusionRadius();s>a&&(s=a,i=o)}null!==i&&i!==this.getEntity().getParent()&&this.getEntity().setParent(i)}this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity),this.getEntity().getPosition().isNaN()&&this.getEntity().setPosition(new s.Vector3(0,-1,0));const t=s.Vector3.pool.get();t.set(0,0,0);const e=this.getEntity().getScene().getEngine().getInput(),i=e.getActiveViewport();if(null!==i){const s=i.getCamera();if(null!==s&&s.getEntity()===this.getEntity()){let i=1;e.isKeyPressed("x")&&(i=.05),e.isShiftPressed()&&(i=5);const s=e.getZoomedOffset();0!==s&&(t.y+=-s*this._dragSensitivity*i),e.isKeyPressed("w")&&(t.y+=this._dragSensitivity*i),e.isKeyPressed("s")&&(t.y-=this._dragSensitivity*i),e.isKeyPressed("d")&&(t.x+=this._dragSensitivity*i),e.isKeyPressed("a")&&(t.x-=this._dragSensitivity*i),e.isKeyPressed("e")&&(t.z+=this._dragSensitivity*i),e.isKeyPressed("q")&&(t.z-=this._dragSensitivity*i)}}t.add(t,this._forcedMoving),this._isMoving=t.magnitudeSqr()>0,this._moveSmoothedValue.lerp(t,this._moveSmoothedValue,this._dragSmoothness),!this._isMoving&&this._moveSmoothedValue.magnitudeSqr()<1e-7&&this._moveSmoothedValue.set(0,0,0),s.Vector3.pool.release(t);let n=Number.POSITIVE_INFINITY;const o=this.getEntity().getParent().getComponentByType("spheroid");if(null===o||this.getEntity().getParent().getOrientation().isNaN())n=Math.min(n,this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getOcclusionRadius());else{const t=s.Vector3.pool.get();t.rotateInverse(this.getEntity().getParent().getOrientation(),this.getEntity().getPosition());const e=s.LatLonAlt.pool.get();o.llaFromXYZ(e,t),n=Math.min(n,e.alt),s.LatLonAlt.pool.release(e),s.Vector3.pool.release(t)}n=Math.max(.1,n);const a=this.getEntity().getPosition(),r=s.Vector3.pool.get(),l=s.Vector3.pool.get();l.rotate(this.getEntity().getOrientation(),this._moveSmoothedValue),r.addMult(a,l,n),this.getEntity().setPosition(r),s.Vector3.pool.release(l),s.Vector3.pool.release(r)}}e.default=FreeFlyController},function(t,e,i){"use strict";i.r(e);var s=i(6);class GroundClampController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._groundComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._distanceFromGround=0,this.addModifiedState("position")}setGroundComponentRef(t,e,i){this._groundComponentRef.setByType(t,e,i)}getDistanceFromGround(){return this._distanceFromGround}setDistanceFromGround(t){this._distanceFromGround=t}__updatePositionAtTime(t,e){const i=this._groundComponentRef.get();if(null===i)return;const n=i.getEntity(),o=this.getEntity().getParentAtTime(e),a=this.getEntity().getScene().getEntity(o);if(null===a)return;const r=s.Vector3.pool.get(),l=s.Quaternion.pool.get();n.getOrientationAtTime(l,e),a.getPositionRelativeToEntity(r,t,n,e),r.rotateInverse(l,r),void 0!==i.getGroundPosition&&i.getGroundPosition(r,r,this._distanceFromGround),r.rotate(l,r),n.getPositionRelativeToEntity(t,r,a,e),s.Vector3.pool.release(r),s.Quaternion.pool.release(l)}__update(){const t=this._groundComponentRef.get();if(null===t)return;const e=t.getEntity(),i=n;this.getEntity().getPositionRelativeToEntity(i,s.Vector3.Zero,e),i.rotateInverse(e.getOrientation(),i),void 0!==t.getGroundPosition&&t.getGroundPosition(i,i,this._distanceFromGround),i.rotate(e.getOrientation(),i),e.getPositionRelativeToEntity(i,i,this.getEntity().getParent()),this.getEntity().setPosition(i)}}const n=new s.Vector3;e.default=GroundClampController},function(t,e,i){"use strict";i.r(e);var s=i(6);class KeyframeController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._positionKeyframes=[],this._orientationKeyframes=[],this._timesAreRealTime=!1,this._timeOfFirstUpdate=NaN,this.setCoverage(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),this._position0=new s.Vector3,this._position1=new s.Vector3,this._orientation0=new s.Quaternion,this._orientation1=new s.Quaternion,this._newPosition=new s.Vector3,this._newVelocity=new s.Vector3,this._newOrientation=new s.Quaternion,this._tangent0=new s.Vector3,this._tangent1=new s.Vector3,this._tempA=new s.Vector3,this._tempB=new s.Vector3}addPositionKeyframe(t,e,i,o,a,r){const l=[t,{position:e,relativeToEntityPosition:i?new s.EntityRef(this.getEntity().getScene(),i):void 0,relativeToEntityPositionTime:o,relativeToEntityOrientation:a?new s.EntityRef(this.getEntity().getScene(),a):void 0,relativeToEntityOrientationTime:r}];s.Sort.add(l,this._positionKeyframes,n),1===this._positionKeyframes.length&&(this.addModifiedState("position"),this.addModifiedState("velocity")),this._updateCoverage()}removePositionKeyframe(t){const e=s.Sort.remove(t,this._positionKeyframes,o,a);return e&&(0===this._positionKeyframes.length&&(this.removeModifiedState("position"),this.removeModifiedState("velocity")),this._updateCoverage()),e}addOrientationKeyframe(t,e,i,o){const a=[t,{orientation:e,relativeToEntityOrientation:i?new s.EntityRef(this.getEntity().getScene(),i):void 0,relativeToEntityOrientationTime:o}];s.Sort.add(a,this._orientationKeyframes,n),1===this._orientationKeyframes.length&&this.addModifiedState("orientation"),this._updateCoverage()}removeOrientationKeyframe(t){const e=s.Sort.remove(t,this._orientationKeyframes,o,a);return e&&(0===this._orientationKeyframes.length&&this.removeModifiedState("orientation"),this._updateCoverage()),e}areTimesRealTime(){return this._timesAreRealTime}setTimesAreRealTime(t){this._timesAreRealTime=t,this._updateCoverage()}__updatePositionAtTime(t,e){this._getPositionAtTime(t,e)}__updateVelocityAtTime(t,e){this._getVelocityAtTime(t,e)}__updateOrientationAtTime(t,e){this._getOrientationAtTime(t,e)}__update(){const t=this.getEntity().getScene().getEngine();let e=0;this._timesAreRealTime?isNaN(this._timeOfFirstUpdate)?this._timeOfFirstUpdate=Date.now()/1e3:e=Date.now()/1e3-this._timeOfFirstUpdate:e=t.getTime(),this._getPositionAtTime(this._newPosition,e)&&this.getEntity().setPosition(this._newPosition),this._getVelocityAtTime(this._newVelocity,e)&&this.getEntity().setVelocity(this._newVelocity),this._getOrientationAtTime(this._newOrientation,e)&&this.getEntity().setOrientation(this._newOrientation)}_getPositionAtTime(t,e){const i=s.Sort.getIndex(e,this._positionKeyframes,o);if(i<this._positionKeyframes.length){if(0!==i){const s=i-1,n=i,o=this._positionKeyframes[s][0],a=this._positionKeyframes[n][0];if(this._getPositionOfKeyframe(this._position0,this._positionKeyframes[s]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[n]),s>0){const t=this._positionKeyframes[s-1][0];this._getPositionOfKeyframe(this._tempA,this._positionKeyframes[s-1]),this._tempA.sub(this._position0,this._tempA),this._tempB.sub(this._position1,this._position0),this._tempB.mult(this._tempB,.5),this._tangent0.addMult(this._tempB,this._tempA,.5*(a-o)/(o-t))}else this._tangent0.sub(this._position1,this._position0);if(n<this._positionKeyframes.length-1){const t=this._positionKeyframes[n+1][0];this._getPositionOfKeyframe(this._tempB,this._positionKeyframes[n+1]),this._tempA.sub(this._position1,this._position0),this._tempB.sub(this._tempB,this._position1),this._tempA.mult(this._tempA,.5),this._tangent1.addMult(this._tempA,this._tempB,.5*(a-o)/(t-a))}else this._tangent1.sub(this._position1,this._position0);const r=(e-o)/(a-o);return this._cubicHermiteSpline(t,this._position0,this._position1,this._tangent0,this._tangent1,r),!0}if(this._positionKeyframes[0][0]===e)return this._getPositionOfKeyframe(t,this._positionKeyframes[0]),!0}return!1}_getVelocityAtTime(t,e){const i=s.Sort.getIndex(e,this._positionKeyframes,o);if(i<this._positionKeyframes.length){if(0!==i){const s=i-1,n=i,o=this._positionKeyframes[s][0],a=this._positionKeyframes[n][0];if(this._getPositionOfKeyframe(this._position0,this._positionKeyframes[s]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[n]),s>0){const t=this._positionKeyframes[s-1][0];this._getPositionOfKeyframe(this._tempA,this._positionKeyframes[s-1]),this._tempA.sub(this._position0,this._tempA),this._tempB.sub(this._position1,this._position0),this._tempB.mult(this._tempB,.5),this._tangent0.addMult(this._tempB,this._tempA,.5*(a-o)/(o-t))}else this._tangent0.sub(this._position1,this._position0);if(n<this._positionKeyframes.length-1){const t=this._positionKeyframes[n+1][0];this._getPositionOfKeyframe(this._tempB,this._positionKeyframes[n+1]),this._tempA.sub(this._position1,this._position0),this._tempB.sub(this._tempB,this._position1),this._tempA.mult(this._tempA,.5),this._tangent1.addMult(this._tempA,this._tempB,.5*(a-o)/(t-a))}else this._tangent1.sub(this._position1,this._position0);const r=(e-o)/(a-o);return this._cubicHermiteSplineDerivative(t,this._position0,this._position1,this._tangent0,this._tangent1,r),t.div(t,a-o),!0}if(this._positionKeyframes[0][0]===e){if(this._positionKeyframes.length>1){const e=this._positionKeyframes[0][0],i=this._positionKeyframes[1][0];this._getPositionOfKeyframe(this._position0,this._positionKeyframes[0]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[1]),t.sub(this._position1,this._position0),t.div(t,i-e)}else t.set(0,0,0);return!0}}return!1}_getOrientationAtTime(t,e){const i=s.Sort.getIndex(e,this._orientationKeyframes,o);if(i<this._orientationKeyframes.length){if(0!==i){const s=i-1,n=i,o=this._orientationKeyframes[s][0];this._getOrientationOfKeyframe(this._orientation0,this._orientationKeyframes[s]);const a=this._orientationKeyframes[n][0];return this._getOrientationOfKeyframe(this._orientation1,this._orientationKeyframes[n]),t.slerp(this._orientation0,this._orientation1,(e-o)/(a-o)),!0}if(this._orientationKeyframes[0][0]===e)return this._getOrientationOfKeyframe(t,this._orientationKeyframes[0]),!0}return!1}_getPositionOfKeyframe(t,e){const i=e[1];if(t.copy(i.position),void 0!==i.relativeToEntityOrientation){const n=void 0!==e[1].relativeToEntityOrientationTime?e[1].relativeToEntityOrientationTime:e[0],o=i.relativeToEntityOrientation.get();if(null!==o){const e=s.Quaternion.pool.get();o.getOrientationAtTime(e,n),t.rotate(e,t),s.Quaternion.pool.release(e)}else t.copy(s.Vector3.NaN)}if(void 0!==i.relativeToEntityPosition){const n=void 0!==e[1].relativeToEntityPositionTime?e[1].relativeToEntityPositionTime:e[0],o=s.Vector3.pool.get(),a=i.relativeToEntityPosition.get();null!==a?(a.getPositionRelativeToEntity(o,s.Vector3.Zero,this.getEntity().getParent(),n),t.add(o,t),s.Vector3.pool.release(o)):t.copy(s.Vector3.NaN)}}_getOrientationOfKeyframe(t,e){const i=e[1];if(void 0!==i.relativeToEntityOrientation){const n=void 0!==e[1].relativeToEntityOrientationTime?e[1].relativeToEntityOrientationTime:e[0],o=i.relativeToEntityOrientation.get();null!==o?(o.getOrientationAtTime(t,n),t.mult(t,i.orientation)):t.copy(s.Quaternion.NaN)}else t.copy(i.orientation)}_updateCoverage(){if(this._timesAreRealTime)this.setCoverage(s.Interval.Infinite);else{const t=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);this._positionKeyframes.length>0&&(t.min=Math.min(t.min,this._positionKeyframes[0][0]),t.max=Math.max(t.max,this._positionKeyframes[this._positionKeyframes.length-1][0])),this._orientationKeyframes.length>0&&(t.min=Math.min(t.min,this._orientationKeyframes[0][0]),t.max=Math.max(t.max,this._orientationKeyframes[this._orientationKeyframes.length-1][0])),this.setCoverage(t)}}_cubicHermiteSpline(t,e,i,s,n,o){const a=o*o,r=o*a,l=2*r-3*a+1,c=r-2*a+o,h=-2*r+3*a,u=r-a;t.x=l*e.x+c*s.x+h*i.x+u*n.x,t.y=l*e.y+c*s.y+h*i.y+u*n.y,t.z=l*e.z+c*s.z+h*i.z+u*n.z}_cubicHermiteSplineDerivative(t,e,i,s,n,o){const a=o*o,r=6*a-6*o,l=3*a-4*o+1,c=-6*a+6*o,h=3*a-2*o;t.x=r*e.x+l*s.x+c*i.x+h*n.x,t.y=r*e.y+l*s.y+c*i.y+h*n.y,t.z=r*e.z+l*s.z+c*i.z+h*n.z}}const n=(t,e)=>t[0]<e[0],o=(t,e)=>t[0]<e,a=(t,e)=>t[0]===e;e.default=KeyframeController},function(t,e,i){"use strict";i.r(e);var s=i(6);class LookController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._yawAngleSmoothedValue=0,this._pitchAngleSmoothedValue=0,this._yawAxisType="none",this._yawAxisEntity=null,this.addModifiedState("orientation")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getYawAxisType(){return this._yawAxisType}setYawAxisType(t){this._yawAxisType!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisType=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getYawAxisEntity(){return this._yawAxisEntity}setYawAxisEntity(t){this._yawAxisEntity!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisEntity=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}__update(){null===this._yawAxisEntity&&(this._yawAxisEntity=this.getEntity().getParent(),null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position"))),this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);const t=this.getEntity().getScene().getEngine().getInput();let e=1;t.isKeyPressed("x")&&(e=.05);const i=this.getEntity().getComponentByType("camera");null!==i&&(e*=Math.min(1,i.getFieldOfView()));let n=0,o=0;const a=t.getActiveViewport();if(null!==a){const i=a.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const i=t.getDraggedOffset();n=-i.x*this._dragSensitivity*e,o=-i.y*this._dragSensitivity*e}}this._yawAngleSmoothedValue=s.MathUtils.lerp(n,this._yawAngleSmoothedValue,this._dragSmoothness),this._pitchAngleSmoothedValue=s.MathUtils.lerp(o,this._pitchAngleSmoothedValue,this._dragSmoothness),Math.abs(this._yawAngleSmoothedValue)<1e-4*e&&(this._yawAngleSmoothedValue=0),Math.abs(this._pitchAngleSmoothedValue)<1e-4*e&&(this._pitchAngleSmoothedValue=0);const r=s.Vector3.pool.get();"x-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,0):"y-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,1):"z-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,2):"position"===this._yawAxisType&&null!==this._yawAxisEntity?r.normalize(this._yawAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(r,2),r.isNaN()&&this.getEntity().getOrientation().getAxis(r,2);const l=s.Quaternion.pool.get();l.copy(this.getEntity().getOrientation());const c=s.Quaternion.pool.get(),h=s.Vector3.pool.get(),u=s.Vector3.pool.get();this.getEntity().getOrientation().getAxis(u,1),this.getEntity().getOrientation().getAxis(h,2);const d=h.angleAroundAxis(r,u);c.setFromAxisAngle(u,d),c.normalize(c),l.mult(c,l),s.Vector3.pool.release(h),s.Vector3.pool.release(u);const p=s.Vector3.pool.get();l.getAxis(p,0),c.setFromAxisAngle(p,this._pitchAngleSmoothedValue),l.mult(c,l),s.Vector3.pool.release(p),c.setFromAxisAngle(r,this._yawAngleSmoothedValue),l.mult(c,l),s.Vector3.pool.release(r),s.Quaternion.pool.release(c),this.getEntity().setOrientation(l),s.Quaternion.pool.release(l)}}e.default=LookController},function(t,e,i){"use strict";i.r(e);var s=i(6);class ModelAnimateController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._animations=[]}setAnimation(t,e,i,s){if(null===t)throw new Error("Null model specified.");this._animations.push({model:t,jointName:e,animationName:i,interval:s,animationClip:null,rootObject:null,jointObject:null,animationMixer:null})}__update(){const t=this.getEntity().getScene().getEngine().getTime();for(let e=0,i=this._animations.length;e<i;e++){const i=this._animations[e];if(i.model.isDestroyed())this._animations.splice(e,1),e--;else if(null!==i.model.getThreeJsObjects()[0]){if(i.rootObject!==i.model.getThreeJsObjects()[0]&&(i.rootObject=i.model.getThreeJsObjects()[0],i.animationClip=null,i.jointObject=null,i.animationMixer=null),null===i.animationClip&&(i.animationClip=i.model.getAnimationClip(i.animationName)),null===i.jointObject){const t=i.model.getThreeJsObjectByName(i.jointName);null!==t&&(i.jointObject=t)}if(null===i.animationMixer&&null!==i.animationClip&&null!==i.jointObject&&(i.animationMixer=new s.THREE.AnimationMixer(i.jointObject),i.animationMixer.clipAction(i.animationClip).play()),null!==i.animationMixer){const e=s.MathUtils.clamp01((t-i.interval.min)/(i.interval.max-i.interval.min)),n=i.animationClip.duration*e*(i.animationClip.tracks[0].times.length-1)/i.animationClip.tracks[0].times.length;i.animationMixer.setTime(n),i.animationMixer.update(0)}}else i.rootObject=null}}}e.default=ModelAnimateController},function(t,e,i){"use strict";i.r(e);var s=i(6);class OrbitController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._yawChangeSmoothedValue=0,this._pitchChangeSmoothedValue=0,this._yawAxisType="none",this._yawAxisEntity=null,this._pitchAxisType="none",this._pitchAxisEntity=null,this._slowWhenCloseToParent=!1,this._yawAngleLimits=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._yawAngleLimits.freeze(),this._pitchAngleLimits=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._pitchAngleLimits.freeze(),this.addModifiedState("position"),this.addModifiedState("orientation")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getYawAxisType(){return this._yawAxisType}setYawAxisType(t){this._yawAxisType!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisType=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getPitchAxisType(){return this._pitchAxisType}setPitchAxisType(t){this._pitchAxisType!==t&&(null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.removeDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.removeDependentState(this._pitchAxisEntity.getName(),"position")),this._pitchAxisType=t,null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.addDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.addDependentState(this._pitchAxisEntity.getName(),"position")))}getYawAxisEntity(){return this._yawAxisEntity}setYawAxisEntity(t){this._yawAxisEntity!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisEntity=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getPitchAxisEntity(){return this._pitchAxisEntity}setPitchAxisEntity(t){this._pitchAxisEntity!==t&&(null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.removeDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.removeDependentState(this._pitchAxisEntity.getName(),"position")),this._pitchAxisEntity=t,null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.addDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.addDependentState(this._pitchAxisEntity.getName(),"position")))}getYawAngleLimits(){return this._yawAngleLimits}setYawAngleLimits(t){this._yawAngleLimits.thaw(),this._yawAngleLimits.copy(t),this._yawAngleLimits.freeze()}getPitchAngleLimits(){return this._pitchAngleLimits}setPitchAngleLimits(t){this._pitchAngleLimits.thaw(),this._pitchAngleLimits.copy(t),this._pitchAngleLimits.freeze()}isSlowWhenCloseToParent(){return this._slowWhenCloseToParent}slowWhenCloseToParent(t){this._slowWhenCloseToParent=t}__update(){if(null===this.getEntity().getParent())return;this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity),this.getEntity().getPosition().isNaN()&&this.getEntity().setPosition(new s.Vector3(0,-1,0));const t=this.getEntity().getScene().getEngine().getInput();let e=1;t.isKeyPressed("x")&&(e=.05),t.isShiftPressed()&&(e=5);const i=this.getEntity().getComponentByType("camera");null!==i&&(e*=Math.min(1,i.getFieldOfView()));let n=0,o=0;const a=t.getActiveViewport();if(null!==a){const i=a.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const i=t.getDraggedOffset();n=-i.x*this._dragSensitivity*e,o=i.y*this._dragSensitivity*e,t.isKeyPressed("d")&&(n+=this._dragSensitivity*e),t.isKeyPressed("a")&&(n-=this._dragSensitivity*e),t.isKeyPressed("e")&&(o-=this._dragSensitivity*e),t.isKeyPressed("q")&&(o+=this._dragSensitivity*e)}}this._yawChangeSmoothedValue=s.MathUtils.lerp(n,this._yawChangeSmoothedValue,this._dragSmoothness),this._pitchChangeSmoothedValue=s.MathUtils.lerp(o,this._pitchChangeSmoothedValue,this._dragSmoothness),Math.abs(this._yawChangeSmoothedValue)<1e-4*e&&(this._yawChangeSmoothedValue=0),Math.abs(this._pitchChangeSmoothedValue)<1e-4*e&&(this._pitchChangeSmoothedValue=0);const r=s.Vector3.pool.get();null===this._yawAxisEntity&&(this._yawAxisEntity=this.getEntity().getParent()),"x-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,0):"y-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,1):"z-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(r,2):"position"===this._yawAxisType&&null!==this._yawAxisEntity?r.normalize(this._yawAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(r,2),(r.isNaN()||r.isZero())&&this.getEntity().getOrientation().getAxis(r,2);const l=s.Vector3.pool.get();null===this._pitchAxisEntity&&(this._pitchAxisEntity=this.getEntity().getParent()),"x-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,0):"y-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,1):"z-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,2):"position"===this._pitchAxisType&&null!==this._pitchAxisEntity?l.normalize(this._pitchAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(l,0),(l.isNaN()||l.isZero())&&this.getEntity().getOrientation().getAxis(l,0),l.setNormalTo(r,l);const c=s.Quaternion.pool.get();c.setFromAxes(l,void 0,r),s.Vector3.pool.release(l),s.Vector3.pool.release(r);const h=s.Vector3.pool.get();h.rotateInverse(c,this.getEntity().getPosition());let u=1;if(this._slowWhenCloseToParent){const t=this.getEntity().getParent().getOcclusionRadius();u=s.MathUtils.clamp((h.magnitude()-t)/t,.001,1)}const d=s.LatLonAlt.pool.get();s.Geometry.getLLAFromXYZOnSphere(d,h,0),d.lat+=this._pitchChangeSmoothedValue*u,d.lon+=this._yawChangeSmoothedValue*u,d.lat<1e-4-s.MathUtils.halfPi&&(d.lat=1e-4-s.MathUtils.halfPi),d.lat>s.MathUtils.halfPi-1e-4&&(d.lat=s.MathUtils.halfPi-1e-4),d.lat<this._pitchAngleLimits.min&&(d.lat=this._pitchAngleLimits.min),d.lat>this._pitchAngleLimits.max&&(d.lat=this._pitchAngleLimits.max),d.lon<this._yawAngleLimits.min&&(d.lon=this._yawAngleLimits.min),d.lon>this._yawAngleLimits.max&&(d.lon=this._yawAngleLimits.max),s.Geometry.getXYZFromLLAOnSphere(h,d,0),s.LatLonAlt.pool.release(d),h.rotate(c,h),s.Quaternion.pool.release(c),this.getEntity().setPosition(h),s.Vector3.pool.release(h)}}e.default=OrbitController},function(t,e,i){"use strict";i.r(e);var s=i(6);class OrbitKeyframeController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._positionKeyframes=[],this._focusKeyframes=[],this._upKeyframes=[],this._timeOfFirstUpdate=NaN,this._directionOfFirstUpdate=new s.Vector3,this._resolvePromise=null,this._rejectPromise=null,this._endPromise=new Promise(((t,e)=>{this._resolvePromise=t,this._rejectPromise=e})),this.addModifiedState("position"),this.addModifiedState("velocity"),this.addModifiedState("orientation"),this.addModifiedState("angularVelocity")}setPositionKeyframe(t,e,i){if(void 0!==e){const o=new PositionKeyframe(this.getEntity().getScene());o.time=t,o.position.copy(e),o.relativeTo.setName(i),s.Sort.add(o,this._positionKeyframes,n)}else{const e=s.Sort.getIndex(t,this._positionKeyframes,o);e<this._positionKeyframes.length&&t===this._positionKeyframes[e].time&&this._positionKeyframes.splice(e,1)}}setFocusKeyframe(t,e){if(void 0!==e){const i=new FocusKeyframe(this.getEntity().getScene());i.time=t,i.focus.setName(e),s.Sort.add(i,this._focusKeyframes,n)}else{const e=s.Sort.getIndex(t,this._focusKeyframes,o);e<this._focusKeyframes.length&&t===this._focusKeyframes[e].time&&this._focusKeyframes.splice(e,1)}}setUpKeyframe(t,e){if(void 0!==e){const i=new UpKeyframe;i.time=t,i.up.copy(e),s.Sort.add(i,this._upKeyframes,n)}else{const e=s.Sort.getIndex(t,this._upKeyframes,o);e<this._upKeyframes.length&&t===this._upKeyframes[e].time&&this._upKeyframes.splice(e,1)}}getEndPromise(){return this._endPromise}__destroy(){super.__destroy(),null!==this._rejectPromise&&this._rejectPromise()}__update(){const t=this.getEntity();let e=0;if(isNaN(this._timeOfFirstUpdate)){const e=t.getParent();if(null===e)return;this._timeOfFirstUpdate=Date.now()/1e3,t.getOrientation().getAxis(this._directionOfFirstUpdate,1);const i=new PositionKeyframe(t.getScene());i.time=0,i.position.copy(t.getPosition()),i.relativeTo.setName(e.getName()),s.Sort.add(i,this._positionKeyframes,n);const o=new FocusKeyframe(t.getScene());o.time=0,o.focus.setName(""),s.Sort.add(o,this._focusKeyframes,n);const a=new UpKeyframe;a.time=0,t.getOrientation().getAxis(a.up,2),s.Sort.add(a,this._upKeyframes,n)}else e=Date.now()/1e3-this._timeOfFirstUpdate;let i=!1;const a=s.Sort.getIndex(e,this._positionKeyframes,o);if(a>0&&a<this._positionKeyframes.length){const i=this._positionKeyframes[a-1],n=this._positionKeyframes[a],o=i.relativeTo.get(),r=n.relativeTo.get();if(null!==o&&null!==r){let a=(e-i.time)/(n.time-i.time),l=o;a>=.5&&(l=r),t.getParent()!==l&&t.setParent(l);const c=s.Vector3.pool.get(),h=s.Vector3.pool.get();o.getPositionRelativeToEntity(c,i.position,r),r.getPositionRelativeToEntity(h,n.position,o);let u=Math.max(0,i.position.magnitude()-o.getOcclusionRadius()),d=Math.max(0,h.magnitude()-o.getOcclusionRadius()),p=Math.max(0,c.magnitude()-r.getOcclusionRadius()),_=Math.max(0,n.position.magnitude()-r.getOcclusionRadius());if(u=Math.max(u,d/1e4),d=Math.max(d,u/1e4),p=Math.max(p,_/1e4),_=Math.max(_,d/1e4),u!==d&&p!==_){const t=(Math.pow(d,a)*Math.pow(u,1-a)-u)/(d-u),e=(Math.pow(_,a)*Math.pow(p,1-a)-p)/(_-p);a=s.MathUtils.lerp(t,e,a)}const g=a*a;a=g/(2*(g-a)+1),o.getPositionRelativeToEntity(c,i.position,l),r.getPositionRelativeToEntity(h,n.position,l);const m=s.Vector3.pool.get();o===r?m.slerp(c,h,a):m.lerp(c,h,a),t.setPosition(m),s.Vector3.pool.release(m),s.Vector3.pool.release(c),s.Vector3.pool.release(h)}}else if(a===this._positionKeyframes.length){const e=this._positionKeyframes[this._positionKeyframes.length-1],s=e.relativeTo.get();t.getParent()!==s&&t.setParent(s),t.setPosition(e.position),i=!0}const r=s.Vector3.pool.get();r.setMagnitude(t.getPosition(),-1);const l=s.Vector3.pool.get();t.getOrientation().getAxis(l,2);let c=!1;const h=s.Sort.getIndex(e,this._focusKeyframes,o);if(h>0&&h<this._focusKeyframes.length){const i=this._focusKeyframes[h-1],n=this._focusKeyframes[h],o=i.focus.get(),a=n.focus.get(),l=t.getParent();if(!(""!==i.focus.getName()&&null===o||""!==n.focus.getName()&&null===a||null===l)){let c=(e-i.time)/(n.time-i.time);const h=c*c;c=h/(2*(h-c)+1);const u=s.Vector3.pool.get(),d=s.Vector3.pool.get();""!==i.focus.getName()?(l.getPositionRelativeToEntity(u,t.getPosition(),o),u.setMagnitude(u,-1)):u.copy(this._directionOfFirstUpdate),""!==n.focus.getName()?(l.getPositionRelativeToEntity(d,t.getPosition(),a),d.setMagnitude(d,-1)):d.copy(this._directionOfFirstUpdate),r.slerp(u,d,c),s.Vector3.pool.release(u),s.Vector3.pool.release(d)}}else if(h===this._focusKeyframes.length){const e=this._focusKeyframes[this._focusKeyframes.length-1],i=e.focus.get(),s=t.getParent();""!==e.focus.getName()&&null===i||null===s||(s.getPositionRelativeToEntity(r,t.getPosition(),i),r.setMagnitude(r,-1)),c=!0}else{const e=this._focusKeyframes[0],i=e.focus.get(),s=t.getParent();""!==e.focus.getName()&&null===i||null===s||(""!==e.focus.getName()?(s.getPositionRelativeToEntity(r,t.getPosition(),i),r.setMagnitude(r,-1)):r.copy(this._directionOfFirstUpdate))}let u=!1;const d=s.Sort.getIndex(e,this._upKeyframes,o);if(d>0&&d<this._upKeyframes.length){const t=this._upKeyframes[d-1],i=this._upKeyframes[d];let s=(e-t.time)/(i.time-t.time);const n=s*s;s=n/(2*(n-s)+1),l.slerp(t.up,i.up,s)}else if(d===this._upKeyframes.length){const t=this._upKeyframes[this._upKeyframes.length-1];l.copy(t.up),u=!0}const p=s.Quaternion.pool.get();l.setNormalTo(r,l),p.setFromAxes(void 0,r,l),t.setOrientation(p),s.Quaternion.pool.release(p),s.Vector3.pool.release(r),i&&c&&u&&(this._rejectPromise=null,this._resolvePromise())}}class Keyframe{constructor(){this.time=NaN}}class PositionKeyframe extends Keyframe{constructor(t){super(),this.position=new s.Vector3,this.relativeTo=new s.EntityRef(t)}}class FocusKeyframe extends Keyframe{constructor(t){super(),this.focus=new s.EntityRef(t)}}class UpKeyframe extends Keyframe{constructor(){super(),this.up=new s.Vector3}}function n(t,e){return t.time<e.time}function o(t,e){return t.time<e}e.default=OrbitKeyframeController},function(t,e,i){"use strict";i.r(e);var s=i(6);class OrbitalElementsController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._orbitalElementsKeyFrames=[],this.setCoverage(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),this.addModifiedState("position"),this.addModifiedState("velocity")}getNumOrbitalElements(){return this._orbitalElementsKeyFrames.length}getOrbitalElements(t){return this._orbitalElementsKeyFrames[t]}addOrbitalElements(t,e){s.Sort.add({time:t,oe:e},this._orbitalElementsKeyFrames,n,a),this._updateCoverage()}removeOrbitalElements(t){if(t<0||this._orbitalElementsKeyFrames.length<=t)throw new Error(`Invalid index for ${this}.removeOrbitalElements`);this._orbitalElementsKeyFrames.splice(t,1),this._updateCoverage()}__updatePositionAtTime(t,e){this._getPositionAtTime(t,e)}__updateVelocityAtTime(t,e){this._getVelocityAtTime(t,e)}__update(){const t=this.getEntity().getScene().getEngine().getTime();this._getPositionAtTime(r,t)&&this.getEntity().setPosition(r),this._getVelocityAtTime(l,t)&&this.getEntity().setVelocity(l)}_getPositionAtTime(t,e){const i=s.Sort.getIndex(e,this._orbitalElementsKeyFrames,o),n=this._orbitalElementsKeyFrames[Math.max(i-1,0)],a=this._orbitalElementsKeyFrames[Math.min(i,this._orbitalElementsKeyFrames.length-1)],r=s.Vector3.pool.get(),c=s.Vector3.pool.get();n.oe.project(r,l,e),a.oe.project(c,l,e);const h=s.MathUtils.clamp01(a.time!==n.time?(e-n.time)/(a.time-n.time):0);return t.slerp(r,c,h),s.Vector3.pool.release(r),s.Vector3.pool.release(c),!0}_getVelocityAtTime(t,e){const i=s.Sort.getIndex(e,this._orbitalElementsKeyFrames,o),n=this._orbitalElementsKeyFrames[Math.max(i-1,0)],a=this._orbitalElementsKeyFrames[Math.min(i,this._orbitalElementsKeyFrames.length-1)],l=s.Vector3.pool.get(),c=s.Vector3.pool.get();n.oe.project(r,l,e),a.oe.project(r,c,e);const h=s.MathUtils.clamp01(a.time!==n.time?(e-n.time)/(a.time-n.time):0);return t.slerp(l,c,h),s.Vector3.pool.release(l),s.Vector3.pool.release(c),!0}_updateCoverage(){const t=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);this._orbitalElementsKeyFrames.length>1&&(t.min=Math.min(t.min,this._orbitalElementsKeyFrames[0].time),t.max=Math.max(t.max,this._orbitalElementsKeyFrames[this._orbitalElementsKeyFrames.length-1].time)),this.setCoverage(t)}}const n=(t,e)=>t.time<e.time,o=(t,e)=>t.time<e,a=(t,e)=>t.time===e.time,r=new s.Vector3,l=new s.Vector3;e.default=OrbitalElementsController},function(t,e,i){"use strict";i.r(e);var s=i(6);class PickController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._pickedEntity=null,this._callback=null,this._triggerOnHover=!1,this._pickedPosition=new s.Vector3,this._pickedPosition.freeze()}getPickedEntity(){return this._pickedEntity}setPickedEntity(t){this._pickedEntity=t}getCallback(){return this._callback}setCallback(t){this._callback=t}getTriggerOnHover(){return this._triggerOnHover}setTriggerOnHover(t){this._triggerOnHover=t}getPickedPosition(){return this._pickedPosition}__update(){const t=this.getEntity().getScene().getEngine().getInput();if((t.isSelected()||this._triggerOnHover)&&null!==this._callback&&null!==this._pickedEntity){const e=t.getActiveViewport();if(null!==e){const i=e.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const n=s.Vector3.pool.get();e.getNormalSpacePositionFromPixelSpacePosition(n,t.getCursorPosition()),i.getCameraSpacePositionFromNormalSpacePosition(n,n),n.normalize(n);const o=s.Interval.pool.get(),a=this.getEntity().getParent().getComponentByType("spheroid");if(null!==a){const t=a.getEquatorialRadius()/a.getPolarRadius();n.rotateInverse(this._pickedEntity.getOrientation(),n),n.z*=t;const e=s.Vector3.pool.get();e.copy(this._pickedEntity.getCameraSpacePosition(i)),e.rotateInverse(this._pickedEntity.getOrientation(),e),e.z*=t,s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(o,n,e,a.getEquatorialRadius()),n.z/=t,n.rotate(this._pickedEntity.getOrientation(),n),s.Vector3.pool.release(e)}else{const t=this._pickedEntity.getCameraSpacePosition(i);s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(o,n,t,this._pickedEntity.getOcclusionRadius())}Number.isNaN(o.min)||(this._pickedPosition.thaw(),this._pickedPosition.mult(n,o.min),i.getEntity().getPositionRelativeToEntity(this._pickedPosition,this._pickedPosition,this._pickedEntity),this._pickedPosition.freeze(),this.getEntity().getScene().getEngine().addCallback(this._callback.bind(void 0,this._pickedPosition),!1)),s.Interval.pool.release(o),s.Vector3.pool.release(n)}}}}}e.default=PickController},function(t,e,i){"use strict";i.r(e);var s=i(6);class RollController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._rollSensitivity=.01,this._rollSmoothness=.8,this._rollAngleSmoothedValue=0,this.addModifiedState("orientation")}getRollSensitivity(){return this._rollSensitivity}setRollSensitivity(t){this._rollSensitivity=t}getRollSmoothness(){return this._rollSmoothness}setRollSmoothness(t){this._rollSmoothness=t}__update(){this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);let t=0;const e=this.getEntity().getScene().getEngine().getInput(),i=e.getActiveViewport();if(null!==i){const n=i.getCamera();if(null!==n&&n.getEntity()===this.getEntity()){let i=1;e.isKeyPressed("x")&&(i=.05),e.isShiftPressed()&&(i=5);const n=e.getRotatedOffset();0!==n&&(t+=s.MathUtils.clamp(n*this._rollSensitivity*i,-.1,.1)),e.isKeyPressed("c")&&(t+=this._rollSensitivity*i),e.isKeyPressed("z")&&(t-=this._rollSensitivity*i)}}if(this._rollAngleSmoothedValue=s.MathUtils.lerp(t,this._rollAngleSmoothedValue,this._rollSmoothness),Math.abs(this._rollAngleSmoothedValue)<1e-4&&(this._rollAngleSmoothedValue=0),0!==this._rollAngleSmoothedValue){const t=s.Quaternion.pool.get(),e=s.Quaternion.pool.get();e.setFromAxisAngle(s.Vector3.YAxis,this._rollAngleSmoothedValue),t.mult(this.getEntity().getOrientation(),e),this.getEntity().setOrientation(t),s.Quaternion.pool.release(t),s.Quaternion.pool.release(e)}}}e.default=RollController},function(t,e,i){"use strict";i.r(e);var s=i(6);class RotateController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._rotation=new s.Quaternion,this._rotation.freeze(),this._rotatingPosition=!0,this._rotatingOrientation=!0,this.addModifiedState("position"),this.addModifiedState("orientation")}getRotation(){return this._rotation}setRotation(t){this._rotation.thaw(),this._rotation.copy(t),this._rotation.freeze()}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}isRotatingOrientation(){return this._rotatingOrientation}setRotatingOrientation(t){this._rotatingOrientation=t,t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){this._rotatingPosition&&t.rotate(this._rotation,t)}__updateVelocityAtTime(t,e){this._rotatingPosition&&t.rotate(this._rotation,t)}__updateOrientationAtTime(t,e){this._rotatingOrientation&&t.mult(this._rotation,t)}__update(){if(this._rotatingPosition){const t=s.Vector3.pool.get();t.rotate(this._rotation,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}if(this._rotatingOrientation){const t=s.Quaternion.pool.get();t.mult(this._rotation,this.getEntity().getOrientation()),this.getEntity().setOrientation(t),s.Quaternion.pool.release(t)}}}e.default=RotateController},function(t,e,i){"use strict";i.r(e);var s=i(6);class RotateByEntityOrientationController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._entityRef=new s.EntityRef(this.getEntity().getScene()),this._rotatingPosition=!0,this._rotatingOrientation=!0,this.addModifiedState("position"),this.addModifiedState("orientation")}setEntityForOrientation(t){""!==this._entityRef.getName()&&this.addDependentState(this._entityRef.getName(),"orientation"),this._entityRef.setName(t),this.addDependentState(t,"orientation")}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}isRotatingOrientation(){return this._rotatingOrientation}setRotatingOrientation(t){this._rotatingOrientation=t,t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){if(this._rotatingPosition){const i=""!==this._entityRef.getName()?this._entityRef.get():this.getEntity().getScene().getEntity(this.getEntity().getParentAtTime(e));if(null!==i){const n=s.Quaternion.pool.get();i.getOrientationAtTime(n,e),t.rotate(n,t),s.Quaternion.pool.release(n)}}}__updateVelocityAtTime(t,e){if(this._rotatingPosition){const i=""!==this._entityRef.getName()?this._entityRef.get():this.getEntity().getScene().getEntity(this.getEntity().getParentAtTime(e));if(null!==i){const n=s.Quaternion.pool.get();i.getOrientationAtTime(n,e),t.rotate(n,t),s.Quaternion.pool.release(n)}}}__updateOrientationAtTime(t,e){if(this._rotatingOrientation){const i=""!==this._entityRef.getName()?this._entityRef.get():this.getEntity().getScene().getEntity(this.getEntity().getParentAtTime(e));if(null!==i){const n=s.Quaternion.pool.get();i.getOrientationAtTime(n,e),t.mult(n,t),s.Quaternion.pool.release(n)}}}__update(){const t=""!==this._entityRef.getName()?this._entityRef.get():this.getEntity().getParent();if(null!==t){if(this._rotatingPosition){const e=s.Vector3.pool.get();e.rotate(t.getOrientation(),this.getEntity().getPosition()),this.getEntity().setPosition(e),s.Vector3.pool.release(e)}if(this._rotatingOrientation){const e=s.Quaternion.pool.get();e.mult(t.getOrientation(),this.getEntity().getOrientation()),this.getEntity().setOrientation(e),s.Quaternion.pool.release(e)}}}}e.default=RotateByEntityOrientationController},function(t,e,i){"use strict";i.r(e);var s=i(6);class ScaleController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._scale=1,this.addModifiedState("position")}getScale(){return this._scale}setScale(t){this._scale=t}__updatePositionAtTime(t,e){t.mult(t,this._scale)}__updateVelocityAtTime(t,e){t.mult(t,this._scale)}__update(){const t=s.Vector3.pool.get();t.mult(this.getEntity().getPosition(),this._scale),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}e.default=ScaleController},function(t,e,i){"use strict";i.r(e);var s=i(6);class SelectController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._callback=null}getCallback(){return this._callback}setCallback(t){this._callback=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();if(t.isSelected()&&null!==this._callback){const e=t.getActiveViewport();if(null!==e){const i=e.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const n=s.Vector3.pool.get();e.getNormalSpacePositionFromPixelSpacePosition(n,t.getSelectedPosition());let o=null,a=0;const r=s.Vector2.pool.get();r.set(n.x,n.y);const l=this.getEntity().getScene().getNumEntities();for(let t=0;t<l;t++){const e=this.getEntity().getScene().getEntity(t);if(e.isEnabled()){const t=e.getComponentByType("label");if(null!==t&&"loaded"===t.getLoadState()){const s=t.getNormalSpaceBounds(i);if(void 0!==s&&s.contains(r)){const t=e.getCameraSpacePosition(i).magnitude();(null===o||a>t)&&(o=e,a=t)}}}}s.Vector2.pool.release(r),null===o&&(i.getCameraSpacePositionFromNormalSpacePosition(n,n),n.mult(n,1/n.magnitude()),o=i.getNearestIntersectingEntity(n)),s.Vector3.pool.release(n),this.getEntity().getScene().getEngine().addCallback(this._callback.bind(null,o),!1)}}}}}e.default=SelectController},function(t,e,i){"use strict";i.r(e);var s=i(6);class SetParentController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._parent=new s.EntityRef(this.getEntity().getScene())}getParent(){return this._parent.getName()}setParent(t){""!==this._parent.getName()&&this.removeDependentState(this._parent.getName(),"position"),this._parent.setName(t),""!==this._parent.getName()&&this.addDependentState(this._parent.getName(),"position")}__update(){const t=this._parent.get();this.getEntity().setParent(t)}}e.default=SetParentController},function(t,e,i){"use strict";i.r(e);var s=i(6);class SpinController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._axis=new s.Vector3(0,0,1),this._axis.freeze(),this._axisRelativeToEntity=!0,this._rate=0,this._referenceAngle=0,this._referenceTime=void 0,this._clampedToRealTime=!1,this._usingRealTime=!1,this._rotatingPosition=!1,this._joint="",this._jointObject=null,this._model=null,this._lastTime=i.getScene().getEngine().getTime(),this.addModifiedState("orientation")}getAxis(){return this._axis}isAxisRelativeToEntity(){return this._axisRelativeToEntity}setAxis(t,e){this._axis.thaw(),this._axis.copy(t),this._axis.freeze(),this._axisRelativeToEntity=e}getRate(){return this._rate}setRate(t){this._rate=t}getReferenceAngle(){return this._referenceAngle}setReferenceAngle(t){this._referenceAngle=t}getReferenceTime(){return this._referenceTime}setReferenceTime(t){this._referenceTime=t}isClampedToRealTime(){return this._clampedToRealTime}setClampedToRealTime(t){this._clampedToRealTime=t}isUsingRealTime(){return this._usingRealTime}setUsingRealTime(t){this._usingRealTime=t}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}""!==this._joint?this.removeModifiedState("orientation"):this.addModifiedState("orientation")}__updatePositionAtTime(t,e){if(this._rotatingPosition){let i=0;this._usingRealTime||void 0!==this._referenceTime&&(i=e-this._referenceTime,i-=this._referenceAngle/this._rate);const n=s.Quaternion.pool.get();if(n.setFromAxisAngle(this._axis,this._rate*i),null===this._jointObject){if(this._axisRelativeToEntity){const t=s.Quaternion.pool.get();this.getEntity().getOrientationAtTime(t,e),n.mult(t,n),n.multInverseR(n,t),s.Quaternion.pool.release(t)}t.rotate(n,t)}s.Quaternion.pool.release(n)}}__updateOrientationAtTime(t,e){t.isNaN()&&t.copy(s.Quaternion.Identity);let i=0;this._usingRealTime||void 0!==this._referenceTime&&(i=e-this._referenceTime,i-=this._referenceAngle/this._rate);const n=s.Quaternion.pool.get();n.setFromAxisAngle(this._axis,this._rate*i),null===this._jointObject&&(this._axisRelativeToEntity&&(n.mult(t,n),n.multInverseR(n,t)),t.mult(n,t),t.normalize(t)),s.Quaternion.pool.release(n)}__update(){this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);const t=this.getEntity().getScene().getEngine();let e=0;if(this._usingRealTime)e=t.getDeltaTime();else if(void 0!==this._referenceTime)e=t.getTime()-this._referenceTime,e-=this._referenceAngle/this._rate;else if(e=t.getTime()-this._lastTime,this._clampedToRealTime){const i=t.getDeltaTime();e=s.MathUtils.clamp(e,-i,i)}const i=s.Quaternion.pool.get();if(i.setFromAxisAngle(this._axis,this._rate*e),null!==this._jointObject&&null!==this._model.getThreeJsObjects()[0]&&(this._jointObject=null),""!==this._joint&&(null===this._jointObject||this._jointObject.name!==this._joint)&&null!==this._model){const t=this._model.getThreeJsObjectByName(this._joint);null!==t&&(this._jointObject=t)}const o=this.getEntity().getOrientation();if(null!==this._jointObject)this._axisRelativeToEntity||(i.multInverseL(o,i),i.mult(i,o)),n.set(i.x,i.y,i.z,i.w),this._jointObject.quaternion.multiplyQuaternions(n,this._jointObject.quaternion),this._rotatingPosition&&this._jointObject.position.applyQuaternion(n);else{const t=s.Quaternion.pool.get();this._axisRelativeToEntity&&(i.mult(o,i),i.multInverseR(i,o)),t.mult(i,o),t.normalize(t);const e=s.Vector3.pool.get();if(e.mult(this._axis,this._rate),this._axisRelativeToEntity&&e.rotate(t,e),this.getEntity().setOrientation(t),this.getEntity().setAngularVelocity(e),s.Vector3.pool.release(e),s.Quaternion.pool.release(t),this._rotatingPosition){const t=s.Vector3.pool.get();t.rotate(i,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}s.Quaternion.pool.release(i),this._lastTime=t.getTime()}}const n=new s.THREE.Quaternion;e.default=SpinController},function(t,e,i){"use strict";i.r(e);var s=i(6);class TapController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._tapCallback=null}getTapCallback(){return this._tapCallback}setTapCallback(t){this._tapCallback=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();!t.isSelected()&&t.getDraggedOffset().isZero()||null!==this._tapCallback&&this._tapCallback()}}e.default=TapController},function(t,e,i){"use strict";i.r(e);var s=i(6);class TLEController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._satrec=null,this.addModifiedState("position"),this.addModifiedState("velocity")}setSource(t,e){this.getEntity().getScene().getEngine().getDownloader().download(e,!0).then((async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load TLE controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load TLE controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content);for(;;){let e="";try{e=i.readLine()}catch(t){throw new Error("Could not find entry.")}if(0===e.length)break;const n=i.readLine(),o=i.readLine();if(e.includes(t)||n.includes(t)){this._satrec=s.SatelliteJs.twoline2satrec(n,o);break}}})).catch((i=>{throw new Error(`While loading TLE "${t}" from "${e}": ${i}`)}))}__updatePositionAtTime(t,e){if(null!==this._satrec){n.setTime(1e3*s.TimeUtils.etToUnix(e));const i=s.SatelliteJs.propagate(this._satrec,n);"boolean"!=typeof i.position&&t.set(i.position.x,i.position.y,i.position.z)}}__updateVelocityAtTime(t,e){if(null!==this._satrec){n.setTime(1e3*s.TimeUtils.etToUnix(e));const i=s.SatelliteJs.propagate(this._satrec,n);"boolean"!=typeof i.velocity&&t.set(i.velocity.x,i.velocity.y,i.velocity.z)}}__update(){const t=s.Vector3.pool.get();if(t.copy(this.getEntity().getScene().getEntity("earth").getPosition()),null!==this._satrec&&!isNaN(t.x)){n.setTime(1e3*s.TimeUtils.etToUnix(this.getEntity().getScene().getEngine().getTime()));const t=s.SatelliteJs.propagate(this._satrec,n);if("boolean"!=typeof t.position&&"boolean"!=typeof t.velocity){const e=s.Vector3.pool.get(),i=s.Vector3.pool.get();e.set(t.position.x,t.position.y,t.position.z),i.set(t.velocity.x,t.velocity.y,t.velocity.z),this.getEntity().setPosition(e),this.getEntity().setVelocity(i),s.Vector3.pool.release(e),s.Vector3.pool.release(i)}}s.Vector3.pool.release(t)}}const n=new Date;e.default=TLEController},function(t,e,i){"use strict";i.r(e);var s=i(6);class TransitionController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._initialPosition=new s.Vector3,this._initialPosition.copy(i.getPosition()),this._initialOrientation=new s.Quaternion,this._initialOrientation.copy(i.getOrientation()),this._initialParent=new s.EntityRef(this.getEntity().getScene()),this._transitionStart=Number.NaN,this._transitionTime=1,this._transitionFunction=this._lerpTransitionFunction,this._resolvePromise=null,this._rejectPromise=null,this._endPromise=new Promise(((t,e)=>{this._resolvePromise=t,this._rejectPromise=e}));const n=this.getEntity().getParent();null!==n&&this._initialParent.setName(n.getName()),this.getEntity().addController("setParent","transitionSetParent",this.getEntity().getController(0))}getTransitionTime(){return this._transitionTime}setTransitionTime(t){this._transitionTime=t}setTransitionFunction(t){this._transitionFunction=t}getParent(){const t=this.getEntity().getController("transitionSetParent");if(null!==t)return t.getName();{const t=this.getEntity().getParent();return null!==t?t.getName():null}}setParent(t){const e=this.getEntity().getController("transitionSetParent");null!==e&&e.setParent(t)}getEndPromise(){return this._endPromise}__destroy(){if(super.__destroy(),0!==this._transitionTime){const t=this.getEntity().getController("transitionSetParent");null!==t&&this.getEntity().removeController(t),this._rejectPromise("Transition controller was destroyed before completing.")}}__update(){const t=this._initialParent.get(),e=this.getEntity().getParent();null===e&&(this._transitionTime=0,this.getEntity().removeController(this),this._rejectPromise("The final parent was destroyed or disabled before the transition could complete.")),Number.isNaN(this._transitionStart)&&(this._transitionStart=Date.now()/1e3);const i=this.getEntity().getController("transitionSetParent");if(null!==i){if(null===t)return void this.getEntity().getScene().getEngine().addCallback((()=>{this._transitionTime=0,this.getEntity().removeController(this),""!==this._initialParent.getName()?this._rejectPromise(`The initial parent "${this._initialParent.getName()}" was destroyed or disabled before the first half of the transition could complete.`):this._resolvePromise()}),!1);Date.now()/1e3-this._transitionStart>=this._transitionTime/2||t===e?(this.getEntity().removeController(i),t!==e&&null!==t&&null!==e&&t.getPositionRelativeToEntity(this._initialPosition,this._initialPosition,e)):this.getEntity().setParent(t)}const n=this.getEntity().getPosition(),o=this.getEntity().getOrientation();let a=s.MathUtils.clamp01((Date.now()/1e3-this._transitionStart)/this._transitionTime);Number.isNaN(a)&&(a=1),this._transitionFunction(this.getEntity(),this._initialPosition,n,this._initialOrientation,o,a),Date.now()/1e3-this._transitionStart>=this._transitionTime&&this.getEntity().getScene().getEngine().addCallback((()=>{this._transitionTime=0,this.getEntity().removeController(this),this._resolvePromise()}),!1)}_lerpTransitionFunction(t,e,i,n,o,a){const r=s.Vector3.pool.get(),l=s.Quaternion.pool.get();r.lerp(e,i,a),l.slerp(n,o,a),t.setPosition(r),t.setOrientation(l),s.Vector3.pool.release(r),s.Quaternion.pool.release(l)}}e.default=TransitionController},function(t,e,i){"use strict";i.r(e);var s=i(6);class TranslateController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._translation=new s.Vector3(0,0,0),this._translation.freeze(),this._relativeToOrientation=!1,this.addModifiedState("position")}getTranslation(){return this._translation}setTranslation(t){this._translation.thaw(),this._translation.copy(t),this._translation.freeze()}setRelativeToOrientation(t){this._relativeToOrientation=t}__updatePositionAtTime(t,e){const i=s.Vector3.pool.get();if(this._relativeToOrientation){const t=s.Quaternion.pool.get();this.getEntity().getOrientationAtTime(t,e),i.rotate(t,this._translation),s.Quaternion.pool.release(t)}else i.copy(this._translation);t.add(i,t),s.Vector3.pool.release(i)}__update(){const t=s.Vector3.pool.get();this._relativeToOrientation?t.rotate(this.getEntity().getOrientation(),this._translation):t.copy(this._translation),t.add(t,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}e.default=TranslateController},function(t,e,i){"use strict";i.r(e);var s=i(6);class ZoomController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._zoomSensitivity=.05,this._zoomSmoothness=.8,this._zoomSmoothedValue=1,this._distanceClamp=new s.Interval(.001,Number.POSITIVE_INFINITY),this._distanceClamp.freeze(),this._useSpheroidRadiusForDistance=!1,this.addModifiedState("position")}getZoomSensitivity(){return this._zoomSensitivity}setZoomSensitivity(t){this._zoomSensitivity=t}getZoomSmoothness(){return this._zoomSmoothness}setZoomSmoothness(t){this._zoomSmoothness=t}getDistanceClamp(){return this._distanceClamp}setDistanceClamp(t){this._distanceClamp.thaw(),this._distanceClamp.copy(t),this._distanceClamp.freeze()}getUseSpheroidRadiusForDistance(){return this._useSpheroidRadiusForDistance}setUseSpheroidRadiusForDistance(t){this._useSpheroidRadiusForDistance=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();let e=1;const i=t.getActiveViewport();if(null!==i){const s=i.getCamera();if(null!==s&&s.getEntity()===this.getEntity()){let i=1;t.isKeyPressed("x")&&(i=.05),t.isShiftPressed()&&(i=5);const s=t.getZoomedOffset();0!==s&&(e*=Math.pow(2,s*this._zoomSensitivity*i)),t.isKeyPressed("w")&&(e/=Math.pow(2,this._zoomSensitivity*i)),t.isKeyPressed("s")&&(e*=Math.pow(2,this._zoomSensitivity*i))}}this._zoomSmoothedValue=s.MathUtils.clamp(s.MathUtils.lerp(e,this._zoomSmoothedValue,this._zoomSmoothness),.8,1.25),Math.abs(1-this._zoomSmoothedValue)<1e-7&&(this._zoomSmoothedValue=1);let n=1;const o=s.LatLonAlt.pool.get();if(this._useSpheroidRadiusForDistance&&null!==this.getEntity().getParent()){const t=this.getEntity().getParent().getComponentByType("spheroid");if(null!==t){const e=s.Vector3.pool.get();e.rotateInverse(this.getEntity().getParent().getOrientation(),this.getEntity().getPosition()),t.llaFromXYZ(o,e),n=o.alt,s.Vector3.pool.release(e)}else n=this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getOcclusionRadius()}else n=this.getEntity().getPosition().magnitude();Number.isNaN(n)&&(n=1),n*=this._zoomSmoothedValue,n<this._distanceClamp.min&&(n=this._distanceClamp.min,this._zoomSmoothedValue=1),n>this._distanceClamp.max&&(n=this._distanceClamp.max,this._zoomSmoothedValue=1);const a=s.Vector3.pool.get();let r=n;if(this._useSpheroidRadiusForDistance&&null!==this.getEntity().getParent()){const t=this.getEntity().getParent().getComponentByType("spheroid");null!==t?(o.alt=n,t.xyzFromLLA(a,o),r=a.magnitude()):r=n+this.getEntity().getParent().getOcclusionRadius()}a.normalize(this.getEntity().getPosition()),a.mult(a,r),this.getEntity().setPosition(a),s.Vector3.pool.release(a),s.LatLonAlt.pool.release(o)}}e.default=ZoomController},function(t,e,i){"use strict";i.r(e);var s=i(6);class Types{}Types.Components=new Map,Types.Components.set("atmosphere",s.AtmosphereComponent),Types.Components.set("camera",s.CameraComponent),Types.Components.set("cmts",s.CMTSComponent),Types.Components.set("cometTail",s.CometTailComponent),Types.Components.set("connectedSprite",s.ConnectedSpriteComponent),Types.Components.set("div",s.DivComponent),Types.Components.set("dynEnvMap",s.DynamicEnvironmentMapComponent),Types.Components.set("gizmo",s.GizmoComponent),Types.Components.set("label",s.LabelComponent),Types.Components.set("lightSource",s.LightSourceComponent),Types.Components.set("model",s.ModelComponent),Types.Components.set("orbitalParticles",s.OrbitalParticlesComponent),Types.Components.set("particleSpray",s.ParticleSprayComponent),Types.Components.set("rings",s.RingsComponent),Types.Components.set("skybox",s.SkyboxComponent),Types.Components.set("spheroid",s.SpheroidComponent),Types.Components.set("spheroidLOD",s.SpheroidLODComponent),Types.Components.set("spout",s.SpoutComponent),Types.Components.set("sprite",s.SpriteComponent),Types.Components.set("starfield",s.StarfieldComponent),Types.Components.set("trail",s.TrailComponent),Types.Controllers=new Map,Types.Controllers.set("align",s.AlignController),Types.Controllers.set("animdata",s.AnimdataController),Types.Controllers.set("coverage",s.CoverageController),Types.Controllers.set("dynamo",s.DynamoController),Types.Controllers.set("fixed",s.FixedController),Types.Controllers.set("fixedToParent",s.FixedToParentController),Types.Controllers.set("freeFly",s.FreeFlyController),Types.Controllers.set("groundClamp",s.GroundClampController),Types.Controllers.set("keyframe",s.KeyframeController),Types.Controllers.set("look",s.LookController),Types.Controllers.set("modelAnimate",s.ModelAnimateController),Types.Controllers.set("orbit",s.OrbitController),Types.Controllers.set("orbitKeyframe",s.OrbitKeyframeController),Types.Controllers.set("orbitalElements",s.OrbitalElementsController),Types.Controllers.set("pick",s.PickController),Types.Controllers.set("roll",s.RollController),Types.Controllers.set("rotate",s.RotateController),Types.Controllers.set("rotateByEntityOrientation",s.RotateByEntityOrientationController),Types.Controllers.set("scale",s.ScaleController),Types.Controllers.set("select",s.SelectController),Types.Controllers.set("setParent",s.SetParentController),Types.Controllers.set("spin",s.SpinController),Types.Controllers.set("tap",s.TapController),Types.Controllers.set("tle",s.TLEController),Types.Controllers.set("transition",s.TransitionController),Types.Controllers.set("translate",s.TranslateController),Types.Controllers.set("zoom",s.ZoomController),e.default=Types},function(t,e,i){"use strict";i.r(e),i.d(e,{CancelToken:function(){return CancelToken}});class CancelToken{constructor(){this._isCanceled=!1}cancel(){this._isCanceled=!0}get isCanceled(){return this._isCanceled}}},function(t,e,i){"use strict";i.r(e),i.d(e,{AppUtils:function(){return AppUtils}});var s=i(130),n=i.n(s),o=i(131),a=i.n(o),r=i(132),l=i.n(r),c=i(133),h=i.n(c),u=(i(134),i(135));class AppUtils{static conversionTable={kmToMi:.621371,kmToFt:3280.84,miToFt:5280,kmToM:1e3,auToKm:149597871,ldToKm:384398};static constants={speedOfLight:299792.458,minDate:-8e15,maxDate:8e15};static isEmptyObject(t){return t.constructor===Object&&0===Object.keys(t).length}static addStartToPath(t,e="/"){return t.startsWith(e)?t:e+t}static cleanPathDuplicate(t,e="/",i="/"){const s=new RegExp(`${e}+`,"g");return t.replace(s,i)}static addEndToPath(t,e="/"){return t.endsWith(e)?t:t+e}static isElement(t){return t instanceof Element||t instanceof Document}static isHTML(t){return"string"==typeof t&&(null!==t.match(/<[^/>]+>/gm)&&null!==t.match(/<\/[^>]+>/gm))}static hasHTML(t){if("string"!=typeof t)return!1;const e=(new DOMParser).parseFromString(t,"text/html");return Array.from(e.body.childNodes).some((t=>1===t.nodeType))}static async loadJSON(t){t=AppUtils.addEndToPath(t,".json");const e=await fetch(t);if(200===e.status)return e.json();{const i=new Error(e.status+" ("+e.statusText+') when trying to fetch "'+t+'"');throw i.name="NotFound",i}}static msToTime(t=0){const e=t%1e3,i=(t=(t-e)/1e3)%60,s=(t=(t-i)/60)%60;return{hour:(t-s)/60,minute:s,second:i,millisecond:e}}static deepCopy(t){return JSON.parse(JSON.stringify(t))}static deepClone(t){const e=Array.isArray(t)?[]:{};for(const i in t){const s=t[i];e[i]="object"==typeof s&&null!==s?AppUtils.deepClone(s):s}return e}static deepMerge(t,e){const i={isMergeableObject:t=>(!t||!t._isAMomentObject)&&(Boolean(t)&&"object"==typeof t)};return n()(t,e,i)}static deepEqual(t,e){if(!t||!e)return!1;const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(const s of i){const i=t[s],n=e[s],o=AppUtils.isObject(i)&&AppUtils.isObject(n);if(o&&!AppUtils.deepEqual(i,n))return!1;if(!o&&i!==n)return!1}return!0}static isObject(t){return null!==t&&"object"==typeof t}static filterObject(t,e){return Object.fromEntries(Object.entries(t).filter((([t,i])=>e(i,t))))}static debounce(){return a()(...arguments)}static throttle(){return l()(...arguments)}static waitFor(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}static isPortrait(){return window.matchMedia("(orientation: portrait)").matches}static isLandscape(){return window.matchMedia("(orientation: landscape)").matches}static isMobileLandscape(){return window.matchMedia("(min-width: 320px) and (max-width: 915px) and (orientation: landscape)").matches}static isMobilePortrait(){return window.matchMedia("(min-width: 320px) and (max-width: 640px) and (orientation: portrait)").matches}static isMobile(){return AppUtils.isMobileLandscape()||AppUtils.isMobilePortrait()}static isiPhone(){return"iPhone"===(window.navigator?.userAgentData?.platform||window.navigator?.platform||"unknown")}static isiPad(){const t=window.navigator?.userAgentData?.platform||window.navigator?.platform||"unknown",e=window.navigator.maxTouchPoints>1;return"MacIntel"===t&&e}static isTabletPortrait(){return window.matchMedia("(min-width: 641px) and (max-width: 1024px) and (orientation: portrait)").matches}static isTabletLandscape(){return window.matchMedia("(min-width: 916px) and (max-width: 1024px) and (orientation: landscape)").matches}static isTablet(){return AppUtils.isTabletLandscape()||AppUtils.isTabletPortrait()}static isMobileMode(){return AppUtils.isMobilePortrait()||AppUtils.isMobileLandscape()||AppUtils.isTabletLandscape()||AppUtils.isTabletPortrait()||AppUtils.isPanorama()}static isDesktop(){return window.matchMedia("(min-width: 1025px) and (min-height: 600px)").matches}static isPanorama(){return window.matchMedia("(min-width: 1025px) and (max-height: 599px) and (orientation: landscape)").matches}static is2K(){return window.matchMedia("(min-width: 2880px) and (min-height: 1620px)").matches}static is4K(){return window.matchMedia("(min-width: 3200px) and (min-height: 1800px)").matches}static isTouch(){return"ontouchstart"in window||window.navigator.maxTouchPoints>0}static isPrimaryTouch(){return window.matchMedia("(pointer: coarse)").matches}static canHover(){return!matchMedia("(hover: none)").matches}static htmlToElement(t){const e=document.createElement("template");return e.innerHTML=t.replace(/[\t\n]+/g,"").trim(),e.content.firstElementChild}static htmlToElements(t){const e=document.createElement("template");return e.innerHTML=t.replace(/[\t\n]+/g,"").trim(),e.content.cloneNode(!0).childNodes}static insertParamsToHTML(t,e={}){t=t.replace(/[\t\n]+/g,"").trim();const i=Object.keys(e);for(let s=i.length-1;s>=0;s--){const n=i[s],o=`{$${n}}`;t=t.replaceAll(o,e[n])}return t=t.replaceAll(/{\$([A-Z])\w+}/gi,"")}static htmlWithParamsToElement(t,e={}){return t=AppUtils.insertParamsToHTML(t,e),AppUtils.htmlToElement(t)}static onAttachElement(t,e,{interval:i=100,timeout:s=5e3}={}){const n=setInterval((()=>{("string"==typeof t?null!==document.querySelector(t):document.body.contains(t))&&(clearInterval(n),clearTimeout(o),e())}),i),o=setTimeout((()=>{clearInterval(n),console.error(`[AppUtils.onAttachElement] Timeout exceeded for "${t}".`)}),s)}static appendWithCallback(t,e,i,s){new Promise((t=>{if(document.querySelector(i))return t(document.querySelector(i));const e=new MutationObserver((()=>{document.querySelector(i)&&(t(document.querySelector(i)),e.disconnect())}));e.observe(document.body,{childList:!0,subtree:!0})})).then(s),t.appendChild(e)}static elementReady(t,e=1e3){return new Promise(((i,s)=>{const n=document.querySelector(t);if(n)return void i(n);const o=new MutationObserver((()=>{const e=document.querySelector(t);e&&(o.disconnect(),clearTimeout(a),i(e))}));o.observe(document.body,{childList:!0,subtree:!0});const a=setTimeout((()=>{o.disconnect(),s(console.warn(`${t} not found in DOM`))}),e)}))}static addScrollbar(t,e={}){const i={className:"os-theme-dark",resize:"none",clipAlways:!1,normalizeRTL:!1,paddingAbsolute:!0,autoUpdate:!1,sizeAutoCapable:!1,overflowBehavior:{x:"hidden",y:"scroll"},scrollbars:{clickScrolling:!0,autoHide:"move"},...e};return h()(t,i)}static formatNumber(t,e=3){return t.toLocaleString(void 0,{maximumFractionDigits:e})}static formatDate(t,e={}){return t.toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric",...e})}static tween(t,e,{onUpdate:i,onComplete:s,duration:n=2e3}={}){let o=0;const a=new u.Tween(t).to(e,n).onUpdate((t=>{void 0!==i&&i(t)})).onComplete((()=>{"function"==typeof s&&s(),cancelAnimationFrame(o)})).start(),r=t=>{o=requestAnimationFrame(r),(0,u.update)(t)};return r(),a}static convertObjType(t){return Object.entries(t).forEach((([e,i])=>{let s;switch(i.trim()){case"undefined":s=void 0;break;case"null":s=null;break;case"true":s=!0;break;case"false":s=!1;break;case"NaN":s=NaN;break;case"":break;default:s=isNaN(i)?i:parseFloat(i)}t[e]=s})),t}}},,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,{AnimationUtils:function(){return AnimationUtils}});class AnimationUtils{}AnimationUtils.createAnimation=(t,e,i)=>{const s=new KeyframeEffect(t,e,i);return new Animation(s,t.ownerDocument.timeline)},AnimationUtils.directionalFade=(t,{direction:e="up",fade:i="in",yOffset:s=0,xOffset:n=0,timings:o=AnimationUtils.defaultTimings})=>{const a={x:{ori:0,dest:0},y:{ori:0,dest:0},opacity:{ori:1,dest:0}};"up"===e||"down"===e?(a.y.ori="in"===i?100:0,a.y.dest=100-a.y.ori,"up"===e&&(a.y.ori*=-1,a.y.dest*=-1)):(a.x.ori="in"===i?100:0,a.x.dest=100-a.x.ori,"left"===e&&(a.x.ori*=-1,a.x.dest*=-1)),"in"===i&&(a.opacity.ori=0,a.opacity.dest=1),a.x.ori+=n,a.x.dest+=n,a.y.ori+=s,a.y.dest+=s;const r=[{transform:"translate("+a.x.ori+"%, "+a.y.ori+"%)",opacity:a.opacity.ori},{transform:"translate("+a.x.dest+"%, "+a.y.dest+"%)",opacity:a.opacity.dest}];return AnimationUtils.createAnimation(t,r,o)},AnimationUtils.defaultTimings={duration:1e3,iteration:1,fill:"forwards",easing:"ease"}},function(t,e,i){"use strict";i.r(e),i.d(e,{BaseComponent:function(){return BaseComponent}});var s=i(2);class BaseComponent{constructor(t,e,i={parent:null,config:{},params:{},isVisible:!0}){this._element=e,this._app=t,this._config=i.config||{},delete i.config,"hiddenMode"in this._config||(this._config.hiddenMode="hidden"),this._params=i.params||{},delete i.params,"isVisible"in i||(i.isVisible=!1),this._class={isVisible:{true:"active",false:"hidden"===this._config.hiddenMode?"hidden":"invisible"},fontSize:{small:"small",default:"",large:""}},this._state={...i,isVisibleClass:this._class.isVisible[i.isVisible?"true":"false"],fontSizeClass:this._class.fontSize.default},this._oldState={},this._children={},this._components=[],this._vars={},this._parent=this._element?this._element.parentElement:i.parent||null,this._enabled=!1,this._eventNames=["statuschange","visiblechange"],this._callbacks={},this._initCallbacks(),this._callbackRegistry=[],this.bindFunctions(["resize","isEnabled","setEnabled","show","hide","toggle","loadHTML","getState","setState"])}get components(){return this._components}get app(){return this._app}resize(){this._updateFontSize()}_updateFontSize(){let t=this._class.fontSize.default;s.AppUtils.isMobile()?t=this._class.fontSize.small:s.AppUtils.isTablet()||s.AppUtils.isPanorama()?t=this._class.fontSize.default:(s.AppUtils.is2K()||s.AppUtils.is4K())&&(t=this._class.fontSize.large),this.setState({fontSizeClass:t})}get element(){return this._element}getParent(){return this._parent}setParent(t,e=null){this._parent=t,e&&this._parent.removeChild(e),this._enabled&&this._parent.appendChild(this._element)}async init(t={}){Object.assign(this._params,t);const e=this.constructor;void 0!==e.html?(this._element=s.AppUtils.htmlWithParamsToElement(e.html,this._params),this._element.classList.add("{{fontSizeClass}}"),this._setVariables(this._element),this._setEventHandlersFromAttributes(this._element)):(this._element.classList.add("{{fontSizeClass}}"),this._setVariables(this._element)),this._updateFontSize()}getConfig(){return this._config}setConfig(t){Object.assign(this._config,t)}bindFunctions(t=[]){const e=this;for(let i=0;i<t.length;i++){const s=t[i];e[s]=e[s].bind(this)}}isEnabled(){return this._enabled}setEnabled(t){const e=this._enabled;t&&!e?this.__enable():!t&&e&&this.__disable(),this._enabled=t,this._components.forEach((e=>{("string"==typeof e?this._app.getComponent(e):e).setEnabled(t)}))}destroy(){this.__destroy()}show(){this.setState({isVisible:!0,isVisibleClass:this._class.isVisible.true},(()=>this.triggerCallbacks("visiblechange",[!0])))}hide(){this.setState({isVisible:!1,isVisibleClass:this._class.isVisible.false},(()=>this.triggerCallbacks("visiblechange",[!1])))}toggle(){this._state.isVisible?this.hide():this.show()}async loadHTML(t,e=null){const i=await fetch(t);if(i.ok){const t=await i.text();this._parseHTML(t,e)}else console.error(i.status+": "+i.statusText)}getState(t){return t in this._state?this._state[t]:null}addState(t,e,i){this._state[t]=e,i&&this._setVariables(i)}setState(t,e){if(s.AppUtils.isEmptyObject(t))return;let i=!1;for(const e in t)if(t[e]!==this._state[e]){i=!0;break}i&&(this._oldState={...this._state},this._state={...this._state,...t},this._render(t),void 0!==e&&e())}_parseHTML(t,e=null){if(!t)return;const i=e||this._element;this._roots=[...s.AppUtils.htmlToElements(t)];const n=document.createDocumentFragment();for(let t=0;t<this._roots.length;t++){const e=this._roots[t];e instanceof HTMLElement&&(this._setVariables(e),this._setEventHandlersFromAttributes(e),n.appendChild(e))}i.appendChild(n)}_containVar(t){return t&&"function"==typeof t.includes&&t.includes("{{")&&t.includes("}}")}_splitNonEmpty(t){return t.split(/\s+/g).filter((t=>""!==t))}_setVariables(t,e=!0){let i;if(t instanceof Element)for(let e=t.attributes.length-1;e>=0;e--){const i=t.attributes[e];if("key"===i.name){this._children[i.value]=t;break}}const n=[];if(t.nodeType===Node.TEXT_NODE)this._containVar(t.nodeValue)&&n.push({field:"nodeValue",elementVar:t.nodeValue});else if(t instanceof Element){let e=t.className;for(;this._containVar(e);){const t=e.indexOf("}}")+2;n.push({field:"classList",elementVar:e.substring(e.indexOf("{{"),t)}),e=e.substring(t)}}for(let e=0;e<n.length;e++){let{field:o,elementVar:a}=n[e];if(o&&a.startsWith("{{")&&a.endsWith("}}")){const e=a.replace("{{","").replace("}}","");if("classList"===o&&t instanceof Element){t.classList.remove(a);const i=this._state[e];if(void 0!==i){const e=this._splitNonEmpty(i);t.classList.add(...e)}}else if(s.AppUtils.isHTML(this._state[e])){const n=s.AppUtils.htmlToElement(this._state[e]);t.parentNode.replaceChild(n,t),i=n}else if(s.AppUtils.hasHTML(this._state[e]))if(t.nodeType===Node.TEXT_NODE){const s=document.createElement("span");s.innerHTML=this._state[e];(t.parentElement||t.parentNode).replaceChild(s,t),i=s,o="innerHTML"}else t.innerHTML=this._state[e];else{t[o]=this._state[e]}void 0===this._vars[e]&&(this._vars[e]=[]),this._vars[e].push({element:i||t,field:o})}}if(e)for(let e=t.childNodes.length-1;e>=0;e--)this._setVariables(t.childNodes[e])}_setEventHandlersFromAttributes(t){const e=[];for(let i=t.attributes.length-1;i>=0;i--){const s=t.attributes[i];if(s.name.startsWith("on")){const i=s.name.substring(2).toLowerCase(),n=this[s.value];if(void 0===n||!(n instanceof Function))throw new Error("Could not find valid "+i+" handler "+s.value+" for element with id "+t.id);const o=n.bind(this);e.push(s.name),t.addEventListener(i,o)}}for(let i=e.length-1;i>=0;i--)t.removeAttribute(e[i]);for(let e=t.children.length-1;e>=0;e--)this._setEventHandlersFromAttributes(t.children[e])}_render(t){const e=Object.keys(t);for(let i=e.length-1;i>=0;i--){const n=e[i];if(n in this._vars&&t[n]!==this._oldState[n]){const e=this._vars[n];for(let i=0;i<e.length;i++){const{field:o,element:a}=e[i];if("classList"===o){let e=this._splitNonEmpty(this._oldState[n]);const i=a;i[o].remove(...e),e=this._splitNonEmpty(t[n]),i[o].add(...e)}else if(s.AppUtils.isHTML(t[n])){const e=s.AppUtils.htmlToElement(t[n]);a.parentNode.replaceChild(e,a),this._vars[n][i].element=e}else if(s.AppUtils.hasHTML(t[n]))if(a.nodeType===Node.TEXT_NODE){const e=document.createElement("span");e.innerHTML=t[n];(a.parentElement||a.parentNode).replaceChild(e,a),this._vars[n][i].element=e,this._vars[n][i].field="innerHTML"}else a.innerHTML=t[n];else{a[o]=t[n]}}}}}__enable(){window.addEventListener("resize",this.resize),this.registerCallbacks(),this._parent&&(this._parent.appendChild(this._element),this.triggerCallbacks("statuschange",[!0,this]))}__disable(){this._parent&&this._parent.contains(this._element)&&(this.triggerCallbacks("statuschange",[!1,this]),this._element=this._parent.removeChild(this._element)),window.removeEventListener("resize",this.resize),this.removeCallbacks()}__destroy(){this.__disable(),this._element=null,this._parent=null}_initCallbacks(){for(let t=0;t<this._eventNames.length;t++)this._callbacks[this._eventNames[t]]=[]}registerCallback(t,e){"function"!=typeof e||this._eventNames.indexOf(t)<0||this._callbacks[t].includes(e)||this._callbacks[t].push(e)}removeCallback(t,e){if("function"!=typeof e||this._eventNames.indexOf(t)<0)return;const i=this._callbacks[t].indexOf(e);i>-1&&this._callbacks[t].splice(i,1)}triggerCallbacks(t,e=[]){for(let i=this._callbacks[t].length-1;i>=0;i--){(0,this._callbacks[t][i])(...e)}}registerCallbacks(){for(let t=0;t<this._callbackRegistry.length;t++){const{emitter:e,event:i,callback:s}=this._callbackRegistry[t];e.registerCallback(i,s)}}removeCallbacks(){for(let t=0;t<this._callbackRegistry.length;t++){const{emitter:e,event:i,callback:s}=this._callbackRegistry[t];e.removeCallback(i,s)}}}BaseComponent.create=async(t,e,i,s=!0,n=[],o={})=>{const a=s?await t.addComponentWithPlaceholder({type:i,name:e,args:n,options:o}):await t.addComponent(e,i,...n,o);return i.postCreationFunction&&i.postCreationFunction(t,a),a},BaseComponent.html=void 0,BaseComponent.postCreationFunction=void 0},function(t,e,i){"use strict";i.r(e);var s=i(139);i(199),i(200);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(140),n=i(142),o=i(5),a=i(2),r=i(141),l=i.n(r);class Settings extends a.BaseComponent{constructor(t,e={}){const i={isCollapsible:!0,allowToggleUnit:!1,allowLayers:!0,allowZoom:!0,allowFullscreen:s.default.isEnabled,allowPhotoMode:!1,allowInfoPanel:!0,allowLighting:!0,showLightOptions:!1,allowGuidedCamera:!1,zoomIn:t.getManager("camera").zoomIn,zoomOut:t.getManager("camera").zoomOut,...e.config};delete e.config,i.orientation={bigPortrait:{check:i.orientation?.bigPortrait?.check||(()=>a.AppUtils.isPortrait()&&!a.AppUtils.isMobilePortrait()&&!a.AppUtils.isTabletPortrait()),ori:i.orientation?.bigPortrait?.ori||"vertical"},tabletPortrait:{check:i.orientation?.tabletPortrait?.check||(()=>a.AppUtils.isTabletPortrait()),ori:i.orientation?.tabletPortrait?.ori||"vertical"},smallPortrait:{check:i.orientation?.smallPortrait?.check||(()=>a.AppUtils.isMobilePortrait()),ori:i.orientation?.smallPortrait?.ori||"vertical"},bigLandscape:{check:i.orientation?.bigLandscape?.check||(()=>a.AppUtils.isLandscape()&&!a.AppUtils.isMobileLandscape()&&!a.AppUtils.isTabletLandscape()),ori:i.orientation?.bigLandscape?.ori||"vertical"},tabletLandscape:{check:i.orientation?.tabletPortrait?.check||(()=>a.AppUtils.isTabletLandscape()||a.AppUtils.isPanorama()),ori:i.orientation?.tabletPortrait?.ori||"vertical"},smallLandscape:{check:i.orientation?.smallLandscape?.check||(()=>a.AppUtils.isMobileLandscape()),ori:i.orientation?.smallLandscape?.ori||"horizontal"}},super(t,null,{isMetric:!1,isVisible:!0,isFullscreen:!1,isPhotoMode:!1,isGuidedCamera:!0,showOrbitLines:!0,showLabels:!0,lightType:"shadow",config:i,...e}),this._ori="",this._isMobileMode=a.AppUtils.isMobileMode(),this._isHorizontal=null,Object.assign(this._class,{container:{collapse:"hidden",expand:"active"},isItemVisible:{true:"",false:"hidden"},icon:{imperial:"icon-mi",metric:"icon-km",info:"icon-info"},fullscreen:{true:"fullscreen",false:"window"},photo:{true:"active",false:""},light:{natural:"icon-natural-light",shadow:"icon-shadow-light",flood:"icon-flood-light"},camera:{true:"icon-free-cam",false:"icon-auto-cam"},isHorizontal:{true:"horizontal",false:"vertical"}});const r=!this._isMobileMode,l=this._isMobileMode,c=this.isHorizontal();this._fullLightColor=new o.Color(1,1,1,1),this._shadowLightColor=new o.Color(.15,.15,.15,1),Object.assign(this._state,{isVisible:r,isCollapsed:l,isVisibleClass:this._class.isVisible[r],containerClass:l?this._class.container.collapse:this._class.container.expand,isCollapsibleClass:this._class.isItemVisible[this._config.isCollapsible],allowInfoPanelClass:this._class.isItemVisible[this._config.allowInfoPanel],allowToggleUnitClass:this._class.isItemVisible[this._config.allowToggleUnit],allowPhotoModeClass:this._class.isItemVisible[this._config.allowPhotoMode],allowZoomClass:this._class.isItemVisible[this._config.allowZoom],allowLightingClass:this._class.isItemVisible[this._config.allowLighting],showLightingOptionsClass:this._class.isItemVisible[this._config.showLightOptions],allowGuidedCameraClass:this._class.isItemVisible[this._config.allowGuidedCamera],allowFullscreenClass:this._class.isItemVisible[this._config.allowFullscreen],allowLayersClass:this._class.isItemVisible[this._config.allowLayers],unitButton:this._state.isMetric?this._class.icon.imperial:this._class.icon.metric,infoButton:this._class.icon.info,fullscreenClass:this._class.fullscreen[this._state.isFullscreen],photoModeClass:this._class.photo[this._state.isPhotoMode],lightClass:this._class.light[this._state.lightType],guidedClass:this._class.camera[this._state.isGuidedCamera],isHorizontal:c,orientationClass:this._class.isHorizontal[c]}),this._eventNames.push("unitchange","photomodechange","guidedcamerachange","expandtoggle"),this._initCallbacks(),this._isMouseHold=!1,this._isContinuousZoom=!1,this._zoomInterval=null,this._zoomTimeout=null,this._tooltips=[],n.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[n.followCursor]}),this.bindFunctions(["toggleCollapse","toggleUnit","toggleLayers","toggleFullscreen","togglePhotoMode","hideLightingOptions","toggleLightOptions","toggleLight","toggleGuidedCamera","toggleInfoPanel","startGuidedCamera","stopGuidedCamera","_zoomIn","_zoomOut","_stopZooming","_updateSize"])}init(){super.init();const{isCollapsible:t,allowToggleUnit:e,allowLayers:i,allowZoom:n,allowFullscreen:o,allowPhotoMode:a,allowInfoPanel:r,allowLighting:l,allowGuidedCamera:c}=this._config,h={};t&&(h.isCollapsibleClass=this._class.isItemVisible[t]),r&&(h.allowInfoPanelClass=this._class.isItemVisible[r]),e&&(h.allowToggleUnitClass=this._class.isItemVisible[e]),a&&(h.allowPhotoModeClass=this._class.isItemVisible[a]),n&&(h.allowZoomClass=this._class.isItemVisible[n],this._children.zoomInButton.addEventListener("mousedown",(()=>{this._stopZooming(),this._zoomIn(!0)})),this._children.zoomInButton.addEventListener("mouseleave",this._stopZooming),this._children.zoomInButton.addEventListener("mouseup",(()=>{this._isContinuousZoom||this._zoomIn(),this._stopZooming()})),this._children.zoomInButton.addEventListener("touchstart",(t=>{t.preventDefault(),this._stopZooming(),this._zoomIn(!0)})),this._children.zoomInButton.addEventListener("touchmove",(t=>{t.preventDefault();"zoomInButton"!==document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY).getAttribute("key")&&this._stopZooming()})),this._children.zoomInButton.addEventListener("touchend",(t=>{t.preventDefault(),this._isContinuousZoom||this._zoomIn(),this._stopZooming()})),this._children.zoomOutButton.addEventListener("mousedown",(()=>{this._stopZooming(),this._zoomOut(!0)})),this._children.zoomOutButton.addEventListener("mouseleave",this._stopZooming),this._children.zoomOutButton.addEventListener("mouseup",(()=>{this._isContinuousZoom||this._zoomOut(),this._stopZooming()})),this._children.zoomOutButton.addEventListener("touchstart",(t=>{t.preventDefault(),this._stopZooming(),this._zoomOut(!0)})),this._children.zoomOutButton.addEventListener("touchmove",(t=>{t.preventDefault();"zoomOutButton"!==document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY).getAttribute("key")&&this._stopZooming()})),this._children.zoomOutButton.addEventListener("touchend",(t=>{t.preventDefault(),this._isContinuousZoom||this._zoomOut(),this._stopZooming()}))),l&&(h.allowLightingClass=this._class.isItemVisible[l],this._children.flood.onclick=this.toggleLightOptions.bind(this._children.flood,"flood"),this._children.shadow.onclick=this.toggleLightOptions.bind(this._children.shadow,"shadow"),this._children.natural.onclick=this.toggleLightOptions.bind(this._children.natural,"natural"),this._children.shadow.classList.add("selected-lighting"),this.toggleLightOptions("shadow")),c&&(h.allowGuidedCameraClass=this._class.isItemVisible[c]),o&&s.default.isEnabled&&(h.allowFullscreenClass=this._class.isItemVisible[o],s.default.on("change",(()=>{const t=s.default.isFullscreen;this.setState({isFullscreen:t,fullscreenClass:this._class.fullscreen[t]})}))),i&&(h.allowLayersClass=this._class.isItemVisible[i]),this.setState(h);const u=this._element.querySelectorAll('.settings button:not(.zoom), span[key="zoomInButton"], span[key="zoomOutButton"]');this.addTooltips(u,{update:function(t){this.setProps({placement:t?"top":"left"})}}),this._updateSize(),this._callbackRegistry.push({emitter:this._app.getManager("time"),event:"ratechange",callback:this.onRateChange})}addTooltips(t,e){const i=e.props||{},s=(0,n.default)(t,i);if("function"==typeof e.update)for(const t of s)t.update=e.update;if("function"==typeof e.onclick)for(const t of s)t.popper.onclick=e.onclick;return this._tooltips.push(...s),1===s.length?s[0]:s}updateTooltips(t){for(const e of this._tooltips)"function"==typeof e.update&&e.update(t)}setConfig(t){if(t.allowFullscreen&&(t.allowFullscreen=s.default.isEnabled),t.orientation){const e=this._config.orientation,i=["bigPortrait","tabletPortrait","smallPortrait","bigLandscape","tabletLandscape","smallLandscape"];for(let s=0;s<i.length;s++){const n=i[s];t.orientation[n]?(t.orientation[n].check??=e[n].check,t.orientation[n].ori??=e[n].ori):t.orientation[n]=e[n]}}super.setConfig(t);const e={};for(const i in t)if("orientation"===i){const t=this.isHorizontal();e.isHorizontal=t,e[`${i}Class`]=this._class.isHorizontal[t]}else e[`${i}Class`]=this._class.isItemVisible[t[i]];this.setState(e),this._updateSize(!0)}getOrientation(){return this._ori}setOrientation(t=""){this._ori=t}isHorizontal(){if(""!==this._ori)return"horizontal"===this._ori;for(const t in this._config.orientation){const e=this._config.orientation[t];if(e.check())return"horizontal"===e.ori}return!1}_updateSize(t=!1){const e=this.isHorizontal();if(!t&&this._isHorizontal===e)return;this._isHorizontal=e;let i=1;const s=Array.from(this._children.content.querySelectorAll(":scope > button"));for(let t=0;t<s.length;t++)s[t].classList.contains("hidden")||i++;this._config.allowZoom&&i++,this._isHorizontal?(this._element.style.width=`calc(${i} * 30px + ${i} * 2px)`,this._element.style.height="30px"):(this._element.style.width="30px",this._element.style.height=`calc(${i} * 30px + ${i} * 2px)`),this.updateTooltips(e)}_zoomContinuously(t){this._isMouseHold=!0,null!==this._zoomTimeout&&clearTimeout(this._zoomTimeout),this._zoomTimeout=setTimeout((()=>{this._isMouseHold&&(this._isContinuousZoom=!0,null!==this._zoomInterval&&clearInterval(this._zoomInterval),this._zoomInterval=setInterval((()=>{this._isMouseHold?t(!0):clearInterval(this._zoomInterval)}),30))}),200)}_zoomIn(t=!1){t?this._zoomContinuously(this._config.zoomIn):this._config.zoomIn()}_zoomOut(t=!1){t?this._zoomContinuously(this._config.zoomOut):this._config.zoomOut()}_stopZooming(){clearInterval(this._zoomInterval),this._isMouseHold=!1,this._isContinuousZoom=!1}show(){this.setState({isVisible:!0,isVisibleClass:this._class.isVisible.true})}hide(){this.setState({isVisible:!1,isVisibleClass:this._class.isVisible.false,showLightingOptionsClass:this._class.isVisible.false})}isVisible(){return this._state.isVisible}expand(){this.setState({isCollapsed:!1,containerClass:this._class.container.expand})}collapse(){this.setState({isCollapsed:!0,showLightingOptionsClass:this._class.isVisible.false,containerClass:this._class.container.collapse})}toggleCollapse(){this._state.isCollapsed?this.expand():this.collapse(),this.triggerCallbacks("expandtoggle",[!this._state.isCollapsed,this._state.isPhotoMode])}toggleUnit(){const t=!this._state.isMetric;this.setState({isMetric:t,unitButton:t?this._class.icon.imperial:this._class.icon.metric},(()=>{this.triggerCallbacks("unitchange",[this._state.isMetric])}))}toggleFullscreen(){s.default.isEnabled&&s.default.toggle()}toggleLayers(){!this._app.getComponent("layerPanel").getState("isVisible")?(this._app.getComponent("layerPanel").show(),this.collapse()):this._app.getComponent("layerPanel").hide()}togglePhotoMode(){const t=!this._state.isPhotoMode;this.setState({isPhotoMode:t,photoModeClass:this._class.photo[t]},(()=>{this._state.isPhotoMode?this.collapse():this.expand(),this.triggerCallbacks("photomodechange",[this._state.isPhotoMode])}))}hideLightingOptions(t){[this._children.lightToggle,this._children.lightOptions,this._children.flood,this._children.natural,this._children.shadow].includes(t.target)||this.setState({showLightingOptionsClass:this._class.isVisible.false}),window.removeEventListener("mousedown",this.hideLightingOptions),window.removeEventListener("touchstart",this.hideLightingOptions)}toggleLightOptions(t){this.setState({lightType:t,lightClass:this._class.light[t],showLightingOptionsClass:this._class.isVisible.false},(()=>{"flood"===t?(this._app.getManager("camera")?.toggleCameraLight(!0,this._fullLightColor),this._app.getManager("comparison")?.toggleCameraLight(!0,this._fullLightColor)):"natural"===t?(this._app.getManager("camera")?.toggleCameraLight(!1),this._app.getManager("comparison")?.toggleCameraLight(!1)):"shadow"===t&&(this._app.getManager("camera")?.toggleCameraLight(!0,this._shadowLightColor),this._app.getManager("comparison")?.toggleCameraLight(!0,this._shadowLightColor));for(const e in this._children)e===t||"flood"!==e&&"natural"!==e&&"shadow"!==e||this._children[e].classList.remove("selected-lighting");this._children[`${t}`].classList.add("selected-lighting")}))}toggleLight(){this.setState({showLightingOptionsClass:this.getState("showLightingOptionsClass")===this._class.isVisible.true?this._class.isVisible.false:this._class.isVisible.true}),this.getState("showLightingOptionsClass")===this._class.isVisible.true?(window.addEventListener("mousedown",this.hideLightingOptions),window.addEventListener("touchstart",this.hideLightingOptions)):(window.removeEventListener("mousedown",this.hideLightingOptions),window.removeEventListener("touchstart",this.hideLightingOptions))}startGuidedCamera(){this.setState({isGuidedCamera:!0,guidedClass:this._class.camera.true},(()=>this.triggerCallbacks("guidedcamerachange",[this._state.isGuidedCamera])))}stopGuidedCamera(){this.setState({isGuidedCamera:!1,guidedClass:this._class.camera.false},(()=>this.triggerCallbacks("guidedcamerachange",[this._state.isGuidedCamera])))}toggleGuidedCamera(){this._state.isGuidedCamera?this.stopGuidedCamera():this.startGuidedCamera()}toggleInfoPanel(){null!==this._app.getComponent("infoPanel")&&this._app.getComponent("infoPanel").openPanel()}resize(){super.resize();const t=this.isHorizontal();this._isHorizontal!==t&&this.setState({isHorizontal:t,orientationClass:this._class.isHorizontal[t]}),this._updateSize()}}Settings.html=l(),e.default=Settings},,function(t){t.exports='<div class="settings {{isVisibleClass}} {{orientationClass}}">\n\t<div key="container" class="container {{containerClass}}">\n\t\t<div key="content" class="content">\n\t\t\t<button class="clickable icon icon-box {{allowInfoPanelClass}}" onclick="toggleInfoPanel" data-tippy-content="Show info panel" aria-label="show info panel">\n\t\t\t\t<span class="icon {{infoButton}}"></span>\n\t\t\t</button>\n\t\t\t<button class="clickable icon icon-layers {{allowLayersClass}}" onclick="toggleLayers" data-tippy-content="Toggle layers" aria-label="toggle layers"></button>\n\t\t\t<button class="clickable icon {{unitButton}} {{allowToggleUnitClass}}" onclick="toggleUnit" data-tippy-content="Toggle between metric and imperial units" aria-label="toggle between metric and imperial units"></button>\n\t\t\t<button class="clickable icon icon-hide {{photoModeClass}} {{allowPhotoModeClass}}" onclick="togglePhotoMode" data-tippy-content="Show or hide UI" aria-label="show or hide UI"></button>\n\t\t\t<button class="clickable icon-bg zoom {{allowZoomClass}}">\n\t\t\t\t<span key="zoomInButton" class="icon icon-plus" data-tippy-content="Zoom in" aria-label="zoom in" role="button"></span>\n\t\t\t\t<div class="horizontal-line"></div>\n\t\t\t\t<span key="zoomOutButton" class="icon icon-minus" data-tippy-content="Zoom out" aria-label="zoom out" role="button"></span>\n\t\t\t</button>\n\t\t\t<button key="lightToggle" class="light-toggle clickable icon icon-box {{allowLightingClass}}" onclick="toggleLight" data-tippy-content="Toggle light modes" aria-label="toggle light modes">\n\t\t\t\t<span class="icon {{lightClass}}"></span>\n\t\t\t</button>\n\t\t\t<button class="clickable icon {{guidedClass}} {{allowGuidedCameraClass}}" onclick="toggleGuidedCamera" data-tippy-content="Toggle auto camera" aria-label="toggle auto camera"></button>\n\t\t\t<div key="lightOptions" class="lighting-option-container small {{showLightingOptionsClass}}">\n\t\t\t\t<button key="flood" class="button lighting-option clickable">\n\t\t\t\t\t<span class="lighting-icon icon icon-flood-light"></span>\n\t\t\t\t\t<span class="title">Flood Lighting</span>\n\t\t\t\t</button>\n\t\t\t\t<button key="shadow" class="button lighting-option clickable" value="shadow">\n\t\t\t\t\t<span class="lighting-icon icon icon-shadow-light"></span>\n\t\t\t\t\t<span class="title">Shadow Lighting</span>\n\t\t\t\t</button>\n\t\t\t\t<button key="natural" class="button lighting-option clickable" value="natural">\n\t\t\t\t\t<span class="lighting-icon icon icon-natural-light"></span>\n\t\t\t\t\t<span class="title">Natural Lighting</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<button class="clickable icon icon-fullscreen {{fullscreenClass}} {{allowFullscreenClass}}" onclick="toggleFullscreen" data-tippy-content="Toggle fullscreen" aria-label="toggle fullscreen"></button>\n\t\t</div>\n\t</div>\n\t<button class="toggle clickable icon icon-controls {{isCollapsibleClass}}" onclick="toggleCollapse" data-tippy-content="Show or hide settings" aria-label="show or hide settings"></button>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(202);i(204);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(2),n=i(203),o=i.n(n);class LoadIcon extends s.BaseComponent{init(){super.init(),this._callbackRegistry.push({emitter:this._app.getManager("scene"),event:"loading",callback:this.show},{emitter:this._app.getManager("scene"),event:"loaded",callback:this.hide})}}LoadIcon.html=o(),e.default=LoadIcon},function(t){t.exports='<div class="load-icon {{isVisibleClass}}">\n\t<div class="bg face"></div>\n\t<div class="front face"></div>\n\t<div class="left face"></div>\n\t<div class="top face"></div>\n\t<div class="right face"></div>\n\t<div class="bottom face"></div>\n\t<div class="text">Loading</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(206);i(208);e.default=s.default},function(t,e,i){"use strict";i.r(e);i(133);var s=i(2),n=i(207),o=i.n(n);class Overlay extends s.BaseComponent{constructor(t,e={}){super(t,null,{isVisible:!1,isOpenButtonVisible:!0,content:null,...e}),this._class.isOpenButtonVisibleClass={true:"",false:"hidden"},Object.assign(this._state,{isOpenButtonVisibleClass:this._class.isOpenButtonVisibleClass[this._state.isOpenButtonVisible]}),this._scrollbar=null}init(){super.init(),null!==this._state.content&&this._children.overlayContent.appendChild(this._state.content),this._element.addEventListener("click",this.hide),this._element.addEventListener("animationend",(()=>{this._children.overlay.classList.contains("hidden")&&(this._children.overlay.style.display="none")}))}setContent(t){null===this._state.content?this._children.overlayContent.appendChild(t):this._children.overlayContent.replaceChild(t,this._state.content),this._state.content=t}show(){this._element.classList.add("initialized"),this._children.overlay.style.display="",super.show()}__enable(){super.__enable(),null===this._scrollbar?s.AppUtils.onAttachElement(this._children.overlay,(()=>{this._scrollbar=s.AppUtils.addScrollbar(this._children.overlay)})):this._scrollbar.scroll(0)}}Overlay.html=o(),e.default=Overlay},function(t){t.exports='<div class="overlay-container">\n\t<button class="open-button icon icon-info clickable {{isOpenButtonVisibleClass}}" onclick="show"></button>\n\t<div key="overlay" class="overlay {{isVisibleClass}}">\n\t\t<div key="overlayContent" class="container"></div>\n\t\t<button class="close-button icon icon-close clickable" onclick="hide"></button>\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(210);i(212);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(2),n=i(211),o=i.n(n);class Search extends s.BaseComponent{constructor(t,e={config:{}}){e.config={initialOpen:!1,allowFeatured:!1,allowDetail:!0,allowInfo:!1,stopOnExactMatch:!1,infoText:{default:"most popular",results:"result",suggestions:"suggestion",nomatches:"no matches"},maxSuggestions:1,placeholderText:"Search...",nameSearch:["iauName","displayName"],nameDisplay:["displayName","iauName"],...e.config},super(t,null,{text:"",searchInfo:e.config?.infoText?.default||"",alwaysOpen:!1,magClass:"mag-open",searchClass:"search-close",focusedClass:"",isFeaturedVisible:!1,...e}),this._class.isItemVisible={true:"",false:"hidden"},Object.assign(this._state,{allowFeaturedClass:this._class.isItemVisible[this._config.allowFeatured],isFeaturedVisibleClass:this._class.isItemVisible[this._config.allowFeatured&&this._state.isFeaturedVisible],allowInfoClass:this._class.isItemVisible[this._config.allowInfo]}),this._eventNames.push("resultselected"),this._initCallbacks(),this._resultsScrollbar=null,this._featuredScrollbar=null,this.onResize=null,this.results=[],this._suggestionsThreshold=.05,this.index=-1,this.bindFunctions(["_find","renderResults","open","close","eraseInput","onIconClick","reset","keydown","onInputFocus","_getDetails","_handleClick"]),window.addEventListener("setupSearch",this.resize)}init(){const{placeholderText:t}=this._config;super.init({placeholderText:t});const e=.9*this._children.input.getAttribute("placeholder").length;this._children.input.style.minWidth=`${e}ch`,document.addEventListener("keyup",(t=>{"KeyF"===t.code&&(this.open(),this._children.input.focus())})),this._children.input.onkeyup=t=>{const e=0===this._children.input.value.length;this._config.allowFeatured&&e!==this._state.isFeaturedVisible&&(this._featuredScrollbar?.scroll(0),this.setState({isFeaturedVisible:e,isFeaturedVisibleClass:this._class.isItemVisible[e],...e&&{searchInfo:this._config.infoText.default}}))},this.resize(),this.registerManager(this._app.getManager("search"))}onIconClick(){"search-close"===this._state.searchClass?(this._scrollbar?.scroll(0),this.open(),this._children.input.focus()):""===this._children.input.value?this.reset():this._children.results.querySelector(".active")?.firstChild.click()}resize(){super.resize(),"function"==typeof this.onResize&&this.onResize()}reset(){this.eraseInput(),this._config.initialOpen||this.close()}keydown(t){const e=t.key;"Escape"===e&&(this.eraseInput(),this.close());const i=this.results.length;i&&("ArrowDown"===e?(this.index=(this.index+1)%i,t.preventDefault()):"ArrowUp"===e?(this.index-=1,this.index<0&&(this.index=i-1),t.preventDefault()):"Enter"===e&&(this._handleClick(this.results[this.index]?.link||this.results[0]?.link,this._searchString),t.preventDefault()),this.setSelected(this.index))}setSelected(t){this.index=t;for(let t=0;t<this.results.length;t++){const e=this.results[t].element;e&&(t===this.index?e.classList.add("active"):e.classList.remove("active"))}}onInputFocus(){this.setState({focusedClass:"input-focused"})}eraseInput(){this._resultsScrollbar?.destroy(),this._resultsScrollbar=null,this._children.input.value="",this._children.results.innerHTML=""}registerManager(t){this._searchManager=t}_find(t,e){this._searchTimeout&&clearTimeout(this._searchTimeout),t&&t.target&&t.target.value&&(e=t.target.value),this._searchTimeout=setTimeout((async()=>{if(this._searchManager){const t=this._searchManager.find(e);await this.renderResults(t,e)}}),100)}async renderResults(t,e){if(this.index=-1,this.results=[],this._searchString=e,this._resultsScrollbar?.destroy(),this._resultsScrollbar=null,this._children.results.innerHTML="",this._children.results.classList.remove("no-results"),!t||!Array.isArray(t))return;const i=[],s=[];for(let n=0;n<t.length;n++){const o=t[n],{nameSearch:a}=this._config,r=o.item[a.find((t=>void 0!==o.item[t]))];if(this._config.stopOnExactMatch&&e.toLowerCase()===r.toLowerCase()){s.length=0,i.length=0,s.push(o);break}o.score<this._suggestionsThreshold?s.push(o):i.push(o)}1===s.length?this._config.allowDetail?await this._renderResultCard(s[0],e):this._renderResultList(s,e):0===s.length?this._renderSuggestions(i,e):this._renderResultList(s,e),this._children.container.className=t&&t.length>0?"bar half-border":"bar",s.length>3&&(this._resultsScrollbar??=this._createScrollbar(this._children.results));const{allowInfo:n,infoText:o,maxSuggestions:a}=this._config;if(n){let t=o.nomatches;s.length?t=`${s.length} ${o.results}${s.length>1?"s":""}`:i.length&&(t=`${Math.min(i.length,a)} ${o.suggestions}${i.length>1?"s":""}`),this.setState({searchInfo:t})}this.setSelected(0)}async _renderResultCard(t,e){try{let i=await this._getDetails(t);if(!i&&t&&t.item){const{nameDisplay:e}=this._config;i={title:t.item[e.find((e=>void 0!==t.item[e]))]}}const n=document.createElement("div");n.className="card-title result-div";const o=document.createElement("h4");o.className="semi clickable";let a=i.title;if("string"==typeof a){const t=a.toUpperCase().indexOf(e.toUpperCase());if(t>-1){const i=a.substring(t,t+e.length),s=a.split(i);s&&2===s.length&&(a="",s[0].length>0&&(a+=`<span class='unmatch'>${s[0]}</span>`),a+=i,s[1].length>0&&(a+=`<span class='unmatch'>${s[1]}</span>`))}}else a="";o.innerHTML=a;const r=s.AppUtils.addStartToPath(t.item.id);o.addEventListener("mouseover",(()=>{this.setSelected(0)}),!1),o.addEventListener("click",(()=>{t.item&&this._handleClick(t.item.id,e)}),!1),n.appendChild(o),this.results.push({link:r,element:n}),this._children.results.innerHTML="",this._children.results.appendChild(n),i.cards&&this._createStoryBlock(i.cards),i.featuredEvents&&i.featuredEvents.initial&&this._createEventsBlock(i.featuredEvents.initial,t.item.id),i.exploration&&i.exploration.initial&&this._createExplorationBlock(i.exploration.initial),i.featuredMoons&&this._createMoonsBlock(i.featuredMoons,t.item.id)}catch(i){void 0!==i.status&&404===i.status?this._renderResultList([t],e):i&&console.error(i)}}_createEventsBlock(t,e){if(!Array.isArray(t)||0===t.length)return;const i=this._app.getManager("content").getEntityInfo(e);if(null===i||!i.hasEvents)return;const n=this._createBlockContainer();n.classList.add("events");this._createHeaderBlock("Featured Events",n);for(let i=0;i<t.length;i++){const o=t[i],a=o.title,r=s.AppUtils.addStartToPath(e+"/events/"+o.eventId),l=this._createSingleResult(a,r,n);this.results.push({link:r,element:l})}}_createMoonsBlock(t){if(!Array.isArray(t)||0===t.length)return;const e=this._createBlockContainer();e.classList.add("moons");this._createHeaderBlock("Featured Moons",e);for(let i=0;i<t.length;i++){const s=t[i],n=t[i],o=this._createSingleResult(s,n,e);this.results.push({link:n,element:o})}}_createExplorationBlock(t){if(!Array.isArray(t)||0===t.length)return;const e=this._createBlockContainer();e.classList.add("exploration");this._createHeaderBlock("Exploration",e);for(let i=0;i<t.length;i++){const s=t[i];let n=s.title;null!==s.info&&void 0!==s.info&&(n+=" ("+s.info+")");const o=s.url,a=this._createSingleResult(n,o,e);this.results.push({link:o,element:a})}}_createStoryBlock(t){if(!Array.isArray(t)||0===t.length)return;const e=this._createBlockContainer();e.classList.add("stories");let i=!1;for(let s=0;s<t.length;s++){const n=t[s];if(void 0!==n.storyId){const t=this._app.getManager("content").getStoryList().stories[n.storyId];if(void 0!==t){i||(this._createHeaderBlock("Stories",e),i=!0);const s=t.title,o="/story/"+n.storyId,a=this._createSingleResult(s,o,e);this.results.push({link:o,element:a})}}}}_createBlockContainer(){const t=document.createElement("div");return t.className="block-container",this._children.results.appendChild(t),t}_createHeaderBlock(t,e){const i=document.createElement("div");i.className="header";const s=document.createElement("span");s.className="title small semi",s.innerHTML=t,i.appendChild(s),e.appendChild(i)}_createSingleResult(t,e,i){const s=document.createElement("div");s.className="result-div";const n=document.createElement("button");n.className="small clickable capitalize",n.innerHTML=t;const o=this.results.length-1+1;return s.addEventListener("click",(()=>{this._handleClick(e,this._searchString)}),!1),s.addEventListener("mouseover",(()=>{this.setSelected(o)}),!1),s.appendChild(n),i.appendChild(s),s}_renderResultList(t,e){for(let i=0;i<t.length;i++){const n=t[i].item,{nameSearch:o}=this._config,a=n[o.find((t=>void 0!==n[t]))];if(!a)continue;const r=document.createElement("button");r.className="entries clickable thin small";const l=n.url||n.id;let c=a;const h=a.toUpperCase().indexOf(e.toUpperCase());if(h>-1){const t=c.substring(h,h+e.length);c=c.replace(t,`<span class='semi'>${t}</span>`)}r.innerHTML=c;const u=s.AppUtils.addStartToPath(l),d=document.createElement("div");d.className="result-div",d.appendChild(r),d.addEventListener("mouseover",(()=>{this.setSelected(i)}),!1),d.addEventListener("click",(()=>{this._handleClick(l,e)}),!1),this.results.push({link:u,element:d}),this._children.results.appendChild(d)}}_renderSuggestions(t,e){const i=document.createElement("div");if(i.className="suggestion",t.length>0){const n=document.createElement("label");n.className="title small semi",n.innerHTML="Did you mean...?",i.appendChild(n);for(let n=0;n<Math.min(this._config.maxSuggestions,t.length);n++){const o=document.createElement("button");o.className="entries clickable";const a=t[n].item,{nameSearch:r}=this._config,l=a[r.find((t=>void 0!==a[t]))];if(l){const t=a.url||a.id;o.innerHTML=l;const r=s.AppUtils.addStartToPath(t);o.addEventListener("mouseover",(()=>{this.setSelected(n)}),!1),o.addEventListener("click",(()=>{this._handleClick(t,e)}),!1);const c=document.createElement("div");c.className="result-div small",c.appendChild(o),i.appendChild(c),this.results.push({link:r,element:c})}}}else if(!this._config.allowInfo){const t=document.createElement("label");t.className="title no-match small",t.innerHTML="No matches.",i.appendChild(t),this._children.results.classList.add("no-results")}this._children.results.appendChild(i)}open(){this.setState({magClass:"mag-close",searchClass:"search-open",isFeaturedVisible:this._config.allowFeatured,isFeaturedVisibleClass:this._class.isItemVisible[this._config.allowFeatured],...this._config.allowFeatured&&{searchInfo:this._config.infoText.default}})}close(){this.getState("alwaysOpen")?this.setState({magClass:"mag-close",searchClass:"search-open",focusedClass:"",isFeaturedVisible:!1,isFeaturedVisibleClass:this._class.isItemVisible.false}):this.setState({magClass:"mag-open",searchClass:"search-close",focusedClass:"",isFeaturedVisible:!1,isFeaturedVisibleClass:this._class.isItemVisible.false})}setupFeaturedSuggestion(t=[]){this._children.featured.innerHTML="";for(let e=0;e<t.length;e++){const{text:i,url:s}=t[e],n=document.createElement("li");n.innerHTML=i,n.className="clickable thin",n.addEventListener("click",(()=>{this._handleClick(s,this._searchString)})),this._children.featured.appendChild(n)}}_createScrollbar(t){return s.AppUtils.addScrollbar(t,{sizeAutoCapable:!0})}_getLink(t){return t}_handleClick(t,e){if(!t)return;this.reset(),this.triggerCallbacks("resultselected");const i=this._app.getManager("router"),s=this._getLink(t),n=`${"string"==typeof s?s:s.path??""}`;if(n.includes("events"))i.navigate({},n,{__remove:"all"});else{const t=s.options??{keepTime:!0};i.navigate({},n,t)}}simulate(t){const{input:e}=this._children;this.onIconClick(),e.value=t,this._find({},t),e.onkeyup()}async _getDetails(t){return this._app.getManager("content").getEntityDesc(t.item.id)}__enable(){super.__enable(),this._config.allowFeatured&&this._children.featured?.parentElement&&(this._featuredScrollbar??=this._createScrollbar(this._children.featured.parentElement))}}Search.html=o(),e.default=Search},function(t){t.exports='<div class="search {{isVisibleClass}}">\n\t<span class="icon icon-search clickable {{magClass}}" onclick="onIconClick"></span>\n\t<div class="{{searchClass}} {{focusedClass}}">\n\t\t<div class="cover" onclick="reset"></div>\n\t\t<div key="container" class="bar">\n\t\t\t<span class="icon icon-search clickable"></span>\n\t\t\t<input key="input" type="text" placeholder="{$placeholderText}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" oninput="_find" onfocus="onInputFocus" onkeydown="keydown"></input>\n\t\t\t<span class="close icon icon-close clickable search-close-icon" onclick="reset"></span>\n\t\t\t<div class="results-container">\n\t\t\t\t<div key="results" class="scrollable results gradient"></div>\n\t\t\t</div>\n\t\t\t<span class="search-info tiny {{allowInfoClass}}">{{searchInfo}}</span>\n\t\t\t<div class="featured gradient scrollable {{allowFeaturedClass}} {{isFeaturedVisibleClass}}">\n\t\t\t\t<ul key="featured"></ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(214);i(356);e.default=s.default},function(t,e,i){"use strict";i.r(e),i.d(e,{Clock:function(){return Clock}});var s=i(2),n=(i(215),i(355)),o=i.n(n);class Clock extends s.BaseComponent{constructor(t,e={}){super(t,null,{isVisible:!1,isDateVisible:!0,isTimeVisible:!0,isMeridiemVisible:!0,allowEdit:!0,date:"Date",time:"Time",meridiem:"",alert:"",...e}),Object.assign(this._state,{isDateVisibleClass:this._class.isVisible[this._state.isDateVisible],isTimeVisibleClass:this._class.isVisible[this._state.isTimeVisible],isMeridiemVisibleClass:this._class.isVisible[this._state.isMeridiemVisible]}),this.bindFunctions(["update","onDateTimeClick"])}init(){super.init();const{allowEdit:t}=this._state;this._app.getManager("time").setDateFormats({utc:{date:"MMM DD, YYYY",time:"HH[:]mm[:]ss"},local:{date:"MMM DD, YYYY",time:"hh[:]mm[:]ss",meridiem:"a",parse:["MMM D, YYYY h:m:s a","MMM D, YYYY h:m a","MMM D, YYYY h a","MMM D, YYYY"]}}),this._app.getManager("time").setDisplayUTC(!1);const{displayContainer:e,timeInput:i,timeForm:s}=this._children;t&&(e.classList.add("editable"),i.addEventListener("keyup",(t=>{t.stopPropagation()})),i.addEventListener("keydown",(t=>{t.stopPropagation()})),s.classList.add("editable"),s.addEventListener("submit",(t=>{i.blur(),this._parseTime(i.value),t.preventDefault()})),i.addEventListener("blur",(t=>{s.classList.add("hidden"),e.classList.remove("hidden")}))),this._setVariables(this._element),this._children.date.classList.add("semi"),this._children.time.classList.add("semi"),this._children.meridiem.classList.add("semi"),this._children.timeInput.classList.add("semi"),this._children.timeForm.classList.add("semi"),this._callbackRegistry.push({emitter:this._app.getManager("time"),event:"update",callback:this.update})}onDateTimeClick(){const{displayContainer:t,timeInput:e,timeForm:i,date:s,time:n,meridiem:o}=this._children;if(!this._state.allowEdit)return;const a=this._state.meridiem?` ${o.innerHTML}`:"";e.value=`${s.innerHTML} ${n.innerHTML}${a}`,t.classList.add("hidden"),i.classList.remove("hidden"),e.focus()}isERT(){return this._isERT}toggle(t,e){switch(t){case"date":this.setState({isDateVisible:e,isDateVisibleClass:this._class.isVisible[e]});break;case"time":this.setState({isTimeVisible:e,isTimeVisibleClass:this._class.isVisible[e]});break;case"meridiem":this.setState({isMeridiemVisible:e,isMeridiemVisibleClass:this._class.isVisible[e]})}}_parseTime(t){const e=this._app.getManager("router"),i=this._app.getManager("time").parseTime(t,"parse");if(i.isValid()){this._app.getManager("time").setDisplayUTC(i.isUTC());const t=this._app.getManager("time").getTimeUrl(i);e.navigate({time:t},e.currentRoute.url)}else console.error("Invalid input: "+t),e.navigate({__remove:["time"]},e.currentRoute.url)}update(t){this._state.isVisible&&this.setState({date:t.format(this._app.getManager("time").getDateFormat("date")),time:t.format(this._app.getManager("time").getDateFormat("time")),meridiem:this._app.getManager("time").isUTC()?"":t.format(this._app.getManager("time").getDateFormat("meridiem")),alert:this._app.getManager("time").forcedPause?"alert":""})}setLimitMessage(t,e){let i;if(e)i=`"${e}"`;else{const{currentView:e}=this._app.getManager("router"),{_isSpacecraft:s}=this._app.getView(e);let n="time "+(1===t?"maximum":"minimum");"event"===e?n="event "+(1===t?"end":"start"):s&&(n="mission "+(1===t?"end":"start")),i=1===t?`"cannot exceed ${n}"`:`"cannot preceed ${n}"`}this._children.displayContainer?.style.setProperty("--limit-message",i),this._displayLimitMessage(!0),this.limitMessageTimeout=setTimeout((()=>{this._displayLimitMessage(!1)}),3e3)}_displayLimitMessage(t){this._children.displayContainer?.classList.toggle("limit",t)}__disable(){this._displayLimitMessage(!1),clearTimeout(this.limitMessageTimeout),super.__disable()}}Clock.html=o(),e.default=Clock},,,,function(t,e,i){var s={"./af":219,"./af.js":219,"./ar":220,"./ar-dz":221,"./ar-dz.js":221,"./ar-kw":222,"./ar-kw.js":222,"./ar-ly":223,"./ar-ly.js":223,"./ar-ma":224,"./ar-ma.js":224,"./ar-sa":225,"./ar-sa.js":225,"./ar-tn":226,"./ar-tn.js":226,"./ar.js":220,"./az":227,"./az.js":227,"./be":228,"./be.js":228,"./bg":229,"./bg.js":229,"./bm":230,"./bm.js":230,"./bn":231,"./bn-bd":232,"./bn-bd.js":232,"./bn.js":231,"./bo":233,"./bo.js":233,"./br":234,"./br.js":234,"./bs":235,"./bs.js":235,"./ca":236,"./ca.js":236,"./cs":237,"./cs.js":237,"./cv":238,"./cv.js":238,"./cy":239,"./cy.js":239,"./da":240,"./da.js":240,"./de":241,"./de-at":242,"./de-at.js":242,"./de-ch":243,"./de-ch.js":243,"./de.js":241,"./dv":244,"./dv.js":244,"./el":245,"./el.js":245,"./en-au":246,"./en-au.js":246,"./en-ca":247,"./en-ca.js":247,"./en-gb":248,"./en-gb.js":248,"./en-ie":249,"./en-ie.js":249,"./en-il":250,"./en-il.js":250,"./en-in":251,"./en-in.js":251,"./en-nz":252,"./en-nz.js":252,"./en-sg":253,"./en-sg.js":253,"./eo":254,"./eo.js":254,"./es":255,"./es-do":256,"./es-do.js":256,"./es-mx":257,"./es-mx.js":257,"./es-us":258,"./es-us.js":258,"./es.js":255,"./et":259,"./et.js":259,"./eu":260,"./eu.js":260,"./fa":261,"./fa.js":261,"./fi":262,"./fi.js":262,"./fil":263,"./fil.js":263,"./fo":264,"./fo.js":264,"./fr":265,"./fr-ca":266,"./fr-ca.js":266,"./fr-ch":267,"./fr-ch.js":267,"./fr.js":265,"./fy":268,"./fy.js":268,"./ga":269,"./ga.js":269,"./gd":270,"./gd.js":270,"./gl":271,"./gl.js":271,"./gom-deva":272,"./gom-deva.js":272,"./gom-latn":273,"./gom-latn.js":273,"./gu":274,"./gu.js":274,"./he":275,"./he.js":275,"./hi":276,"./hi.js":276,"./hr":277,"./hr.js":277,"./hu":278,"./hu.js":278,"./hy-am":279,"./hy-am.js":279,"./id":280,"./id.js":280,"./is":281,"./is.js":281,"./it":282,"./it-ch":283,"./it-ch.js":283,"./it.js":282,"./ja":284,"./ja.js":284,"./jv":285,"./jv.js":285,"./ka":286,"./ka.js":286,"./kk":287,"./kk.js":287,"./km":288,"./km.js":288,"./kn":289,"./kn.js":289,"./ko":290,"./ko.js":290,"./ku":291,"./ku.js":291,"./ky":292,"./ky.js":292,"./lb":293,"./lb.js":293,"./lo":294,"./lo.js":294,"./lt":295,"./lt.js":295,"./lv":296,"./lv.js":296,"./me":297,"./me.js":297,"./mi":298,"./mi.js":298,"./mk":299,"./mk.js":299,"./ml":300,"./ml.js":300,"./mn":301,"./mn.js":301,"./mr":302,"./mr.js":302,"./ms":303,"./ms-my":304,"./ms-my.js":304,"./ms.js":303,"./mt":305,"./mt.js":305,"./my":306,"./my.js":306,"./nb":307,"./nb.js":307,"./ne":308,"./ne.js":308,"./nl":309,"./nl-be":310,"./nl-be.js":310,"./nl.js":309,"./nn":311,"./nn.js":311,"./oc-lnc":312,"./oc-lnc.js":312,"./pa-in":313,"./pa-in.js":313,"./pl":314,"./pl.js":314,"./pt":315,"./pt-br":316,"./pt-br.js":316,"./pt.js":315,"./ro":317,"./ro.js":317,"./ru":318,"./ru.js":318,"./sd":319,"./sd.js":319,"./se":320,"./se.js":320,"./si":321,"./si.js":321,"./sk":322,"./sk.js":322,"./sl":323,"./sl.js":323,"./sq":324,"./sq.js":324,"./sr":325,"./sr-cyrl":326,"./sr-cyrl.js":326,"./sr.js":325,"./ss":327,"./ss.js":327,"./sv":328,"./sv.js":328,"./sw":329,"./sw.js":329,"./ta":330,"./ta.js":330,"./te":331,"./te.js":331,"./tet":332,"./tet.js":332,"./tg":333,"./tg.js":333,"./th":334,"./th.js":334,"./tk":335,"./tk.js":335,"./tl-ph":336,"./tl-ph.js":336,"./tlh":337,"./tlh.js":337,"./tr":338,"./tr.js":338,"./tzl":339,"./tzl.js":339,"./tzm":340,"./tzm-latn":341,"./tzm-latn.js":341,"./tzm.js":340,"./ug-cn":342,"./ug-cn.js":342,"./uk":343,"./uk.js":343,"./ur":344,"./ur.js":344,"./uz":345,"./uz-latn":346,"./uz-latn.js":346,"./uz.js":345,"./vi":347,"./vi.js":347,"./x-pseudo":348,"./x-pseudo.js":348,"./yo":349,"./yo.js":349,"./zh-cn":350,"./zh-cn.js":350,"./zh-hk":351,"./zh-hk.js":351,"./zh-mo":352,"./zh-mo.js":352,"./zh-tw":353,"./zh-tw.js":353};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=218},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t){t.exports='<time class="clock {{isVisibleClass}}">\n\t<div class="datetime-container {{alert}}">\n\t\t<div key="displayContainer" class="display-container">\n\t\t\t<div key="date" class="date {{isDateVisibleClass}} monospace" onclick="onDateTimeClick">{{date}}</div>\n\t\t\t<div key="time" class="time {{isTimeVisibleClass}} monospace" onclick="onDateTimeClick">{{time}}</div>\n\t\t\t<div key="meridiem" class="meridiem {{isMeridiemVisibleClass}} monospace" onclick="onDateTimeClick">{{meridiem}}</div>\n\t\t</div>\n\t\t<form key="timeForm" class="hidden" method="post" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">\n\t\t\t<input key="timeInput" type="text" name="hour" class="hour-input" placeholder="hour" autocorrect="off" autocapitalize="off" spellcheck="false" size="25"></input>\n\t\t</form>\n\t</div>\n</time>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(358);i(199),i(360);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(142),n=(i(215),i(2)),o=i(359),a=i.n(o);class ClockShortcut extends n.BaseComponent{constructor(t){super(t,null,{hasHover:!1,liveContainerClass:"hidden",liveClass:"live",liveText:"live",liveIcon:"icon-live",replayClass:"container",replayIcon:"icon-replay"}),this._state.replayClass="hidden",this._class.fontSize.small="x-small",this._liveCallback=null,this.bindFunctions(["_replay","backToLive","update"])}init(){super.init();const{canHover:t,isTouch:e}=this._app;t&&!e&&(this._children.liveContainer.addEventListener("mouseenter",(()=>{this.setState({hasHover:!0,liveIcon:"icon-live"})})),this._children.liveContainer.addEventListener("mouseleave",(()=>{this.setState({hasHover:!1,liveIcon:"icon-back-to-live"})}))),s.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[s.followCursor]}),(0,s.default)(this._children.liveContainer,{content:"Reset time to live.",placement:"top"}),this._children.live.classList.add("semi","color"),this._children.replay.classList.add("semi","color"),this._element.removeChild(this._children.replayContainer),this._callbackRegistry.push({emitter:this._app.getManager("time"),event:"update",callback:this.update})}setCallback(t){this._liveCallback="function"==typeof t?t:null}backToLive(){if("function"==typeof this._liveCallback)this._liveCallback();else{const t=this._app.getManager("router"),e=this._app.getManager("time");if(!e.isNow()){const i=e.getTimeUrl(e.getNow()),s=t.query.time;t.navigate({__remove:["time","rate"]},t.currentRoute.url),s!==i&&(e.setTimeRate(1),e.setToNow())}}}_replay(){this._app.getManager("router").navigate({__remove:["time","rate"]})||(this._app.getManager("time").setTimeRate(1),this._app.getManager("time").setToStart())}update(t){if(!this._state.isVisible)return;const e=this._app.getManager("time").isNow(),i=this._app.getManager("time").getNow(),s={liveContainerClass:0===this._app.getManager("time").isWithinLimits(i)?e?"active":"clickable":"hidden",liveClass:e?"live":"",replayClass:n.AppUtils.isMobileMode()?"icon icon-box":"container"};this._state.hasHover||(s.liveIcon=e?"icon-live":"icon-back-to-live"),this.setState(s)}}ClockShortcut.html=a(),e.default=ClockShortcut},function(t){t.exports='<nav class="clock-shortcut shortcut {{isVisibleClass}}">\n\t<div class="{{replayClass}} replay-container clickable" onclick="_replay" key="replayContainer">\n\t\t<span class="icon {{replayIcon}}" key="iconReplay"></span>\n\t\t<div class="replay text semi" key="replay">Replay</div>\n\t</div>\n\t<div class="{{liveContainerClass}} live-container container" onclick="backToLive" key="liveContainer" data-tippy-content="Reset time to live.">\n\t\t<span class="icon {{liveIcon}}" key="iconLive"></span>\n\t\t<div class="{{liveClass}} text" key="live">{{liveText}}</div>\n\t</div>\n</nav>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(362);i(199),i(365);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(142),n=i(2),o=i(363),a=i.n(o),r=i(364),l=i.n(r);class Carousel extends n.BaseComponent{constructor(t,e,i={}){const s=n.AppUtils.isPrimaryTouch()?"Swipe/Tap":"Scroll/Click";i.config={infinite:!1,initialSlideIndex:0,vertical:!0,timeout:1e3,navigationButtons:{prev:{text:"Prev",icon:"icon-greater up"},next:{text:"Next",icon:"icon-greater down"},replay:{text:"Back To Start",icon:"icon-replay"}},hintText:{default:`${s} arrows to continue`,first:`${s} arrow to continue`,last:`${s} arrow for previous`},...i.config},super(t,e,{slideType:"",previousIndex:-1,currentIndex:i.config.initialSlideIndex||0,isScrolling:!1,isScrollingClass:"",isTimeout:!1,collapseClass:"expand",isCollapsed:!1,collapseButtonClass:"icon-collapse",isCloseButtonVisible:!1,closeButtonText:"Exit",isControlsVisible:!1,...i}),Object.assign(this._state,{isCloseButtonVisibleClass:this._class.isVisible[this._state.isCloseButtonVisible],isControlsVisibleClass:this._class.isVisible[this._state.isControlsVisible]}),this._children={track:null,slides:[]},this._progressTooltip=null,this._onEnter={},this._onLeave={},this._slideTypes=["panel","overlay"],this._currentInfo=null,this._onSlideChange=this.goToSlide,this._toggleControls=null,this._eventNames.push("slidechange","expandtoggle"),this._initCallbacks(),this.bindFunctions(["_setSlideTrackDimensions","_updateCarousel","_onScroll","_toggleCollapse","_onControlsToggle","goToPrevSlide","goToNextSlide","close"])}get currentInfo(){return this._currentInfo}_onControlsToggle(){this._toggleControls()}setOnControlsToggle(t){this._toggleControls=t}init(){super.init(),this._children.carousel.classList.add(this._config.vertical?"vertical":"horizontal"),this._createSlideTrack(),this._updateCarousel(),this._children.carousel.classList.add("initialized"),window.addEventListener("keydown",(t=>{"Tab"===t.key&&this._state.isScrolling&&t.preventDefault()})),this._children.carousel.addEventListener("transitionstart",(t=>{t.target===this._children.track&&"transform"===t.propertyName&&(this.setState({isScrolling:!0,isScrollingClass:"scrolling"}),this._children.carousel.style.pointerEvents="all")}),!0),this._children.carousel.addEventListener("transitionend",(t=>{t.target===this._children.track&&"transform"===t.propertyName&&(this.setState({isScrolling:!1,isScrollingClass:"scrolling-done"}),this._children.carousel.style.pointerEvents="none")}),!0),this._children.progress.addEventListener("wheel",this._onScroll,{passive:!1}),this._children.progress.addEventListener("touchstart",(t=>{const e=t.changedTouches[0];this._touchStartY=e.pageY})),this._children.progress.addEventListener("touchmove",(t=>{const e=t.changedTouches[0];t.deltaY=e.pageY-this._touchStartY,this._onScroll(t,"touch")}),{passive:!1}),this._children.progress.addEventListener("touchend",(t=>{const e=t.changedTouches[0];t.deltaY=e.pageY-this._touchStartY,this._onScroll(t,"touch")}),{passive:!1})}resize(){super.resize(),setTimeout(this._setSlideTrackDimensions,100),this._updateTooltipsProps()}_updateTooltipsProps(){const{slideType:t}=this._state;this._progressTooltip.setProps({offset:"overlay"===t?[0,-30]:[0,10]})}_createSlideTrack(){this._children.slides.forEach((t=>{this._children.track.appendChild(t)})),this._setSlideTrackDimensions()}_setSlideTrackDimensions(){const{track:t,slides:e}=this._children,{vertical:i}=this._config;if(e.forEach((t=>{t.style.transition="none"})),t.style.transition="none",i){const i=[...e].reduce(((t,e)=>t+e.getBoundingClientRect().height),0);t.style.height=i+"px"}else{const i=[...e].reduce(((t,e)=>t+e.getBoundingClientRect().width),0);t.style.width=i+"px"}t.style.transition="",e.forEach((t=>{t.style.transition=""})),this._updateTrackPosition()}_updateTrackPosition(){const{currentIndex:t}=this._state;let e=0;for(let i=0;i<t;i++)e+=this._children.slides[i].getBoundingClientRect().height;const i=this._config.vertical?`translateY(-${e}px)`:`translateX(-${e}px)`;this._children.track.style.transform=i}_updateSlides(){const{previousIndex:t,currentIndex:e}=this._state,i=this._children.slides[t];i&&(i.classList.remove("active"),i.classList.add("hidden"));const s=this._children.slides[e];s&&(s.classList.remove("hidden"),s.classList.add("active"))}_updateCarousel(){this._updateTrackPosition(),this._updateSlides()}_onScroll(t,e="mouse"){if(this._state.isCollapsed&&!this._state.isTimeout)this.expand();else if(!this._state.isScrolling&&!this._state.isTimeout){const i=t.currentTarget.querySelector(".os-viewport")||t.currentTarget,s=i.scrollTop,n=0===s,o=Math.ceil(i.getBoundingClientRect().height+s)>=i.scrollHeight;t.deltaY<0?"mouse"===e?t.deltaY<-4&&n&&this.goToPrevSlide():t.deltaY<-5&&o&&this.goToNextSlide():t.deltaY>0&&("mouse"===e?t.deltaY>4&&o&&this.goToNextSlide():t.deltaY>5&&n&&this.goToPrevSlide())}this.setState({isTimeout:!0},(()=>setTimeout((()=>this.setState({isTimeout:!1})),this._config.timeout))),["wheel","touchmove"].includes(t.type)&&t.stopPropagation()}addSlide(t,{isLast:e=!1,isFirst:i=!1}={}){const o=t.html||l(),{type:a,content:r}=t;this._slideTypes.includes(a)||console.warn(`addSlide: Unknown slide type "${a}". Supported types: ${this._slideTypes}`);const c=n.AppUtils.htmlWithParamsToElement(o,{prevButtonText:this._config.navigationButtons.prev.text,prevButtonIcon:this._config.navigationButtons.prev.icon,nextButtonText:this._config.navigationButtons.next.text,nextButtonIcon:this._config.navigationButtons.next.icon,replayButtonText:this._config.navigationButtons.replay.text,replayButtonIcon:this._config.navigationButtons.replay.icon,hintText:()=>e?this._config.hintText.last:i?this._config.hintText.first:this._config.hintText.default,type:a});c.querySelector(".content").appendChild(r),e&&c.classList.add("last"),i&&c.classList.add("first"),t.classList&&c.classList.add(...t.classList),t.id&&(c.dataset.id=t.id),c.dataset.type=t.type||"",this._children.track.appendChild(c),this._children.slides.push(c);const h=c.firstChild;h.addEventListener("wheel",this._onScroll,{passive:!1}),h.addEventListener("touchstart",(t=>{const e=t.changedTouches[0];this._touchStartY=e.pageY})),h.addEventListener("touchmove",(t=>{const e=t.changedTouches[0];t.deltaY=e.pageY-this._touchStartY,this._onScroll(t,"touch")}),{passive:!1}),h.addEventListener("touchend",(t=>{const e=t.changedTouches[0];t.deltaY=e.pageY-this._touchStartY,this._onScroll(t,"touch")}),{passive:!1}),this._setVariables(c),this._setEventHandlersFromAttributes(c),this._setSlideTrackDimensions(),this._updateCarousel(),n.AppUtils.addScrollbar(h),this._progressTooltip=(0,s.default)(this._children.progress.parentElement,{theme:"default",onShow(t){clearTimeout(t.timeout),t.timeout=setTimeout((()=>{t.hide()}),2e3)}})}addSlides(t){for(let e=0;e<t.length;e++)this.addSlide(t[e])}async onEnter(t){const e=this._onEnter[t];for(let t=0;t<e.length;t++)"function"==typeof e[t]&&await e[t]()}async onLeave(t){"number"!=typeof t&&(t=this._state.currentIndex);const e=this._onLeave[t];for(let t=0;t<e.length;t++)"function"==typeof e[t]&&await e[t]()}async goToSlide(t){const e=this._state.currentIndex;t!==e&&await this.onLeave(e);const i=this._children.slides[t].dataset.type;this.setState({currentIndex:t,previousIndex:e,slideType:i},(()=>{this._updateCarousel(),this._children.progress.style.top=`calc(${100*t/(this._children.slides.length-1)}% - ${this._children.progress.offsetHeight/2}px)`;const e=this._children.slides[t].querySelector(".os-viewport");e&&(e.scrollTop=0),this.triggerCallbacks("slidechange",[this._currentInfo]),this._progressTooltip.setContent(`${t+1} of ${this._children.slides.length}`),this._updateTooltipsProps(),this._state.isVisible&&this._progressTooltip.show()})),await this.onEnter(t)}goToPrevSlide(){const{currentIndex:t}=this._state,e=this._children.slides.length-1,i=t-1;i<0?this._config.infinite&&this._onSlideChange(e):this._onSlideChange(i)}goToNextSlide(){const{currentIndex:t}=this._state,e=t+1;e>this._children.slides.length-1?this._config.infinite&&this._onSlideChange(0):this._onSlideChange(e)}goToFirstSlide(){this._onSlideChange(0)}isVisible(){return this._state.isVisible}collapse(){this.setState({isCollapsed:!0,collapseClass:"collapse",collapseButtonClass:"icon-expand"}),this.triggerCallbacks("expandtoggle",[!1])}expand(){this.setState({isCollapsed:!1,collapseClass:"expand",collapseButtonClass:"icon-collapse"}),this.triggerCallbacks("expandtoggle",[!0])}close(){}show(){super.show(),this._updateCarousel(),this._progressTooltip.show()}clear(){this._children.track.innerHTML="",this._children.slides=[],this._onEnter={},this._onLeave={},this._currentInfo=null,this._state.previousIndex=1,this._state.currentIndex=this._config.initialSlideIndex||0}_toggleCollapse(){this._state.isCollapsed?this.expand():this.collapse()}}Carousel.html=a(),e.default=Carousel},function(t){t.exports='<div class="carousel-container {{isVisibleClass}} {{slideType}}">\n\t<button class="close-button clickable {{isCloseButtonVisibleClass}}" onclick="close">\n\t\t<span class="text">{{closeButtonText}}</span>\n\t\t<span class="icon icon-close"></span>\n\t</button>\n\t<div class="progress {{slideType}}">\n\t\t<span key="progress" class="icon icon-triangle"></span>\n\t</div>\n\t<div key="carousel" class="carousel {{collapseClass}} {{isScrollingClass}} {{slideType}}">\n\t\t<div class="track" key="track"></div>\n\t</div>\n</div>\n'},function(t){t.exports='<div class="slide hidden {$type}">\n\t<div class="container {{collapseClass}}">\n\t\t<div class="container-wrapper">\n\t\t\t<div class="mobile-hint small">\n\t\t\t\t<span class="icon icon-greater up clickable" onclick="goToPrevSlide"></span>\n\t\t\t\t<span class="hint-text">{$hintText}</span>\n\t\t\t\t<span class="icon icon-greater down clickable" onclick="goToNextSlide"></span>\n\t\t\t</div>\n\t\t\t<div class="content-container">\n\t\t\t\t<div class="content-wrapper">\n\t\t\t\t\t<div class="content"></div>\n\t\t\t\t\t<div class="controls {{isControlsVisibleClass}}">\n\t\t\t\t\t\t<button class="icon icon-clock clickable" onclick="_onControlsToggle"></button>\n\t\t\t\t\t\t<button class="icon collapse-button clickable {{collapseButtonClass}}" onclick="_toggleCollapse"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class="navigation-button replay mobile clickable" onclick="goToFirstSlide">\n\t\t\t\t\t\t<span class="icon {$replayButtonIcon}"></span>\n\t\t\t\t\t\t{$replayButtonText}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button class="navigation-button next clickable" onclick="goToNextSlide">\n\t\t\t\t{$nextButtonText}\n\t\t\t\t<span class="icon {$nextButtonIcon}"></span>\n\t\t\t</button>\n\t\t\t<button class="navigation-button replay clickable" onclick="goToFirstSlide">\n\t\t\t\t<span class="icon {$replayButtonIcon}"></span>\n\t\t\t\t{$replayButtonText}\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div class="collapse-container {{collapseClass}}">\n\t\t<button class="mobile-collapse icon clickable {{collapseButtonClass}}" onclick="_toggleCollapse"></button>\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(367);i(475);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(368),n=(i(470),i(471),i(472),i(473),i(2)),o=i(474),a=i.n(o);s.default.use([s.Navigation,s.Keyboard,s.Mousewheel]);const r="OK, got it. Thanks!",l="OK, let's go!";class TutorialOverlay extends n.BaseComponent{constructor(t,e={}){e.config={direction:"horizontal",speed:600,slidesPerView:1,spaceBetween:100,keyboard:{enabled:!0},mousewheel:{forceToAxis:!0,thresholdDelta:100},navigation:{prevEl:".tutorial-carousel-prev",nextEl:".tutorial-carousel-next"},...e.config},super(t,null,{isVisible:!1,carouselClass:"tutorial-carousel",slideClass:"",dismissText:r,...e}),this._swiper=null,this._allTutorials=null,this._elementMeasures=null,this._currIndex=null,this._slideViewedTimeout=null,this._initTimeout=null,this._bulletClass="swiper-pagination-bullet",this._activeBulletClass="swiper-pagination-bullet-active",this._swiperSlideClass="swiper-slide",this._storageName="EoA_Tutorials"}setTutorials(t){this._allTutorials=t,this._createSlides()}_addEvents(){this._swiper.on("slideChange",(({realIndex:t})=>{this._setHighlightedElement(t),this._setActiveBullet(t),this._currIndex!==t&&this.navigateToTutorial(t);const{id:e}=this._allTutorials[t]||{},i=t===this._allTutorials.length-1,s=e?`tutorial-slide-${e}`:"";this.setState({dismissText:i?l:r,slideClass:s})})),this._children.swiperSlides.addEventListener("click",(t=>{const e=t?.target?.dataset?.def;e&&this._app.getComponent("definitionOverlay").navigateToDefinition(e)}))}_createSlides(){const{isTouch:t}=this._app;this._allTutorials.forEach((({id:e,title:i,description:s,extra:n})=>{const o=[];if(i){const t=document.createElement("h2");t.innerHTML=i,o.push(t)}if(s){const e="object"==typeof s?t?s.touch:s.desktop:s;if("string"==typeof e){const t=document.createElement("p");t.innerHTML=e,o.push(t)}}if(n){const e="object"==typeof n?t?n.touch:n.desktop:n;if("string"==typeof e){const t=document.createElement("div");t.className="tutorial-extra",t.innerHTML=e,o.push(t)}}const a=`${this._swiperSlideClass} tutorial-slide-${e}`;o.length&&this._addSlide(o,a)}))}_addSlide(t=[],e){const i=document.createElement("div");i.className=e,i.replaceChildren(...t),this._children.swiperSlides.append(i)}_createBullets(){const{bullets:t}=this._children,{slides:e}=this._swiper,i=[...e].map(((t,e)=>{const i=document.createElement("span");return i.classList.add(this._bulletClass),i.addEventListener("click",(t=>this._swiper.slideTo(e))),i}));t.replaceChildren(...i)}_setActiveBullet(t=this._currIndex){const{bullets:e}=this._children;e.childNodes.forEach(((e,i)=>{e.classList.remove(this._activeBulletClass),i===t&&e.classList.add(this._activeBulletClass)}))}_setHighlightedElement(t=this._currIndex,e=!1){(!this._elementMeasures||e)&&(this._elementMeasures=this._calcElementMeasures());const i=this._elementMeasures[t],{mask:s}=this._allTutorials[t];if(i){const{xPos:t,yPos:e,relWidth:n,relHeight:o}=i,{xSizeMult:a=1,ySizeMult:r=1}=s||{},l=15,c=(200+n*l*100)*a,h=(200+o*l*100)*r,u=Math.max(200,c),d=Math.max(200,h),p=100/(u-100),_=100/(d-100),g=.5-.5*_+e*_,m=(100*(.5-.5*p+t*p)).toFixed(2),y=(100*g).toFixed(2);this._element.style.setProperty("--tutorial-mask-grad","radial-gradient(transparent, black 5%)"),this._element.style.setProperty("--tutorial-mask-pos",`${m}% ${y}%`),this._element.style.setProperty("--tutorial-mask-size",`${u}% ${d}%`)}else this._element.style.setProperty("--tutorial-mask-grad",null),this._element.style.setProperty("--tutorial-mask-pos",null),this._element.style.setProperty("--tutorial-mask-size",null)}onQueryChange({cancelToken:t,tutorial:e}={}){if(clearTimeout(this._slideViewedTimeout),t&&t.isCanceled)return;const i=this._getIndexByTutorialId(e);i!==this._currIndex&&(this._currIndex=i,this._currIndex>-1?(this._state.isVisible?this._swiper.slideTo(this._currIndex):this.show(),this._setSlideViewedTimeout(i)):this.hide())}_initSwiper(){const{carouselClass:t}=this._state,e=`.${t} .swiper-wrapper > div`;n.AppUtils.elementReady(e).then((()=>{this._initTimeout=setTimeout((()=>{this._swiper?(this._swiper.update(),this._swiper.slideTo(this._currIndex)):(this._swiper=new s.default(`.${t}`,this._config),this._postSwiperInitFunction(this._swiper)),0===this._currIndex&&(this._setActiveBullet(),this._setHighlightedElement()),super.show()}),500)}))}_postSwiperInitFunction(){this._addEvents(),this._createBullets(),this._swiper.slideTo(this._currIndex)}_getIndexByTutorialId(t){return this._allTutorials?.findIndex((({id:e})=>e===t))}_setSlideViewedTimeout(t){this._slideViewedTimeout=setTimeout((()=>{const e=localStorage?.getItem(this._storageName)?.split(",")||[];e.includes(t.toString())||(e.push(t),e.sort(),localStorage?.setItem(this._storageName,e))}),3e3)}_calcElementMeasures(){const{clientWidth:t,clientHeight:e}=document.body;return this._allTutorials.map((({targetSelector:i})=>{const s=[...document.body.querySelectorAll(i)].filter((t=>null!==t.offsetParent));if(!s.length)return!1;const{left:n,width:o,top:a,height:r}=s[0].getBoundingClientRect();return{xPos:1-(n+.5*o)/t,yPos:1-(a+.5*r)/e,relWidth:o/t,relHeight:r/e}}))}show(){const t=this._app.getManager("layer");t.getLayer("ui").visible||t.toggleLayer("ui");const e=this._children.swiperSlides?.childNodes?.length;e&&this._initSwiper()}hide(){clearTimeout(this._initTimeout),this._currIndex=null,super.hide()}calcPriorityIndex(){const t=localStorage?.getItem(this._storageName)?.split(",")||[],e=this._allTutorials.filter(((e,i)=>!t.includes(i.toString())));return e.length?this._getIndexByTutorialId(e[0].id):null}navigateToTutorial(t){const e=this._app.getManager("router");if(!1!==t&&t>-1&&t<this._allTutorials.length){const i=this._allTutorials[t].id;e.navigate({tutorial:i})}else!1===t&&e.navigate({__remove:["tutorial"]})}close(){this.navigateToTutorial(!1)}resize(){this._state.isVisible&&null!==this._currIndex&&this._setHighlightedElement(this._currIndex,!0)}}TutorialOverlay.html=a(),e.default=TutorialOverlay},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t){t.exports='<div id="tutorial-overlay" class="{{isVisibleClass}} {{slideClass}}">\n\n\t<div class="swiper {{carouselClass}}">\n\t\t<div key="swiperSlides" class="swiper-wrapper"></div>\n\n\t\t<div class="swiper-button-prev icon prev-arrow tutorial-carousel-prev"></div>\n\t\t<div class="swiper-button-next icon next-arrow tutorial-carousel-next"></div>\n\n\t\t<div key="bullets" class="bullet-container"></div>\n\n\t</div>\n\n\t<div class="dismiss-container">\n\t\t<button class="dismiss-button clickable" onclick="close">{{dismissText}}</button>\n\t</div>\n\n\n\t<footer>\n\t\t<p class=\'tutorial-smallprint\'>The data used to generate this visualization is from the <a href=\'https://cneos.jpl.nasa.gov\' target=\'_blank\'>Center for Near-Earth Object Studies</a> and JPL\'s <a href=\'https://ssd.jpl.nasa.gov\' target=\'_blank\'>Solar System Dynamics</a> website. Visit the <a href=\'https://www.nasa.gov/planetarydefense/overview\' target=\'_blank\'>Planetary Defense Coordination Office</a> for more information on how NASA monitors for potentially hazardous asteroids and comets.</p>\n\t</footer>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(477);i(470),i(471),i(479),i(472),i(473),i(480);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(368),n=i(2),o=i(478),a=i.n(o);s.default.use([s.Navigation,s.Pagination,s.Keyboard,s.Mousewheel]);class CarouselPanel extends n.BaseComponent{constructor(t,e={}){const{paginationClass:i,prevButtonClass:s,nextButtonClass:n}=e;e.config={direction:"horizontal",speed:600,grabCursor:!0,touchStartPreventDefault:!1,slidesPerView:1,spaceBetween:100,keyboard:{enabled:!0},mousewheel:{forceToAxis:!0,thresholdDelta:100},navigation:{prevEl:`.${s}`,nextEl:`.${n}`},...i&&{pagination:{el:`.${i}`,type:"custom",renderCustom:(t,e,i)=>`${e} of ${i}`}},...e.config},super(t,null,{isVisible:!1,preTitle:"viewing",title:"Panel Title",caption:"This is the panel subtitle",carouselClass:"",paginationClass:"",prevButtonClass:"",nextButtonClass:"",isExpandedClass:"collapsed",tabsVisibleClass:"hidden",tabNumClass:"",...e}),this._swiper=null,this._tabIndices=null,this._activeTabIndex=null,this._tabElements=null,this._bulletClass="swiper-pagination-bullet",this._activeBulletClass="swiper-pagination-bullet-active",this._swiperSlideClass="swiper-slide",this._onSlideChange=null,this._expandOnShow=!1,this._orientation=null,this._resizeTimeout=null,this._isInitialized=null,this._eventNames.push("expandtoggle"),this._initCallbacks(),this.bindFunctions(["_onTabClick"])}_addEvents(){this._swiper.on("slideChange",(t=>{const{realIndex:e,previousIndex:i}=t;let s=e;"function"==typeof this._onSlideChange&&this._onSlideChange(t);const n=this._children.swiperSlides.childNodes[i];if(n?._scrollInstance&&(n._isMousedown=!1,n._scrollInstance.scroll(0)),this._tabElements){const t=this._tabIndices.findIndex((({start:t,end:i})=>e>=t&&e<=i)),{start:i}=this._tabIndices[t];if(s-=i,t>-1&&t!==this._activeTabIndex)return this._tabElements.forEach(((e,i)=>{e.classList.toggle("active",i===t)})),this._activeTabIndex=t,void this._createBullets(s)}this._setActiveBullet(s)})),this._children.swiperSlides.addEventListener("click",(t=>{const e=t?.target?.dataset?.def;e&&this._app.getComponent("definitionOverlay").navigateToDefinition(e)}))}_hasOrientationChanged(){const t=n.AppUtils.isPortrait()?"portrait":"landscape",e=this._orientation!==t;return this._orientation=t,e}_addScrollbars(){const t=this._hasOrientationChanged();this._children?.swiperSlides?.childNodes?.forEach((e=>{const{clientHeight:i,scrollHeight:s,cHeight:o,sHeight:a}=e;if(o&&o===i&&a&&a===s&&!t)return;e._scrollInstance?.destroy();const{clientHeight:r,scrollHeight:l}=e;if(e.sHeight=r,e.cHeight=l,l>r){e.classList.add("scrollable"),e._scrollInstance??=n.AppUtils.addScrollbar(e),e._isMousedown=!1,e._clientY=0;const t=({clientY:t})=>{if(e._isMousedown){const i=e._clientY-t;e._scrollInstance.scroll({y:`+=${i}`}),e._clientY=t}};e.onmousedown=({clientY:i})=>{e._isMousedown=!0,e._clientY=i,window.addEventListener("mousemove",t),window.addEventListener("mouseup",(function i(){e._isMousedown=!1,window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)}))}}}))}createTabs(t){this._tabIndices=[],this._activeTabIndex=0;let e=0;this._swiper&&this._destroy(),this._tabElements=t.map((({title:t,content:i},s)=>{const n=document.createElement("button");n.innerHTML=t,n.className="clickable "+(s===this._activeTabIndex?"active":""),n.addEventListener("click",this._onTabClick),this._tabIndices.push({start:e,end:e+i.length-1}),e+=i.length;for(const t of i){const e=this._createSlideElements(t);this.addSlide(e,t.onClick)}return n})),this._children.tabsContainer.replaceChildren(...this._tabElements),this.setState({tabsVisibleClass:"",tabNumClass:`tabs-${this._tabElements.length}`})}_createSlideElements(t){const{title:e,content:i,value:s}=t,n=[];if(e){const t=document.createElement("h4");t.className="title semi",t.innerHTML=e,n.push(t)}if(i){const t=document.createElement("div");t.className="description",t.innerHTML=i,n.push(t)}if(s){const t=document.createElement("div");t.className="value semi",t.innerHTML=s,n.push(t)}return n}_createBullets(t=0){const{bullets:e}=this._children,{slides:i}=this._swiper;let s=[...i],n=0;if(this._tabElements){const{start:t,end:e}=this._tabIndices[this._activeTabIndex];n=t,s=s.slice(t,e+1)}const o=[...s].map(((t,e)=>{const i=document.createElement("span");return i.classList.add(this._bulletClass),i.setAttribute("data-slide-index",e+n),i.addEventListener("click",(t=>{const{slideIndex:e}=t.target.dataset;this._swiper.slideTo(e)})),i})),a=i=>{i&&"width"!==i.propertyName||(e.replaceChildren(...o),e.classList.remove("hidden"),this._setActiveBullet(t))};e.classList.contains("hidden")?a():(e.classList.add("hidden"),e.ontransitionend=a,e.ontransitioncancel=a)}_setActiveBullet(t){const{bullets:e}=this._children;e.childNodes.forEach(((e,i)=>{e.classList.remove(this._activeBulletClass),i===t&&e.classList.add(this._activeBulletClass)}))}addSlide(t=[],e){const i=document.createElement("div");i.className=`${e?"clickable":""} ${this._swiperSlideClass}`,e&&i.addEventListener("click",e),i.replaceChildren(...t),this._children.swiperSlides.append(i)}initSwiper(){const{carouselClass:t}=this._state,e=`.${t} .swiper-wrapper > div`;return n.AppUtils.elementReady(e).then((()=>{this._swiper?(this._swiper.update(),this._addScrollbars(),this._createBullets(),this._swiper.slideTo(0)):(this._swiper=new s.default(`.${t}`,this._config),this._postSwiperInitFunction(this._swiper))}))}_postSwiperInitFunction(){this._addEvents(),this._addScrollbars(),this._createBullets(),this._swiper.update(),this._swiper.slideTo(0)}_destroy(){this._children.swiperSlides.innerHTML="",clearTimeout(this._resizeTimeout)}_onTabClick(t){const e=this._tabElements.findIndex((e=>e===t.target)),{start:i}=this._tabIndices[e];this._swiper.slideTo(i)}expand(){this.setState({isExpanded:!0,isExpandedClass:"expanded"}),this.triggerCallbacks("expandtoggle",[!0])}collapse(){this.setState({isExpanded:!1,isExpandedClass:"collapsed"}),this.triggerCallbacks("expandtoggle",[!1])}setExpandState(t){this.setState({isExpanded:t,isExpandedClass:t?"expanded":"collapsed"}),this.triggerCallbacks("expandtoggle",[t])}show(t=!0){const e=this._app.getManager("layer").getLayer("ui").visible,i=this._children.swiperSlides?.childNodes?.length,s=()=>{!this._isInitialized&&i||(this._expandOnShow?(this.setState({isVisible:!0,isVisibleClass:this._class.isVisible.true,isExpanded:!0,isExpandedClass:"expanded"}),this.triggerCallbacks("expandtoggle",[!0]),this.triggerCallbacks("visiblechange",[!0])):super.show())};t&&e&&i?this.initSwiper().then((()=>s())):s()}hide(){this.setState({isVisible:!1,isVisibleClass:this._class.isVisible.false,isExpanded:!1,isExpandedClass:"collapsed"}),this.triggerCallbacks("expandtoggle",[!1,!1]),this.triggerCallbacks("visiblechange",[!1]),this._expandOnShow&&(this._isInitialized=!1)}resize(){clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((()=>{this._addScrollbars()}),200)}}CarouselPanel.html=a(),e.default=CarouselPanel},function(t){t.exports='<section id="panel-container" class="{{panelTypeClass}} {{isVisibleClass}} {{isExpandedClass}}">\n\n\t\x3c!-- Simple panel (collapsed) --\x3e\n\t<div class="panel-simple clickable" onclick="expand">\n\t\t<div class="expand-button">\n\t\t\t<div class="icon circle-arrow"></div>\n\t\t</div>\n\t\t<h5 class="simple-pretitle">{{preTitle}}</h5>\n\t\t<h4 class="simple-title">{{title}}</h4>\n\t</div>\n\n\t\x3c!-- Main panel (expanded) --\x3e\n\t<div class="panel-main">\n\n\t\t<div class="panel-header">\n\t\t\t<div class="header-title">\n\t\t\t\t<div class="title-icon icon icon-large {{headerIconClass}}"></div>\n\t\t\t\t<h4 class="title-text">{{title}}</h4>\n\t\t\t\t<div class="collapse-button clickable" onclick="collapse">\n\t\t\t\t\t<div class="icon circle-arrow"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<h5 class="header-caption {{captionClass}}">{{caption}}</h5>\n\t\t</div>\n\n\t\t\x3c!-- Carousel content --\x3e\n\t\t<div key="content" class="panel-content">\n\t\t\t<nav key="tabsContainer" class="tabs-container {{tabsVisibleClass}} {{tabNumClass}}"></nav>\n\t\t\t<div class="swiper {{carouselClass}}">\n\t\t\t\t<div key="swiperSlides" class="swiper-wrapper"></div>\n\n\n\t\t\t\t<div class="swiper-pagination {{paginationClass}}"></div>\n\n\t\t\t\t<div class="swiper-button-prev icon prev-arrow {{prevButtonClass}}"></div>\n\t\t\t\t<div class="swiper-button-next icon next-arrow {{nextButtonClass}}"></div>\n\n\t\t\t\t<div key="bullets" class="bullet-container"></div>\n\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n\n\n</section>\n'},,function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(482);i(484);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(2),n=i(483),o=i.n(n);class TimeSlider extends s.BaseComponent{constructor(t,e={}){e.config={enableSnapping:!0,snapPoints:[1,10,60,300,600,3600,86400,604800,5256e3,3154e4],enableDynamicRate:!1,fastestRate:{min:86400,max:1577e5},...e.config},super(t,null,{isTouch:null,limitX:null,startX:null,transX:null,fastestRate:null,...e}),this.bindFunctions(["_onMouseTouchDown","_onMouseTouchMove","_onMouseTouchUp","_getFastestRate","_snapToRate","_getRateArray","_calculateRate"]),window.slider=this}init(){super.init(),this._addHandlers()}_addHandlers(){const{iconEl:t}=this._children;t.addEventListener("mousedown",this._onMouseTouchDown),t.addEventListener("touchstart",this._onMouseTouchDown)}_onMouseTouchDown(t){t.preventDefault();const{iconEl:e,lineEl:i}=this._children,{enableSnapping:s}=this._config,{isTouch:n}=this._app,o=.5*i.getBoundingClientRect().width,a=n?t.touches[0].clientX:t.clientX;e.style.setProperty("transition","none"),document.body.style.setProperty("cursor","grabbing"),n?(document.addEventListener("touchmove",this._onMouseTouchMove),document.addEventListener("touchend",this._onMouseTouchUp)):(document.addEventListener("mousemove",this._onMouseTouchMove),document.addEventListener("mouseup",this._onMouseTouchUp));const r=s?this._snapToRate(this._getFastestRate()):this._getFastestRate(),l=s&&this._getRateArray(r);this.setState({isTouch:n,limitX:o,startX:a,fastestRate:r,...l&&{rateArray:l}})}_onMouseTouchMove(t){const{isTouch:e,limitX:i,startX:s,transX:n}=this._state,{iconEl:o}=this._children,a=(e?t.touches[0].clientX:t.clientX)-s,r=Math.abs(a)>i?a<0?-i:i:a,l=r/i,c=this._calculateRate(l);r!==n&&(o.style.setProperty("transform",`translateX(${r}px)`),this.onSliderMove(c),this.setState({transX:r}))}_onMouseTouchUp(t){const{isTouch:e}=this._state,{iconEl:i}=this._children;e?(document.removeEventListener("touchmove",this._onMouseTouchMove),document.removeEventListener("touchend",this._onMouseTouchUp)):(document.removeEventListener("mousemove",this._onMouseTouchMove),document.removeEventListener("mouseup",this._onMouseTouchUp)),i.style.setProperty("transition","transform 0.5s cubic-bezier(.3,1.24,.34,.98)"),i.style.setProperty("transform","translateX(0)"),document.body.style.setProperty("cursor","default"),this.onSliderEnd()}_getFastestRate(){const{fastestRate:t}=this._config;return t.max}_getRateArray(t){const{snapPoints:e}=this._config,i=e.findIndex((e=>t<=e)),s=-1===i;let n=7;if(s||(n-=2*(e.length-i)),s)return[...e.slice(n),t];const o=i-(e.length-n);return[...e.slice(o,i),t]}_calculateRate(t){const{fastestRate:e,rateArray:i}=this._state,{enableSnapping:s}=this._config,n=t<0,o=Math.abs(t),a=i.length-1;let r=o*e;if(i){const t=o*a,e=t%1,s=Math.floor(t);if(r=i[s],s<a){const t=(i[s+1]-r)*e;r+=Math.round(t)}}const l=s?this._snapToRate(r):r;return n?-1*l:l}_snapToRate(t){const{snapPoints:e}=this._config,i=e.findIndex((e=>t<=e));if(0===i)return e[i];const s=i>-1?e[i-1]:e[e.length-1];return Math.round(t/s)*s}onSliderMove(t){console.log(`Slider value updated to rate: ${t}`)}onSliderEnd(){console.log("Slider released.")}show(){this._element?.parentNode?.classList.remove("hidden")}hide(){this._element?.parentNode?.classList.add("hidden")}}TimeSlider.html=o(),e.default=TimeSlider},function(t){t.exports='<div class="time-slider">\n\t<div key="lineEl" class="slider-line"></div>\n\t<div key="iconEl" class="slider-icon"></div>\n</div>;\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(486);i(199),i(488);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(142),n=i(2),o=i(487),a=i.n(o);class TimeController extends n.BaseComponent{constructor(t){super(t,null,{isPlay:!1,playClass:"",rate:0,rateDisplay:0}),this._class.fontSize.small="tiny",this._class.isPlay={true:"icon-pause",false:"icon-play"},this._rates=[-94608e3,-31536e3,-6048e3,-604800,-86400,-36e3,-3600,-600,-60,-10,-1,0,1,10,60,600,3600,36e3,86400,604800,6048e3,31536e3,94608e3],this._manager=this._app.getManager("time"),this._router=this._app.getManager("router"),this._manager.setDefaultTimeRate(1);const e=this._manager.getTimeRate(),i=0!==e;this.setState({isPlay:i,playClass:this._class.isPlay[i],rate:e,rateDisplay:this.getRateDisplay()}),this.bindFunctions(["getRateLimits","setRateLimits","setRate","setDefaultRate","setRealRate","decreaseRate","increaseRate","togglePlayPause","onRateChange","onForcedPause","onForcedPauseResume"])}init(){super.init(),s.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[s.followCursor]}),(0,s.default)(this._children.toggleBtn,{placement:"top"}),(0,s.default)(this._children.increaseBtn,{placement:"top"}),(0,s.default)(this._children.decreaseBtn,{placement:"top"}),this._children.decreaseContainer.classList.add("bg-color","gray","dark"),this._children.increaseContainer.classList.add("bg-color","gray","dark"),this._children.label.classList.add("semi"),this._children.rateDisplay.classList.add("semi"),this._callbackRegistry.push({emitter:this._app.getManager("time"),event:"ratechange",callback:this.onRateChange})}getRateLimits(){return this._rates}setRateLimits(t){this._rates=t}setRate(t){this._router.navigate({time:this._manager.getTimeUrl(),rate:t},this._router.currentRoute.url)}decreaseRate(){if(0===this._rates.length)return;const t=this._rates.indexOf(this._manager.getTimeRate());0!==t&&this.setRate(this._rates[t-1])}increaseRate(){if(0===this._rates.length)return;const t=this._rates.indexOf(this._manager.getTimeRate());t!==this._rates.length-1&&this.setRate(this._rates[t+1])}togglePlayPause(){!this._state.isPlay?this._manager.play():this._manager.pause(),this.setRate(this._manager.getTimeRate())}setDefaultRate(){this.setRate(this._manager.getDefaultTimeRate())}setRealRate(){this.setRate(1)}onRateChange(){const t=this._manager.getTimeRate(),e=0!==t;e===this._state.isPlay&&this._state.rate===t||(this._rates.length>0&&!this._rates.includes(t)?this.setRate(this._manager.getDefaultTimeRate()):this.setState({isPlay:e,rate:t,playClass:this._class.isPlay[e],rateDisplay:this.getRateDisplay(t)}))}onForcedPause(){this.setRate(0)}onForcedPauseResume(){this.setDefaultRate()}getRateUnit(t=null){null===t&&(t=this._manager.getTimeRate());const e=t/31536e3,i=t/2592e3,s=t/604800,n=t/86400,o=t/3600,a=t/60;let r="";return(e>=1||e<=-1)&&e%1==0?(t=e,r=" yr"):(i>=1||i<=-1)&&i%1==0?(t=i,r=" mth"):(s>=1||s<=-1)&&s%1==0?(t=s,r=" wk"):(n>=1||n<=-1)&&n%1==0?(t=n,r=" day"):(o>=1||o<=-1)&&o%1==0?(t=o,r=" hr"):(a>=1||a<=-1)&&a%1==0?(t=a,r=" min"):(t%=60,r=" sec"),{rate:t,unit:r}}getRateDisplay(t){const{rate:e,unit:i}=this.getRateUnit(t);return 0!==e?e+i+"(s)/sec":"paused"}}TimeController.html=a(),e.default=TimeController},function(t){t.exports='<div class="time-controller {{isVisibleClass}}">\n\t<div class="rate-container">\n\t\t<button key="toggleBtn" class="icon {{playClass}} clickable play-pause" data-tippy-content="Pause / play" onclick="togglePlayPause"></button>\n\t\t<label key="label" class="rate-label">rate</label>\n\t\t<button key="decreaseBtn" class="prev-rate clickable" data-tippy-content="Decrease time rate" onclick="decreaseRate">\n\t\t\t<span key="decreaseContainer" class="container">\n\t\t\t\t<span class="icon icon-backward"></span>\n\t\t\t</span>\n\t\t</button>\n\t\t<div class="vertical-line"></div>\n\t\t<button key="increaseBtn" class="next-rate clickable" data-tippy-content="Increase time rate" onclick="increaseRate">\n\t\t\t<span key="increaseContainer" class="container">\n\t\t\t\t<span class="icon icon-forward"></span>\n\t\t\t</span>\n\t\t</button>\n\t\t<label key="rateDisplay" class="rate-display-label">{{rateDisplay}}</label>\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(490);i(492);e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(2),n=i(491),o=i.n(n);class Navigation extends s.BaseComponent{constructor(t){super(t,null,{position:"top"}),this._entries={},this.bindFunctions(["toggleBadge"])}setup(t){const{position:e="top",entry:i=[]}=t;this.setState({position:e}),this._children.list.innerHTML="";for(let t=0;t<i.length;t+=1){const e=document.createElement("div");e.className="clickable",i[t].active&&e.classList.add("active");const s=document.createElement("button");if(s.innerHTML=`<div><h2>${i[t].title}</h2><div class="navigation-badge"></div></div>`,i[t].svg){const s=document.createElement("img");s.src=i[t].svg,s.alt=i[t].title,e.appendChild(s)}e.appendChild(s),i[t].onClick&&(e.addEventListener("click",(e=>{e.preventDefault(),i[t].onClick(i[t],e)}),!1),e.addEventListener("touchend",(e=>{e.preventDefault(),i[t].onClick(i[t],e)}),!1)),this._entries[i[t].title]={entry:i[t],element:e},this._children.list.append(e)}}toggleActive(t,e){if(this._entries[t]){const i=this._entries[t].element;i.classList.contains("active")!==e&&i.classList.toggle("active")}}toggleBadge(t,e){if(this._entries[t]){const i=this._entries[t].element;i.classList.contains("badged")!==e&&i.classList.toggle("badged")}}}Navigation.html=o(),e.default=Navigation},function(t){t.exports='<nav key="list" class="navigation menu-div {{position}} {{isVisibleClass}}"></nav>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{LayerPanel:function(){return LayerPanel}});var s=i(2),n=i(494),o=i.n(n);i(495);class LayerPanel extends s.BaseComponent{constructor(t,e={}){e.config={layers:e.layers||[],checkboxType:e.checkboxType||"default",...e.config},super(t,null,{isVisible:!1,ui:t.getManager("layer").getLayer("ui").defaultVisibility,planets:t.getManager("layer").getLayer("planets").defaultVisibility,asteroids:t.getManager("layer").getLayer("asteroids").defaultVisibility,comets:t.getManager("layer").getLayer("comets").defaultVisibility,dwarfPlanets:t.getManager("layer").getLayer("dwarfPlanets").defaultVisibility,spacecraft:t.getManager("layer").getLayer("spacecraft").defaultVisibility,trails:t.getManager("layer").getLayer("trails").defaultVisibility,orbits:t.getManager("layer").getLayer("orbits").defaultVisibility,labels:t.getManager("layer").getLayer("labels").defaultVisibility,icons:t.getManager("layer").getLayer("icons").defaultVisibility,starfield:t.getManager("layer").getLayer("starfield").defaultVisibility,constellations:t.getManager("layer").getLayer("constellations").defaultVisibility,...e}),this._eyesCheck="eyes"===e.checkboxType,Object.assign(this._class,{checkbox:{true:this._eyesCheck?"active":"active icon-checkmark",false:this._eyesCheck?"":"checkbox-hover"},boxColor:{true:"settings-alt",false:""},isVisible:{true:"",false:""}}),Object.assign(this._state,{uiClass:this._class.checkbox[this._state.ui],uiColorClass:this._class.boxColor[this._state.ui],planetsClass:this._class.checkbox[this._state.planets],planetsColorClass:this._class.boxColor[this._state.planets],asteroidsClass:this._class.checkbox[this._state.asteroids],asteroidsColorClass:this._class.boxColor[this._state.asteroids],cometsClass:this._class.checkbox[this._state.comets],cometsColorClass:this._class.boxColor[this._state.comets],dwarfPlanetsClass:this._class.checkbox[this._state.dwarfPlanets],dwarfPlanetsColorClass:this._class.boxColor[this._state.dwarfPlanets],constellationsClass:this._class.checkbox[this._state.constellations],constellationsColorClass:this._class.boxColor[this._state.constellations],spacecraftClass:this._class.checkbox[this._state.spacecraft],spacecraftColorClass:this._class.boxColor[this._state.spacecraft],trailsClass:this._class.checkbox[this._state.trails],trailsColorClass:this._class.boxColor[this._state.trails],orbitsClass:this._class.checkbox[this._state.orbits],orbitsColorClass:this._class.boxColor[this._state.orbits],labelsClass:this._class.checkbox[this._state.labels],labelsColorClass:this._class.boxColor[this._state.labels],iconsClass:this._class.checkbox[this._state.icons],iconsColorClass:this._class.boxColor[this._state.icons],starfieldClass:this._class.checkbox[this._state.starfield],starfieldColorClass:this._class.boxColor[this._state.starfield]}),this._categories={ui:"User Interface",planets:"Planet",asteroids:"Asteroid",comets:"Comet",dwarfPlanets:"Dwarf Planet",spacecraft:"Spacecraft",trails:"Trail",labels:"Label",icons:"Icons",starfield:"Star Field",constellations:"Constellations"},this._categoriesDisplay={ui:"User Interface",planets:"Planets",asteroids:"Asteroids",comets:"Comets",dwarfPlanets:"Dwarf Planets",constellations:"Constellations",spacecraft:"Spacecraft",trails:"Trails",orbits:"Orbits",labels:"Labels",icons:"Icons",starfield:"Star Field"},this.bindFunctions(["toggleLayer","handleLayerToggle"]),this._fadeInRight=null,this._fadeOutRight=null,this._fadeInBottom=null,this._fadeOutBottom=null,this._lastMode=s.AppUtils.isMobileMode(),this._initCallbacks()}resize(){super.resize(),this._updatePosition()}init(){super.init(),this._callbackRegistry.push({emitter:this._app.getManager("layer"),event:"toggleLayer",callback:this.handleLayerToggle});const t=this._children.layerPanelBody;if(t){t.textContent="";const e=document.createElement("div");e.className="container",this._config.layers.forEach((t=>{const i=document.createElement("div");i.classList.add("block");const s=document.createElement("ul");s.classList.add("layers"),t.forEach((t=>{const e=document.createElement("li");if(e.setAttribute("key",t),this._eyesCheck){e.className=`layer-panel-layer item clickable {{${t}Class}}`;const i=document.createElement("div");i.classList.add("eyes-checkbox"),i.innerHTML=`<input type="checkbox" id="layer-panel-checkbox-${t}" ${this._state[t]?"checked":""}><label for="layer-panel-checkbox-${t}"></label>`,e.append(i)}else{e.className="layer-panel-layer item clickable";const i=document.createElement("span");i.className=`checkbox icon {{${t}Class}} bg-color {{${t}ColorClass}}`,e.append(i)}const i=document.createElement("span");i.classList.add("small"),i.textContent=this._categoriesDisplay[t],e.append(i),e.addEventListener("click",this.toggleLayer),s.append(e)})),i.append(s),e.append(i)})),t.append(e),this._setVariables(t)}}_createAnimations(){this._fadeOutRight=s.AnimationUtils.directionalFade(this._element,{direction:"right",fade:"out",yOffset:0}),this._fadeInRight=s.AnimationUtils.directionalFade(this._element,{direction:"right",fade:"in",yOffset:0}),this._fadeOutBottom=s.AnimationUtils.directionalFade(this._element,{direction:"down",fade:"out",yOffset:0}),this._fadeInBottom=s.AnimationUtils.directionalFade(this._element,{direction:"down",fade:"in",yOffset:0})}_resetAnimations(){this._fadeInRight.currentTime=0,this._fadeOutRight.currentTime=0,this._fadeInBottom.currentTime=0,this._fadeOutBottom.currentTime=0,this._fadeInRight.pause(),this._fadeOutRight.pause(),this._fadeInBottom.pause(),this._fadeOutBottom.pause()}toggleLayer(t){const e=t.target?.getAttribute("key")??t;this._app.getManager("layer").toggleLayer(e,{category:this._categories[e]})}handleLayerToggle(t,e,i){const s=t+"Class",n=t+"ColorClass";if(null!==this.getState(t)&&(this.setState({[t]:e,[s]:this._class.checkbox[e],[n]:this._class.boxColor[e]}),this._eyesCheck)){const i=document.getElementById(`layer-panel-checkbox-${t}`);i&&(i.checked=e)}}isCategoryEnabled(t){return!this._children[t]?.classList.contains("disabled")}setCategoryEnabled(t,e=!0){this._children[t]?.classList.toggle("disabled",!e)}hide(){this.getState("isVisible")&&(super.hide(),s.AppUtils.isMobileMode()?(this._fadeOutBottom=s.AnimationUtils.directionalFade(this._element,{direction:"down",fade:"out",yOffset:0}),this._fadeOutBottom.play()):(this._fadeOutRight=s.AnimationUtils.directionalFade(this._element,{direction:"right",fade:"out",yOffset:0}),this._fadeOutRight.play()))}show(){super.show(),s.AppUtils.isMobileMode()?(this._fadeInBottom=s.AnimationUtils.directionalFade(this._element,{direction:"down",fade:"in",yOffset:0}),this._fadeInBottom.play()):(this._fadeInRight=s.AnimationUtils.directionalFade(this._element,{direction:"right",fade:"in",yOffset:0}),this._fadeInRight.play())}_updatePosition(){const t=s.AppUtils.isMobileMode();t!==this._lastMode&&(this._lastMode=t,this._state.isVisible&&this.show())}__enable(){super.__enable(),this._createAnimations()}__disable(){super.__disable(),this._fadeInRight=null,this._fadeOutRight=null,this._fadeInBottom=null,this._fadeOutBottom=null}}LayerPanel.html=o()},function(t){t.exports='<div class="layer-panel {{isVisibleClass}}" id="layer-panel">\n\t<div class="header" onclick="hide">\n\t\t<h5 class="title">Layers</h5>\n\t\t<button class="icon icon-greater clickable close"></button>\n\t</div>\n\t<div key="layerPanelBody">\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{Breadcrumb:function(){return Breadcrumb}});var s=i(2),n=i(497),o=i.n(n);i(498);class Breadcrumb extends s.BaseComponent{constructor(t,e={params:{}}){e.params={title:"",...e.params},super(t,null,e),this._class.isHomeActiveClass={true:"active",false:""},this._crumbTexts={compare:"Compare Size",events:"Mission Events"},this.setCrumbClickHandler((t=>{this._app.getManager("router").navigate(t,"",{__remove:"all",keepTime:!0})})),Object.assign(this._state,{isHomeActive:!1,isHomeActiveClass:this._class.isHomeActiveClass.false}),this.bindFunctions(["_goToHome"])}updateBreadcrumb(t){this._element.innerHTML="";const e=document.createDocumentFragment();!1===this._app.getManager("router").configs.logo&&this._children.staticLogo.classList.add("hidden"),this._app.getManager("router").configs.locked&&this._children.static.classList.remove("clickable"),e.appendChild(this._children.static);const i=!t||0===t.length||1===t.length&&"home"===t[0];if(i&&(t=null),this.setState({isHomeActive:i,isHomeActiveClass:this._class.isHomeActiveClass[i]}),t&&t.length>0)for(let i=0;i<t.length;i++){const s=t[i],n=t.slice(0,i+1).join("/"),o=this._createCrumb(s,n);e.appendChild(o)}this._element.appendChild(e)}onRouteChange({routeParts:t}={}){this.updateBreadcrumb(t)}setCrumbClickHandler(t){this._onCrumbClick=t}_goToHome(){this._app.getManager("router").navigate({__remove:"all"},"/home")}_getCrumbText(t){if(this._crumbTexts[t])return this._crumbTexts[t];const e=this._app.getManager("content").getEntityInfo([t]);if(e)return e.displayName||e.iauName;const i=this._app.getManager("content").events[t];if(i)return i.title;const s=this._app.getManager("content").getStoryList().stories[t];return s?s.title:""}_createCrumb(t,e){const i=document.createElement("nav"),{locked:s}=this._app.getManager("router").configs;i.className="container "+(s?"":"clickable"),s||i.addEventListener("click",(()=>{this._onCrumbClick(e)}));const n=document.createElement("span");n.className="separator icon icon-greater",i.appendChild(n);const o=document.createElement("a");return o.innerHTML=this._getCrumbText(t)||t,o.className="text link",i.appendChild(o),i}}Breadcrumb.html=o()},function(t){t.exports='<nav class="breadcrumb semi">\n\t<nav key="static" class="container clickable home {{isHomeActiveClass}}" onclick="_goToHome">\n\t\t<span key="staticLogo" class="icon icon-nasa-logo"></span>\n\t\t<h1 class="text uppercase">{$title}</h1>\n\t</nav>\n</nav>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{StoryBaseContentBlock:function(){return StoryBaseContentBlock}});var s=i(2);i(500);class StoryBaseContentBlock extends s.BaseComponent{constructor(t,e={config:{info:{}}}){e.isVisible=!0,super(t,null,e),this._config.info.onEnter&&(this.onEnter=async()=>await this._config.info.onEnter(t,this)),this._config.info.onLeave&&(this.onLeave=async()=>await this._config.info.onLeave(t,this)),this.bindFunctions(["onEnter","onLeave","onClick"])}init(){super.init(this._config.info),this._element.classList.add("content-block","{{isVisibleClass}}"),Array.isArray(this._config.info.classList)&&this._element.classList.add(...this._config.info.classList),this._setVariables(this._element,!1),(this._config.info.clickable||this._config.info.func)&&(this._element.classList.add("clickable"),this._element.addEventListener("click",this.onClick))}async onEnter(){}async onLeave(){}async onClick(){await this._config.info.func(this._app,this)}}},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{HintBlock:function(){return HintBlock}});var s=i(2),n=i(502),o=i.n(n);i(503);class HintBlock extends s.StoryBaseContentBlock{constructor(t,e={}){super(t,{iconBefore:"icon-greater",iconAfter:"icon-greater",...e}),Object.assign(this._state,{text:this._config.info.text||"Scroll to continue",isIconBeforeVisibleClass:this._class.isVisible[this._config.info.iconBeforeText||!1],isIconAfterVisibleClass:this._class.isVisible[this._config.info.iconAfterText||!1]})}}HintBlock.html=o()},function(t){t.exports='<div class="hint-block {$class}">\n\t<span class="icon before {{iconBefore}} {{isIconBeforeVisibleClass}}"></span>\n\t<span class="text">{{text}}</span>\n\t<span class="icon after {{iconAfter}} {{isIconAfterVisibleClass}}"></span>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{ToggleBlock:function(){return ToggleBlock}});var s=i(2),n=i(505),o=i.n(n);i(506);class ToggleBlock extends s.StoryBaseContentBlock{constructor(t,e={}){super(t,{isSelected:!1,...e}),this._class.isSelectedClass={true:"selected",false:""},this._config.info.selected=Boolean(this._config.info.selected),Object.assign(this._state,{isSelectedClass:this._class.isSelectedClass[this._state.isSelected]})}async onEnter(){await super.onEnter(),this._config.info.selected!==this._state.isSelected&&await this.onClick()}async onLeave(){await super.onLeave(),this._state.isSelected&&await this.onClick()}async onClick(){await super.onClick(),this._state.isSelected?(this.unselect(),console.log("unselect")):(this.select(),console.log("select"))}select(){this.setState({isSelected:!0,isSelectedClass:this._class.isSelectedClass.true})}unselect(){this.setState({isSelected:!1,isSelectedClass:this._class.isSelectedClass.false})}}ToggleBlock.html=o()},function(t){t.exports='<div class="clickable toggle-block {{isSelectedClass}}">\n\t<button>\n\t\t{$text}\n\t</button>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{TitleBlock:function(){return TitleBlock}});var s=i(2),n=i(508),o=i.n(n);class TitleBlock extends s.StoryBaseContentBlock{}TitleBlock.html=o()},function(t){t.exports='<div class="title-block">\n\t<h1 class="title">{$title}</h1>\n\t<h2 class="subtitle">{$subtitle}</h2>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{ImageBlock:function(){return ImageBlock}});var s=i(2),n=i(510),o=i.n(n);i(511);class ImageBlock extends s.StoryBaseContentBlock{onClick(){const t=this._element.cloneNode(!0);t.classList.add("fullscreen"),t.classList.remove("clickable"),this._app.getComponent("overlay").setContent(t),this._app.getComponent("overlay").show()}}ImageBlock.html=o()},function(t){t.exports='<div class="image-block">\n\t<img class="{$className}" src="{$src}" alt="{$alt}">\n\t<span class="title">{$title}</span>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{DescriptionBlock:function(){return DescriptionBlock}});var s=i(2),n=i(513),o=i.n(n);i(514);class DescriptionBlock extends s.StoryBaseContentBlock{constructor(t,e={}){super(t,{hasMore:!1,isMoreVisible:!1,...e}),this._class.hasMoreClass={true:"",false:"hidden"},this._more={isVisible:{moreMessage:"Show Less",moreIcon:"icon-minus",moreClass:""},isHidden:{moreMessage:"Show More",moreIcon:"icon-plus",moreClass:"hidden"}},Object.assign(this._state,this._more.isHidden,{hasMoreClass:this._class.hasMoreClass[this._state.hasMore]})}init(){super.init();const t=Boolean(this._config.info.more);this.setState({hasMore:t,hasMoreClass:this._class.hasMoreClass[t]})}showMore(){this.setState({isMoreVisible:!0,...this._more.isVisible})}hideMore(){this.setState({isMoreVisible:!1,...this._more.isHidden})}toggleMore(){this._state.isMoreVisible?this.hideMore():this.showMore()}}DescriptionBlock.html=o()},function(t){t.exports='<div class="description-block">\n\t<div key="header" class="header">\n\t\t<h2 class="title">{$title}</h2>\n\t\t<h3 class="subtitle semi">{$subtitle}</h3>\n\t</div>\n\t<div key="body" class="body">\n\t\t<div class="description">{$description}</div>\n\t\t<span class="more-description small {{moreClass}}" >\n\t\t\t{$more}\n\t\t</span>\n\t\t<span class="clickable more-toggle {{hasMoreClass}}" onclick="toggleMore">\n\t\t\t<span class="x-small more-message">\n\t\t\t\t{{moreMessage}}\n\t\t\t</span>\n\t\t\t<span class="button clickable icon more-icon {{moreIcon}}"></span>\n\t\t</span>\n\t</div>\n\t<div key="footer" class="footer"></div>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{ReplayButtonBlock:function(){return ReplayButtonBlock}});var s=i(2),n=i(516),o=i.n(n);i(517);class ReplayButtonBlock extends s.StoryBaseContentBlock{init(){this._config.info.text||(this._config.info.text=this._config.info.fromStart?"Restart Story":"Replay Animation"),super.init(this._config.info)}async onClick(){const t=this._app.getManager("router");this._config.info.fromStart?t.navigate(t.currentRoute.url):t.reload()}}ReplayButtonBlock.html=o()},function(t){t.exports='<div class="clickable replay-button-block" onclick="onClick">\n\t<button>\n\t\t<span class="icon icon-replay"></span>\n\t\t<span class="text semi">{$text}</span>\n\t</button>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{Story:function(){return Story}});var s=i(2);i(519);class Story extends s.Carousel{constructor(t,e){super(t,null,{isCloseButtonVisible:!0,closeButtonText:"Close",...e}),this._id="",this._info=[],this._config.navigationButtons.next.text=s.AppUtils.isPrimaryTouch()?"Swipe to continue":"Scroll to continue",this._onSlideChange=async(t,e=!1)=>{const i={slide:this._children.slides[t].dataset.id};e?i.time=this._app.getManager("time").getTimeUrl():i.__remove=["time"];const s=this._app.getManager("router"),n=s.currentRoute;await s.navigate(i,n.url)}}init(){super.init();this._element.querySelector(".close-button")?.setAttribute("aria-label","Close story"),this._setVariables(this._children.carousel,!1)}_setExpandToggleAriaLabel(){const t=this._element.querySelectorAll(".mobile-collapse"),e=this._state.isCollapsed?"Collapse story panel":"Expand story panel";t.forEach((t=>t.setAttribute("aria-label",e)))}_toggleCollapse(){this._setExpandToggleAriaLabel(),super._toggleCollapse()}async onRouteChange(t,{cancelToken:e,slide:i,id:s}={}){if(e&&e.isCanceled)return;if(this.clear(),this._info=t,this._id=s,this._app.getManager("router").configs.locked){const t=!1;this.setState({isCloseButtonVisible:t,isCloseButtonVisibleClass:this._class.isVisible[t]})}await this.setUp(),this._setExpandToggleAriaLabel();const n=i&&this._children.slides.findIndex((t=>t.dataset.id===i))||0;void 0!==t[n]?.rate&&this._app.getManager("time").setTimeRate(t[n].rate),await this.goToSlide(n)}async onQueryChange({cancelToken:t,slide:e}={}){if(t&&t.isCanceled)return;const i=e&&this._children.slides.findIndex((t=>t.dataset.id===e))||0;void 0!==this._info[i]?.rate&&this._app.getManager("time").setTimeRate(this._info[i].rate),await this.goToSlide(i)}async createBlockContent(t,e){let i;switch(t.type){case"title":i=new s.TitleBlock(this._app,{config:{info:t}});break;case"description":i=new s.DescriptionBlock(this._app,{config:{info:t}});break;case"image":case"diagram":i=new s.ImageBlock(this._app,{config:{info:t}});break;case"toggle":i=new s.ToggleBlock(this._app,{config:{info:t}});break;case"hint":i=new s.HintBlock(this._app,{config:{info:t}});break;case"replay":i=new s.ReplayButtonBlock(this._app,{config:{info:t}})}return await i.init(),this._onEnter[e].push(i.onEnter),this._onLeave[e].push(i.onLeave),i.element}async createSlideContent(t,e){if(!t.htmlFile){const i=document.createDocumentFragment();for(let s=0;s<t.content.length;s++){const n=t.content[s],o=await this.createBlockContent(n,e);o&&i.appendChild(o)}return i}}async setUp(){for(let t=0;t<this._info.length;t++){const{id:e,type:i,classList:s=[],onEnter:n,onLeave:o}=this._info[t];this._onEnter[t]=[],this._onLeave[t]=[],n&&this._onEnter[t].push((()=>n(this._app,this)));const a=await this.createSlideContent(this._info[t],t);s.push("grid-layout","simple-grid"),o&&this._onLeave[t].push((()=>o(this._app,this))),this.addSlide({id:e,type:i,classList:s,content:a},{isFirst:0===t,isLast:t===this._info.length-1})}}close(){const t=this._app.getManager("router");t.navigate(t.homeRoute)}async onLeave(t){if(await super.onLeave(t),"number"!=typeof t){this._app.getManager("router").removeQuery(["slide"])}}_updateTooltipsProps(){const{slideType:t}=this._state,e=getComputedStyle(document.body),i=-(parseFloat(e.getPropertyValue("--gridHeaderHeight"))+20);this._progressTooltip.setProps({offset:"overlay"===t?[0,i]:[0,10]})}}},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{BaseManager:function(){return BaseManager}});i(5),i(2);class BaseManager{constructor(t){this._app=t,this._pioneer=t.pioneer,this._eventNames=[],this._callbacks={}}get pioneer(){return this._pioneer}get app(){return this._app}_initCallbacks(){for(let t=0;t<this._eventNames.length;t++)this._callbacks[this._eventNames[t]]=[]}registerCallback(t,e){"function"!=typeof e||this._eventNames.indexOf(t)<0||this._callbacks[t].includes(e)||this._callbacks[t].push(e)}removeCallback(t,e){if("function"!=typeof e||this._eventNames.indexOf(t)<0)return;const i=this._callbacks[t].indexOf(e);i>-1&&this._callbacks[t].splice(i,1)}triggerCallbacks(t,e=[]){for(let i=this._callbacks[t].length-1;i>=0;i--){(0,this._callbacks[t][i])(...e)}}bindFunctions(t=[]){const e=this;for(let i=0;i<t.length;i++){const s=t[i];e[s]=e[s].bind(this)}}destroy(){this.__destroy()}__destroy(){}}},function(t,e,i){"use strict";i.r(e),i.d(e,{SelectionManager:function(){return SelectionManager}});i(5);var s=i(2);class SelectionManager extends s.BaseManager{constructor(t,e){super(t),this._scene=e,this._id=null,this._isClickable=!0,this._isSuppressed=!1,this._eventNames.push("3dselection"),this._initCallbacks(),this.bindFunctions(["setSuppress","handle3DSelection"])}setScene(t){this._scene=t}selectEntity(t){const e=this._id;if(t!==e){const i=new CustomEvent("selectionupdate",{detail:{new:t,old:this._id}});window.dispatchEvent(i),this._id=t,this._switchSelectionClass(this._id,e)}}unselect(){const t=this._id;if(null!==t){const t=new CustomEvent("unselect",{old:this._id});window.dispatchEvent(t)}this._id=null,this._switchSelectionClass(this._id,t)}getCurrentId(){return this._id}setClickable(t){this._isClickable=t}init3Dcallback(t){t.setSelectionCallback(this.handle3DSelection)}_getLink(t){return`/${t}`}setSuppress(t){this._isSuppressed=t}handle3DSelection(t){if(this._isClickable){if(!this._isSuppressed&&null!==t){const e=this._app.getManager("router"),i=t.getName(),s=this._getLink(i),n=e.currentRoute.url.endsWith(i)?e.currentRoute.url:`${s}`,o=e.navigate({},n,{keepTime:!0});this.triggerCallbacks("3dselection",[o,t])}this._isSuppressed=!1}}_switchSelectionClass(t,e){if(null!==e){const t=this._scene.get(e);if(null!==t){const e=t.getComponentByType("div").getDiv();e&&e.classList.remove("selection")}}if(null!==t){const e=this._scene.get(t);if(null!==e){const t=e.getComponentByType("div").getDiv();t&&t.classList.add("selection")}}}}},function(t,e,i){"use strict";i.r(e),i.d(e,{LabelManager:function(){return LabelManager}});i(5);var s=i(2);i(523);class LabelManager extends s.BaseManager{constructor(t,e){super(t),this._scene=e,this._eventNames.push("hoverchange","labelclicked"),this._initCallbacks(),this._iconMap={Universe:"no-icon",Galaxy:"no-icon",Star:"no-icon",Barycenter:"icon-circle-white-small","Landing site":"icon-hexagon",Moon:"icon-circle-white-small",Asteroid:"icon-circle-white-small","Dwarf Planet":"icon-circle-white-small",Comet:"icon-circle-white-small",Spacecraft:"icon-hexagon",Planet:"icon-circle-",Default:"icon-circle-white-small"},this._weightMap={Universe:"100",Galaxy:"100",Star:"100",Barycenter:"0","Landing site":"5",Asteroid:"15",Comet:"15",Moon:"25","Dwarf Planet":"28",Spacecraft:"30",Planet:"50"},this._weights={},this._algorithm=this.Quadtree,this._quadTree=new Quadtree({x:0,y:0,width:window.innerWidth,height:window.innerHeight},2,8),this._labels={},this._collidingLabels=[],this._frameCount=0,this._frameStep=1,this._frameCycle=3*this._frameStep,this._activeClass="active",this._hiddenClass="hidden",this._overlapThreshold=.25,this._isClickable=!0,this._isPaused=!1,this._allLabelsHidden=!1,this._exceptions=new Set,this._centerBoundingRect={name:"center",x:0,y:0,width:50,height:50},this.bindFunctions(["update","toggleLabels","toggleLabelForEntity","toggleIcons","toggleIconForEntity","_clickCallback","setUpLabel","removeLabel","setUpIcon"])}setEntities(t){this._labels={};for(let e=t.size-1;e>=0;e--){const i=t.get(e);this.addEntity(i)}}addEntity(t){t.getComponentByType("div")&&(this._labels[t.getName()]={name:t.getName(),el:t.getComponentByType("div").getDiv(),x:0,y:0,width:0,height:0,check:!1,collisions:[],isHidden:!1,isClickable:!0})}removeEntity(t){void 0!==this._labels[t.getName()]&&delete this._labels[t.getName()]}setAlgorithm(t){this._algorithm=t}setScene(t){this._scene=t}setWeights(t,e=!0){e&&(this._weights={});for(const e of Object.keys(t)){const i=t[e].category;this._weights[e]={},void 0!==this._weightMap[i]?this._weights[e].weight=this._weightMap[i]:this._weights[e].weight=1}}removeWeights(t){for(const e of Object.keys(t))this._weights[e]&&delete this._weights[e]}getWeight(t){return Object.keys(this._weights).length<=0?0:void 0!==this._weights[t]?this._weights[t].weight:0}isExisting(t){return void 0!==this._labels[t]||(delete this._labels[t],!1)}setUpLabel(t){const e=this._app.getManager("content"),i=this._app.getManager("layer");this.addEntity(t),this.setLabelProps({getLabelClass:t=>`no-select ${e.getClassName(t)??""}`},[t.getName()]);const s=t.getName(),n=i.getLayer("labels");null===n||n.visible||this.toggleLabelForEntity(!1,s)}removeLabel(t){this.removeEntity(t)}setUpIcon(t){const e=this._app.getManager("layer"),i=t.getName(),s=e.getLayer("icons");null===s||s.visible||this.toggleIconForEntity(!1,i)}setLabelClickable(t,e){this._labels[t]&&(this._labels[t].isClickable=e,this._labels[t].el.classList.toggle("clickable",e))}setClickable(t){this._isClickable=t;for(let e=0,i=this._scene.getNumEntities();e<i;e++){const i=this._scene.getEntity(e).get("div");if(null!==i){const e=i.getDiv();t?e.classList.remove("unclickable"):e.classList.add("unclickable")}}}addException(t){this._exceptions.add(t)}removeException(t){this._exceptions.delete(t)}addExceptions(t){t.forEach((t=>this._exceptions.add(t)))}removeExceptions(t){t.forEach((t=>this._exceptions.delete(t)))}toggleLabels(t,{scene:e}={}){void 0===e&&(e=this._scene);for(let i=0;i<e.getNumEntities();i++)this.toggleLabelForEntity(t,e.getEntity(i).getName(),{scene:e})}toggleLabelForEntity(t,e,{scene:i}={}){let s=i;void 0===s&&(s=this._scene);const n=s.getEntity(e),o=n.get("div");this._exceptions.has(n.getName())||null!==o&&(t?o.getDiv().lastElementChild?.classList.remove("hidden"):o.getDiv().lastElementChild?.classList.add("hidden"))}toggleIcons(t,{scene:e}={}){void 0===e&&(e=this._scene);for(let i=0;i<e.getNumEntities();i++)this.toggleIconForEntity(t,e.getEntity(i).getName(),{scene:e})}toggleIconForEntity(t,e,{scene:i}={}){let s=i;void 0===s&&(s=this._scene);const n=s.getEntity(e),o=n.get("div");this._exceptions.has(n.getName())||null!==o&&(t?o.getDiv().firstElementChild?.classList.remove("hidden"):o.getDiv().firstElementChild?.classList.add("hidden"))}_getLink(t){return`/${t}`}_clickCallback(t){const e=this._app.getManager("router"),i=this._getLink(t.getName()),s=`${"string"==typeof i?i:i.path??""}`,n=i.options??{keepTime:!0};e.navigate({},s,n)}setLabelProps({getLabelClass:t,getIconClass:e,getTextClass:i,handleClick:s,handleTouch:n,handleMouseEnter:o,handleMouseLeave:a}={},r=Object.keys(this._labels)){const l=this._scene.get("camera").getComponentByType("camera");for(const c of r){const r=this._scene.getEntity(c),h=this._app.getManager("content").getEntityInfo(c),u=r.get("div");if(null===u)continue;u.setActiveCamera(l);const d=u.getDiv(),p="function"==typeof t?t(c):"";d.className+=` ${p} clickable`;const _=document.createElement("span"),g=document.createElement("span"),m=this._iconMap[h?.category]??this._iconMap.Default,y="Planet"===h?.category?c:"",f="function"==typeof e?e(c):"";_.className=`icon ${m}${y} ${f}`,g.className=`text ${"function"==typeof i?i(c):""}`,g.innerHTML=h?.displayName||h?.iauName||d.innerHTML,d.innerHTML="",d.appendChild(_),d.appendChild(g);const b=async t=>{const e=this._labels[c];this._isClickable&&e?.isClickable&&null!==this._clickCallback&&(this._clickCallback(r),t.preventDefault(),this.triggerCallbacks("labelclicked",[!0]))},T=async t=>{const e=this._labels[c];this._isClickable&&e?.isClickable&&(this.app.isDragging()||this.app.isTouchMax()||null===this._clickCallback||(this._clickCallback(r),t.preventDefault(),this.triggerCallbacks("labelclicked",[!0])))};d.addEventListener("mousedown",(t=>{t.preventDefault(),this.triggerCallbacks("labelclicked",[!1])})),d.addEventListener("touchstart",(t=>{t.preventDefault(),this.triggerCallbacks("labelclicked",[!1])}));const v=()=>this.triggerCallbacks("hoverchange",[c,!0]),E=()=>this.triggerCallbacks("hoverchange",[c,!1]),x="function"==typeof s?t=>s(t,c):b,S="function"==typeof n?t=>n(t,c):T,C="function"==typeof o?t=>o(t,c):v,w="function"==typeof a?t=>a(t,c):E;null!==s&&"true"!==d.getAttribute("hasClickListener")&&(d.setAttribute("hasClickListener","true"),d.addEventListener("click",x)),null!==n&&"true"!==d.getAttribute("hasTouchEndListener")&&(d.setAttribute("hasTouchEndListener","true"),d.addEventListener("touchend",S)),null!==o&&"true"!==d.getAttribute("hasMouseEnterListener")&&(d.setAttribute("hasMouseEnterListener","true"),d.addEventListener("mouseenter",C)),null!==a&&"true"!==d.getAttribute("hasMouseLeaveListener")&&(d.setAttribute("hasMouseLeaveListener","true"),d.addEventListener("mouseleave",w)),"true"!==d.getAttribute("hasMouseMoveListener")&&(d.setAttribute("hasMouseMoveListener","true"),d.addEventListener("mousemove",(t=>{t.preventDefault()}),!0))}}addClassToLabels(t,e){for(const i of e){const e=this._scene.getEntity(i)?.get("div")?.getDiv();e?.classList.add(t)}}removeClassFromLabels(t,e){for(const i of e){const e=this._scene.getEntity(i)?.get("div")?.getDiv();e?.classList.remove(t)}}getItemAtCenter(){this._centerBoundingRect.x=window.innerWidth/2-this._centerBoundingRect.width/2,this._centerBoundingRect.y=window.innerHeight/2-this._centerBoundingRect.height/2;const t=this._quadTree.retrieve(this._centerBoundingRect);for(let e=0;e<t.length;e++){const i=t[e];if(i.y+=i.height/2,i.width=this._centerBoundingRect.width,i.height=this._centerBoundingRect.height,this._checkCollision(i,this._centerBoundingRect))return i}return null}_buildQuadtree(){this._quadTree.clear();for(const[t,e]of Object.entries(this._labels)){if(this._isPaused)return;const t=e.el,i=t.getBoundingClientRect();if("0"===t.style.opacity){e.check=!1;continue}if(this._isOutOfWindow(i)){e.check=!1;continue}e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height,e.check=!0,e.collisions=[],e.isHidden=!1;const s=this._scene.get("camera","camera"),n=this._scene.get(e.name);e.z=n.getCameraSpacePosition(s).magnitude(),this._quadTree.insert(e)}}_checkWithQuadtree(){for(const t of Object.keys(this._labels)){if(this._isPaused)return;const e=this._labels[t];if(!e.check)continue;const i=this._quadTree.retrieve(e);for(let t=0;t<i.length;t++){const s=i[t];s.check&&this._checkCollision(s,e)&&e.name!==s.name&&this._overlap(s,e)>=this._overlapThreshold&&this._addCollision(s.name,e.name)}}}_addCollision(t,e){this._collidingLabels.indexOf(t)<0&&this._collidingLabels.push(t),this._collidingLabels.indexOf(e)<0&&this._collidingLabels.push(e),this._labels[t]?.collisions.push(e)}_checkCollision(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}_fixCollisions(){this._sort();for(let t=0;t<this._collidingLabels.length;t++){if(this._isPaused)return;const e=this._collidingLabels[t];if(this.isExisting(e)&&!this._labels[e].isHidden){this._showLabel(e);for(let t=0;t<this._labels[e].collisions.length;t++){const i=this._labels[e].collisions[t];this._hideLabel(i)}}}this._restoreLabels()}_sort(){this._collidingLabels.sort(((t,e)=>this.getWeight(e)-this.getWeight(t)!=0?this.getWeight(e)-this.getWeight(t):this.getZ(t)-this.getZ(e)))}_overlap(t,e){const i=(Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*(Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return i/(t.width*t.height+e.width*e.height-i)}_isOutOfWindow(t){return t.x>window.innerWidth||t.x+t.width<0||t.y>window.innerHeight||t.y+t.height<0}_restoreLabels(){if(!0!==this._allLabelsHidden)for(const t of Object.keys(this._labels)){const e=this._labels[t];e.isHidden||this._showLabel(e.name),0===e.collisions.length&&this._showLabel(e.name)}}_showLabel(t){const e=this.pioneer.get("main",t).getComponentByType("div").getDiv();e.classList.add(this._activeClass),e.classList.remove(this._hiddenClass),this._labels[t].isHidden=!1}_hideLabel(t){if(this._exceptions.has(t))return;const e=this.pioneer.get("main",t);if(null===e)return;const i=e.getComponentByType("div").getDiv();i.classList.add(this._hiddenClass),i.classList.remove(this._activeClass),this._labels[t].isHidden=!0}getZ(t){if(this.isExisting(t))return this._labels[t].z}stop(){this._isPaused=!0}start(){this._isPaused=!1}update(){this._isPaused||(0===this._frameCount?(this._collidingLabels=[],this._buildQuadtree()):this._frameCount===this._frameCycle/3?this._checkWithQuadtree():this._frameCount===2*this._frameCycle/3&&this._fixCollisions(),this._frameCount++,this._frameCount%=this._frameCycle)}}LabelManager.Quadtree=1,LabelManager.BruteForce=0},function(){!function(t,e){function i(t,e,i,s){this.max_objects=e||10,this.max_levels=i||4,this.level=s||0,this.bounds=t,this.objects=[],this.nodes=[]}i.prototype.split=function(){var t=this.level+1,s=e.round(this.bounds.width/2),n=e.round(this.bounds.height/2),o=e.round(this.bounds.x),a=e.round(this.bounds.y);this.nodes[0]=new i({x:o+s,y:a,width:s,height:n},this.max_objects,this.max_levels,t),this.nodes[1]=new i({x:o,y:a,width:s,height:n},this.max_objects,this.max_levels,t),this.nodes[2]=new i({x:o,y:a+n,width:s,height:n},this.max_objects,this.max_levels,t),this.nodes[3]=new i({x:o+s,y:a+n,width:s,height:n},this.max_objects,this.max_levels,t)},i.prototype.getIndex=function(t){var e=-1,i=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,n=t.y<s&&t.y+t.height<s,o=t.y>s;return t.x<i&&t.x+t.width<i?n?e=1:o&&(e=2):t.x>i&&(n?e=0:o&&(e=3)),e},i.prototype.insert=function(t){var e,i=0;if(void 0===this.nodes[0]||-1===(e=this.getIndex(t))){if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels)for(void 0===this.nodes[0]&&this.split();i<this.objects.length;)-1!==(e=this.getIndex(this.objects[i]))?this.nodes[e].insert(this.objects.splice(i,1)[0]):i+=1}else this.nodes[e].insert(t)},i.prototype.retrieve=function(t){var e=this.getIndex(t),i=this.objects;if(void 0!==this.nodes[0])if(-1!==e)i=i.concat(this.nodes[e].retrieve(t));else for(var s=0;s<this.nodes.length;s+=1)i=i.concat(this.nodes[s].retrieve(t));return i},i.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t+=1)void 0!==this.nodes[t]&&this.nodes[t].clear();this.nodes=[]},t.Quadtree=i}(window,Math)},function(t,e,i){"use strict";i.r(e),i.d(e,{RouteManager:function(){return RouteManager}});var s=i(525),n=i.n(s),o=i(2);class RouteManager extends o.BaseManager{constructor(t){super(t),this._router=new(n())(null,!0),this._previousRoute=null,this._currentRoute={},this._firstLoad=!0,this._query={},this._configs={},this._validQueries=[],this._homeRoute="/home",this._queryCallbacks={},this._previousView=null,this._currentView=null,this.bindFunctions(["navigate","onRootRoute","onNotFound","leave"])}get homeRoute(){return this._homeRoute}get previousRoute(){return this._previousRoute}get currentRoute(){return this._currentRoute}get query(){return this._query}get configs(){return this._configs}get currentView(){return this._currentView}set currentView(t){this._currentView=t}get previousView(){return this._previousView}init(t,e){this._router.hooks({before:async e=>{this._previousRoute={...this._currentRoute},this._currentRoute=this._router.lastRouteResolved()||{},this._currentRoute.url&&(this._currentRoute.url=this._currentRoute.url.replace(/(\/)+/,"/")),this.addQuery(this.parseQuery(this.currentRoute.query)),"function"==typeof t&&await t(this._currentRoute,this._previousRoute),e()},after:async()=>{"function"==typeof e&&await e(this._currentRoute,this._previousRoute),this._firstLoad=!1}}),this._router.on(this.onRootRoute).notFound(this.onNotFound).on("milky_way",this.onNotFound).on("observable_universe",this.onNotFound)}leave(t){t.cancelToken.cancel()}onRootRoute(t){this.reroute(this._homeRoute,t)}onNotFound(t){let e=this._homeRoute;t&&(e+="?"+t),this._router.navigate(e)}replaceState(t){history.replaceState({},"",t)}reroute(t,e=""){const i=o.AppUtils.filterObject(this._configs,(t=>void 0!==t));let s;s="string"!=typeof e?this.buildQuery({...e,...i}):this.buildQuery(i)+(e?"&"+e.replace("?",""):"");const n=window.location.pathname;history.replaceState(s,"",`${n}#${t}${s}`),this._router.resolve()}addCancelToken(t){const e=t||{};return e.cancelToken=new o.CancelToken,e}lastRouteResolved(){return this._router.lastRouteResolved()}lastPathResolved(){const t=this._router.lastRouteResolved();return t.query?t.url+"?"+t.query:t.url}getOnlyURL(t){let e=t;const i=t.split("#");return e=i.length>1?this._cleanGETParam(i[1]):this._cleanGETParam(i[0]),e}_cleanGETParam(t){return t.split(/\?(.*)?$/)[0]}getValidQueries(){return this._validQueries}setValidQueries(t){this._validQueries=t}parseQuery(t){if(!t)return{};t.replace("?","");return t.split("&").reduce(((t,e)=>{const i=e.split("=");if(i.length>1){let e=i[1].trim();switch(e.toLowerCase()){case"true":e=!0;break;case"false":e=!1;break;case"undefined":e=void 0;break;case"null":e=null;break;default:{const t=Number(e);Number.isNaN(t)||(e=t);break}}const s=i[0].trim();s in this._configs?void 0===this._configs[s]&&(this._configs[s]=e):t[s]=e}return t}),{})}buildQuery(t){let e="";for(const[i,s]of Object.entries(t))e+="&"+i+"="+s;return e=e.replace("&","?"),e}addQuery(t){return this._query={...this._query,...t},this._query}removeQuery(t=[]){return t.forEach((t=>delete this._query[t])),this._query}addConfigs(t){return this._configs={...this._configs,...t},this._configs}removeConfigs(t=[]){return t.forEach((t=>delete this._configs[t])),this._configs}updateQuery(t){t.__remove&&("all"===t.__remove?this._query={}:this.removeQuery(t.__remove),delete t.__remove);const e=o.AppUtils.filterObject(this._configs,(t=>void 0!==t));return{...this.addQuery(t),...e}}updateQueryPath(t,e=""){return(e||this._router.lastRouteResolved().url).replace(/(\/)(?=\/*\1)/,"")+this.buildQuery(this.updateQuery(t))}async resetView(t,e){if(this._previousView=this._currentView,this._currentView=t,this._currentView!==this._previousView){null!==this._previousView&&await this._app.getView(this._previousView).onLeave(e),await this._app.getView(this._currentView).onEnter(e);const i=this._app.getViews();for(let e=i.length-1;e>=0;e--){const s=i[e];this._app.getView(s).setEnabled(s===t)}}}async handleRoute(t,e,i){e||(e=this.addCancelToken(e),this._currentRoute.params=e);let s={};i&&(s=this.parseQuery(i)),await this.resetView(t,{...e,...s,...this._configs}),await this.goToView(t,e,{...s,...this._configs})}stillOnRoute(t){const e=this._currentRoute.url.match(/^\/([^!/]*)/);return null!==e&&void 0!==e[1]&&e[1]===t}urlChanged(t,e){return this.getOnlyURL(t)!==this.getOnlyURL(e)}routeChanged(t,e){if(""===t&&!e)return!0;if(!e||o.AppUtils.isEmptyObject(e))return!0;if(t.url)return t.url!==e.url;const i=o.AppUtils.deepCopy(t),s=o.AppUtils.deepCopy(e);return!o.AppUtils.deepEqual(i,s)}queryChanged(t,e){if(!e)return!0;const i=o.AppUtils.deepCopy(t),s={};for(const t in i)"function"==typeof i[t].toString&&(i[t]=i[t].toString());return e.split("&").forEach((t=>{const e=t.split("=");s[e[0]]=e[1]})),!o.AppUtils.deepEqual(i,s)}async goToView(t,e,i){this.routeChanged(this.currentRoute,this.previousRoute)?await this._app.getView(t).onRouteChange({...e,...i}):this.queryChanged(i,this.previousRoute.query)&&await this._app.getView(t).onQueryChange({...e,...i})}addRoutes(t){for(let e=0;e<t.length;e++){const{route:i,view:s}=t[e];this._router.on(i,(async(t,e)=>{await this.handleRoute(s,t,e)}),{before:async(t,e)=>{await this.before(t,e,s)},leave:this.leave})}}before(t,e,i){let s={};this._currentRoute.query&&(s=this.parseQuery(this._currentRoute.query)),e=this.addCancelToken(e);const n=this._app.getView(i)?.validateQuery({...e,...s});n||(e.cancelToken.cancel(),"function"==typeof t&&t(!1)),"function"==typeof t&&t()}subscribeToQuery(t,e){if("function"==typeof e)return this._queryCallbacks[t]||(this._queryCallbacks[t]=[]),this._queryCallbacks[t].includes(e)||this._queryCallbacks[t].push(e),()=>{const i=this._queryCallbacks[t].indexOf(e);this._queryCallbacks[t].splice(i,1)}}start(){this._router.resolve()}navigate(t,e="",i={}){if(o.AppUtils.isEmptyObject(i)||"string"==typeof t&&(e=o.AppUtils.cleanPathDuplicate(`${e}/${t}`),t={}),i.__remove&&(t.__remove=i.__remove),i.keepTime){const i=this._app.getManager("time");this.query.time&&i&&(e.includes("time=")||(t.time=t.time||i.getTimeUrl()),e.includes("rate=")||(t.rate=t.rate||i.getTimeRate()))}return this._navigate(t,e)}_navigate(t,e=""){if("string"==typeof t){const i=this.lastPathResolved();let s=t;if(t.startsWith("/")||(s="/"+t),t.includes(e)||(s=e+t),i!==s){const t=s.split("?");if(t.length>1)this._query=this.parseQuery(t[1]);else{this._query={};const t=o.AppUtils.filterObject(this._configs,(t=>void 0!==t));s+=this.buildQuery(t)}return this._router.navigate(s),!0}return!1}return this.navigate(this.updateQueryPath(t,e),e)}returnHome(t=!0){const e=t?this.buildQuery(this.query):"";this.navigate(e)}async reload(t=!0,e=!1){const i=await this._app.getView(this._currentView),{params:s,query:n}=this._router.lastRouteResolved();let o={};!e&&n&&(o=this.parseQuery(n)),t?i.onQueryChange({...s,...o}):i.onRouteChange({...s,...o})}}},,function(t,e,i){"use strict";i.r(e),i.d(e,{ContentManager:function(){return ContentManager}});var s=i(215),n=i.n(s),o=i(2);class ContentManager extends o.BaseManager{constructor(t){super(t),this._entityList=null,this._entitiesByCategory={},this._entitiesBySubCategory={},this._stories={},this._storyList=null,this._target=null,this._context={},this._context.events={},this._context.orderedEvents={},this._context.eventDesc={},this._context.story={},this._folders={description:"/",event:"/",stories:"/"}}getEntityList(){return this._entityList}setEntityList(t){for(const[e,i]of Object.entries(t))!0===i.disabled&&delete t[e];this._entityList=t,Object.keys(this._entityList).forEach((t=>{const{category:e}=this._entityList[t];this._entitiesByCategory[e]?this._entitiesByCategory[e].push(this._entityList[t]):this._entitiesByCategory[e]=[this._entityList[t]];let{subcategory:i}=this._entityList[t];i&&""!==i||(i=e),this._entitiesBySubCategory[i]?this._entitiesBySubCategory[i].push(this._entityList[t]):this._entitiesBySubCategory[i]=[this._entityList[t]]}))}getEntityInfo(t){return t in this._entityList?this._entityList[t]:null}async getEntityDesc(t){let e=null;try{e=await o.AppUtils.loadJSON(this._folders.description+t+".json")}catch(t){e=null}return e}setFolders(t={}){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=o.AppUtils.addEndToPath(t[e]),this._folders[e]=t[e])}getStoryList(){return this._storyList}setStoryList(t){this._storyList=t}getStory(t){if(!t)throw new Error("[ContentManager.getStory]: id is required.");if(!this._stories[t])throw new Error(`[ContentManager.getStory]: Cannot find story with id ${t}.`);return this._context.story=this._stories[t],this._context.story}setStories(t){this._stories=t}async loadDescriptions(t,e){for(let i=0;i<t.length;i++){const s=t[i],n=await this.getEntityDesc(s);if(e&&e.isCanceled)return;this._context[s]=n}}async loadEvents(t,e={},i){if(!t)return;const s=o.AppUtils.addEndToPath(this._folders.event+t);if(e.all&&(this._target!==t||o.AppUtils.isEmptyObject(this._context.events))){let a=null;try{a=await o.AppUtils.loadJSON(s+e.all)}catch(t){a=null}if(i&&i.isCanceled)return;if(this._context.events=a,null!==this._context.events){const e=[];for(const[i,s]of Object.entries(this._context.events))s.start?(s.start=n().tz(s.start,"Etc/UTC"),s.end&&(s.end=n().tz(s.end,"Etc/UTC")),e.push(s)):console.error("[Content Manager] Error: event missing start date "+t+" "+i);e.sort(((t,e)=>t.start.valueOf()-e.start.valueOf())),this._context.orderedEvents=e}else this._context.orderedEvents=null}if(e.event){const t=this._context.events[e.event],n=t&&t.template?t.template:e.event;let a=null;try{a=await o.AppUtils.loadJSON(s+n)}catch(t){a=null}if(i&&i.isCanceled)return;this._context.eventDesc=a}this._target=t}getSpheroidLayers(t){return this._entityShperoidLayersList[t]}setSpheroidLayers(t){this._entityShperoidLayersList=t}getSpheroidFeatures(t){return this._entityShperoidFeaturesList[t]||[]}setSpheroidFeatures(t){this._entityShperoidFeaturesList=t}getColorClass(t){let e="";if(!this.getEntityInfo(t))return e;switch(this.getEntityInfo(t).category){case"Asteroid":e="asteroid";break;case"Instrument":case"Spacecraft":e="spacecraft";break;case"Planet":e=t;break;case"Dwarf Planet":e="dwarf-planet";break;case"Comet":e="comet";break;case"Barycenter":case"Moon":e="moon";break;case"Universe":case"Galaxy":case"Star":e="sun";break;default:e=""}return e}hasLanded(t){if(!t.landingDate||""===t.landingDate)return!1;if(["Lander","Rover"].indexOf(t.subcategory)<0)return!1;const e=this._app.getManager("time").parseTime(t.landingDate);return!!this._app.getManager("time").getTime().isSameOrAfter(e)}getClassName(t,e){const i=this.getEntityInfo(t);let s=t;if(e)s+=" "+e.toLowerCase().replace(/ /g,"-");else if(null!==i&&void 0!==i.category){s+=" "+i.category.toLowerCase().replace(/ /g,"-")}return s.match(/^\d/)&&(s="_"+s),s}hasKeyword(t,e){if(void 0!==this.getEntityInfo(t))return this.getEntityInfo(t).keywords.includes(e)}resetContext(){this._context={},this._context.events={},this._context.eventDesc={},this._context.orderedEvents={},this._context.story={}}_handleError(t,e=""){console.error(e+t);let i=this.app.getManager("router").previousRoute.url;throw i||(i=this.app.getManager("router").homeRoute),t.previousRoute=i,t}get entitiesByCategory(){return this._entitiesByCategory}get entitiesBySubCategory(){return this._entitiesBySubCategory}get context(){return this._context}get events(){return this._context.events}get orderedEvents(){return this._context.orderedEvents}get eventDesc(){return this._context.eventDesc}}},function(t,e,i){"use strict";i.r(e),i.d(e,{SceneManager:function(){return SceneManager}});var s=i(215),n=i.n(s),o=i(5),a=i(528),r=i(2);class SceneManager extends r.BaseManager{constructor(t){super(t),this._scenes={},this._scene=this.add("main"),this._isHD=!1,this._hdWMTSMap={},this._loadingItems=[],this._loadedComponents=[],this._hdBreakpointSize=512,this._maxTextureSize=4096,this._eventNames.push("loading","loaded"),this._initCallbacks(),this._isLoading=!1,this._entityStatuses=new o.FastMap,this._entityExtraOptions=void 0,this._entityLoadedCallbacks=[],this._entityWillBeUnloadedCallbacks=[],this._componentTypesNotVisible=new Set,this._mobileTextureSize=1024,this.bindFunctions(["addLoading","removeLoading","update","toggleStarfield","toggleHeliosphere","toggleConstellations","addWMTSComponent","tileIsReady","enableWMTSComponent","forceTextureSizeForEntity","toggleHDTextureForEntity","isEntityHD"]),this._tempEntities=[]}add(t){return"main"===t&&this._scene?this._scene:(this._scenes[t]=this.pioneer.addScene(t),this._scenes[t].setAmbientLightColor(new o.Color(.005,.005,.005)),this._scenes[t])}addEntity(t,e){if(this._entityStatuses.has(t))throw new Error(`Error adding entity: The entity ${t} has already been added.`);this._entityStatuses.set(t,{forceVisible:!1,layerVisibility:this.app.getManager("layer").isEntityVisibleWithCurrentLayers(t),dynamic:e,dependentEntities:[],entitiesForcingThisVisible:new Set,visible:!0,componentTypesNotVisible:new Set})}removeEntity(t){if(!this._entityStatuses.delete(t))throw new Error(`Error removing entity: The entity ${t} was not in the scene manager.`);const e=this._scene.getEntity(t);if(null!==e){for(let t=0,i=this._entityWillBeUnloadedCallbacks.length;t<i;t++)this._entityWillBeUnloadedCallbacks[t](e);this._scene.removeEntity(t)}}addEntitiesFromSceneInfo(t){const e=new Map;void 0!==t.staticEntities&&(1===t.staticEntities.length&&"all"===t.staticEntities[0]?a.Entity.getEntityNamesInGroup("").forEach((t=>e.set(t,!1))):t.staticEntities.forEach((t=>e.set(t,!1)))),void 0!==t.staticEntityGroups&&t.staticEntityGroups.forEach((t=>{a.Entity.getEntityNamesInGroup(t).forEach((t=>e.set(t,!1)))})),void 0!==t.dynamicEntities&&(1===t.dynamicEntities.length&&"all"===t.dynamicEntities[0]?a.Entity.getEntityNamesInGroup("").forEach((t=>{e.has(t)||e.set(t,!0)})):t.dynamicEntities.forEach((t=>{e.has(t)||e.set(t,!0)}))),void 0!==t.dynamicEntityGroups&&t.dynamicEntityGroups.forEach((t=>{a.Entity.getEntityNamesInGroup(t).forEach((t=>{e.has(t)||e.set(t,!0)}))}));const i=this.app.getManager("content");for(const t of e.keys())null===i.getEntityInfo(t)&&e.delete(t);e.forEach(((t,e)=>this.addEntity(e,t))),this.setExtraEntityOptions(t.entityOptions),this.updateEntityLayerVisibility()}addEntityLoadedCallback(t){this._entityLoadedCallbacks.push(t)}removeEntityLoadedCallback(t){for(let e=0,i=this._entityLoadedCallbacks.length;e<i;e++)if(this._entityLoadedCallbacks[e]===t)return void this._entityLoadedCallbacks.splice(e,1)}addEntityWillBeUnloadedCallback(t){this._entityWillBeUnloadedCallbacks.push(t)}removeEntityWillBeUnloadedCallback(t){for(let e=0,i=this._entityWillBeUnloadedCallbacks.length;e<i;e++)if(this._entityWillBeUnloadedCallbacks[e]===t)return void this._entityWillBeUnloadedCallbacks.splice(e,1)}setEntitiesForceVisible(t,e){if(e)for(let t=0,e=this._entityStatuses.size;t<e;t++){this._entityStatuses.getAt(t).value.forceVisible=!1}for(let e=0,i=t.length;e<i;e++){const i=t[e],s=this._entityStatuses.get(i);if(void 0===s)throw new Error(`Entity ${i} was set to force load, but isn't in the scene manager. Use addEntity().`);s.forceVisible=!0}this.update()}setExtraEntityOptions(t){this._entityExtraOptions={...t}}updateEntityLayerVisibilityForChildren(t){const e=this.app.getManager("layer"),i=this._scene.getEngine().getTime();for(let s=0,n=this._entityStatuses.size;s<n;s++){const n=this._entityStatuses.getAt(s);a.Parenting.getParentOfEntity(n.key,i)===t&&(n.value.layerVisibility=e.isEntityVisibleWithCurrentLayers(n.key))}}updateEntityLayerVisibility(){const t=this.app.getManager("layer");for(let e=0,i=this._entityStatuses.size;e<i;e++){const i=this._entityStatuses.getAt(e);i.value.layerVisibility=t.isEntityVisibleWithCurrentLayers(i.key)}}update(){const t=this.app.getManager("camera").cameraEntity;for(let e=0,i=this._entityStatuses.size;e<i;e++){const i=this._entityStatuses.getAt(e),s=i.key,n=i.value,o=n.forceVisible||!n.dynamic&&n.layerVisibility||n.dynamic&&n.layerVisibility&&this._isEntityVisibleWithinParent(s)||t?.getParent()?.getName()===s;let r=this._scene.getEntity(s);if(o&&null===r){this._createEntity(s);const t=a.SceneHelpers.getDependentEntities(s);for(const e of t)null===this._scene.getEntity(e)&&this._createEntity(e)}else if(!o&&null!==r){let t=!1;for(let e=0,i=n.dependentEntities.length;e<i;e++)null!==this._scene.get(n.dependentEntities[e])&&(t=!0);if(!t){for(let t=0,e=this._entityWillBeUnloadedCallbacks.length;t<e;t++)this._entityWillBeUnloadedCallbacks[t](r),r=null;n.dependentEntities=[],this._scene.removeEntity(s)}}const l=n.forceVisible||n.layerVisibility||this._isAncestorOfCamera(t,s)||n.entitiesForcingThisVisible.size>0;null!==r&&n.visible!==l&&this.setVisibility(l,s),this._scene.get("sc_psyche")?.setEnabled(!1)}}_createEntity(t){const e=a.Entity.create(t,this._scene,this._entityExtraOptions);this._entityStatuses.get(t).visible||this.setVisibility(!1,t);const i=a.SceneHelpers.getDependentEntities(t);for(const e of i){const i=this._entityStatuses.get(e);if(void 0===i)throw new Error(`Entity ${e} was set to force load, but isn't in the scene manager. Use addEntity().`);i.dependentEntities.push(t)}for(let t=0,i=this._entityLoadedCallbacks.length;t<i;t++)this._entityLoadedCallbacks[t](e);return e}_isAncestorOfCamera(t,e){let i=t;for(;null!==i;){if(i.getName()===e)return!0;i=i.getParent()}return!1}setVisibility(t,e){const i=this._entityStatuses.get(e);void 0!==i&&(i.visible=t);const s=this._scene.getEntity(e);if(null===s)return;const n=this.app.getManager("layer"),o=n.getLayer("trails").visible,a=n.getLayer("labels").visible;for(let e=0;e<s.getNumComponents();e++){const n=s.getComponent(e),r=n.getType();"sun"!==s.getName()&&(t&&"trail"===r?n.setEnabled(t&&o&&!i.componentTypesNotVisible.has("trail")):t&&"div"===r?n.setEnabled(t&&a&&!i.componentTypesNotVisible.has("div")):n.setEnabled(t&&!i.componentTypesNotVisible.has(n.getType())))}const r=this.app.getManager("content").getEntityInfo(e);if(void 0!==r.forceVisibleEntities)for(let i=0,s=r.forceVisibleEntities.length;i<s;i++){const s=this._entityStatuses.get(r.forceVisibleEntities[i]);if(void 0===s)throw new Error(`Entity ${e} was set to force load, but isn't in the scene manager. Use addEntity().`);t?s.entitiesForcingThisVisible.add(e):s.entitiesForcingThisVisible.delete(e)}}_isEntityVisibleWithinParent(t){const e=a.Parenting.getParentOfEntity(t,this._scene.getEngine().getTime()),i=this._scene.getEntity(e);if(null===i)return!1;const s=a.Entity.getEntityOptions(e);return(s.systemRadius||25*s.radius||25*s.extentsRadius)/i.getExtentsRadius()*i.getGreatestPixelSpaceExtentsRadius()>=20}get(t){return void 0!==this._scenes[t]?this._scenes[t]:null}getEntities(){return this._scene._entities}getEntitiesNames(){return Array.from(this._scene._entities._itemNames.keys())}getParent(t){const e=this._scene.getEntity(t);if(null!==e){const t=e.getParent();if(null!==t)return t.getName()}return null}getParentList(t){let e=this.getParent(t);const i=[];for(;null!==e&&""!==e;)i.push(e),e=this.getParent(e);return i}getDependencies(t){const e=this._scene.getEntity(t),i=new Set;if(null!==e)for(let t=0;t<e.getNumParentingTableEntries();t++){const s=e.getParentingTableEntry(t)[1];""!==s&&i.add(s)}const s=a.Entity.getEntityOptions(t);if(void 0!==s)for(const e of Object.keys(s)){const n=s[e];if("parents"===e)for(let t=0;t<n.length;t++){const e=n[t][1];""!==e&&i.add(e)}"align"===e&&(n.primary&&n.primary.target&&n.primary.target!==t&&i.add(n.primary.target),n.secondary&&n.secondary.target&&n.secondary.target!==t&&i.add(n.secondary.target))}return Array.from(i)}async isReady(t,e){e=void 0===e?this.pioneer.getTime():this.app.getManager("time").momentToET(e),await a.SceneHelpers.waitTillEntitiesInPlace(this._scene,[t],e)}async isListReady(t,e){const i=[];void 0===e&&(e=[void 0]);for(let s=0;s<t.length;s++)for(let n=0;n<e.length;n++)i.push(this.isReady(t[s],e[n]));await Promise.all(i)}async tileIsReady(t){let e=null;return new Promise(((i,s)=>{const n=setInterval((()=>{t.isEnabled()&&t.getEntity().isEnabled()||(clearInterval(n),s(new Error("disabled"))),null===e&&null!==t.getTilesLoadedPromise()&&(e=t.getTilesLoadedPromise().then((()=>{clearInterval(n),i(!0)})))}),30)}))}async terrainIsReady(t){let e=null;return new Promise((i=>{const s=setInterval((()=>{t.isEnabled()&&t.getEntity().isEnabled()||(clearInterval(s),i(!0)),null===e&&null!==t._loadedPromise&&(e=t.getTilesLoadedPromise().then((()=>{clearInterval(s),i(!0)})))}),30)}))}async componentIsReady(t){if(t.isEnabled()&&"loaded"===t.getLoadState())return;return new Promise((e=>{const i=setInterval((()=>{t.isEnabled()&&t.getEntity().isEnabled()||(clearInterval(i),e(!0)),"loaded"===t.getLoadState()&&(clearInterval(i),e(!0))}),30)}))}toggleStarfield(t){for(let e=0;e<7;e++)this._scene.get("sun","starfield",e).setEnabled(t)}toggleHeliosphere(t){this._scene.get("sun","model").setEnabled(t)}async toggleConstellations(t){const e=this._scene.get("sun");if(null===e)return;let i=e.getComponentByType("constellations");if(t&&null===i){i=e.addComponent("constellations"),i instanceof a.ConstellationsComponent&&(i.setUrl("$STATIC_ASSETS_URL/stars/constellations.bin"),i.setColor(new o.Color(.35,.7,1,.5))),await this.pioneer.waitUntilNextFrame(),await i.getLoadedPromise();const t=this.app.getManager("label"),s=this.app.getManager("content");t.stop();const n=new o.Color(.35,.7,1,1),r=this.get("main").getEntity("camera").getComponentByType("camera");i.getNames().forEach((e=>{const a=`constellation_label_${e}`,l=this._scene.getEntity(a);t.addEntity(l),t.setLabelProps({getLabelClass:t=>`no-select ${s.getClassName(t,"constellation")??"constellation"}`,handleTouch:null,handleMouseEnter:t=>{i.setHighlight(i.getNearestConstellationIndex(new o.Vector2(t.x,t.y),r),n,2.5)},handleMouseLeave:()=>{i.setHighlight(void 0,n,2.5)},handleClick:null},[a])})),t.start()}else if(!t&&null!==i){const t=this.app.getManager("label");t.stop(),i.getNames().forEach((e=>{const i=`constellation_label_${e}`,s=this._scene.getEntity(i);t.removeEntity(s)})),t.start(),e.removeComponent(i)}}isHD(){return this._isHD}hasHD(t){const e=this._scene.get(t);if(null===e)return!1;if(Object.prototype.hasOwnProperty.call(this._hdWMTSMap,t))return!0;if(null!==e.getParent()&&Object.prototype.hasOwnProperty.call(this._hdWMTSMap,e.getParent().getName()))return!0;if(null!==e.get("spheroidLOD")){const t=e.get("spheroidLOD").getTextureSizes("color");for(let e=0;e<t.length;e++)if(t[e]>this._hdBreakpointSize)return!0}return!1}setHDBreakpoints(t,e){this._hdBreakpointSize=t,this._maxTextureSize=e}async toggleHD(){this._isHD=!this._isHD,this._isHD||this.pioneer.getConfig().setValue("maxTextureSize",this._hdBreakpointSize);for(const t in this._hdWMTSMap){const e=this._hdWMTSMap[t],i=this._scene.get(t),s=i.getComponentByType("spheroidLOD"),n=i.getComponent(e);if(r.AppUtils.isMobileMode()&&n.setMaxLevel(5),n.setEnabled(this._isHD),this._isHD){this.addLoading(t,"wmts"),await this.pioneer.waitUntilNextFrame();!0===await this.tileIsReady(n).catch((()=>{this.removeLoading(t,"wmts")}))&&(s.setEnabled(!1),this.removeLoading(t,"wmts"))}else s.setEnabled(!0);this._isHD&&this.pioneer.getConfig().setValue("maxTextureSize",this._maxTextureSize)}}async forceTextureSizeForEntity(t,e,i="color"){const s=this.app.pioneer.get("main",t,"spheroidLOD");null!=s&&s.forceTextureSize(i,e)}async isEntityHD(t){const e=this.app.pioneer.get("main",t,"spheroidLOD");return null!=e&&(await e.getLoadedPromise(),e.getTextureCurrentSize("color",0)>this._hdBreakpointSize)}async toggleHDTextureForEntity(t){const e=this.app.pioneer.get("main",t,"spheroidLOD");if(!1===await this.isEntityHD(t)){let i=this._maxTextureSize;return r.AppUtils.isiPhone()&&(i=this._mobileTextureSize),this.addLoading(t,"spheroidLOD"),e.getTextureNames().forEach((e=>{this.forceTextureSizeForEntity(t,i,e)})),await this.pioneer.waitUntilNextFrame(),await e.getLoadedPromise(),this.removeLoading(t,"spheroidLOD"),!0}return this.addLoading(t,"spheroidLOD"),e.getTextureNames().forEach((e=>{this.forceTextureSizeForEntity(t,this._hdBreakpointSize,e)})),await this.pioneer.waitUntilNextFrame(),await e.getLoadedPromise(),this.removeLoading(t,"spheroidLOD"),!1}createRing(t,e,i,{orbitPlaneEntityName:s,color:n,numCircles:a=1,numSpokes:r=0,labelPosition:l=new o.Vector3(-e,0,0),labelText:c="",isEnable:h=!0}={}){const u=this._scene.addEntity(t);u.setPosition(o.Vector3.Zero);const d=this._scene.getEntity(i);u.setParent(d);const p=u.addComponent("discGrid");p.setLineWidth(6),p.setSize(e),p.setNumCircles(a),p.setNumSpokes(r),p.setIgnoreDistance(!0),s&&this.setAlignPlane(u,s),n instanceof o.Color&&p.setColor(n);const _=this._scene.addEntity(`${t}Label`);_.setPosition(o.Vector3.Zero),_.setParent(d);_.addController("fixed").setPosition(l);const g=_.addComponent("div");g.setFadeWhenCloseToCamera(!1);g.getDiv().classList.add("ring-label"),g.getDiv().innerHTML=c,u.setEnabled(h),_.setEnabled(h)}createTorus(t,e,i,s,{orbitPlaneEntityName:n,color:a,visibleDistance:r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY],labelPosition:l=new o.Vector3(-i,0,0),labelText:c="",isEnable:h=!0}={}){const u=this._scene.addEntity(t);u.setPosition(o.Vector3.Zero);const d=this._scene.getEntity(s);u.setParent(d);const p=u.addComponent("torus");p.setInnerRadius(e),p.setOuterRadius(i),p.setVisibleDistanceInterval(new o.Interval(...r)),n&&this.setAlignPlane(u,n),a instanceof o.Color&&p.setColor(a);const _=this._scene.addEntity(`${t}Label`);_.setPosition(o.Vector3.Zero),_.setParent(d);_.addController("fixed").setPosition(l);const g=_.addComponent("div");g.setFadeWhenCloseToCamera(!1);g.getDiv().classList.add("ring-label"),g.getDiv().innerHTML=c,u.setEnabled(h),_.setEnabled(h)}setEntityHDWMTS(t,e){this._hdWMTSMap[t]=e}async enableWMTSComponent(t,e){r.AppUtils.isMobileMode()&&e.setMaxLevel(5);const i=this.get("main").getEntity(t).getComponentByType("spheroidLOD");this.addLoading(t,"wmts"),e.setEnabled(!0),await this.pioneer.waitUntilNextFrame();await this.tileIsReady(e).catch((()=>{this.removeLoading(t,"wmts")}))?(i.setEnabled(!1),this.removeLoading(t,"wmts")):i.setEnabled(!0)}async addWMTSComponent(t,e){const i=this.app.pioneer.get("main",t);let s=i.getComponentByType("wmts");null===s&&(s=i.addComponent("wmts",e.id)),s.setEnabled(!1),s.setEndPoint(e.endPoint),s.setLayer(e.layer),e.tile&&s.setTileMatrixSet(e.tile);const n=new Date;"yesterday"===e.time?(n.setDate(n.getDate()-1),s.setDimensionValue("Time",n.getFullYear()+"-"+(n.getMonth()+1+"").padStart(2,"0")+"-"+(n.getDate()+"").padStart(2,"0"))):"now"===e.time&&s.setDimensionValue("Time",n.getFullYear()+"-"+(n.getMonth()+1+"").padStart(2,"0")+"-"+(n.getDate()+"").padStart(2,"0")),e.level?s.setMaxLevel(e.level):s.setMaxLevel(1/0),s.setMinLevel(2),await this.enableWMTSComponent(t,s)}loadWMTSFromJSON(t){for(const e in t){let i="";for(const s in t[e])if("hd"===s||""===i)i=t[e][s],this._hdWMTSMap[e]=i;else{const i=t[e][s],n=this._scene.get(e).addComponent("wmts",s);n.setEnabled(!1),n.setEndPoint(i.endPoint),n.setLayer(i.layer),i.tile&&n.setTileMatrixSet(i.tile);const o=new Date;"yesterday"===i.time?(o.setDate(o.getDate()-1),n.setDimensionValue("Time",o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0"))):"now"===i.time&&n.setDimensionValue("Time",o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")),i.level?n.setMaxLevel(i.level):n.setMaxLevel(1/0)}}}setAlignPlane(t,e){const i=this._scene.getEntity(e),s=new o.Quaternion;i.getControllerByType("dynamo").getOrbitOrientation(s,this.app.pioneer.getTime()),t.setOrientation(s)}clearTempEntities(){const t=this.app.getManager("camera").cameraEntity;if(null===t||null===t.getParent())return;const e=t.getParent().getName();this._tempEntities=this._tempEntities.filter((t=>{if(e===t.getName())return!0;return this.app.getManager("label").removeEntity(t),this._scene.removeEntity(t?.getName()),!1}))}addTempEntity(t){this._tempEntities.push(t)}addLoading(t,e){const i=t+"_"+e;this._loadingItems.indexOf(i)<0&&this._loadingItems.push(i),this._loadingItems.length>0&&(this._isLoading=!0,this.triggerCallbacks("loading"))}removeLoading(t,e){const i=t+"_"+e,s=this._loadingItems.indexOf(i);s>=0&&this._loadingItems.splice(s,1),0===this._loadingItems.length&&(this._isLoading=!1,this.triggerCallbacks("loaded",[t]))}forceLoad(t){t.setForceLoaded(!0),this._loadedComponents.push(t)}removeForceLoad(t){this._loadedComponents=this._loadedComponents.filter((e=>e!==t||(t.setForceLoaded(!1),!1)))}clearForceLoad(){for(let t=0;t<this._loadedComponents.length;t++){this._loadedComponents[t].setForceLoaded(!1)}this._loadedComponents=[]}getDistance(t,e,{time:i,subtractRadius:s=!1,precision:n=0}={}){const a=o.Vector3.pool.get(),r=this._scene.get(t),l=this._scene.get(e);let c=0;if(void 0!==i){const t=o.TimeUtils.unixToEt(i.valueOf()/1e3);r.getPositionRelativeToEntity(a,o.Vector3.Zero,l,t)}else r.getPositionRelativeToEntity(a,o.Vector3.Zero,l);if(c=a.magnitude(),s){c-=r.getExtentsRadius()+l.getExtentsRadius()}if(n>0){const t=Math.pow(10,Math.floor(Math.log10(c))-n);c=Math.round(c/t)*t}return o.Vector3.pool.release(a),c}getSpeed(t,e,{time:i}={}){const s=o.Vector3.pool.get(),n=this._scene.get(t);let a=null;if(a=void 0===e?n.getParent():this._scene.get(e),void 0!==i){const t=this.app.getManager("time").momentToET(i);n.getVelocityRelativeToEntity(s,o.Vector3.Zero,a,t)}else n.getVelocityRelativeToEntity(s,o.Vector3.Zero,a);return o.Vector3.pool.release(s),s.magnitude()}getCoverage(t,e=!0){const i={min:r.AppUtils.constants.maxDate,max:r.AppUtils.constants.minDate},s=this.pioneer.get("main",t);let a=s.getPositionCoverage().min,l=s.getPositionCoverage().max;if(e&&(a=Math.max(s.getPositionCoverage().min,s.getOrientationCoverage().min),l=Math.min(s.getPositionCoverage().max,s.getOrientationCoverage().max)),i.min=s?Math.min(a,i.min):i.min,i.max=s?Math.max(l-.001,i.max):i.max,i.min===-1/0||i.min<r.AppUtils.minDate)i.min=n()(r.AppUtils.constants.minDate);else{i.min=Math.ceil(1e3*i.min)/1e3;let t=1e3*o.TimeUtils.etToUnix(i.min);t=Math.ceil(1e3*t)/1e3,i.min=n().tz(t,"ETC/Utc")}if(i.max===1/0||i.max>r.AppUtils.maxDate)i.max=n()(r.AppUtils.constants.maxDate);else{i.max=Math.floor(1e3*i.max)/1e3;let t=1e3*o.TimeUtils.etToUnix(i.max);t=Math.floor(1e3*t)/1e3,i.max=n().tz(t,"ETC/Utc")}return i}async toggleRing(t){console.log("toggleRing",t)}get main(){return this._scene}get isLoading(){return this._isLoading}}},function(t,e,i){"use strict";i.r(e),i.d(e,{Cameras:function(){return s.default},DateTime:function(){return n.default},Entity:function(){return o.default},Features:function(){return a.default},Parenting:function(){return r.default},Placemarks:function(){return l.default},SceneHelpers:function(){return c.default},Transitions:function(){return h.default},AnnulusComponent:function(){return u.default},CelestialGridComponent:function(){return d.default},ConstellationsComponent:function(){return p.default},DiscGridComponent:function(){return _.default},OrbitLineComponent:function(){return g.default},TorusComponent:function(){return m.default},WMTSComponent:function(){return y.default},KeyframePointingController:function(){return f.default},KeyframeSpinController:function(){return b.default},PositionSumController:function(){return T.default},ZoomFitController:function(){return v.default},PlanetsAndStars:function(){return E.default},MinorPlanets:function(){return x.default},Comets:function(){return S.default},EarthMoon:function(){return C.default},JupiterRegularMoons:function(){return w.default},JupiterIrregularMoons:function(){return I.default},MarsMoons:function(){return M.default},NeptuneMoons:function(){return N.default},SaturnMajorMoons:function(){return A.default},SaturnMinorMoons:function(){return L.default},UranusMajorMoons:function(){return R.default},UranusMinorMoons:function(){return P.default},EarthSpacecraft:function(){return k.default},LunarSpacecraft:function(){return V.default},MarsSpacecraft:function(){return O.default},MercurySpacecraft:function(){return F.default},OuterPlanetSpacecraft:function(){return z.default},SmallBodySpacecraft:function(){return j.default},SolarSpacecraft:function(){return U.default},VenusSpacecraft:function(){return D.default},Comparison:function(){return B.default}});var s=i(529),n=i(530),o=i(531),a=i(532),r=i(533),l=i(534),c=i(535),h=i(536),u=i(537),d=i(538),p=i(539),_=i(540),g=i(541),m=i(542),y=i(543),f=i(636),b=i(637),T=i(638),v=i(639),E=i(640),x=i(641),S=i(642),C=i(644),w=i(645),I=i(646),M=i(647),N=i(648),A=i(649),L=i(650),R=i(651),P=i(652),k=i(653),V=i(654),O=i(655),F=i(656),z=i(657),j=i(658),U=i(660),D=i(661),B=i(662)},function(t,e,i){"use strict";i.r(e);var s=i(5);e.default=class Cameras{static createFullSizeViewportAndCamera(t,e="main",i="camera"){const s=t.getEngine().addViewport(e);s.getDiv().style.width="100%",s.getDiv().style.height="100%";const n=t.addEntity(i).addComponent("camera");s.setCamera(n)}static focusOnEntity(t,e,{up:i=!0,orbiter:n=!1}){const o=t.addController("align");o.setPrimaryAlignType("point"),o.setPrimaryAxis(s.Vector3.YAxis),o.setPrimaryTargetEntity(e.getName()),i&&(n?(o.setSecondaryAlignType("position"),o.setSecondaryAxis(s.Vector3.ZAxis),o.setSecondaryTargetEntity(e.getName())):(o.setSecondaryAlignType("align"),o.setSecondaryAxis(s.Vector3.ZAxis),o.setSecondaryTargetEntity(e.getName()),o.setSecondaryTargetAxis(s.Vector3.ZAxis)))}static async lookAtEntity(t,e,{duration:i=.5,finalUp:n,finalUpRelativeEntity:o,finalUpPosition:a=!1}){if(t.getPosition().isNaN())return;const r=new s.Vector3;e.getPositionRelativeToEntity(r,s.Vector3.Zero,t),r.normalize(r);for(let e=0;e<t.getNumControllers();e++)t.getController(e).hasModifiedState("orientation")&&(t.removeController(e),e--);const l=t.addController("align");l.setPrimaryAlignType("point"),l.setPrimaryAxis(s.Vector3.YAxis),l.setPrimaryTargetEntity(e.getName()),void 0!==n&&(void 0===o&&(o=e),a?(l.setSecondaryAlignType("position"),l.setSecondaryAxis(s.Vector3.ZAxis),l.setSecondaryTargetEntity(o.getName())):(l.setSecondaryAlignType("align"),l.setSecondaryAxis(s.Vector3.ZAxis),l.setSecondaryTargetEntity(o.getName()),l.setSecondaryTargetAxis(n)));const c=t.addController("transition");c.setTransitionTime(i),await c.getEndPromise()}static async goToEntity(t,e,{up:i=!0,orbiter:n=!1,fixedToParent:o=!1,duration:a=1,distance:r,zoom:l=!0,destination:c,destinationUp:h,destinationInFocusFrame:u=!1,transitionFunction:d}){r||(r=5*e.getExtentsRadius()),(t.getPosition().isNaN()||t.getOrientation().isNaN())&&(t.setParent(e),void 0===c?t.setPosition(new s.Vector3(0,-r,0)):t.setPosition(c),t.setOrientation(s.Quaternion.Identity),a=0),void 0===c&&(c=new s.Vector3,t.getPositionRelativeToEntity(c,s.Vector3.Zero,e),c.normalize(c),c.mult(c,r),c.isNaN()&&c.set(0,-r,0)),t.clearControllers();const p=t.addController("fixed");if(p.setPosition(c),void 0!==h){const t=new s.Vector3,e=new s.Vector3;t.neg(c),t.normalize(t),e.setNormalTo(t,h);const i=new s.Quaternion;i.setFromAxes(void 0,t,e),p.setOrientation(i)}if(u){const e=t.addController("rotateByEntityOrientation");void 0===h&&e.setRotatingOrientation(!1)}this.focusOnEntity(t,e,{up:i,orbiter:n});const _=t.addController("transition");_.setTransitionTime(a),_.setParent(e.getName()),d&&_.setTransitionFunction(d),await _.getEndPromise(),t.clearControllers();const g=t.addController("orbit");i?n?g.setYawAxisType("position"):g.setYawAxisType("z-axis"):t.addController("roll"),o&&t.addController("fixedToParent"),l&&t.addController("zoom"),this.focusOnEntity(t,e,{up:i,orbiter:n})}static pickOnEntity(t,e,i){const n=t.addController("pick");n.setPickedEntity(e),n.setCallback((t=>{const n=e.getComponentByType("spheroid");if(null!==n){const o=s.Vector3.pool.get();o.rotateInverse(e.getOrientation(),t);const a=s.LatLonAlt.pool.get();n.llaFromXYZ(a,o),i(o,a),s.LatLonAlt.pool.release(a),s.Vector3.pool.release(o)}}))}static getDistanceToFitEntities(t,e,i,n){const o=t.getComponentByType("camera");if(null===o)return NaN;let a=0;const r=s.Vector3.pool.get(),l=Math.sin(o.getHorizontalFieldOfView()/2),c=Math.sin(o.getVerticalFieldOfView()/2),h=Math.tan(o.getHorizontalFieldOfView()/2),u=Math.tan(o.getVerticalFieldOfView()/2);for(let t=0;t<n.length;t++){const o=n[t];let d=0;const p=o.get("rings");null!==p&&(d=p.getOuterRadius()),o.getPositionRelativeToEntity(r,s.Vector3.Zero,i),r.rotateInverse(e,r),a=Math.max(a,Math.abs(r.x)/h+Math.max(o.getExtentsRadius(),d)/l-r.y),a=Math.max(a,Math.abs(r.z)/u+Math.max(o.getExtentsRadius(),d)/c-r.y)}return s.Vector3.pool.release(r),a}}},function(t,e,i){"use strict";i.r(e);var s=i(5);const n=[31,28,31,30,31,30,31,31,30,31,30,31],o=new Date;e.default=class DateTime{constructor(t=1,e=1,i=1,s=0,n=0,o=0,a=0){this.year=t,this.month=e,this.day=i,this.hour=s,this.minute=n,this.second=o,this.millisecond=a}copy(t){this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second,this.millisecond=t.millisecond}fromET(t){const e=s.TimeUtils.etToUnix(t);o.setTime(1e3*e),this.year=o.getUTCFullYear(),this.month=o.getUTCMonth()+1,this.day=o.getUTCDate(),this.hour=o.getUTCHours(),this.minute=o.getUTCMinutes(),this.second=o.getUTCSeconds(),this.millisecond=o.getUTCMilliseconds();for(let i=0,n=s.TimeUtils.leapSeconds.length;i<n;i++)if(Math.floor(e)===s.TimeUtils.leapSeconds[i]&&e===s.TimeUtils.etToUnix(t-1)){this.second+=1;break}}toET(){o.setUTCFullYear(this.year),o.setUTCMonth(this.month-1),o.setUTCDate(this.day),o.setUTCHours(this.hour),o.setUTCMinutes(this.minute),o.setUTCSeconds(this.second),o.setUTCMilliseconds(this.millisecond);const t=o.getTime()/1e3;let e=s.TimeUtils.unixToEt(t);if(60===this.second)for(let i=0,n=s.TimeUtils.leapSeconds.length;i<n;i++)if(Math.floor(t)===s.TimeUtils.leapSeconds[i]+1){e-=1;break}return e}fromDOY(t,e,i=0,s=0,n=0,o=0){let a=0;this.year=t,this.month=1,this.hour=i,this.minute=s,this.second=n,this.millisecond=o;let r=this.getDaysInMonth();for(;e>a+r&&this.month<12;)a+=r,this.month+=1,r=this.getDaysInMonth();this.day=e-a}toDOY(){const t=this.month;let e=0;for(this.month=1;this.month<t;this.month++)e+=this.getDaysInMonth();return this.month=t,e+=this.day,e}isLeapYear(){return this.year%4==0&&this.year%100!=0||this.year%400==0}getDaysInMonth(){let t=n[this.month-1];return 2===this.month&&this.isLeapYear()&&(t+=1),t}parse(t){this.year=parseInt(t.substring(0,4)),t.length>5?this.month=parseInt(t.substring(5,7)):this.month=1,t.length>8?this.day=parseInt(t.substring(8,10)):this.day=1,t.length>11?(this.hour=parseInt(t.substring(11,13)),this.minute=parseInt(t.substring(14,16))):(this.hour=0,this.minute=0),t.length>17?this.second=parseInt(t.substring(17,19)):this.second=0,t.length>20?this.millisecond=parseInt(t.substring(20))*Math.pow(10,23-t.length):this.millisecond=0}parseDOY(t){const e=parseInt(t.substring(0,4));let i=1;t.length>5&&(i=parseInt(t.substring(5,8))),this.fromDOY(e,i),t.length>9?(this.hour=parseInt(t.substring(9,11)),this.minute=parseInt(t.substring(12,14))):(this.hour=0,this.minute=0),t.length>15?this.second=parseInt(t.substring(15,17)):this.second=0,t.length>18?this.millisecond=parseInt(t.substring(18))*Math.pow(10,21-t.length):this.millisecond=0}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")} ${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}.${Math.floor(1e3*this.millisecond).toString().padStart(6,"0")}`}toStringDOY(){return`${this.year.toString().padStart(4,"0")}-${this.toDOY().toString().padStart(3,"0")}`}}},function(t,e,i){"use strict";i.r(e);var s=i(5);class Entity{static register(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this._entities.set(e,t[e])}static create(t,e,i){const s=Entity._entities.get(t);if(void 0===s)throw new Error("Could not find the options for the entity with name "+t);return this.createFromOptions(t,s,e,i)}static createFromOptions(t,e,i,n){let o=t;n&&(n.namePrefix&&(o=n.namePrefix+o),n.nameSuffix&&(o+=n.nameSuffix));let a=i.getEntity(o);if(null!==a)return a;a=i.addEntity(o);try{e.radius&&(a.setOcclusionRadius(e.radius),a.setExtentsRadius(e.radius)),e.occlusionRadius&&a.setOcclusionRadius(e.occlusionRadius),e.extentsRadius&&a.setExtentsRadius(e.extentsRadius);for(const[t,i]of e.parents)a.addParentingTableEntry(t,i);if(e.coverages){let t=a.get("coverage");null===t&&(t=a.addController("coverage"));for(let i=0,n=e.coverages.length;i<n;i++)t.addCoverage(new s.Interval(e.coverages[i].coverage[0],e.coverages[i].coverage[1]),e.coverages[i].enter,e.coverages[i].exit,e.coverages[i].update)}if(e.label){const t=a.addComponent("div").getDiv();t.innerHTML=e.label,t.className="pioneer-label-div"}if(e.labelFadeEntity){const t=a.getComponentByType("div");if(null===t)throw new Error("There is no label.");t.setFadeWhenCloseToEntity(e.labelFadeEntity)}if(e.trail){const t=a.addComponent("trail");if(t.setStartTime(e.trail.length),e.trail.color?t.setColor(new s.Color(e.trail.color[0],e.trail.color[1],e.trail.color[2],e.trail.color[3])):t.setColor(new s.Color(1,1,1,.5)),e.trail.relativeTo&&t.setRelativeToEntity(e.trail.relativeTo),e.trail.lengthCoverages){let t=a.getController("trail_length_coverage");null===t&&(t=a.addController("coverage","trail_length_coverage",a.getController(0)));for(let i=0,n=e.trail.lengthCoverages.length;i<n;i++){const n=e.trail.lengthCoverages[i];t.addCoverage(new s.Interval(n[1],n[2]),(t=>{t.get("trail").setStartTime(n[0])}),(t=>{t.get("trail").setStartTime(e.trail.length)}))}}this._processCoverages(a,t,e.trail.coverages)}if(e.spheroid){const t=a.addComponent("spheroid");t.setEquatorialRadius(e.spheroid.equatorialRadius),t.setPolarRadius(e.spheroid.polarRadius),t.setPlanetographic(e.spheroid.planetographic)}if(e.spheroidLOD){const t=a.addComponent("spheroidLOD");if(e.spheroidLOD.features)for(let i=0,s=e.spheroidLOD.features.length;i<s;i++)t.setFeature(e.spheroidLOD.features[i],!0);if(e.spheroidLOD.textures){t.setMapping("cube");for(const i in e.spheroidLOD.textures)t.setTexture(i,"$STATIC_ASSETS_URL/maps/"+e.spheroidLOD.textures[i].url,e.spheroidLOD.textures[i].sizes)}e.spheroidLOD.shadowEntities&&t.setShadowEntities(e.spheroidLOD.shadowEntities),this._processCoverages(a,t,e.spheroidLOD.coverages)}if(e.cmts){const t=a.addComponent("cmts");if(e.cmts.textures){for(const i in e.cmts.textures){const s=e.cmts.textures[i];t.setBaseUrl(i,s)}t.setMaxLevel(e.cmts.maxLevel||0),this._processCoverages(a,t,e.cmts.coverages)}e.cmts.shadowEntities&&t.setShadowEntities(e.cmts.shadowEntities),this._processCoverages(a,t,e.cmts.coverages)}if(e.model){const t=a.addComponent("model");if(t.setUrl(e.model.url),e.model.rotate){const i=new s.Quaternion;i.set(1,0,0,0);for(let t=0,n=e.model.rotate.length;t<n;t++){let n,o;const a=e.model.rotate[t];if(void 0!==a.x)n=new s.Vector3(1,0,0),o=a.x;else if(void 0!==a.y)n=new s.Vector3(0,1,0),o=a.y;else{if(void 0===a.z)throw new Error("Invalid model rotate axis.");n=new s.Vector3(0,0,1),o=a.z}o=s.MathUtils.degToRad(o);const r=new s.Quaternion;r.setFromAxisAngle(n,o),i.mult(r,i)}t.setRotation(i)}if(e.model.scale){const i=e.model.scale;Array.isArray(i)?t.setScale(new s.Vector3(i[0],i[1],i[2])):t.setScale(i)}!0===e.model.useCompressedTextures&&t.setUseCompressedTextures(!0),e.model.shadowEntities&&t.setShadowEntities(e.model.shadowEntities),e.model.environmentMap&&(e.model.environmentMap.cubemap?(t.setEnvironmentCubemapUrl(e.model.environmentMap.cubemap),t.setEnvironmentCylindricalUrl("")):e.model.environmentMap.cylindrical&&(t.setEnvironmentCylindricalUrl(e.model.environmentMap.cylindrical),t.setEnvironmentCubemapUrl(""))),this._processCoverages(a,t,e.model.coverages)}if(e.comet){const t=a.addComponent("cometTail");void 0!==e.comet.timeLength&&t.setTimeLength(e.comet.timeLength),t.setLightSource("sun");const i=a.addComponent("cometTail");i.setTimeLength(.5*t.getTimeLength()),i.setColor(new s.Color(.214,.235,.371,.5)),i.setStarAccelerationMultiplier(10),i.setLightSource("sun");const n=a.addComponent("cometTail");n.setStarAccelerationMultiplier(0),n.setColor(new s.Color(1,1,1,10)),n.setNumberOfParticles(1),n.setLightSource("sun")}if(e.fixed){const t=a.addController("fixed");if(e.fixed.position&&t.setPosition(e.fixed.position),e.fixed.orientation&&t.setOrientation(e.fixed.orientation),e.fixed.relativeToEntity){const t=a.addController("rotateByEntityOrientation");t.setEntityForOrientation(e.fixed.relativeToEntity),e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]))}if(e.fixed.llaOnSpheroid){const n=e.parents[0][1],o=i.getEntity(n);if(null!==o){const i=o.get("spheroid");if(null===i)throw new Error("Missing spheroid component.");e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]));const n=new s.Vector3;i.xyzFromLLA(n,e.fixed.llaOnSpheroid),t.setPosition(n);const r=new s.Quaternion;i.orientationFromLLA(r,e.fixed.llaOnSpheroid),t.setOrientation(r);a.addController("rotateByEntityOrientation").setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]))}}e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]))}if(e.dynamo)for(let t=0,i=e.dynamo.length;t<i;t++){const i=e.dynamo[t],n=a.addController("dynamo");i.customUrl?n.setBaseUrl(i.url):n.setBaseUrl("$DYNAMIC_ASSETS_URL/dynamo/"+i.url),i.parentIsBarycenter&&n.setHeaderValue("body",1),i.coverage&&2===i.coverage.length&&n.setCoverage(new s.Interval(i.coverage[0],i.coverage[1]))}if(e.animdata)for(let t=0,i=e.animdata.length;t<i;t++){const i=e.animdata[t],n=a.addController("animdata");n.setBaseUrlAndStateType("$ANIMDATA_URL/"+i.url,i.type),i.coverage&&2===i.coverage.length&&n.setCoverage(new s.Interval(i.coverage[0],i.coverage[1]))}if(e.tle){const t=a.addController("tle");t.setSource(e.tle.tleName,e.tle.url),e.tle.coverage&&2===e.tle.coverage.length&&t.setCoverage(new s.Interval(e.tle.coverage[0],e.tle.coverage[1]))}if(e.align){let t=null;if(e.dynamo)for(let i=0;i<e.dynamo.length;i++){const s=e.dynamo[i].url;if(s.includes("/ori")||s.includes("/quat")){t=a.getControllerByType("dynamo",i);break}}const i=a.addController("align",void 0,t);i.setPrimaryAlignType(e.align.primary.type),i.setPrimaryTargetEntity(e.align.primary.target),i.setPrimaryAxis(e.align.primary.axis),e.align.primary.targetAxis&&i.setPrimaryTargetAxis(e.align.primary.targetAxis),e.align.secondary&&(i.setSecondaryAlignType(e.align.secondary.type),i.setSecondaryTargetEntity(e.align.secondary.target),i.setSecondaryAxis(e.align.secondary.axis),e.align.secondary.targetAxis&&i.setSecondaryTargetAxis(e.align.secondary.targetAxis)),e.align.coverage&&2===e.align.coverage.length&&i.setCoverage(new s.Interval(e.align.coverage[0],e.align.coverage[1]))}if(e.spin){const t=a.addController("spin");t.setAxis(e.spin.axis,!0),t.setRate(s.MathUtils.twoPi/(3600*e.spin.periodInHours)),void 0!==e.spin.relativeToTime&&t.setReferenceTime(e.spin.relativeToTime),e.spin.coverage&&2===e.spin.coverage.length&&t.setCoverage(new s.Interval(e.spin.coverage[0],e.spin.coverage[1]))}e.postCreateFunction&&e.postCreateFunction(a,n)}catch(t){throw null!==a&&i.removeEntity(a),new Error(`While creating "${o}": ${t}`)}return a}static getEntityOptions(t){return Entity._entities.get(t)}static getEntityNamesInGroup(t){const e=new Set;if(""!==t){const i=t.split(",").map((t=>t.trim()));for(const[t,s]of Entity._entities){const n=s.groups;if(!n)continue;let o=!0;for(const t of i)n.includes(t)||(o=!1);o&&e.add(t)}}else for(const t of Entity._entities.keys())e.add(t);return e}static getGroups(){const t=new Set;for(const e of this._entities.values()){const i=e.groups;if(void 0!==i)for(let e=0;e<i.length;e++)t.add(i[e])}return t}static createGroup(t,e,i){const s=this.getEntityNamesInGroup(t);for(const t of s)this.create(t,e,i)}static _processCoverages(t,e,i){if(void 0===i)return;let n=t.get("coverage");null===n&&(n=t.addController("coverage",void 0,t.getController(0)));let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let t=0,r=i.length;t<r;t++)n.addCoverage(new s.Interval(i[t][0],i[t][1]),(()=>{e.setEnabled(!0)}),(()=>{e.setEnabled(!1)})),o=Math.min(o,i[t][0]),a=Math.max(a,i[t][1]);e instanceof s.BaseController&&e.setCoverage(new s.Interval(o,a))}}Entity._entities=new Map,e.default=Entity},function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Features}});var s=i(5),n=i(531);class Features{static setEnabled(t,e,i,s){const n=o[e];if(!n)throw new Error(`Attempted to access unavailable feature ${i} for ${e}.`);const a=n[i];if(!a)throw new Error(`Attempted to access unavailable feature ${i} for ${e}.`);a(t,s)}static isEnabled(t,e,i){const s=a[e];if(!s)throw new Error(`Attempted to access unavailable feature ${i} for ${e}.`);const n=s[i];if(!n)throw new Error(`Attempted to access unavailable feature ${i} for ${e}.`);return n(t)}static setEnabledJupiterAuroras(t,e){e?Features._createJupiterModelComponent(t,"auroras","auroras"):!1===e&&t.getEntity("jupiter").removeComponent("auroras")}static isEnabledJupiterAuroras(t){return null!==t.getEntity("jupiter").getComponent("auroras")}static setEnabledJupiterMagnetosphere(t,e){e?Features._createJupiterModelComponent(t,"magnetosphere","magnetosphere"):t.getEntity("jupiter").removeComponent("magnetosphere")}static isEnabledJupiterMagnetosphere(t){return null!==t.getEntity("jupiter").getComponent("magnetosphere")}static setEnabledJupiterRadiationBelt(t,e){if(e)Features._createJupiterModelComponent(t,"radiation_belt_1","radbelt1"),Features._createJupiterModelComponent(t,"radiation_belt_2","radbelt2"),Features._createJupiterModelComponent(t,"radiation_belt_3","radbelt3"),Features._createJupiterModelComponent(t,"radiation_belt_4","radbelt4");else{const e=t.getEntity("jupiter");e.removeComponent("radiation_belt_1"),e.removeComponent("radiation_belt_2"),e.removeComponent("radiation_belt_3"),e.removeComponent("radiation_belt_4")}}static isEnabledJupiterRadiationBelt(t){const e=t.getEntity("jupiter");return null!==e.getComponent("radiation_belt_1")&&null!==e.getComponent("radiation_belt_2")&&null!==e.getComponent("radiation_belt_3")&&null!==e.getComponent("radiation_belt_4")}static setEnabledSaturnMagnetosphere(t,e){e?n.default.createFromOptions("saturn_magnetosphere",{radius:5027500,parents:[[Number.NEGATIVE_INFINITY,"saturn"]],fixed:{position:s.Vector3.Zero},align:{primary:{type:"align",target:"saturn",axis:s.Vector3.ZAxis,targetAxis:s.Vector3.ZAxis},secondary:{type:"point",target:"sun",axis:s.Vector3.XAxis}},model:{url:"$STATIC_ASSETS_URL/models/saturn/magnetosphere/saturn_magnetosphere.gltf",scale:1078.27002124,rotate:[{x:90}]},postCreateFunction:t=>{t.setCanOcclude(!1);const e=t.addComponent("model");e.setUrl("$STATIC_ASSETS_URL/models/saturn/magnetosphere_thin/saturn_magnetosphere_thin.gltf"),e.setScale(1078.27002124),e.setRotation(new s.Quaternion(Math.sqrt(.5),Math.sqrt(.5),0,0)),e.setPixelRadiusVisibleInterval(new s.Interval(4e3,Number.POSITIVE_INFINITY)),e.setResourcesLoadedCallback((()=>{e.getThreeJsObjects()[0].renderOrder=-1}));const i=t.getComponentByType("model");i.setPixelRadiusVisibleInterval(new s.Interval(0,4e3)),i.setResourcesLoadedCallback((()=>{i.getThreeJsObjects()[0].renderOrder=-1}))}},t):t.removeEntity("saturn_magnetosphere")}static isEnabledSaturnMagnetosphere(t){return null!==t.getEntity("saturn_magnetosphere")}static _createJupiterModelComponent(t,e,i){const n=t.getEntity("jupiter").addComponent("model",e);n.setUrl(`$STATIC_ASSETS_URL/models/jupiter/${e}/jupiter_${i}.gltf`),n.setScale(1337.08);const o=new s.Quaternion(Math.SQRT1_2,Math.SQRT1_2,0,0),a=new s.Quaternion(Math.SQRT1_2,0,0,Math.SQRT1_2);o.mult(a,o),n.setRotation(o)}}const o={jupiter:{auroras:Features.setEnabledJupiterAuroras,magnetosphere:Features.setEnabledJupiterMagnetosphere,radiationBelt:Features.setEnabledJupiterRadiationBelt},saturn:{magnetosphere:Features.setEnabledSaturnMagnetosphere}},a={jupiter:{auroras:Features.isEnabledJupiterAuroras,magnetosphere:Features.isEnabledJupiterMagnetosphere,radiationBelt:Features.isEnabledJupiterRadiationBelt},saturn:{magnetosphere:Features.isEnabledSaturnMagnetosphere}}},function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Parenting}});var s=i(531),n=i(5);class Parenting{static getParentOfEntity(t,e){const i=s.default.getEntityOptions(t);if(void 0===i)throw new Error(`There are no entity options for ${t}.`);const a=i.parents,r=n.Sort.getIndex(e,a,o);return r<a.length&&e===a[r][0]?a[r][1]:r>0?a[r-1][1]:""}static getAllAncestorsOfEntity(t){const e=new Set;return this._getAllAncestorsOfEntityRecursed(t,e),e}static _getAllAncestorsOfEntityRecursed(t,e){const i=s.default.getEntityOptions(t);if(void 0===i||void 0===i.parents)return;const n=i.parents;for(const t of n){const i=t[1];e.has(i)||(e.add(i),this._getAllAncestorsOfEntityRecursed(i,e))}}}function o(t,e){return t[0]<e}},function(t,e,i){"use strict";i.r(e);var s=i(5);e.default=class Placemarks{static addPlacemark(t,e,i,n,o,a,r=!1){const l=i.getScene().addEntity(t);l.setParent(i),l.setCanOcclude(!1),l.setExtentsRadius(1);const c=l.addComponent("div");return c.setAlignment(new s.Vector2(.5,.5)),c.getDiv().innerHTML=e,l.addController("fixed"),l.addController("rotateByEntityOrientation"),this.updateLLA(l,n,o,a,r),l}static updateLLA(t,e,i,n,o=!1){const a=t.getParent(),r=t.get("fixed"),l=a.getComponentByType("spheroid");if(null===r||null===l)throw new Error("No fixed controller and/or spheroid component.");const c=s.LatLonAlt.pool.get(),h=s.Vector3.pool.get();if(c.set(s.MathUtils.degToRad(e),s.MathUtils.degToRad(i),n),l.xyzFromLLA(h,c),r.setPosition(h),s.Vector3.pool.release(h),o){const t=s.Quaternion.pool.get(),e=s.Vector3.pool.get(),i=s.Vector3.pool.get();l.eastFromLLA(e,c),l.northFromLLA(i,c),t.setFromAxes(e,i,void 0),r.setOrientation(t),s.Vector3.pool.release(e),s.Vector3.pool.release(i),s.Quaternion.pool.release(t)}s.LatLonAlt.pool.release(c)}}},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(531);class SceneHelpers{static getEclipJ2000ToJ2000Rotation(){return this.eclipJ2000ToJ2000Rotation}static async waitTillEntitiesInPlace(t,e,i,n=5,o=.03){const a=new Set;for(const i of e){const e=t.getEntity(i);if(null===e)throw new Error('Entity "'+i+'" not added yet. Use Entity.create to add the entity.');a.add(e)}const r=[];for(const t of a)for(let e=0;e<t.getNumControllers();e++)r.push(t.getController(e).getLoadedPromise());return await Promise.all(r),void 0===i&&(i=t.getEngine().getTime()),new Promise(((t,e)=>{let r=0;const l=setInterval((()=>{const c=s.Vector3.pool.get(),h=s.Quaternion.pool.get();for(const t of a){const e=t.getPositionCoverage().contains(i);t.getPositionAtTime(c,i),t.getOrientationAtTime(h,i);const s=!c.isNaN()&&!h.isNaN();e&&!s||a.delete(t)}if(s.Quaternion.pool.release(h),s.Vector3.pool.release(c),0===a.size&&(clearInterval(l),t()),r+=o,r>=n){clearInterval(l);let t="";for(const e of a)""!==t&&(t+=", "),t+="'"+e.getName()+"'";e(new Error("Timed out ("+n+" seconds) while waiting for entities to be in place. The remaining entities were ["+t+"]."))}}),1e3*o)})).then((()=>t.getEngine().waitUntilNextFrame()))}static llaToXYZ(t,e,i,s){const n=e.get("spheroid");null!==n&&(n.xyzFromLLA(t,i),s||t.rotate(e.getOrientation(),t))}static xyzToLLA(t,e,i,n){const o=e.get("spheroid");if(null!==o){const a=s.Vector3.pool.get();n?a.copy(i):a.rotateInverse(e.getOrientation(),i),o.llaFromXYZ(t,a),s.Vector3.pool.release(a)}}static getDependentEntities(t){const e=new Set;return this._getDependentEntitiesRecursed(t,e),e.delete(t),e}static _getDependentEntitiesRecursed(t,e){const i=n.default.getEntityOptions(t);if(void 0===i)return;const s=new Set,o=i.parents;for(const t of o)""!==t[1]&&s.add(t[1]);void 0!==i.lightSource&&s.add(i.lightSource),void 0!==i.trail&&void 0!==i.trail.relativeTo&&s.add(i.trail.relativeTo),void 0!==i.align&&(void 0!==i.align.primary.target&&s.add(i.align.primary.target),void 0!==i.align.secondary&&void 0!==i.align.secondary.target&&s.add(i.align.secondary.target)),i.labelFadeEntity&&s.add(i.labelFadeEntity);for(const t of s)e.has(t)||(e.add(t),this._getDependentEntitiesRecursed(t,e))}}SceneHelpers.eclipJ2000ToJ2000Rotation=new s.Quaternion(.9791532214288992,.2031230389823101,0,0),SceneHelpers.eclipJ2000ToJ2000Rotation.freeze(),e.default=SceneHelpers},function(t,e,i){"use strict";i.r(e);var s=i(5);class Transitions{static jumpToLocationOnSphere(t,e,i,n,o,a,r,l,c,h){t<=0&&(t=.001),h=Transitions.easeInOut(h),void 0===n&&(n=o.getParent());const u=s.Vector3.pool.get(),d=s.Vector3.pool.get();null!==o.getParent()?(o.getParent().getPositionRelativeToEntity(u,a,n),o.getParent().getPositionRelativeToEntity(d,r,n)):(u.copy(a),d.copy(r));const p=u.magnitude()-e,_=d.magnitude()-e,g=s.Vector3.pool.get();i&&n?n.getOrientation().getAxis(g,2):g.cross(u,d),g.normalize(g),g.isZero()&&g.set(0,0,1);let m=0;const y=s.Vector3.pool.get(),f=s.Vector3.pool.get(),b=s.Quaternion.pool.get();b.setFromAxis(g,2),y.rotateInverse(b,u),f.rotateInverse(b,d);const T=s.LatLonAlt.pool.get(),v=s.LatLonAlt.pool.get();s.Geometry.getLLAFromXYZOnSphere(T,y,0),s.Geometry.getLLAFromXYZOnSphere(v,f,0),s.Vector3.pool.release(f),s.Vector3.pool.release(y);let E=T.lon*Math.cos(T.lat),x=v.lon*Math.cos(v.lat);E+Math.PI<x&&(E+=2*Math.PI),x+Math.PI<E&&(x+=2*Math.PI),m=e*t*Math.sqrt((x-E)*(x-E)+(v.lat-T.lat)*(v.lat-T.lat));const S=s.Vector2.pool.get();Transitions._jumpOnCircle(S,m,p,_,h);const C=S.x,w=S.y;s.Vector2.pool.release(S);const I=s.Vector3.pool.get();I.normalize(u),I.mult(I,w+e);const M=s.LatLonAlt.pool.get();let N;N=0!==m?(m-C)/m:0,M.lat=s.MathUtils.lerp(T.lat,v.lat,N),M.lon=s.MathUtils.lerpAngle(T.lon,v.lon,N),M.alt=w,s.Geometry.getXYZFromLLAOnSphere(I,M,e),I.rotate(b,I),s.LatLonAlt.pool.release(M),s.LatLonAlt.pool.release(T),s.LatLonAlt.pool.release(v),s.Quaternion.pool.release(b),I.isNaN()&&I.copy(d),null!==o.getParent()&&n.getPositionRelativeToEntity(I,I,o.getParent()),o.setPosition(I),s.Vector3.pool.release(I),s.Vector3.pool.release(g);const A=s.Vector3.pool.get();n.getPositionRelativeToEntity(A,s.Vector3.Zero,o),A.normalize(A);const L=s.Vector3.pool.get(),R=s.Quaternion.pool.get();i?n.getOrientation().getAxis(L,2):(R.slerp(l,c,h),R.getAxis(L,2)),L.setNormalTo(A,L),R.setFromAxes(void 0,A,L),o.setOrientation(R),s.Vector3.pool.release(L),s.Quaternion.pool.release(R),s.Vector3.pool.release(A),s.Vector3.pool.release(u),s.Vector3.pool.release(d)}static easeInOut(t){const e=t*t;return e/(2*(e-t)+1)}static _jumpOnCircle(t,e,i,s,n){let o=0,a=0;if(Math.abs(e/(s-i))>1e-6){const t=(s-i)/-e*(s+i)/2+e/2,r=Math.sign(e)*Math.acos((i*s+(e-t)*-t)/Math.sqrt(i*i+(e-t)*(e-t))/Math.sqrt(s*s+t*t)),l=Math.cos(n*r),c=Math.sin(n*r);o=(e-t)*c+i*l,a=t+(e-t)*l-i*c}else o=n*s+(1-n)*i,a=(1-n)*e;1===n&&(o=s,a=0),t.set(a,o)}}e.default=Transitions},function(t,e,i){"use strict";i.r(e);var s=i(5);class AnnulusComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._sizeInner=1,this._sizeOuter=1,this._ignoreDistance=!1,this._minDistanceM=0,this._minDistanceB=0,this._maxDistanceM=0,this._maxDistanceB=0,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._alphaMultiplier=1,this._numPointsOnCircle=200,this._meshDirty=!0,this.__setRadius(this._sizeOuter),this.__setUsesEntityOrientation(!0)}getInnerRadius(){return this._sizeInner}setInnerRadius(t){this._sizeInner=t,this._meshDirty=!0}getOuterRadius(){return this._sizeOuter}setOuterRadius(t){this._sizeOuter=t,this._meshDirty=!0,this.__setRadius(t)}setIgnoreDistance(t){this._ignoreDistance=t,this._alphaMultiplier=1,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}setMinDistance(t){this._minDistanceM=1/(t-t/1.1),this._minDistanceB=-1*this._minDistanceM*t/1.1}setMaxDistance(t){this._maxDistanceM=-1/(1.1*t-t),this._maxDistanceB=-1*this._maxDistanceM*t*1.1}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}__prepareForRender(t){if(s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t),this._meshDirty&&this._updateMesh(),!this._ignoreDistance){const e=this.getEntity().getCameraSpacePosition(t).magnitude(),i=this._minDistanceM*e+this._minDistanceB,n=this._maxDistanceM*e+this._maxDistanceB;this._alphaMultiplier=s.MathUtils.clamp01(Math.min(i,n)),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("basic_alpha");this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setUniformColorRGBA(t,"color",this._color,this._alphaMultiplier);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);return this.getThreeJsObjects().push(e),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyObject(this.getThreeJsObjects()[0]),s.ThreeJsHelper.destroyMaterial(this.getThreeJsMaterials()[0])}_updateMesh(){const t=new Float32Array(4*this._numPointsOnCircle*3),e=new Uint16Array(6*this._numPointsOnCircle);let i=0,n=0;const o=new s.Vector3,a=new s.Vector3,r=this._sizeOuter,l=this._sizeInner/this._sizeOuter;for(let c=0;c<this._numPointsOnCircle;c++){const h=c/this._numPointsOnCircle*s.MathUtils.twoPi,u=(c+1)%this._numPointsOnCircle/this._numPointsOnCircle*s.MathUtils.twoPi;o.set(r*Math.cos(h),r*Math.sin(h),0),a.set(r*Math.cos(u),r*Math.sin(u),0),t[i+0]=o.x*l,t[i+1]=o.y*l,t[i+2]=o.z*l,t[i+3]=o.x,t[i+4]=o.y,t[i+5]=o.z,t[i+6]=a.x,t[i+7]=a.y,t[i+8]=a.z,t[i+9]=a.x*l,t[i+10]=a.y*l,t[i+11]=a.z*l,e[n+0]=i/3+0,e[n+1]=i/3+1,e[n+2]=i/3+2,e[n+3]=i/3+2,e[n+4]=i/3+3,e[n+5]=i/3+0,i+=12,n+=6}const c=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(c,"position",t),s.ThreeJsHelper.setIndices(c,e),this._meshDirty=!1}}e.default=AnnulusComponent},function(t,e,i){"use strict";i.r(e);var s=i(5);class CelestialGridComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._degreesPerLine=10,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._lineMesh=null,this._meshDirty=!0}setRadius(t){this.__setRadius(t),s.ThreeJsHelper.setScale(this.getThreeJsObjects(),this.getRadius())}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),this._meshDirty=!0}getDegreesPerLine(){return this._degreesPerLine}setDegreesPerLine(t){this._degreesPerLine=t,this._meshDirty=!0}__prepareForRender(t){this._meshDirty&&this._updateMesh(),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t),this._lineMesh.prepareForRender(t)}__loadResources(){return this._lineMesh=new s.LineMesh(this),this._updateMesh(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=[];for(let e=0;e<360;e+=this._degreesPerLine){const i=Math.min(e+this._degreesPerLine,360),n=s.MathUtils.degToRad(e),o=s.MathUtils.degToRad(i);for(let e=-90;e<90;e+=this._degreesPerLine){const i=Math.min(e+this._degreesPerLine,90),a=s.MathUtils.degToRad(e),r=s.MathUtils.degToRad(i);-90<e&&e<90&&(t.push(new s.Vector3(Math.sin(n)*Math.cos(a),Math.cos(n)*Math.cos(a),Math.sin(a))),t.push(new s.Vector3(Math.sin(o)*Math.cos(a),Math.cos(o)*Math.cos(a),Math.sin(a)))),t.push(new s.Vector3(Math.sin(n)*Math.cos(a),Math.cos(n)*Math.cos(a),Math.sin(a))),t.push(new s.Vector3(Math.sin(n)*Math.cos(r),Math.cos(n)*Math.cos(r),Math.sin(r)))}}const e=[];for(let i=0,s=t.length;i<s;i++)e.push(this._color);const i=[];for(let e=0,s=t.length;e<s;e++)i.push(2);this._lineMesh.setPositions(t),this._lineMesh.setColors(e),this._lineMesh.setWidths(i),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),s.Quaternion.Identity),s.ThreeJsHelper.setScale(this.getThreeJsObjects(),this.getRadius()),this._meshDirty=!1}}e.default=CelestialGridComponent},function(t,e,i){"use strict";i.r(e);var s=i(535),n=i(5);class ConstellationsComponent extends n.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this._database=[],this._numVertices=[],this._labelEntities=[],this._color=new n.Color,this._lineWidth=2,this._glowWidth=0,this._highlightedIndex=void 0,this._highlightColor=new n.Color,this._highlightWidth=0,this._lineMeshes=[],this.__setRadius(Number.POSITIVE_INFINITY)}setColor(t){this._color.copy(t);for(let t=0;t<this._lineMeshes.length;t++){const e=[];for(let i=0;i<this._numVertices[t];i++)e.push(this._color);this._lineMeshes[t].setColors(e)}}setLineWidth(t){this._lineWidth=t;for(let e=0;e<this._lineMeshes.length;e++)this._lineMeshes[e].setWidths(t)}setGlowWidth(t){this._glowWidth=t;for(let t=0,e=this._lineMeshes.length;t<e;t++)this._lineMeshes[t].setGlowWidth(this._glowWidth)}setUrl(t){this._url=t,this.resetResources()}getNames(){const t=[];for(let e=0,i=this._database.length;e<i;e++)t.push(this._database[e].name);return t}setHighlight(t,e,i){if(this._lineMeshes.length>0&&void 0!==this._highlightedIndex){const t=[];for(let e=0,i=this._numVertices[this._highlightedIndex];e<i;e++)t.push(this._color);this._lineMeshes[this._highlightedIndex].setColors(t),this._lineMeshes[this._highlightedIndex].setWidths(this._lineWidth)}if(this._highlightedIndex=t,this._highlightColor.copy(e),this._highlightWidth=i,this._lineMeshes.length>0&&void 0!==this._highlightedIndex){const t=[];for(let e=0,i=this._numVertices[this._highlightedIndex];e<i;e++)t.push(this._highlightColor);this._lineMeshes[this._highlightedIndex].setColors(t),this._lineMeshes[this._highlightedIndex].setWidths(this._highlightWidth)}}getNearestConstellationIndex(t,e){let i,s=Number.POSITIVE_INFINITY;for(let n=0,o=this._labelEntities.length;n<o;n++){const o=t.distance(this._labelEntities[n].getPixelSpacePosition(e));o<s&&(s=o,i=n)}return i}__prepareForRender(t){n.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);for(let e=0;e<this._lineMeshes.length;e++)this._lineMeshes[e].prepareForRender(t)}async __loadResources(){this._labelEntities=[],this._lineMeshes=[],this._numVertices=[];const t=await this.getEntity().getScene().getEngine().getDownloader().download(this._url,!0);if("completed"===t.status&&t.content instanceof ArrayBuffer){const e=new n.Reader(t.content);for(;!e.isAtEnd();){const t={name:"",stars:[],segments:[],color:[]};t.name=e.readString(e.readByte()),t.color=[e.readByte(),e.readByte(),e.readByte(),e.readByte()];const i=e.readByte();for(let s=0;s<i;s++)t.stars.push([e.readFloat32(),e.readFloat32(),e.readFloat32()]);const s=2*e.readByte();for(let i=0;i<s;i++)t.segments.push(e.readByte());this._database.push(t)}}for(let t=0;t<this._database.length;t++){const e=this._database[t].stars,i=this._database[t].segments,s=[],o=[],a=[];for(let r=0;r<i.length;r++){const l=i[r];s.push(new n.Vector3(e[l][2],-e[l][0],e[l][1])),o.push(t===this._highlightedIndex?this._highlightColor:this._color),a.push(t===this._highlightedIndex?this._highlightWidth:this._lineWidth)}const r=new n.LineMesh(this);r.setPositions(s),r.setColors(o),r.setWidths(a),r.setGlowWidth(this._glowWidth),this._lineMeshes.push(r),this._numVertices.push(i.length)}n.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),s.default.getEclipJ2000ToJ2000Rotation());for(let t=0;t<this._database.length;t++){const e=this._database[t].stars,i=new n.Vector3(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),o=new n.Vector3(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),a=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]);for(let t=0;t<e.length;t++){const r=e[t],l=new n.Vector3;l.set(r[2],-r[0],r[1]),l.rotate(s.default.getEclipJ2000ToJ2000Rotation(),l),l.normalize(l),l.mult(l,a),i.x>l.x&&(i.x=l.x),o.x<l.x&&(o.x=l.x),i.y>l.y&&(i.y=l.y),o.y<l.y&&(o.y=l.y),i.z>l.z&&(i.z=l.z),o.z<l.z&&(o.z=l.z)}const r=new n.Vector3;r.add(i,o),r.mult(r,.5);const l=this.getEntity().getScene().addEntity("constellation_label_"+this._database[t].name);l.setParent(this.getEntity()),l.setOrientation(n.Quaternion.Identity),l.setPosition(r);const c=l.addComponent("div");c.setAlignment(new n.Vector2(.5,.5));const h=c.getDiv();h.classList.add("pioneer-constellation-label"),h.innerHTML=this._database[t].name,this._labelEntities.push(l)}}__unloadResources(){for(let t=0;t<this._labelEntities.length;t++)this.getEntity().getScene().removeEntity(this._labelEntities[t]);n.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMeshes=[],this._database=[]}}e.default=ConstellationsComponent},function(t,e,i){"use strict";i.r(e);var s=i(5);class DiscGridComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._size=1,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._lineWidth=1,this._numCircles=10,this._numSpokes=20,this._radialPower=1,this._ignoreDistance=!1,this._lineMesh=null,this._meshDirty=!0,this.__setRadius(this._size),this.__setUsesEntityOrientation(!0)}getSize(){return this._size}setSize(t){this._size=t,this.__setRadius(this._size),null!==this._lineMesh&&this._lineMesh.setScale(this._size)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),this._meshDirty=!0}getLineWidth(){return this._lineWidth}setLineWidth(t){this._lineWidth=t,null!==this._lineMesh&&this._lineMesh.setWidths(this._lineWidth)}getNumCircles(){return this._numCircles}setNumCircles(t){this._numCircles=t,this._meshDirty=!0}getNumSpokes(){return this._numSpokes}setNumSpokes(t){this._numSpokes=t,this._meshDirty=!0}getRadialPower(){return this._radialPower}setRadialPower(t){this._radialPower=t,this._meshDirty=!0}setIgnoreDistance(t){this._ignoreDistance=t}__prepareForRender(t){if(this._meshDirty&&this._updateMesh(),!this._ignoreDistance){const e=(.02-this.getEntity().getNormalSpaceExtentsRadius(t))/.02;this._lineMesh.setAlphaMultiplier(e)}this._lineMesh.prepareForRender(t);for(let e=0,i=this.getThreeJsObjects().length;e<i;e++)s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[e],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[e],this.getEntity(),t)}__loadResources(){return this._lineMesh=new s.LineMesh(this),this._updateMesh(),this._lineMesh.setScale(this._size),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=[];for(let e=1;e<=this._numCircles;e++){const i=1!==this._radialPower?Math.pow(this._radialPower,e-this._numCircles):e/this._numCircles,n=50;for(let e=0;e<n;e++){const o=e/n*s.MathUtils.twoPi,a=(e+1)%n/n*s.MathUtils.twoPi;t.push(new s.Vector3(i*Math.cos(o),i*Math.sin(o),0)),t.push(new s.Vector3(i*Math.cos(a),i*Math.sin(a),0))}}for(let e=0;e<this._numSpokes;e++){const i=e/this._numSpokes*s.MathUtils.twoPi;t.push(s.Vector3.Zero),t.push(new s.Vector3(Math.cos(i),Math.sin(i),0))}const e=[];for(let i=0,s=t.length;i<s;i++)e.push(this._color);this._lineMesh.setPositions(t),this._lineMesh.setColors(e),this._lineMesh.setWidths(this._lineWidth),this._meshDirty=!1}}e.default=DiscGridComponent},function(t,e,i){"use strict";i.r(e);var s=i(5);class OrbitLineComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._farSideAlphaFade=1,this._lineWidth=5,this._glowWidth=0,this._lineMesh=null,this._positions=[],this._colors=[],this._widths=[],this._pixelSpaceRadiiAlphaFade=[5,1],this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){if(this._color.thaw(),this._color.copy(t),this._color.freeze(),null!==this._lineMesh){for(let t=0,e=this._colors.length;t<e;t++)this._colors[t].copy(this._color);this._lineMesh.setColors(this._colors)}}getFarSideAlphaFade(){return this._farSideAlphaFade}setFarSideAlphaFade(t){this._farSideAlphaFade=t}getLineWidth(){return this._lineWidth}setLineWidth(t){if(this._lineWidth=t,null!==this._lineMesh){for(let t=0,e=this._widths.length;t<e;t++)this._widths[t]=this._lineWidth;this._lineMesh.setWidths(this._widths)}}setGlowWidth(t){this._glowWidth=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"glowWidth",this._glowWidth)}setPixelSpaceRadiiAlphaFade(t,e){this._pixelSpaceRadiiAlphaFade[0]=t,this._pixelSpaceRadiiAlphaFade[1]=e}__prepareForRender(t){this._updateMesh();const e=this.getEntity().getPixelSpaceExtentsRadius(t);if(isNaN(e))this._lineMesh.setAlphaMultiplier(1);else{const t=(e-this._pixelSpaceRadiiAlphaFade[0])/(this._pixelSpaceRadiiAlphaFade[1]-this._pixelSpaceRadiiAlphaFade[0]);this._lineMesh.setAlphaMultiplier(s.MathUtils.lerp(0,1,s.MathUtils.clamp01(t)))}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t),this._lineMesh.prepareForRender(t)}__loadResources(){this._lineMesh=new s.LineMesh(this);for(let t=0,e=720;t<e;t++)this._positions.push(new s.Vector3),this._colors.push(new s.Color),this._colors[t].copy(this._color),this._widths.push(this._lineWidth);return this._lineMesh.setColors(this._colors),this._lineMesh.setWidths(this._widths),this._lineMesh.setGlowWidth(this._glowWidth),Promise.resolve()}__unloadResources(){this._positions=[],this._colors=[],this._widths=[],s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=this.getEntity(),e=t.getScene().getEngine().getTime();let i=0;for(let s=t.getNumControllers()-1;s>=0;s--){const n=t.getController(s);if(n.getCoverage().contains(e)&&"dynamo"===n.getType()){const t=n;if("orb"===t.getPointType()){i=t.getHeaderValue("gravitationalParameter1")+t.getHeaderValue("gravitationalParameter2");break}}}n.setFromPositionAndVelocity(t.getPosition(),t.getVelocity(),e,i);const a=t.getPosition(),r=n.getTrueAnomalyFromPosition(a),l=n.getEccentricAnomalyFromTrueAnomaly(r);let c=!1;for(let t=0;t<360;t+=1){const e=2*t,i=(2*t-1+this._positions.length)%this._positions.length;let r=n.getEccentricAnomalyFromTrueAnomaly(s.MathUtils.degToRad(t-180));const h=n.getEccentricAnomalyFromTrueAnomaly(s.MathUtils.degToRad(t+1-180));(r<l&&l<h||h<l&&l<r)&&(r=l);const u=n.getMeanAnomalyFromEccentricAnomaly(r),d=n.epoch+(u-n.meanAnomalyAtEpoch)/n.meanAngularMotion,p=this._positions[e];if(n.project(p,o,d),p.sub(p,a),this._positions[i].copy(p),isNaN(u)){c=!0;const t=(e+1)%this._positions.length,s=(i-1+this._positions.length)%this._positions.length;this._positions[e].set(0,0,0),this._positions[i].set(0,0,0),this._positions[t].set(0,0,0),this._positions[s].set(0,0,0),this._colors[e].a=0,this._colors[i].a=0,this._colors[t].a=0,this._colors[s].a=0;continue}let _=0;_=s.MathUtils.angle(r,l)/Math.PI,_=s.MathUtils.clamp01(_);const g=s.MathUtils.lerp(1,this._farSideAlphaFade,_);this._colors[e].mult(this._color,g),c||this._colors[i].mult(this._color,g),c=!1}n.eccentricity>=1&&(this._positions[this._positions.length-2].copy(this._positions[this._positions.length-3]),this._positions[this._positions.length-1].copy(this._positions[this._positions.length-3]),this._colors[this._colors.length-2].a=0,this._colors[this._colors.length-1].a=0),this._lineMesh.setPositions(this._positions),this._lineMesh.setColors(this._colors)}}const n=new s.OrbitalElements,o=new s.Vector3;e.default=OrbitLineComponent},function(t,e,i){"use strict";i.r(e);var s=i(5);class TorusComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._innerRadius=1,this._outerRadius=10,this._visibleDistanceInterval=new s.Interval(0,Number.POSITIVE_INFINITY),this._visibleDistanceInterval.freeze(),this._alphaMultiplier=1,this.__setRadius(this._outerRadius),this.__setUsesEntityOrientation(!0)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}getInnerRadius(){return this._innerRadius}setInnerRadius(t){this._innerRadius=t,this.resetResources()}getOuterRadius(){return this._outerRadius}setOuterRadius(t){this._outerRadius=t,this.__setRadius(this._outerRadius),this.resetResources()}getVisibleDistanceInterval(){return this._visibleDistanceInterval}setVisibleDistanceInterval(t){this._visibleDistanceInterval.thaw(),this._visibleDistanceInterval.copy(t),this._visibleDistanceInterval.freeze()}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t);const e=this.getEntity().getCameraSpacePosition(t).magnitude(),i=.5*(this._visibleDistanceInterval.max-this._visibleDistanceInterval.min),n=Math.min(.5*this._visibleDistanceInterval.min,i),o=Math.min(.5*this._visibleDistanceInterval.max,i);e<this._visibleDistanceInterval.min+n?this._alphaMultiplier=Math.max(0,(e-this._visibleDistanceInterval.min)/n):e>this._visibleDistanceInterval.max-o?this._alphaMultiplier=Math.max(0,(this._visibleDistanceInterval.max-e)/o):this._alphaMultiplier=1,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("basic_alpha");this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setUniformColorRGBA(t,"color",this._color,this._alphaMultiplier);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);return this.getThreeJsObjects().push(e),this._createMesh(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_createMesh(){const t=100,e=20,i=new Float32Array(6e3),n=new Uint16Array(12e3),o=(this._outerRadius+this._innerRadius)/2,a=(this._outerRadius-this._innerRadius)/2;for(let r=0;r<t;r++){const l=r/t*s.MathUtils.twoPi,c=Math.cos(l),h=Math.sin(l);for(let l=0;l<e;l++){const u=l/e*s.MathUtils.twoPi,d=Math.cos(u),p=Math.sin(u),_=3*(r*e+l);i[_+0]=c*(o+a*d),i[_+1]=h*(o+a*d),i[_+2]=a*p;const g=6*(r*e+l),m=(r+1)%t,y=(l+1)%e;n[g+0]=r*e+l,n[g+1]=m*e+l,n[g+2]=r*e+y,n[g+3]=m*e+y,n[g+4]=r*e+y,n[g+5]=m*e+l}}const r=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(r,"position",i),s.ThreeJsHelper.setIndices(r,n)}}e.default=TorusComponent},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(544);class WMTSComponent extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._capabilities=null,this._endPoint="",this._layerIdentifier="",this._tileMatrixSetIdentifier="",this._style="",this._dimensionValues=new Map,this._minLevel=Number.NEGATIVE_INFINITY,this._maxLevel=Number.POSITIVE_INFINITY,this._splitJoinThresholdFactor=512,this._layer=null,this._tileMatrixSet=null,this._tileUrl="",this._shadowEntities=[],this._engine=this.getEntity().getScene().getEngine(),this._cameraPositions=[],this._rootTile=null,this._tilePixelSize=void 0,this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,this._loadsThisFrame=0,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}async setEndPoint(t){this._endPoint=t,this.resetResources()}setLayer(t){this._layerIdentifier=t,this.resetResources()}setTileMatrixSet(t){this._tileMatrixSetIdentifier=t,this.resetResources()}setStyle(t){this._style=t,this.resetResources()}setDimensionValue(t,e){this._dimensionValues.set(t,e),this.resetResources()}getLayers(){return null!==this._capabilities?this._capabilities.layers:new Map}getMinLevel(){return this._minLevel}setMinLevel(t){this._minLevel=t}getMaxLevel(){return this._maxLevel}setMaxLevel(t){this._maxLevel=t}getTilesLoadedPromise(){return this._tilesLoadedPromise||Promise.resolve()}setSpheroidReference(t){"string"==typeof t?this._spheroidComponentRef.setByName(this.getEntity().getName(),t):this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid",t)}__getLayer(){return this._layer}__getTileMatrixSet(){return this._tileMatrixSet}__getTileUrl(){return this._tileUrl}__getLayerBounds(){return null!==this._layer?this._layer.boundingBox:null}__getMaxLevel(){return this._maxLevel}__getMinLevel(){return this._minLevel}__getSplitJoinFactor(){return this._splitJoinThresholdFactor}__getTilePixelSize(){return this._tilePixelSize}__setTilePixelSize(t){this._tilePixelSize=t}__getLoadsThisFrame(){return this._loadsThisFrame}__incLoadsThisFrame(){this._loadsThisFrame+=1}__getCameraPositions(){return this._cameraPositions}__getSpheroidComponent(){return this._spheroidComponentRef.get()}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){if(this._spheroidComponentRef.update(),null===this._rootTile)return;for(;this._cameraPositions.length>this._engine.getNumViewports();)this._cameraPositions.pop();for(;this._cameraPositions.length<this._engine.getNumViewports();)this._cameraPositions.push(new s.Vector3);const t=s.Vector3.pool.get();for(let e=0,i=this._engine.getNumViewports();e<i;e++)t.neg(this.getEntity().getCameraSpacePosition(this._engine.getViewport(e).getCamera())),this._cameraPositions[e].rotateInverse(this.getEntity().getOrientation(),t);s.Vector3.pool.release(t),this._loadsThisFrame=0;const e=this._rootTile.update();if(null===this._tilesLoadedPromise&&e&&(this._tilesLoadedPromise=new Promise((t=>{this._transitionsCompleteCallback=t}))),null!==this._tilesLoadedPromise&&!e){const t=this._transitionsCompleteCallback;this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,t()}}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects(),this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);const e=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,e,!0)}async __loadResources(){if(""!==this._endPoint){this._capabilities=new n.Capabilities(this._endPoint,this._engine),await this._capabilities.readyPromise;let t=this._layerIdentifier;if(""===t){const e=this._capabilities.layers;if(1===e.size)for(const[,i]of e)t=i}if(""===t)return;if(this._layer=this._capabilities.getLayer(t),null===this._layer)throw new Error('Invalid layer: "'+t+'".');let e=this._tileMatrixSetIdentifier;if(""===e){const t=this._layer.tileMatrixSets;if(1===t.size)for(const i of t)e=i}if(this._tileMatrixSet=this._capabilities.getTileMatrixSet(e),null===this._tileMatrixSet)throw new Error('Invalid tile matrix set: "'+e+'".');await this._tileMatrixSet.readyPromise;const i=new s.Rect;i.copy(this._tileMatrixSet.boundingBox),1===this._tileMatrixSet.getNumTiles(0).x&&(i.size.x*=2),1===this._tileMatrixSet.getNumTiles(0).y&&(i.origin.y-=i.size.y,i.size.y*=2);let o=this._style;""===o&&(o=this._layer.defaultStyle);for(const[t,e]of this._layer.dimensions)this._dimensionValues.has(t)||this._dimensionValues.set(t,e);this._tileUrl=this._layer.url,this._tileUrl=this._tileUrl.replace("{TileMatrixSet}",this._tileMatrixSet.identifier),this._tileUrl=this._tileUrl.replace("{Style}",o),this._dimensionValues.forEach(((t,e)=>{this._tileUrl=this._tileUrl.replace("{"+e+"}",t)})),this._rootTile=new WMTSTile(this,null,-1,0,0,i)}}__unloadResources(){this._capabilities=null,this._layer=null,this._tileMatrixSet=null,this._tileUrl="",this._rootTile.destroy(),this._rootTile=null}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}class WMTSTile extends s.Tile{constructor(t,e,i,n,o,a){super(e),this._component=t,this._level=i,this._row=n,this._col=o,this._tileBounds=new s.Rect,this._tileBounds.copy(a),this._center=new s.Vector3,this._radius=0,this._threeJsMaterial=null,this._threeJsObject=null;const r=t.__getSpheroidComponent(),l=this._component.__getTileMatrixSet(),c=new s.Vector3;l.crsUnitsToXYZ(c,this._tileBounds.origin,r);const h=new s.Vector2;h.add(this._tileBounds.origin,this._tileBounds.size);const u=new s.Vector3;l.crsUnitsToXYZ(u,h,r);const d=new s.Vector2;d.addMult(this._tileBounds.origin,this._tileBounds.size,.5),l.crsUnitsToXYZ(this._center,d,r);const p=new s.Vector3,_=new s.Vector3;p.x=Math.min(c.x,u.x,this._center.x),p.y=Math.min(c.y,u.y,this._center.y),p.z=Math.min(c.z,u.z,this._center.z),_.x=Math.max(c.x,u.x,this._center.x),_.y=Math.max(c.y,u.y,this._center.y),_.z=Math.max(c.z,u.z,this._center.z),this._center.add(p,_),this._center.mult(this._center,.5);const g=new s.Vector3;g.sub(this._center,p),this._radius=g.magnitude()}createNewTile(t,e,i){const n=t._level+1,o=2*t._row+e,a=2*t._col+i,r=t._component.__getTileMatrixSet().getNumTiles(t._level+1);if(o>=r.y||a>=r.x)return null;const l=new s.Rect;return l.origin.set(t._tileBounds.origin.x+.5*i*t._tileBounds.size.x,t._tileBounds.origin.y+.5*(1-e)*t._tileBounds.size.y),l.size.set(.5*t._tileBounds.size.x,.5*t._tileBounds.size.y),new WMTSTile(t._component,t,n,o,a,l)}checkSplit(){if(this._level>=this._component.__getTileMatrixSet().numLevels-1)return!1;if(!this._tileBounds.intersects(this._component.__getLayerBounds()))return!1;if(this._level>=this._component.__getMaxLevel())return!1;if(this._component.__getLoadsThisFrame()>=1)return!1;if(this._level<this._component.__getMinLevel())return!0;if(-1===this._level)return!0;let t=this._component.__getTilePixelSize();if(void 0===t&&null!==this._threeJsMaterial){if(t=this._threeJsMaterial.uniforms.colorTexture.value.image.width,1===t)return!1;this._component.__setTilePixelSize(t)}return this._getNearestDistance()<this._component.__getSplitJoinFactor()*this._radius/t}checkJoin(){if(-1===this._level)return!1;if(this._component.__getLoadsThisFrame()>=1)return!1;if(this._level>this._component.__getMaxLevel())return!0;if(this._level<=this._component.__getMinLevel())return!1;let t=this._component.__getTilePixelSize();return void 0===t&&null!==this._threeJsMaterial&&(t=this._threeJsMaterial.uniforms.colorTexture.value.image.width,this._component.__setTilePixelSize(t)),this._getNearestDistance()>this._component.__getSplitJoinFactor()*this._radius*4/t}async load(){if(-1===this._level)return Promise.resolve();if(this._component.__incLoadsThisFrame(),null!==this._threeJsMaterial)throw new Error("Tile already has material.");if(this._tileBounds.intersects(this._component.__getLayerBounds())){this._threeJsMaterial=s.MaterialUtils.get(),this._component.getThreeJsMaterials().push(this._threeJsMaterial);let t=this._component.__getTileUrl();t=t.replace("{TileMatrix}",""+this._level),t=t.replace("{TileRow}",""+this._row),t=t.replace("{TileCol}",""+this._col);try{await s.ThreeJsHelper.loadTextureIntoUniform(this._component,this._threeJsMaterial,"colorTexture",t,!1,!1)}catch(t){await s.ThreeJsHelper.loadTextureIntoUniform(this._component,this._threeJsMaterial,"colorTexture","gray",!1,!1)}}}async unload(){if(-1!==this._level){if(null!==this._threeJsMaterial){const t=this._component.getThreeJsMaterials();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsMaterial){t.splice(e,1);break}this._threeJsMaterial.uniforms.colorTexture.value&&this._threeJsMaterial.uniforms.colorTexture.value.dispose(),this._threeJsMaterial.dispose(),this._threeJsMaterial=null}this._threeJsMaterial=null}}async activate(){if(-1===this._level)return;this._threeJsObject=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}],!1),this._component.getThreeJsObjects().push(this._threeJsObject),s.ThreeJsHelper.useInDynEnvMap(this._threeJsObject,!0);const t=21,e=new Float32Array(1323),i=new Float32Array(1323),n=new Float32Array(882),o=new Uint16Array(2520),a=this._component.__getLayer().boundingBox,r=new s.Vector2,l=new s.Vector2,c=new s.Vector3;for(let h=0;h<21;h++){let u=1-h/20;r.y=s.MathUtils.lerp(this._tileBounds.origin.y,this._tileBounds.origin.y+this._tileBounds.size.y,u),l.y=s.MathUtils.clamp(r.y,a.origin.y,a.origin.y+a.size.y),u+=(l.y-r.y)/this._tileBounds.size.y;for(let d=0;d<t;d++){let p=d/20;r.x=s.MathUtils.lerp(this._tileBounds.origin.x,this._tileBounds.origin.x+this._tileBounds.size.x,p),l.x=s.MathUtils.clamp(r.x,a.origin.x,a.origin.x+a.size.x),p+=(l.x-r.x)/this._tileBounds.size.x,this._component.__getTileMatrixSet().crsUnitsToXYZ(c,l,this._component.__getSpheroidComponent());const _=h*t+d;e[3*_+0]=c.x,e[3*_+1]=c.y,e[3*_+2]=c.z,c.normalize(c),i[3*_+0]=c.x,i[3*_+1]=c.y,i[3*_+2]=c.z,n[2*_+0]=p,n[2*_+1]=1-u;const g=h*t+d;d<20&&h<20&&(o[6*g+0]=t*(h+0)+(d+0),o[6*g+1]=t*(h+1)+(d+0),o[6*g+2]=t*(h+1)+(d+1),o[6*g+3]=t*(h+0)+(d+0),o[6*g+4]=t*(h+1)+(d+1),o[6*g+5]=t*(h+0)+(d+1))}}s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"position",e),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"normal",i),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"uv",n),s.ThreeJsHelper.setIndices(this._threeJsObject.geometry,o)}async deactivate(){if(-1===this._level)return;const t=this._component.getThreeJsObjects();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsObject){t.splice(e,1);break}s.ThreeJsHelper.destroyObject(this._threeJsObject),this._threeJsObject=null}update(){let t=this.check();for(let e=0,i=this.children.length;e<i;e++)t=this.children[e].update()||t;return t}_getNearestDistance(){let t=Number.POSITIVE_INFINITY;const e=s.Vector3.pool.get();for(let i=0,s=this._component.__getCameraPositions().length;i<s;i++){const s=this._component.__getCameraPositions()[i];e.sub(this._center,s);const n=Math.max(0,e.magnitude()-this._radius);t>n&&(t=n)}return s.Vector3.pool.release(e),t}toString(){return this._level+"-"+this._row+"-"+this._col}}e.default=WMTSComponent},function(t,e,i){"use strict";i.r(e),i.d(e,{Capabilities:function(){return Capabilities},Layer:function(){return Layer},TileMatrixSet:function(){return TileMatrixSet}});var s=i(5),n=i(545);class Capabilities{constructor(t,e){this._endPoint=t,this._capabilitiesXML=null,this._layers=new Map,this._readyPromise=null,this._readyPromise=e.getDownloader().download(this._endPoint+"/1.0.0/WMTSCapabilities.xml",!1).then((t=>{if("string"==typeof t.content&&(this._capabilitiesXML=(new DOMParser).parseFromString(t.content,"application/xml")),null!==this._capabilitiesXML){const t=this._capabilitiesXML.querySelectorAll("Contents > Layer");for(const e of t){const t=e.querySelector("*|Title").textContent,i=e.querySelector("*|Identifier").textContent;this._layers.set(t,i)}}}))}get readyPromise(){return this._readyPromise}get endPoint(){return this._endPoint}get layers(){return this._layers}getLayer(t){let e=null;if(null!==this._capabilitiesXML){const i=this._capabilitiesXML.querySelectorAll("Contents > Layer");for(const s of i){t===s.querySelector("*|Identifier").textContent&&(e=new Layer(s,this._endPoint+"/1.0.0"))}}return e}getTileMatrixSet(t){let e=null;if(null!==this._capabilitiesXML){const i=this._capabilitiesXML.querySelectorAll("Contents > TileMatrixSet");for(const s of i){t===s.querySelector("*|Identifier").textContent&&(e=new TileMatrixSet(s))}}return e}}class Layer{constructor(t,e){this._baseUrl=e,this._title=t.querySelector("*|Title").textContent,this._identifier=t.querySelector("*|Identifier").textContent,this._styles=new Map,this._defaultStyle="",this._boundingBox=new s.Rect,this._dimensions=new Map,this._tileMatrixSets=new Set,this._url="";const i=t.querySelectorAll("Style");for(const t of i){const e=t.querySelector("*|Title").textContent,i=t.querySelector("*|Identifier").textContent;this._styles.set(e,i),"true"===t.getAttribute("isDefault")&&(this._defaultStyle=i)}let n=t.querySelector("*|BoundingBox");if(null===n&&(n=t.querySelector("*|WGS84BoundingBox")),null===n)throw new Error('Layer "'+this._identifier+'" missing a BoundingBox or a WGS84BoundingBox tag.');const o=n.querySelector("*|LowerCorner").textContent.split(" "),a=n.querySelector("*|UpperCorner").textContent.split(" ");this._boundingBox.origin.set(Number.parseFloat(o[0]),Number.parseFloat(o[1])),this._boundingBox.size.set(Number.parseFloat(a[0])-this._boundingBox.origin.x,Number.parseFloat(a[1])-this._boundingBox.origin.y);const r=t.querySelectorAll("Dimension");for(const t of r){const e=t.querySelector("*|Identifier").textContent,i=t.querySelector("Default").textContent;this._dimensions.set(e,i)}const l=t.querySelectorAll("TileMatrixSetLink");for(const t of l){const e=t.querySelector("TileMatrixSet").textContent;this._tileMatrixSets.add(e)}const c=t.querySelector("ResourceURL");this._url=c.getAttribute("template"),/^(?:[a-z]+:)?\/\//i.test(this._url)||(this._url=this._baseUrl+this._url)}get title(){return this._title}get identifier(){return this._identifier}get styles(){return this._styles}get defaultStyle(){return this._defaultStyle}get boundingBox(){return this._boundingBox}get dimensions(){return this._dimensions}get tileMatrixSets(){return this._tileMatrixSets}get url(){return this._url}}class TileMatrixSet{constructor(t){let e;this._identifier=t.querySelector("*|Identifier").textContent,this._crs=t.querySelector("*|SupportedCRS").textContent,this._boundingBox=new s.Rect,this._numTiles=[],this._readyPromise=null;let i=0;for(const n of t.querySelectorAll("TileMatrix")){const t=n.querySelector("ScaleDenominator");if(!t)throw new Error("ScaleDenominator tag not found for TileMatrix "+i+".");const o=parseFloat(t.innerHTML);if(void 0!==e&&Math.abs(2*o-e)/o>.01)throw new Error("ScaleDenominator for TileMatrix "+i+" must be half of the next higher level, but is not.");e=o,this._numTiles[i]=new s.Vector2(parseFloat(n.querySelector("MatrixWidth").innerHTML),parseFloat(n.querySelector("MatrixHeight").innerHTML)),i+=1}this._numLevels=i;const o=t.querySelector("TileMatrix"),a=Number.parseFloat(o.querySelector("ScaleDenominator").textContent),r=new s.Vector2(Number.parseFloat(o.querySelector("TileWidth").textContent),Number.parseFloat(o.querySelector("TileHeight").textContent)),l=28e-8*a,c=new s.Vector2(l*r.x,l*r.y),h=new s.Vector2(c.x*this._numTiles[0].x,c.y*this._numTiles[0].y),u=o.querySelector("TopLeftCorner").textContent.split(" ");this._boundingBox.origin.set(Number.parseFloat(u[0]),Number.parseFloat(u[1])),this._readyPromise=TileMatrixSet.setCRS(this._crs).then((t=>{this._crs=t;let e=1e3;const i=n.default.defs(this._crs);i.to_meter?e=1e3/i.to_meter:"degrees"===i.units?e=.00898315284:"feet"!==i.units&&"us feet"!==i.units||(e=3280.83333335),this._boundingBox.size.x=Math.round(h.x*e*1e6)/1e6,this._boundingBox.size.y=Math.round(h.y*e*1e6)/1e6,this._boundingBox.origin.y=this._boundingBox.origin.y-this._boundingBox.size.y}))}get readyPromise(){return this._readyPromise}get identifier(){return this._identifier}get boundingBox(){return this._boundingBox}get numLevels(){return this._numLevels}getNumTiles(t){return this._numTiles[t]}crsUnitsToXYZ(t,e,i){const o=s.LatLonAlt.pool.get(),a=s.MathUtils.clamp(e.x,this._boundingBox.origin.x,this._boundingBox.origin.x+this._boundingBox.size.x),r=s.MathUtils.clamp(e.y,this._boundingBox.origin.y,this._boundingBox.origin.y+this._boundingBox.size.y),l=(0,n.default)(this._crs,"WGS84",[a,r]);o.set(s.MathUtils.degToRad(l[1]),s.MathUtils.degToRad(l[0]),0),i.xyzFromLLA(t,o),s.LatLonAlt.pool.release(o)}static async setCRS(t){t.startsWith("urn:ogc:def:crs:")&&(t=t.substring("urn:ogc:def:crs:".length));let e=o.get(t);if(void 0===e&&t.startsWith("EPSG::")){const i="https://epsg.io/"+t.substring("EPSG::".length)+".proj4",s=await fetch(i);e=await s.text()}return n.default.defs(t,e),t}}const o=new Map;o.set("EPSG::104903",'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'),o.set("EPSG::104905",'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'),o.set("EPSG::4326","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"),o.set("EPSG::3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"),o.set("OGC:1.3:84",n.default.defs("WGS84")),o.set("OGC:1.3:CRS84",n.default.defs("WGS84")),o.set("OGC:2:84",n.default.defs("WGS84"))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(5);class KeyframePointingController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._keyframes=[],this._direction=new s.Vector3(1,0,0),this.addModifiedState("orientation")}setKeyframes(t){for(let t=0,e=this._keyframes.length;t<e;t++){let e=this._keyframes[t][1];e.startsWith("-")&&(e=e.substring(1)),"velocity"===e?this.removeDependentState(this.getEntity().getName(),"velocity"):this.removeDependentState(e,"position")}this._keyframes=[];for(let e=0,i=t.length;e<i;e++){this._keyframes.push([t[e][0],t[e][1]]);let i=this._keyframes[e][1];i.startsWith("-")&&(i=i.substring(1)),"velocity"===i?this.addDependentState(this.getEntity().getName(),"velocity"):this.addDependentState(i,"position")}this._keyframes.sort(((t,e)=>t[0]-e[0]))}setDirection(t){this._direction.copy(t)}__updateOrientationAtTime(t,e){t.isNaN()&&t.copy(s.Quaternion.Identity),this._getNewOrientation(t,e,t)}__update(){if(0===this._keyframes.length)return;const t=this.getEntity(),e=t.getScene().getEngine().getTime();t.getOrientation().isNaN()&&t.setOrientation(s.Quaternion.Identity);const i=s.Quaternion.pool.get();this._getNewOrientation(i,e,t.getOrientation()),t.setOrientation(i),s.Quaternion.pool.release(i)}_getNewOrientation(t,e,i){const n=s.Sort.getIndex(e,this._keyframes,((t,e)=>t[0]<e));let o=0,a=0;n===this._keyframes.length?(o=this._keyframes.length-1,a=this._keyframes.length-1):n>0&&(o=n-1,a=n);const r=this._keyframes[o],l=this._keyframes[a],c=l[0]>r[0]?(e-r[0])/(l[0]-r[0]):0,h=s.Vector3.pool.get(),u=s.Vector3.pool.get();this._getDirection(h,e,r[1]),this._getDirection(u,e,l[1]),u.slerp(h,u,c),u.normalize(u),h.rotate(i,this._direction);const d=s.Quaternion.pool.get();d.setFromVectorFromTo(h,u),t.mult(d,i),s.Quaternion.pool.release(d),s.Vector3.pool.release(u),s.Vector3.pool.release(h)}_getDirection(t,e,i){const n=this.getEntity(),o=i.startsWith("-");if(o&&(i=i.substring(1)),i.startsWith("velocity"))if((i=i.substring(8)).startsWith(" rel ")){i=i.substring(5);const o=n.getScene().getEntity(i);null!==o&&n.getVelocityRelativeToEntity(t,s.Vector3.Zero,o,e)}else n.getVelocityAtTime(t,e);else{const o=n.getScene().getEntity(i);null!==o?o.getPositionRelativeToEntity(t,s.Vector3.Zero,n,e):t.copy(s.Vector3.NaN)}t.normalize(t),o&&t.mult(t,-1)}}e.default=KeyframePointingController},function(t,e,i){"use strict";i.r(e);var s=i(5);class KeyframeSpinController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._keyframes=[],this._axis=new s.Vector3(1,0,0),this._startingAngle=0,this.addModifiedState("orientation")}setKeyframes(t){this._keyframes=[];let e=0;for(let i=0,n=t.length;i<n;i++)i>0&&(e=s.MathUtils.wrap(e+(t[i][0]-t[i-1][0])*(t[i-1][1]+t[i][1])*.5,0,2*Math.PI)),this._keyframes.push([t[i][0],t[i][1],e]);this._keyframes.sort(((t,e)=>t[0]-e[0]))}setAxis(t){this._axis.copy(t)}setStartingAngle(t){this._startingAngle=t}__updateOrientationAtTime(t,e){t.isNaN()&&t.copy(s.Quaternion.Identity),this._getNewOrientation(t,e,t)}__update(){if(0===this._keyframes.length)return;const t=this.getEntity(),e=t.getScene().getEngine().getTime();t.getOrientation().isNaN()&&t.setOrientation(s.Quaternion.Identity);const i=s.Quaternion.pool.get();this._getNewOrientation(i,e,t.getOrientation()),t.setOrientation(i),s.Quaternion.pool.release(i)}_getNewOrientation(t,e,i){const n=s.Sort.getIndex(e,this._keyframes,((t,e)=>t[0]<e));let o=0,a=0;n===this._keyframes.length?(o=this._keyframes.length-1,a=this._keyframes.length-1):n>0&&(o=n-1,a=n);const r=this._keyframes[o],l=this._keyframes[a],c=l[0]>r[0]?(e-r[0])/(l[0]-r[0]):0,h=s.MathUtils.wrap(this._startingAngle+r[2]+(e-r[0])*(r[1]+c*l[1])/(1+c),0,2*Math.PI),u=s.Vector3.pool.get();u.rotate(i,this._axis);const d=s.Quaternion.pool.get();d.setFromAxisAngle(u,h),t.mult(d,i),s.Vector3.pool.release(u),s.Quaternion.pool.release(d)}}e.default=KeyframeSpinController},function(t,e,i){"use strict";i.r(e);var s=i(5);class PositionSumController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._entities=new s.FastMap,this.addModifiedState("position")}addEntity(t,e,i){const n=new s.EntityRef(this.getEntity().getScene());n.setName(t),this._entities.set(t,{ref:n,mult:e,add:i}),this.addDependentState(t,"position")}removeEntity(t){this._entities.delete(t),this.removeDependentState(t,"position")}__update(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();t.set(0,0,0);for(let i=0,n=this._entities.size;i<n;i++){const n=this._entities.getAt(i).value,o=n.ref.get();if(null===o)continue;o.getPositionRelativeToEntity(e,s.Vector3.Zero,this.getEntity().getParent());const a=e.magnitude();t.addMult(t,e,n.mult+(a>0?n.add/a:0))}this.getEntity().setPosition(t),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}}e.default=PositionSumController},function(t,e,i){"use strict";i.r(e);var s=i(5);class ZoomFitController extends s.BaseController{constructor(t,e,i){super(t,e,i),this._entities=new s.FastMap,this._tightFit=!1,this._zoomOutOnly=!1,this._edgeSize=0,this.addModifiedState("position")}addEntity(t){const e=new s.EntityRef(this.getEntity().getScene());e.setName(t),this._entities.set(t,{ref:e}),this.addDependentState(t,"position")}removeEntity(t){this._entities.delete(t),this.removeDependentState(t,"position")}setTightFit(t){this._tightFit=t}setZoomOutOnly(t){this._zoomOutOnly=t}setEdgeSize(t){this._edgeSize=t}__update(){let t=1;const e=this.getEntity().getComponentByType("camera");if(null!==e){const i=Math.min(e.getHorizontalFieldOfView(),e.getVerticalFieldOfView());this._tightFit&&(t=Math.tan(i/2)),t=Math.tan(i/2)}const i=s.Vector3.pool.get();i.normalize(this.getEntity().getPosition()),0===i.magnitudeSqr()&&(this.getEntity().getOrientation().getAxis(i,1),i.neg(i)),i.isNaN()&&i.copy(s.Vector3.YAxisNeg);const n=(1+this._edgeSize/(.5-this._edgeSize))/t;let o=0;const a=s.Vector3.pool.get();for(let t=0,e=this._entities.size;t<e;t++){const e=this._entities.getAt(t).value.ref.get();if(null===e)continue;e.getPositionRelativeToEntity(a,s.Vector3.Zero,this.getEntity().getParent());const r=e.getExtentsRadius();let l=0;if(this._tightFit){const t=a.dot(i);a.addMult(a,i,-t);l=t+n*a.magnitude()+r*Math.sqrt(n*n+1)}else l=a.magnitude()+r;o=Math.max(o,l)}s.Vector3.pool.release(a),this._tightFit||(o*=Math.sqrt(n*n+1)),(!this._zoomOutOnly||o>this.getEntity().getPosition().magnitude())&&(i.mult(i,o),this.getEntity().setPosition(i)),s.Vector3.pool.release(i)}}e.default=ZoomFitController},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(535),o=i(5);s.default.register({observable_universe:{groups:["stars"],radius:5e23,systemRadius:5e23,label:"Observable Universe",parents:[],fixed:{position:o.Vector3.Zero,orientation:o.Quaternion.Identity},postCreateFunction:t=>{t.setCanOcclude(!1)}},milky_way:{groups:["stars"],radius:1e18,systemRadius:13e18,label:"Milky Way",parents:[[Number.NEGATIVE_INFINITY,"observable_universe"]],fixed:{position:o.Vector3.Zero,orientation:o.Quaternion.Identity},postCreateFunction:(t,e)=>{t.setCanOcclude(!1);const i=t.get("fixed"),s=new o.Vector3,n=192.85948120833*Math.PI/180,a=27.12825119444*Math.PI/180;s.x=Math.cos(n)*Math.cos(a),s.y=Math.sin(n)*Math.cos(a),s.z=Math.sin(a);const r=new o.Vector3,l=266.40499625*Math.PI/180,c=-28.93617241667*Math.PI/180;r.x=Math.cos(l)*Math.cos(c),r.y=Math.sin(l)*Math.cos(c),r.z=Math.sin(c);const h=new o.Quaternion;if(h.setFromAxes(r,void 0,s),i.setOrientation(h),e&&e.milkyWaySprite){const e=t.addComponent("sprite");e.setTextureUrl("$STATIC_ASSETS_URL/sprites/milky_way.png"),e.setSize(new o.Vector2(12e17,12e17)),e.setTransparent(!0),e.setBlending("normal"),e.setFadeDistance(12e15)}const u=t.addController("spin");u.setAxis(new o.Vector3(-.8676661356982597,-.19807638974470915,.45598379452940485),!1),u.setRate(-2192686e-23),u.setReferenceAngle(0),u.setReferenceTime(0)}},sun:{groups:["stars"],radius:695500,systemRadius:2991957e7,label:"Sun",parents:[[Number.NEGATIVE_INFINITY,"milky_way"]],spheroid:{equatorialRadius:695500,polarRadius:695500,planetographic:!1},spheroidLOD:{features:["colorMapEmmissive"],textures:{color:{url:"sun/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{position:o.Vector3.Zero,orientation:o.Quaternion.Identity},postCreateFunction:(t,e)=>{t.addComponent("lightSource").setAbsoluteMagnitude(4.83);const i=t.addComponent("atmosphere");i.setEmissivity(1),i.setScaleHeight(2e5),i.setDensity(8e-7),i.setColor(new o.Color(1,1,64/255));const s=t.addComponent("sprite");s.setBillboard(!0),s.setTextureUrl("$STATIC_ASSETS_URL/sprites/sun_glow.png"),s.setSize(new o.Vector2(100,100)),s.setSizeUnits("pixels"),s.setTransparent(!0),s.setColorMultiplier(new o.Color(1,1,.5)),s.setRenderOrder(-2);const a=t.addController("orbitalElements"),r=new o.OrbitalElements;if(r.epoch=0,r.eccentricity=0,r.semiMajorAxis=246237071e9,r.meanAngularMotion=-2192686e-23,r.meanAnomalyAtEpoch=Math.PI,r.orbitOrientation.set(-.48894750765094835,-.4832106839985283,.19625375824756275,.6992297419646486),a.addOrbitalElements(-1e100,r),a.addOrbitalElements(1e100,r),void 0!==e&&!0===e.skybox){t.addComponent("skybox").setTextureUrl("$STATIC_ASSETS_URL/textures/starmap_"+(e.skyboxResolution||2048)+".jpg")}if(void 0===e||!0===e.skybox&&!0===e.starfield||!1!==e.starfield){t.addComponent("starfield").setUrl("$STATIC_ASSETS_URL/stars/galaxies.0.bin");for(let e=0;e<6;e++){t.addComponent("starfield").setUrl("$STATIC_ASSETS_URL/stars/stars."+e+".bin")}}if(void 0!==e&&e.heliosphere){const e=t.addComponent("model");e.setUrl("$STATIC_ASSETS_URL/models/heliosphere/voyager_heliosphere.gltf"),e.setScale(new o.Vector3(201e6,19e7,19e7)),e.setForceLoaded(!0);const i=new o.LatLonAlt(0,-105*Math.PI/180,0),s=new o.Vector3;o.Geometry.getXYZFromLLAOnSphere(s,i,1),s.rotate(n.default.getEclipJ2000ToJ2000Rotation(),s),s.normalize(s);const a=new o.Quaternion;a.setFromVectorFromTo(new o.Vector3(.9937396508197329,.11171728072160429,.0008692392338424033),s),e.setRotation(a)}}},mercury:{groups:["planets"],radius:2439.4,systemRadius:292764,label:"Mercury",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:7600654,color:[.6,.6,.6,.7]},spheroid:{equatorialRadius:2439.4,polarRadius:2439.4,planetographic:!1},spheroidLOD:{textures:{color:{url:"mercury/color_$SIZE_$FACE.png",sizes:[4,512,4096]}}},dynamo:[{url:"mercury/sun/orb"},{url:"mercury/ori"}]},venus:{groups:["planets"],radius:6051.8,systemRadius:726216,label:"Venus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:19408261,color:[.9,.8,.45,.7]},spheroid:{equatorialRadius:6051.8,polarRadius:6051.8,planetographic:!1},spheroidLOD:{textures:{color:{url:"venus/color_$SIZE_$FACE.png",sizes:[4,512]}}},dynamo:[{url:"venus/sun/orb"},{url:"venus/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(15),e.setDensity(.001),e.setColor(new o.Color(213/255,160/255,94/255)),e.setSunBrightness(.25)}},earth:{groups:["planets"],radius:6378.1,systemRadius:765372,label:"Earth",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31558149,color:[0,.6,.8,.7]},spheroid:{equatorialRadius:6378.137,polarRadius:6356.752,planetographic:!0},spheroidLOD:{features:["normalMap","specularMap","nightMap","decalMap","nightMapEmmissive","shadowEntities"],textures:{color:{url:"earth/color_$SIZE_$FACE.png",sizes:[16,512,4096]},normal:{url:"earth/normal_$SIZE_$FACE.png",sizes:[16,512,4096]},specular:{url:"earth/specular_$SIZE_$FACE.png",sizes:[16,512,4096]},night:{url:"earth/night_$SIZE_$FACE.png",sizes:[16,512,4096]},decal:{url:"earth/cloud_$SIZE_$FACE.png",sizes:[16,512,4096]}},shadowEntities:["moon"]},dynamo:[{url:"earth/sun/orb"},{url:"earth/ori"}],postCreateFunction:(t,e)=>{if(e&&!1===e.clouds){t.get("spheroidLOD").setTexture("decal","")}const i=t.addComponent("atmosphere");i.setScaleHeight(8),i.setDensity(.0015),i.setColor(new o.Color(214.5/255,267/255,1.5)),i.setSunBrightness(2),i.setSunsetColor(new o.Color(1,.65,0)),i.setSunsetIntensity(1.2)}},mars:{groups:["planets"],radius:3396.2,systemRadius:46922,label:"Mars",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:59360879,color:[.89,.51,.35,.7]},spheroid:{equatorialRadius:3396.19,polarRadius:3376.2,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"mars/color_$SIZE_$FACE.png",sizes:[4,512,4096]}},shadowEntities:["phobos","deimos"]},dynamo:[{url:"mars/sun/orb"},{url:"mars/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(10.8),e.setDensity(.001),e.setColor(new o.Color(225/255,178/255,112/255)),e.setSunBrightness(.8),e.setSunsetColor(new o.Color(10/255,75/255,140/255)),e.setSunsetIntensity(1)}},jupiter:{groups:["planets"],radius:71492,systemRadius:3782501,label:"Jupiter",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:374279653,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:71492,polarRadius:66854,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"jupiter/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}},shadowEntities:["io","europa","ganymede","callisto"]},dynamo:[{url:"jupiter/sun/orb"},{url:"jupiter/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(200),e.setDensity(5e-5),e.setColor(new o.Color(234/255,202/255,170/255)),e.setSunBrightness(.25);const i=t.addController("coverage"),s=[[-1136116758,15],[-1037534358,28],[-938951958,22],[-867931156,0],[-812721554,12],[-744292752,47],[-639143949,62],[-533822346,48],[-483883145,27],[-391953544,15],[102427264,85],[315576066,138],[615211269,312],[660052869,347]];let n=0;t.addController("rotate").setRotatingPosition(!1);const a=(s[s.length-1][1]-s[s.length-2][1])/(s[s.length-1][0]-s[s.length-2][0]);i.addCoverage(o.Interval.Infinite,void 0,void 0,(t=>{if(t.getOrientation().isNaN())return;if(null===t.get("rotate"))return;const e=t.getScene().getEngine().getTime();let i=a,r=n;if(e<s[r][0]||r<s.length-1&&s[r+1][0]<=e)if(e>=s[s.length-1][0])r=s.length-1;else if(e<s[0][0])r=0,i=0;else for(let t=s.length-2;t>=0;t--)s[t][0]<=e&&e<s[t+1][0]&&(r=t,i=(s[t+1][1]-s[t][1])/(s[t+1][0]-s[t][0]));else r<s.length-1&&(i=(s[r+1][1]-s[r][1])/(s[r+1][0]-s[r][0]));n=r;const l=s[r][1]+(e-s[r][0])*i,c=o.MathUtils.wrap(305-(l+-60.38-313.47)+-3074e-9*(e-617098056),0,360),h=t.getComponentByType("spheroidLOD");null!==h&&h.setLongitudeRotation(o.MathUtils.degToRad(c))}))}},saturn:{groups:["planets"],radius:60268,systemRadius:7184413,label:"Saturn",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:929703084,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:60268,polarRadius:54364,planetographic:!1},spheroidLOD:{features:["shadowEntities","shadowRings"],textures:{color:{url:"saturn/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["iapetus","dione","rhea","tethys","titan"]},dynamo:[{url:"saturn/sun/orb"},{url:"saturn/ori"}],postCreateFunction:t=>{const e=t.addComponent("rings");e.setInnerRadius(74270.580913),e.setOuterRadius(140478.924731),e.setTopTextureUrl("$STATIC_ASSETS_URL/sprites/saturn_rings_top.png"),e.setBottomTextureUrl("$STATIC_ASSETS_URL/sprites/saturn_rings_bottom.png"),e.setFadeDistance(250);const i=t.addComponent("atmosphere");i.setScaleHeight(200),i.setDensity(5e-5),i.setColor(new o.Color(234/255,202/255,151/255))}},uranus:{groups:["planets"],radius:25559,systemRadius:1164893,label:"Uranus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2651200139,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:25559,polarRadius:24973,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"uranus/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["titania","oberon","umbriel","ariel","miranda"]},dynamo:[{url:"uranus/sun/orb"},{url:"uranus/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(200),e.setDensity(5e-5),e.setColor(new o.Color(147/255,183/255,201/255)),e.setSunsetColor(new o.Color(164/255,168/255,.4)),e.setSunsetIntensity(1)}},neptune:{groups:["planets"],radius:24764,systemRadius:43213894,label:"Neptune",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:5200783038,color:[.48,.69,1,.7]},spheroid:{equatorialRadius:24764,polarRadius:24341,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"neptune/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["triton","proteus","despina","galatea","larissa"]},dynamo:[{url:"neptune/sun/orb"},{url:"neptune/ori"}],postCreateFunction:t=>{const e=t.addComponent("rings");e.setInnerRadius(40900),e.setOuterRadius(62964),e.setTopTextureUrl("$STATIC_ASSETS_URL/sprites/neptune_rings.png"),e.setBottomTextureUrl("$STATIC_ASSETS_URL/sprites/neptune_rings.png"),e.setFadeDistance(250);const i=t.addComponent("atmosphere");i.setScaleHeight(200),i.setDensity(5e-5),i.setColor(new o.Color(138/255,160/255,1))}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({"1_ceres":{groups:["dwarf planets"],radius:473,label:"Ceres",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:145250858},spheroid:{equatorialRadius:482.6,polarRadius:445.6,planetographic:!1},spheroidLOD:{textures:{color:{url:"1_ceres/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}}},dynamo:[{url:"1_ceres/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"101955_bennu":{groups:["asteroids","NEOs","PHAs"],radius:.246,label:"Bennu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:37856546},model:{url:"$STATIC_ASSETS_URL/models/101955_bennu/Bennu.gltf",rotate:[{x:83},{z:-168}],scale:[9957e-7,9957e-7,9957e-7]},dynamo:[{url:"101955_bennu/sun/orb"},{url:"101955_bennu/ori"}]},"11351_leucus":{groups:["asteroids"],radius:17.0775,label:"Leucus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:384622403.174},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:17.0775},dynamo:[{url:"11351_leucus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:445.732}},"12923_zephyr":{groups:["asteroids","NEOs","PHAs"],radius:1.03,label:"Zephyr",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:86659200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.03,1.03,1.03]},dynamo:[{url:"12923_zephyr/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.891}},"134340_pluto":{groups:["dwarf planets","moons","134340_pluto_barycenter"],radius:1187,label:"Pluto",labelFadeEntity:"sun",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:551857},spheroid:{equatorialRadius:1187,polarRadius:1187,planetographic:!1},spheroidLOD:{textures:{color:{url:"134340_pluto/color_$SIZE_$FACE.png",sizes:[4,512,4096]}}},dynamo:[{url:"134340_pluto/134340_pluto_barycenter/orb"}],align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"charon"},secondary:{type:"velocity",axis:n.Vector3.YAxis,target:"charon"}}},"134340_pluto_barycenter":{groups:["134340_pluto","barycenters"],occlusionRadius:.001,extentsRadius:28e3,systemRadius:130153,label:"Barycenter",labelFadeEntity:"134340_pluto",trail:{length:7826284800},parents:[[Number.NEGATIVE_INFINITY,"sun"]],fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"134340_pluto_barycenter/sun/orb"}],postCreateFunction:t=>{t.getComponentByType("div").setFadeWhenCloseToCamera(!1),t.setCanOcclude(!1)}},"136108_haumea":{groups:["dwarf planets","TNOs"],radius:816,label:"Haumea",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:8966073600},model:{url:"$STATIC_ASSETS_URL/models/136108_haumea/haumea.gltf",scale:[1,1,1]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"136108_haumea/sun/orb"}]},"136199_eris":{groups:["dwarf planets","TNOs"],radius:1163,label:"Eris",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17610912e3},spheroid:{equatorialRadius:1163,polarRadius:1163,planetographic:!1},spheroidLOD:{textures:{color:{url:"136199_eris/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"136199_eris/sun/orb"}]},"136472_makemake":{groups:["dwarf planets","TNOs"],radius:715,label:"Makemake",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:9754300800},spheroid:{equatorialRadius:717,polarRadius:710,planetographic:!1},spheroidLOD:{textures:{color:{url:"136472_makemake/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"136472_makemake/sun/orb"}]},"14827_hypnos":{groups:["asteroids","NEOs","PHAs"],radius:.4535,label:"Hypnos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:151113600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.4535,.4535,.4535]},dynamo:[{url:"14827_hypnos/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"15094_polymele":{groups:["asteroids"],radius:10.5375,label:"Polymele",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:371396335.107},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:10.5375},dynamo:[{url:"15094_polymele/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:5.8607}},"1566_icarus":{groups:["asteroids","NEOs","PHAs"],radius:.805,label:"Icarus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35326368},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.805,.8,.585]},dynamo:[{url:"1566_icarus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.2726}},"16_psyche":{groups:["asteroids"],radius:125,label:"16 Psyche",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:157517136},model:{url:"$STATIC_ASSETS_URL/models/16_psyche/psycheAsteroid.gltf",scale:[100,100,100],rotate:[{x:90}]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"16_psyche/sun/orb"}]},"1620_geographos":{groups:["asteroids","NEOs","PHAs"],radius:2.5,label:"Geographos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43891200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.5,1,1.05]},dynamo:[{url:"1620_geographos/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:5.224}},"162173_ryugu":{groups:["asteroids","NEOs","PHAs"],radius:.45,label:"Ryugu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40953600},model:{url:"$STATIC_ASSETS_URL/models/162173_ryugu/ryugu.gltf",rotate:[{x:-90}]},dynamo:[{url:"ssd/162173_ryugu/sun/orb"},{url:"162173_ryugu/ori"}]},"1862_apollo":{groups:["asteroids","NEOs","PHAs"],radius:.75,label:"Apollo",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:56259360},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.75,.75,.75]},dynamo:[{url:"1862_apollo/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.065}},"1981_midas":{groups:["asteroids","NEOs","PHAs"],radius:.975,label:"Midas",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:74649600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.975,.975,.975]},dynamo:[{url:"1981_midas/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:5.22}},"1991_vg":{groups:["asteroids","NEOs"],radius:.00425,label:"1991 VG",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33100012},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.00425,.00425,.00425]},dynamo:[{url:"1991_vg/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"1993_hd":{groups:["asteroids","asteroid belt"],radius:.005,label:"1993 HD",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:100388764},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1993_hd/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"1994_cc_a":{groups:["asteroids","NEOs","PHAs"],radius:.325,label:"1994 CC",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:66137990},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.325,.325,.325]},dynamo:[{url:"1994_cc_a/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.3886}},"1996_xb27":{groups:["asteroids","NEOs"],radius:.042,label:"1996 XB<sub>27</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40909104},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.042,.042,.042]},dynamo:[{url:"1996_xb27/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:1.195}},"1998_ky26":{groups:["asteroids","NEOs"],radius:.015,label:"1998 KY<sub>26</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43202073},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.015,.015,.015]},dynamo:[{url:"1998_ky26/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:.1784}},"1998_ml14":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"1998 ML<sub>14</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:117917856},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.5,.5,.5]},dynamo:[{url:"1998_ml14/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:14.28}},"1998_qe2":{groups:["asteroids","NEOs","PHAs"],radius:1.375,label:"1998 QE<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:119104300},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.375,1.375,1.375]},dynamo:[{url:"1998_qe2/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:4.749}},"1999_ao10":{groups:["asteroids","NEOs"],radius:.025,label:"1999 AO<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27475200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.025,.025,.025]},dynamo:[{url:"1999_ao10/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"1999_cg9":{groups:["asteroids","NEOs"],radius:.005,label:"1999 CG<sub>9</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34535808},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1999_cg9/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"1999_vx25":{groups:["asteroids","NEOs"],radius:.005,label:"1999 VX<sub>25</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:26941680},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1999_vx25/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"1i_oumuamua":{groups:["asteroid","interstellar"],occlusionRadius:.03,extentsRadius:.225,label:"ʻOumuamua",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:174195800},model:{url:"$STATIC_ASSETS_URL/models/1i_oumuamua/oumuamua.gltf"},spin:{axis:new n.Vector3(.57735026919,.57735026919,.57735026919),periodInHours:8.1},dynamo:[{url:"1i_oumuamua/sun/orb"}]},"2_pallas":{groups:["asteroids","asteroid belt"],radius:291,label:"Pallas",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:145683878},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[291,278,250]},dynamo:[{url:"2_pallas/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:7.8132}},"2000_ae205":{groups:["asteroids","NEOs"],radius:.005,label:"2000 AE<sub>205</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39660827},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2000_ae205/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2000_lg6":{groups:["asteroids","NEOs"],radius:.005,label:"2000 LG<sub>6</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27724710},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2000_lg6/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2000_sg344":{groups:["asteroids","NEOs"],radius:.0185,label:"2000 SG<sub>344</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30497305},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.0185,.0185,.0185]},dynamo:[{url:"2000_sg344/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2001_bb16":{groups:["asteroids","NEOs"],radius:.005,label:"2001 BB<sub>16</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:24933552},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_bb16/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2001_fr85":{groups:["asteroids","NEOs"],radius:.005,label:"2001 FR<sub>85</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30752213},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_fr85/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2001_gp2":{groups:["asteroids","NEOs"],radius:.005,label:"2001 GP<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33351128},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_gp2/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2001_qj142":{groups:["asteroids","NEOs"],radius:.005,label:"2001 QJ<sub>142</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34542533},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_qj142/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2001_sn263_a":{groups:["asteroids","NEOs"],radius:1.45,label:"(153591) 2001 SN<sub>263</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:88379117},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.4,1.35,1.45]},dynamo:[{url:"2001_sn263_a/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.423}},"2003_sm84":{groups:["asteroids","NEOs"],radius:.005,label:"2003 SM<sub>84</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:37674723},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2003_sm84/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2003_uv11":{groups:["asteroids","NEOs"],radius:.13,label:"(503941) 2003 UV<sub>11</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:55302063},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.13,.13,.13]},dynamo:[{url:"2003_uv11/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:18.25}},"2003_yn107":{groups:["asteroids","NEOs"],radius:.01,label:"2003 YN<sub>107</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31024602},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.01,.01,.01]},dynamo:[{url:"2003_yn107/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2005_er95":{groups:["asteroids","NEOs"],radius:.005,label:"2003 ER<sub>95</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:42691438},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_er95/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2005_lc":{groups:["asteroids","NEOs"],radius:.005,label:"2005 LC",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38109231},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_lc/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2005_qp87":{groups:["asteroids","NEOs"],radius:.005,label:"2005 QP<sub>87</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43182130},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_qp87/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2005_yu55":{groups:["asteroids","NEOs"],radius:.18,label:"2005 YU<sub>55</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39279986},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.18,.18,.18]},dynamo:[{url:"2005_yu55/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:18}},"2006_bz147":{groups:["asteroids","NEOs"],radius:.005,label:"2006 BZ<sub>147</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32672193},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_bz147/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2006_jy26":{groups:["asteroids","NEOs"],radius:.00475,label:"2006 JY<sub>26</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32046056},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.00475,.00475,.00475]},dynamo:[{url:"2006_jy26/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2006_qq56":{groups:["asteroids","NEOs"],radius:.005,label:"2006 QQ<sub>56</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30849279},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_qq56/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2006_rh120":{groups:["asteroids","NEOs"],radius:.00125,label:"2006 RH<sub>120</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31646355},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.00125,.00125,.00125]},dynamo:[{url:"2006_rh120/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:.04583}},"2006_ub17":{groups:["asteroids","NEOs"],radius:.005,label:"2006 UB<sub>17</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38423813},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_ub17/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2007_tf15":{groups:["asteroids","NEOs"],radius:.005,label:"2007 TF<sub>15</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:36848420},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_tf15/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2007_un12":{groups:["asteroids","NEOs"],radius:.005,label:"2007 UN<sub>12</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34141598},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_un12/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2007_vu6":{groups:["asteroids","NEOs"],radius:.005,label:"2007 VU<sub>6</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30439348},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_vu6/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_bt2":{groups:["asteroids","NEOs"],radius:.005,label:"2008 BT<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40099605},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_bt2/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_cx118":{groups:["asteroids","NEOs"],radius:.005,label:"2008 CX<sub>118</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38642620},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_cx118/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_ea9":{groups:["asteroids","NEOs"],radius:.005,label:"2008 EA<sub>9</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34399094},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_ea9/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_el":{groups:["asteroids","NEOs"],radius:.005,label:"2008 EL",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:36567037},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_el/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_hu4":{groups:["asteroids","NEOs"],radius:.005,label:"2008 HU<sub>4</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35000582},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_hu4/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_jl24":{groups:["asteroids","NEOs"],radius:.005,label:"2008 JL<sub>24</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33383926},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_jl24/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:.05385}},"2008_kt":{groups:["asteroids","NEOs"],radius:.005,label:"2008 KT",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32084467},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_kt/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_tc3":{groups:["asteroids","NEOs"],radius:.00205,label:"2008 TC<sub>3</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:47219992},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.00205,.00205,.00205]},dynamo:[{url:"2008_tc3/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:.0269409}},"2008_ts10":{groups:["asteroids","NEOs"],radius:.005,label:"2008 TS<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:44550003},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_ts10/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2008_ua202":{groups:["asteroids","NEOs"],radius:.025,label:"2008 UA<sub>202</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33141727},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.025,.025,.025]},dynamo:[{url:"2008_ua202/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2009_bd":{groups:["asteroids","NEOs"],radius:.0055,label:"2009 BD",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32021453},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.0055,.0055,.0055]},dynamo:[{url:"2009_bd/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2009_os5":{groups:["asteroids","NEOs"],radius:.005,label:"2009 OS<sub>5</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38627939},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_os5/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2009_rt1":{groups:["asteroids","NEOs"],radius:.005,label:"2009 RT<sub>1</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39197194},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_rt1/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2009_yf":{groups:["asteroids","NEOs"],radius:.005,label:"2009 YF",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:28573741},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_yf/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_an61":{groups:["asteroids","NEOs"],radius:.005,label:"2010 AN<sub>61</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39265990},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_an61/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_dj":{groups:["asteroids","NEOs"],radius:.005,label:"2010 DJ",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:41893712},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_dj/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_jw34":{groups:["asteroids","NEOs"],radius:.005,label:"2010 JW<sub>34</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30671447},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_jw34/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_tg19":{groups:["asteroids","NEOs"],radius:.005,label:"2010 TG<sub>19</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:96734965},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_tg19/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_tn167":{groups:["asteroids","NEOs"],radius:.005,label:"2010 TN<sub>167</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:70146852},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_tn167/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2010_ub":{groups:["asteroids","NEOs"],radius:.005,label:"2010 UB",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:93215413},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_ub/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2063_bacchus":{groups:["asteroids","NEOs"],radius:.555,label:"Bacchus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35315957},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.555,.265,.25]},dynamo:[{url:"2063_bacchus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:14.904}},"21_lutetia":{groups:["asteroids","asteroid belt"],radius:60.5,label:"Lutetia",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:119908344},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[60.5,50.5,37.5]},dynamo:[{url:"21_lutetia/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:8.1655}},"2101_adonis":{groups:["asteroids","NEOs","PHAs"],radius:.2615,label:"Adonis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:80974175},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.2615,.2615,.2615]},dynamo:[{url:"2101_adonis/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"2102_tantalus":{groups:["asteroids","NEOs","PHAs"],radius:.8245,label:"Tantalus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:46243117},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.8245,.8245,.8245]},dynamo:[{url:"2102_tantalus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.384}},"2135_aristaeus":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"Aristaeus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:63842351},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.5,.5,.5]},dynamo:[{url:"2135_aristaeus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"216_kleopatra":{groups:["asteroids","asteroid belt"],radius:138,label:"Kleopatra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:147366495},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[138,47,39]},dynamo:[{url:"216_kleopatra/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:5.385}},"21900_orus":{groups:["asteroids"],radius:25.405,label:"Orus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:366046968.426},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:25.405},dynamo:[{url:"21900_orus/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:13.45}},"225088_2007_or10":{groups:["dwarf planets","TNOs"],radius:615,label:"2007 OR<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17453038503},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[615,615,596.55]},dynamo:[{url:"225088_2007_or10/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:22.4}},"2340_hathor":{groups:["asteroids","NEOs","PHAs"],radius:.105,label:"Hathor",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:24462116},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.105,.105,.105]},dynamo:[{url:"2340_hathor/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.35}},"243_ida":{groups:["asteroids","asteroid belt"],radius:29.9,label:"Ida",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:152692978},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[18.6*1.3,25.4*1.3,77.74],rotate:[{y:90}]},dynamo:[{url:"243_ida/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:4.634}},"25143_itokawa":{groups:["asteroids","NEOs","PHAs"],radius:.165,label:"Itokawa",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:48085521},model:{url:"$STATIC_ASSETS_URL/models/25143_itokawa/itokawa.gltf",rotate:[{x:90}]},dynamo:[{url:"25143_itokawa/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12.132}},"253_mathilde":{groups:["asteroids","asteroid belt"],radius:33,label:"Mathilde",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:136059532},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[33,24,23]},dynamo:[{url:"253_mathilde/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:417.7}},"2867_steins":{groups:["asteroids","asteroid belt"],radius:3.415,label:"Šteins",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:114690676},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3.415,2.85,2.21]},dynamo:[{url:"2867_steins/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:6.049}},"3_juno":{groups:["asteroids","asteroid belt"],radius:160,label:"Juno",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:137616821},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[160,133.5,100]},dynamo:[{url:"3_juno/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:7.21}},"3122_florence":{groups:["asteroids","NEOs","PHAs"],radius:2.2,label:"Florence",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:74244319},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.2,2.2,2.2]},dynamo:[{url:"3122_florence/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.3581}},"3200_phaethon":{groups:["asteroids","NEOs","PHAs"],radius:2.9,label:"Phaethon",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:45239890},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.9,2.9,2.9]},dynamo:[{url:"3200_phaethon/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.604}},"3362_khufu":{groups:["asteroids","NEOs","PHAs"],radius:.35,label:"Khufu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31064230},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.35,.35,.35]},dynamo:[{url:"3362_khufu/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"3548_eurybates":{groups:["asteroids"],radius:31.9425,label:"Eurybates",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:374226349.15},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:31.9425},dynamo:[{url:"3548_eurybates/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:8.711}},"367943_duende":{groups:["asteroids","NEOs"],radius:.02,label:"Duende",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27409492},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.01,.01,.02]},dynamo:[{url:"367943_duende/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:9.485}},"37655_illapa":{groups:["asteroids","NEOs","PHAs"],radius:.75,label:"Illapa",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:56696394},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.75,.75,.75]},dynamo:[{url:"37655_illapa/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.6556}},"4_vesta":{groups:["asteroids","asteroid belt"],radius:262.7,label:"Vesta",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:114544800},model:{url:"$STATIC_ASSETS_URL/models/4_vesta/4_vesta.gltf",rotate:[{x:90}]},dynamo:[{url:"4_vesta/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"4015_wilson-harrington":{groups:["asteroids","NEOs","PHAs"],radius:2,label:"Wilson-Harrington",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:134340178},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2,2,2]},dynamo:[{url:"4015_wilson-harrington/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.5736}},"4179_toutatis":{groups:["asteroids","NEOs","PHAs"],radius:2.13,label:"Toutatis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:127994167},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.35,1.015,2.13]},dynamo:[{url:"4179_toutatis/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:176}},"4183_cuno":{groups:["asteroids","NEOs","PHAs"],radius:1.8255,label:"Cuno",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:88105665},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.8255,1.8255,1.89255]},dynamo:[{url:"4183_cuno/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.5595}},"433_eros":{groups:["asteroids","NEOs"],radius:8.42,label:"Eros",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:55564653},model:{url:"$STATIC_ASSETS_URL/models/433_eros/433_eros.gltf"},dynamo:[{url:"433_eros/sun/orb"},{url:"433_eros/ori"}]},"4450_pan":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"Pan",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:54661485},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.5,.5,.5]},dynamo:[{url:"4450_pan/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:56.48}},"4486_mithra":{groups:["asteroids","NEOs","PHAs"],radius:1.175,label:"Mithra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:102956005},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.175,.825,.72]},dynamo:[{url:"4486_mithra/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:67.5}},"4769_castalia":{groups:["asteroids","NEOs","PHAs"],radius:.9,label:"Castalia",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34594967},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.4,.4,.9]},dynamo:[{url:"4769_castalia/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:4.095}},"486958_arrokoth":{groups:["TNOs"],radius:15,label:"Arrokoth",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:9354873600},model:{url:"$STATIC_ASSETS_URL/models/486958_arrokoth/mu69.gltf",scale:[1,1,1],rotate:[{x:-110},{y:180}]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"486958_arrokoth/sun/orb"}],spin:{axis:new n.Vector3(-6.121453676996425e-10,.9396926211599973,.34202014229786787),periodInHours:13},postCreateFunction:t=>{const e=t.get("spin");null!==e&&(e.setReferenceAngle(0),e.setReferenceTime(599590968))}},"5011_ptah":{groups:["asteroids","NEOs","PHAs"],radius:.78,label:"Ptah",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:66011009},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.78,.78,.78]},dynamo:[{url:"5011_ptah/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:12}},"52246_donaldjohanson":{groups:["asteroids"],radius:1.9475,label:"Donaldjohanson",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:116208e3},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:1.9475},dynamo:[{url:"52246_donaldjohanson/sun/orb"}],fixed:{orientation:n.Quaternion.Identity}},"5535_annefrank":{groups:["asteroids"],radius:2.412,label:"Annefrank",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:103852800},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:2.412},dynamo:[{url:"5535_annefrank/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:15.12}},"617_patroclus":{groups:["asteroids","617_patroclus_barycenter"],radius:64,label:"Patroclus",labelFadeEntity:"sun",parents:[[Number.NEGATIVE_INFINITY,"617_patroclus_barycenter"]],trail:{length:183600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[64,58,49],shadowEntities:["menoetius"]},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"menoetius"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=664,i.meanAngularMotion=1697791e-11,i.meanAnomalyAtEpoch=Math.PI,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},"617_patroclus_barycenter":{groups:["asteroids"],radius:664,label:"Patroclus",labelFadeEntity:"617_patroclus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:375567312.149},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"617_patroclus/sun/orb"}],postCreateFunction:t=>{t.setCanOcclude(!1)}},"6239_minos":{groups:["asteroids","NEOs","PHAs"],radius:.237,label:"Minos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38987872},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.237,.237,.237]},dynamo:[{url:"6239_minos/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:3.5558}},"6489_golevka":{groups:["asteroids","NEOs","PHAs"],radius:.265,label:"Golevka",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:124929936},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.265,.265,.265]},dynamo:[{url:"6489_golevka/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:6.026}},"65803_didymos":{groups:["asteroids","NEOs","PHAs"],radius:.39,label:"Didymos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/65803_didymos/Didymos.gltf",rotate:[{z:180},{x:-90}]},fixed:{orientation:new n.Quaternion(0,1,0,0)},dynamo:[{url:"65803_didymos/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.2593,relativeToTime:0}},"66391_moshup":{groups:["asteroids","NEOs","PHAs"],radius:.766,label:"Moshup",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:16241014},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.766,.7475,.6735]},dynamo:[{url:"66391_moshup/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:2.7645}},"69230_hermes":{groups:["asteroids","NEOs","PHAs"],radius:.425,label:"Hermes",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:67203045},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.425,.425,.425]},dynamo:[{url:"69230_hermes/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:13.894}},"90377_sedna":{groups:["dwarf planets","TNOs"],radius:497.5,label:"Sedna",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:331511477985},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[497.5,497.5,497.5]},dynamo:[{url:"90377_sedna/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:10.273}},"951_gaspra":{groups:["asteroids","asteroid belt"],radius:9.1,label:"Gaspra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17262935},model:{url:"$STATIC_ASSETS_URL/models/951_gaspra/gaspra.gltf"},dynamo:[{url:"951_gaspra/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:7.042}},"9969_braille":{groups:["asteroids","asteroid belt"],radius:1.05,label:"Braille",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:113087113},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.05,.5,.5]},dynamo:[{url:"9969_braille/sun/orb"}],spin:{axis:n.Vector3.ZAxis,periodInHours:226.4}},"99942_apophis":{groups:["asteroids","NEOs","PHAs"],radius:.225,label:"Apophis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27958776},model:{url:"$STATIC_ASSETS_URL/models/99942_apophis/apophis.gltf"},dynamo:[{url:"99942_apophis/sun/orb"}],spin:{axis:new n.Vector3(.20112425201023415,.46925803805904115,.8598522715968735),periodInHours:30.4}},charon:{groups:["134340_pluto","moons","134340_pluto_barycenter"],radius:603.5,label:"Charon",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:551857},spheroid:{equatorialRadius:603.5,polarRadius:603.5,planetographic:!1},spheroidLOD:{textures:{color:{url:"charon/color_$SIZE_$FACE.png",sizes:[4,512,2048]}}},dynamo:[{url:"charon/134340_pluto_barycenter/orb"}],align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"134340_pluto"},secondary:{type:"velocity",axis:n.Vector3.YAxis,target:"134340_pluto"}}},dactyl:{groups:["243_ida","moons"],radius:.7,label:"Dactyl",parents:[[Number.NEGATIVE_INFINITY,"243_ida"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.8,.7,.6],rotate:[{z:90}]},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"243_ida"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=90,i.meanAngularMotion=8726646e-11,i.meanAnomalyAtEpoch=0,i.orbitOrientation.set(.8728453580255966,.1876084386162498,-.08948587100888229,.4415159494547423),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},dimorphos:{groups:["65803_didymos","moons"],radius:.085,label:"Dimorphos",parents:[[Number.NEGATIVE_INFINITY,"65803_didymos"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/dimorphos/Dimorphos.gltf"},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"65803_didymos"},secondary:{type:"align",axis:n.Vector3.ZAxis,target:"65803_didymos",targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"dimorphos/65803_didymos/orb"}]},hiiaka:{groups:["136108_haumea","moons"],radius:160,label:"Hi'iaka",parents:[[Number.NEGATIVE_INFINITY,"136108_haumea"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[160,160,160]},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"136108_haumea"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=.0513,i.semiMajorAxis=49880,i.meanAngularMotion=148049e-11,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(2.20532822965,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},hydra:{groups:["134340_pluto","moons","134340_pluto_barycenter"],radius:25,label:"Hydra",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:3300633},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[25,25,25],shadowEntities:["134340_pluto"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hydra/134340_pluto_barycenter/orb"}]},kerberos:{groups:["134340_pluto","moons","134340_pluto_barycenter"],radius:8.25,label:"Kerberos",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:2779277},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[8.25,8.25,8.25],shadowEntities:["134340_pluto"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kerberos/134340_pluto_barycenter/orb"}]},menoetius:{groups:["617_patroclus_barycenter","moons"],radius:58,label:"Menoetius",parents:[[Number.NEGATIVE_INFINITY,"617_patroclus_barycenter"]],trail:{length:183600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[58,54,45],shadowEntities:["617_patroclus"]},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"617_patroclus"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=664,i.meanAngularMotion=1697791e-11,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},namaka:{groups:["136108_haumea","moons"],radius:85,label:"Nāmaka",parents:[[Number.NEGATIVE_INFINITY,"136108_haumea"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[85,85,85]},align:{primary:{type:"point",axis:n.Vector3.XAxis,target:"136108_haumea"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=.249,i.semiMajorAxis=25657,i.meanAngularMotion=39786e-10,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},nix:{groups:["134340_pluto","moons","134340_pluto_barycenter"],radius:24,label:"Nix",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:2147440},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[24,24,24],shadowEntities:["134340_pluto"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"nix/134340_pluto_barycenter/orb"}]},styx:{groups:["134340_pluto","moons","134340_pluto_barycenter"],radius:5.5,label:"Styx",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:1741958},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[5.5,5.5,5.5],shadowEntities:["134340_pluto"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"styx/134340_pluto_barycenter/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(643),o=i(5);s.default.register({"1p_halley":{groups:["comets"],radius:6,label:"Halley (1P/Halley)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2376918432},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6]},comet:{},dynamo:[{url:"1p_halley/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(o.Vector3.ZAxis,!1),e.setRate(3356402e-11)}},"103p_hartley_2":{groups:["comets"],radius:2,label:"Hartley 2 (103P/Hartley)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:203862096},model:{url:"$STATIC_ASSETS_URL/models/103p_hartley_2/hartley_2.gltf"},comet:{},dynamo:[{url:"103p_hartley_2/sun/orb"},{url:"103p_hartley_2/ori"}]},"9p_tempel_1":{groups:["comets"],radius:5,label:"Tempel 1 (9P/Tempel)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:176091408},model:{url:"$STATIC_ASSETS_URL/models/9p_tempel_1/9p_tempel.gltf",rotate:[{y:90}]},comet:{},dynamo:[{url:"9p_tempel_1/sun/orb"},{url:"9p_tempel_1/ori"}]},"81p_wild_2":{groups:["comets"],radius:2.5,label:"Wild 2 (81P/Wild)",parents:[[Number.NEGATIVE_INFINITY,"sun"],[-800047271,"jupiter"],[-797029475,"sun"]],trail:{length:1356976800,lengthCoverages:[[1356976800,Number.NEGATIVE_INFINITY,-611927948.817],[189345600,-611927948.817,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.5,2.5,2.5]},comet:{},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"81p_wild_2/sun/1/orb"},{url:"81p_wild_2/jupiter/orb"},{url:"81p_wild_2/sun/2/orb"}]},"67p_churyumov_gerasimenko":{groups:["comets"],radius:4.1,label:"Churyumov–Gerasimenko (67P/C-G)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:203230944},model:{url:"$STATIC_ASSETS_URL/models/67p_churyumov_gerasimenko/67p_churyumov_gerasimenko.gltf",rotate:[{x:90}],scale:.00124},comet:{},dynamo:[{url:"67p_churyumov_gerasimenko/sun/orb"},{url:"67p_churyumov_gerasimenko/ori"}],postCreateFunction:t=>{t.setOrientation(new o.Quaternion(.26732846830704055,.017948528101847026,.22012096235022358,.9379552773483394));const e=t.get("dynamo");if(null!==e){const i=t.addController("spin",void 0,e);i.setAxis(new o.Vector3(.15191127889562422,.404099951782066,.9020123016422935),!1),i.setRate(.00014477940709946253)}n.EntityUtils.addGeyser(t,1,1,100,1,1,[1,-.25,1.2],[0,0,1]),n.EntityUtils.addGeyser(t,2,.5,100,1,1,[-1.2,-.25,.6],[.2,-.5,1]),n.EntityUtils.addGeyser(t,1,.07,100,1,10,[-1.2,.1,.6],[.2,-.5,1]),n.EntityUtils.addGeyser(t,1,1,100,1,1,[-.8,.75,1],[.2,.5,1]),n.EntityUtils.addGeyser(t,1,.5,100,1,1,[-.8,.35,-1],[.2,.25,-1])}},"19p_borrelly":{groups:["comets"],radius:2.4,label:"Borrelly (19P/Borrelly)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:214591680},model:{url:"$STATIC_ASSETS_URL/models/19p_borrelly/borrelly.gltf"},comet:{},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"19p_borrelly/sun/orb"}]},c_1995_o1:{groups:["comets"],radius:5,label:"Hale-Bopp (C/1995 O1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:8007741e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[5,5,5]},comet:{},dynamo:[{url:"c_1995_o1/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(o.Vector3.ZAxis,!1),e.setRate(.00014832826)}},c_2010_x1:{groups:["comets"],radius:5,label:"Elenin (C/2010 X1)",parents:[[Number.NEGATIVE_INFINITY,"sun"],[370699266.182,""]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[5,5,5]},comet:{},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"c_2010_x1/sun/pos"}]},c_2012_s1:{groups:["comets"],radius:3,label:"ISON (C/2012 S1)",parents:[[Number.NEGATIVE_INFINITY,"sun"],[440596867.184,""]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3]},comet:{},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"c_2012_s1/sun/pos"}]},c_2013_a1:{groups:["comets"],radius:5,label:"Siding Spring (C/2013 A1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[5,5,5]},comet:{},dynamo:[{url:"c_2013_a1/sun/pos"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(o.Vector3.ZAxis,!1),e.setRate(.00021816615)}},c_2019_y4:{groups:["comets"],radius:3,label:"ATLAS (C/2019 Y4)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3]},comet:{},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"c_2019_y4/sun/orb"}]},c_2020_f3:{groups:["comets"],radius:6,label:"NEOWISE (C/2020 F3)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2376918432},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6]},comet:{},dynamo:[{url:"c_2020_f3/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(o.Vector3.ZAxis,!1),e.setRate(.00023025451)}}}),e.default={}},function(t,e,i){"use strict";i.r(e),i.d(e,{EntityUtils:function(){return EntityUtils}});var s=i(5);class EntityUtils{static addGeyser(t,e,i,n,o,a,r,l){const c=t.addComponent("particleSpray");c.setNumberOfParticles(n),c.setSizeOfParticles(.25*e*a),c.setSpeedOfParticles(o*e),c.setColorOfParticles(new s.Color(1,1,1,.5*i)),c.setSpread(1*a),c.setParticleSpacingRandom(!1),c.setLength(2.5*e),c.setOriginOffset(new s.Vector3(r[0],r[1],r[2])),c.setDirection(new s.Vector3(l[0],l[1],l[2]))}static showSubObjectDuringInterval(t,e,i,n){t.getComponentByType("model").setHiddenObject(e,!0);t.addController("coverage").addCoverage(new s.Interval(i,n),(t=>{t.getComponentByType("model").setHiddenObject(e,!1)}),(t=>{t.getComponentByType("model").setHiddenObject(e,!0)}))}}},function(t,e,i){"use strict";i.r(e),i(531).default.register({moon:{groups:["earth","moons"],radius:1738.1,label:"Moon",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:2360590,color:[0,.6,.8,.7]},spheroid:{equatorialRadius:1738.1,polarRadius:1735.97,planetographic:!0},spheroidLOD:{features:["normalMap","shadowEntities"],textures:{color:{url:"moon/color_$SIZE_$FACE.png",sizes:[16,512,4096]},normal:{url:"moon/normal_$SIZE_$FACE.png",sizes:[16,512,2048]}},shadowEntities:["earth"]},dynamo:[{url:"moon/earth/orb"},{url:"moon/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(531).default.register({adrastea:{groups:["jupiter","moons","amalthea","inner","regular"],radius:8.2,label:"Adrastea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:25770,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[8.2,8.2,8.2],shadowEntities:["jupiter"]},dynamo:[{url:"adrastea/jupiter/orb"},{url:"adrastea/ori"}]},amalthea:{groups:["jupiter","moons","amalthea","inner","regular"],radius:83.5,label:"Amalthea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:43043,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[83.5,83.5,83.5],shadowEntities:["jupiter"]},dynamo:[{url:"amalthea/jupiter/orb"},{url:"amalthea/ori"}]},callisto:{groups:["jupiter","moons","main","galilean","regular"],radius:2410.3,label:"Callisto",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:1441931,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:2410.3,polarRadius:2410.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"callisto/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["jupiter","io","europa","ganymede"]},dynamo:[{url:"callisto/jupiter/orb"},{url:"callisto/ori"}]},europa:{groups:["jupiter","moons","main","galilean","regular"],radius:1569,label:"Europa",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:306822,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:1569,polarRadius:1569,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"europa/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["jupiter","io","callisto","ganymede"]},dynamo:[{url:"europa/jupiter/orb"},{url:"europa/ori"}]},ganymede:{groups:["jupiter","moons","main","galilean","regular"],radius:2634.1,label:"Ganymede",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:618153,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:2634.1,polarRadius:2634.1,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"ganymede/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["jupiter","io","europa","callisto"]},dynamo:[{url:"ganymede/jupiter/orb"},{url:"ganymede/ori"}]},io:{groups:["jupiter","moons","main","galilean","regular"],radius:1821.3,label:"Io",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:152853,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:1821.3,polarRadius:1821.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"io/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["jupiter","europa","ganymede","callisto"]},dynamo:[{url:"io/jupiter/orb"},{url:"io/ori"}]},metis:{groups:["jupiter","moons","amalthea","inner","regular"],radius:21.5,label:"Metis",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:25469,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[21.5,21.5,21.5],shadowEntities:["jupiter"]},dynamo:[{url:"metis/jupiter/orb"},{url:"metis/ori"}]},thebe:{groups:["jupiter","moons","amalthea","inner","regular"],radius:49,label:"Thebe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58277,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[49,49,49],shadowEntities:["jupiter"]},dynamo:[{url:"thebe/jupiter/orb"},{url:"thebe/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({aitne:{groups:["jupiter","moons","irregular","carme"],radius:1.5,label:"Aitne",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58720896,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"aitne/jupiter/orb"}]},ananke:{groups:["jupiter","moons","irregular","ananke"],radius:14,label:"Ananke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:152850,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[14,14,14],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"ananke/jupiter/orb"}]},aoede:{groups:["jupiter","moons","irregular","pasiphae"],radius:2,label:"Aoede",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:306823,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"aoede/jupiter/orb"}]},arche:{groups:["jupiter","moons","irregular","carme"],radius:1.5,label:"Arche",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:618157,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"arche/jupiter/orb"}]},autonoe:{groups:["jupiter","moons","irregular","pasiphae"],radius:2,label:"Autonoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:1441929,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"autonoe/jupiter/orb"}]},callirrhoe:{groups:["jupiter","moons","irregular","pasiphae"],radius:4.3,label:"Callirrhoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62822304,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4.3,4.3,4.3],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"callirrhoe/jupiter/orb"}]},carme:{groups:["jupiter","moons","irregular","carme"],radius:23,label:"Carme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66005280,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[23,23,23],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"carme/jupiter/orb"}]},carpo:{groups:["jupiter","moons","irregular"],radius:1.5,label:"Carpo",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:39624768,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"carpo/jupiter/orb"}]},chaldene:{groups:["jupiter","moons","irregular","carme"],radius:1.9,label:"Chaldene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:60422112,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.9,1.9,1.9],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"chaldene/jupiter/orb"}]},cyllene:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Cyllene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63167040,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"cyllene/jupiter/orb"}]},dia:{groups:["jupiter","moons","irregular","himalia"],radius:2,label:"Dia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61516800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:2,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"dia/jupiter/orb"}]},eirene:{groups:["jupiter","moons","irregular","carme"],radius:2,label:"Eirene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:65359008,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:2,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"eirene/jupiter/orb"}]},elara:{groups:["jupiter","moons","irregular","himalia"],radius:43,label:"Elara",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:22258368,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[43,43,43],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"elara/jupiter/orb"}]},erinome:{groups:["jupiter","moons","irregular","carme"],radius:1.6,label:"Erinome",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61513344,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.6,1.6,1.6],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"erinome/jupiter/orb"}]},ersa:{groups:["jupiter","moons","irregular","himalia"],radius:1.5,label:"Ersa",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21339936,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"ersa/jupiter/orb"}]},euanthe:{groups:["jupiter","moons","irregular","ananke"],radius:1.5,label:"Euanthe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51674976,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"euanthe/jupiter/orb"}]},eukelade:{groups:["jupiter","moons","irregular","carme"],radius:2,label:"Eukelade",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63521280,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"eukelade/jupiter/orb"}]},eupheme:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Eupheme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:50397984,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"eupheme/jupiter/orb"}]},euporie:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Euporie",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:46550592,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"euporie/jupiter/orb"}]},eurydome:{groups:["jupiter","moons","irregular","pasiphae"],radius:1.5,label:"Eurydome",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62498304,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"eurydome/jupiter/orb"}]},harpalyke:{groups:["jupiter","moons","irregular","ananke"],radius:2.2,label:"Harpalyke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53960256,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.2,2.2,2.2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"harpalyke/jupiter/orb"}]},hegemone:{groups:["jupiter","moons","irregular","pasiphae"],radius:1.5,label:"Hegemone",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64411200,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hegemone/jupiter/orb"}]},helike:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Helike",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51960960,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"helike/jupiter/orb"}]},hermippe:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Hermippe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:54415584,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hermippe/jupiter/orb"}]},herse:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Herse",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58125600,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"herse/jupiter/orb"}]},himalia:{groups:["jupiter","moons","irregular","himalia"],radius:85,label:"Himalia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21619872,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[85,85,85],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"himalia/jupiter/orb"}]},iocaste:{groups:["jupiter","moons","irregular","ananke"],radius:2.6,label:"Iocaste",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52654752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.6,2.6,2.6],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"iocaste/jupiter/orb"}]},isonoe:{groups:["jupiter","moons","irregular","carme"],radius:1.9,label:"Isonoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64811232,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.9,1.9,1.9],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"isonoe/jupiter/orb"}]},jupiter_li:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61516800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_li/jupiter/orb"}]},jupiter_lii:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"Jupiter LII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51568704,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lii/jupiter/orb"}]},jupiter_liv:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"Jupiter LIV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51568704,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_liv/jupiter/orb"}]},jupiter_lv:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51236064,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lv/jupiter/orb"}]},jupiter_lvi:{groups:["jupiter","moons","irregular","pasiphae"],radius:.5,label:"Jupiter LVI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66098592,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lvi/jupiter/orb"}]},jupiter_lix:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Jupiter LIX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64619424,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lix/jupiter/orb"}]},jupiter_lxi:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:60577632,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxi/jupiter/orb"}]},jupiter_lxiii:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXIII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59464800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxiii/jupiter/orb"}]},jupiter_lxiv:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXIV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53626752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxiv/jupiter/orb"}]},jupiter_lxvi:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXVI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62989920,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxvi/jupiter/orb"}]},jupiter_lxvii:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Jupiter LXVII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59746464,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxvii/jupiter/orb"}]},jupiter_lxviii:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXVIII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52188192,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxviii/jupiter/orb"}]},jupiter_lxix:{groups:["jupiter","moons","irregular","carme"],radius:.5,label:"Jupiter LXIX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62267616,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxix/jupiter/orb"}]},jupiter_lxx:{groups:["jupiter","moons","irregular","ananke"],radius:1.5,label:"Jupiter LXX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55617408,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxx/jupiter/orb"}]},jupiter_lxxii:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXXII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55617408,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jupiter_lxxii/jupiter/orb"}]},kale:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Kale",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59211648,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kale/jupiter/orb"}]},kallichore:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Kallichore",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62018784,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kallichore/jupiter/orb"}]},kalyke:{groups:["jupiter","moons","irregular","carme"],radius:2.6,label:"Kalyke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62296128,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.6,2.6,2.6],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kalyke/jupiter/orb"}]},kore:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Kore",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:67048128,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kore/jupiter/orb"}]},leda:{groups:["jupiter","moons","irregular","himalia"],radius:10,label:"Leda",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:20806848,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[10,10,10],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"leda/jupiter/orb"}]},lysithea:{groups:["jupiter","moons","irregular","himalia"],radius:18,label:"Lysithea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:22454496,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[18,18,18],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"lysithea/jupiter/orb"}]},megaclite:{groups:["jupiter","moons","irregular","pasiphae"],radius:2.7,label:"Megaclite",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:68466816,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.7,2.7,2.7],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"megaclite/jupiter/orb"}]},mneme:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Mneme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:54214272,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"mneme/jupiter/orb"}]},orthosie:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Orthosie",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52066368,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"orthosie/jupiter/orb"}]},pandia:{groups:["jupiter","moons","irregular","himalia"],radius:1.5,label:"Pandia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21661344,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"pandia/jupiter/orb"}]},pasiphae:{groups:["jupiter","moons","irregular","pasiphae"],radius:30,label:"Pasiphae",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63918720,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[30,30,30],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"pasiphae/jupiter/orb"}]},pasithee:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Pasithee",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62806752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"pasithee/jupiter/orb"}]},philophrosyne:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Philophrosyne",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61327584,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"philophrosyne/jupiter/orb"}]},praxidike:{groups:["jupiter","moons","irregular","ananke"],radius:3.4,label:"Praxidike",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53040960,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.4,3.4,3.4],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"praxidike/jupiter/orb"}]},s_2003_j_2:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"S/2003 J 2",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52014528,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_2/jupiter/orb"}]},s_2003_j_4:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"S/2003 J 4",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:57788640,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_4/jupiter/orb"}]},s_2003_j_9:{groups:["jupiter","moons","irregular","carme"],radius:.5,label:"S/2003 J 9",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66320640,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_9/jupiter/orb"}]},s_2003_j_10:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"S/2003 J 10",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61152192,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_10/jupiter/orb"}]},s_2003_j_12:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"S/2003 J 12",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55869696,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_12/jupiter/orb"}]},s_2003_j_16:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"S/2003 J 16",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51855552,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_16/jupiter/orb"}]},s_2003_j_23:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"S/2003 J 23",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:68428800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2003_j_23/jupiter/orb"}]},sinope:{groups:["jupiter","moons","irregular","pasiphae"],radius:19,label:"Sinope",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63878112,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[19,19,19],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sinope/jupiter/orb"}]},sponde:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Sponde",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66666240,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sponde/jupiter/orb"}]},taygete:{groups:["jupiter","moons","irregular","carme"],radius:2.5,label:"Taygete",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59328288,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.5,2.5,2.5],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"taygete/jupiter/orb"}]},thelxinoe:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Thelxinoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51633504,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"thelxinoe/jupiter/orb"}]},themisto:{groups:["jupiter","moons","irregular"],radius:4,label:"Themisto",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:11220768,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4,4,4],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"themisto/jupiter/orb"}]},thyone:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Thyone",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55278720,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"thyone/jupiter/orb"}]},valetudo:{groups:["jupiter","moons","irregular"],radius:.5,label:"Valetudo",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:45568224,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"valetudo/jupiter/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(531).default.register({phobos:{groups:["mars","moons"],radius:14,label:"Phobos",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:27554,color:[.89,.51,.35,.7]},model:{url:"$STATIC_ASSETS_URL/models/phobos/phobos.gltf",scale:[1,1,1],rotate:[{z:90},{y:90}],shadowEntities:["mars"]},dynamo:[{url:"phobos/mars/orb"},{url:"phobos/ori"}]},deimos:{groups:["mars","moons"],radius:8.70951,label:"Deimos",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:109123,color:[.89,.51,.35,.7]},model:{url:"$STATIC_ASSETS_URL/models/deimos/deimos.gltf",scale:[1,1,1],rotate:[{y:-180}],shadowEntities:["mars"]},dynamo:[{url:"deimos/mars/orb"},{url:"deimos/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({despina:{groups:["neptune","moons","regular"],radius:90,label:"Despina",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:28909,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[90,90,90],shadowEntities:["neptune"]},dynamo:[{url:"despina/neptune/orb"},{url:"despina/ori"}]},galatea:{groups:["neptune","moons","regular"],radius:102,label:"Galatea",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:37039,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[102,102,102],shadowEntities:["neptune"]},dynamo:[{url:"galatea/neptune/orb"},{url:"galatea/ori"}]},halimede:{groups:["neptune","moons","irregular"],radius:31,label:"Halimede",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:162352512,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[31,31,31],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"halimede/neptune/orb"}]},hippocamp:{groups:["neptune","moons","regular"],radius:17.4,label:"Hippocamp",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:80870,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[17.4,17.4,17.4],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hippocamp/neptune/orb"}]},laomedeia:{groups:["neptune","moons","irregular"],radius:21,label:"Laomedeia",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:274002912,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[21,21,21],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"laomedeia/neptune/orb"}]},larissa:{groups:["neptune","moons","regular"],radius:108,label:"Larissa",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:47995,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[108,108,108],shadowEntities:["neptune"]},dynamo:[{url:"larissa/neptune/orb"},{url:"larissa/ori"}]},naiad:{groups:["neptune","moons","regular"],radius:48,label:"Naiad",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:25436,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[48,48,48],shadowEntities:["neptune"]},dynamo:[{url:"naiad/neptune/orb"},{url:"naiad/ori"}]},nereid:{groups:["neptune","moons","irregular"],radius:170,label:"Nereid",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:31115768,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[170,170,170],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"nereid/neptune/orb"}]},neso:{groups:["neptune","moons","irregular"],radius:30,label:"Neso",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:841599072,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[30,30,30],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"neso/neptune/orb"}]},proteus:{groups:["neptune","moons","regular"],radius:232.5,label:"Proteus",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:96940,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/proteus/proteus.gltf",scale:[1,1,1]},dynamo:[{url:"proteus/neptune/orb"},{url:"proteus/ori"}]},psamathe:{groups:["neptune","moons","irregular"],radius:20,label:"Psamathe",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:784019520,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[20,20,20],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"psamathe/neptune/orb"}]},sao:{groups:["neptune","moons","irregular"],radius:22,label:"Sao",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:251659008,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[22,22,22],shadowEntities:["neptune"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sao/neptune/orb"}]},thalassa:{groups:["neptune","moons","regular"],radius:54,label:"Thalassa",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:26913,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[54,54,54],shadowEntities:["neptune"]},dynamo:[{url:"thalassa/neptune/orb"},{url:"thalassa/ori"}]},triton:{groups:["neptune","moons","irregular"],radius:1353.4,label:"Triton",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:507760,color:[.48,.69,1,.7]},spheroid:{equatorialRadius:1353.4,polarRadius:1353.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"triton/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}},shadowEntities:["neptune"]},dynamo:[{url:"triton/neptune/orb"},{url:"triton/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(643),o=i(5);s.default.register({dione:{groups:["saturn","moons","inner","major"],radius:561.7,label:"Dione",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:561.7,polarRadius:561.7,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"dione/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"dione/saturn/orb"},{url:"dione/ori"}]},enceladus:{groups:["saturn","moons","inner","major"],radius:252.1,label:"Enceladus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:118387,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:252.1,polarRadius:252.1,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"enceladus/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"enceladus/saturn/orb"},{url:"enceladus/ori"}],postCreateFunction:t=>{n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-20.16,.8*-69.23,.8*-240.99],[-.0999,-.2747,-.9563]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-49.384,.8*-24.61,.8*-243.08],[-.2449,-.0976,-.9646]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.8*-35.82,-37.496,-196],[-.1421,-.1859,-.9722]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[21.259,.7*-17.54,-174.685],[.1205,-.0696,-.9902]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[0,1.54,-176.393],[0,.0087,-.9999]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-21.658,21.658,-173.719],[-.1227,.1227,-.9848]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[32.193,.7*-34.55,.7*-245.35],[.1824,-.1371,-.9736]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-46.719,.68*.9,-221.931],[-.2059,.0026,-.9785]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.9*-31.81,-12.024,-224.667],[-.1262,-.053,-.9905]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.9*-5.49,-26.793,-225.162],[-.0217,-.1181,-.9927]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[14.886,-42.39,-222.309],[.0656,-.1869,-.9801]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-13.176,48.112,-195.328],[-.0653,.2386,-.9689]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[51.52*.8,19.176,.8*-245.51],[.2044,.0951,-.9742]),n.EntityUtils.addGeyser(t,100,.1,20,.002,4,[22.504,33.52*.8,-198.536],[.1116,.133,-.9848])}},hyperion:{groups:["saturn","moons","outer","major"],radius:135,label:"Hyperion",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:1838299,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/hyperion/hyperion.gltf",scale:[1,1,1]},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"hyperion/saturn/orb"}]},iapetus:{groups:["saturn","moons","outer","major"],radius:735.6,label:"Iapetus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:6853378,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:735.6,polarRadius:735.6,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"iapetus/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"iapetus/saturn/orb"},{url:"iapetus/ori"}]},mimas:{groups:["saturn","moons","inner","major"],radius:198.3,label:"Mimas",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81389,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/mimas/mimas.gltf",scale:[1,1,1]},dynamo:[{url:"mimas/saturn/orb"},{url:"mimas/ori"}]},rhea:{groups:["saturn","moons","outer","major"],radius:764.3,label:"Rhea",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:390374,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:764.3,polarRadius:764.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"rhea/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"rhea/saturn/orb"},{url:"rhea/ori"}]},tethys:{groups:["saturn","moons","inner","major"],radius:538.4,label:"Tethys",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:538.4,polarRadius:527.5,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"tethys/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"tethys/saturn/orb"},{url:"tethys/ori"}]},titan:{groups:["saturn","moons","outer","major"],radius:2575,label:"Titan",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:1377648,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:2575,polarRadius:2575,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"titan/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["saturn"]},dynamo:[{url:"titan/saturn/orb"},{url:"titan/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(75),e.setDensity(5e-4),e.setColor(new o.Color(179/255,145/255,53/255)),e.setSunsetColor(new o.Color(49/255,103/255,.8)),e.setSunsetIntensity(1.2)}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({aegaeon:{groups:["saturn","moons","minor","ring moonlet"],radius:.12,label:"Aegaeon",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:69822,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.12,.12,.12],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"aegaeon/saturn/orb"}]},aegir:{groups:["saturn","moons","minor","norse"],radius:3,label:"Aegir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:94561344,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"aegir/saturn/orb"}]},albiorix:{groups:["saturn","moons","minor","gallic"],radius:16,label:"Albiorix",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:66923712,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[16,16,16],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"albiorix/saturn/orb"}]},anthe:{groups:["saturn","moons","minor","alkyonides"],radius:.9,label:"Anthe",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:90797,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.9,.9,.9],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"anthe/saturn/orb"}]},atlas:{groups:["saturn","moons","minor","ring shepherd"],radius:15.1,label:"Atlas",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:51986,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[15.1,15.1,15.1],shadowEntities:["saturn"]},dynamo:[{url:"atlas/saturn/orb"},{url:"atlas/ori"}]},bebhionn:{groups:["saturn","moons","minor","gallic"],radius:3,label:"Bebhionn",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72469728,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"bebhionn/saturn/orb"}]},bergelmir:{groups:["saturn","moons","minor","norse"],radius:3,label:"Bergelmir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85175712,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"bergelmir/saturn/orb"}]},bestla:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Bestla",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:95165280,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"bestla/saturn/orb"}]},calypso:{groups:["saturn","moons","minor","trojan"],radius:10.7,label:"Calypso",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[10.7,10.7,10.7],shadowEntities:["saturn"]},dynamo:[{url:"calypso/saturn/orb"},{url:"calypso/ori"}]},daphnis:{groups:["saturn","moons","minor","ring shepherd"],radius:3.8,label:"Daphnis",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:51328,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.8,3.8,3.8],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"daphnis/saturn/orb"}]},epimetheus:{groups:["saturn","moons","minor","co-orbital"],radius:58.1,label:"Epimetheus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:59990,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[58.1,58.1,58.1],shadowEntities:["saturn"]},dynamo:[{url:"epimetheus/saturn/orb"},{url:"epimetheus/ori"}]},erriapus:{groups:["saturn","moons","minor","gallic"],radius:5,label:"Erriapus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72998496,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[5,5,5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"erriapus/saturn/orb"}]},farbauti:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"Farbauti",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:91132992,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.5,2.5,2.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"farbauti/saturn/orb"}]},fenrir:{groups:["saturn","moons","minor","norse"],radius:2,label:"Fenrir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:104762592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"fenrir/saturn/orb"}]},fornjot:{groups:["saturn","moons","minor","norse"],radius:3,label:"Fornjot",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:123738624,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"fornjot/saturn/orb"}]},greip:{groups:["saturn","moons","minor","norse"],radius:3,label:"Greip",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:78326784,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"greip/saturn/orb"}]},hati:{groups:["saturn","moons","minor","norse"],radius:3,label:"Hati",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:89255520,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hati/saturn/orb"}]},helene:{groups:["saturn","moons","minor","trojan"],radius:17.6,label:"Helene",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[17.6,17.6,17.6],shadowEntities:["saturn"]},dynamo:[{url:"helene/saturn/orb"},{url:"helene/ori"}]},hyrrokkin:{groups:["saturn","moons","minor","norse"],radius:3,label:"Hyrrokkin",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:78994656,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hyrrokkin/saturn/orb"}]},ijiraq:{groups:["saturn","moons","minor","inuit"],radius:6,label:"Ijiraq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:39032928,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"ijiraq/saturn/orb"}]},janus:{groups:["saturn","moons","minor","co-orbital"],radius:89.5,label:"Janus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:60019,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[89.5,89.5,89.5],shadowEntities:["saturn"]},dynamo:[{url:"janus/saturn/orb"},{url:"janus/ori"}]},jarnsaxa:{groups:["saturn","moons","minor","norse"],radius:3,label:"Jarnsaxa",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81542592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"jarnsaxa/saturn/orb"}]},kari:{groups:["saturn","moons","minor","norse"],radius:3,label:"Kari",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:107573184,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kari/saturn/orb"}]},kiviuq:{groups:["saturn","moons","minor","inuit"],radius:8,label:"Kiviuq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:38721024,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[8,8,8],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"kiviuq/saturn/orb"}]},loge:{groups:["saturn","moons","minor","norse"],radius:3,label:"Loge",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:112402080,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"loge/saturn/orb"}]},methone:{groups:["saturn","moons","minor","alkyonides"],radius:1.6,label:"Methone",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:87227,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.6,1.6,1.6],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"methone/saturn/orb"}]},mundilfari:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Mundilfari",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:82658880,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"mundilfari/saturn/orb"}]},narvi:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Narvi",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:87130080,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"narvi/saturn/orb"}]},paaliaq:{groups:["saturn","moons","minor","inuit"],radius:11,label:"Paaliaq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:59873472,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[11,11,11],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"paaliaq/saturn/orb"}]},pallene:{groups:["saturn","moons","minor","alkyonides"],radius:2.5,label:"Pallene",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:99684,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.5,2.5,2.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"pallene/saturn/orb"}]},pan:{groups:["saturn","moons","minor","ring shepherd"],radius:14.1,label:"Pan",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:49684,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[14.1,14.1,14.1],shadowEntities:["saturn"]},dynamo:[{url:"pan/saturn/orb"},{url:"pan/ori"}]},pandora:{groups:["saturn","moons","minor","ring shepherd"],radius:40.7,label:"Pandora",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:54302,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[40.7,40.7,40.7],shadowEntities:["saturn"]},dynamo:[{url:"pandora/saturn/orb"},{url:"pandora/ori"}]},phoebe:{groups:["saturn","moons","minor","norse"],radius:106.5,label:"Phoebe",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:47095776,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/phoebe/phoebe.gltf"},dynamo:[{url:"phoebe/saturn/orb"},{url:"phoebe/ori"}]},polydeuces:{groups:["saturn","moons","minor","trojan"],radius:1.3,label:"Polydeuces",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.3,1.3,1.3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"polydeuces/saturn/orb"}]},prometheus:{groups:["saturn","moons","minor","ring shepherd"],radius:43.1,label:"Prometheus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:52962,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[43.1,43.1,43.1],shadowEntities:["saturn"]},dynamo:[{url:"prometheus/saturn/orb"},{url:"prometheus/ori"}]},s_2004_s_7:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2004 S 7",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:94270176,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_7/saturn/orb"}]},s_2004_s_12:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2004 S 12",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:89439552,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_12/saturn/orb"}]},s_2004_s_13:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2004 S 13",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81792288,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_13/saturn/orb"}]},s_2004_s_17:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 17",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:88339680,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_17/saturn/orb"}]},s_2004_s_21:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 21",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:115141824,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_21/saturn/orb"}]},s_2004_s_24:{groups:["saturn","moons","minor","gallic"],radius:1.5,label:"S/2004 S 24",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:114920640,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_24/saturn/orb"}]},s_2004_s_28:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 28",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:106225344,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_28/saturn/orb"}]},s_2004_s_31:{groups:["saturn","moons","minor","inuit"],radius:2,label:"S/2004 S 31",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:74354112,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_31/saturn/orb"}]},s_2004_s_36:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 36",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:116774784,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_36/saturn/orb"}]},s_2004_s_37:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 37",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:64200384,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_37/saturn/orb"}]},s_2004_s_39:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 39",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:115937568,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2004_s_39/saturn/orb"}]},s_2006_s_1:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2006 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:83414016,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2006_s_1/saturn/orb"}]},s_2006_s_3:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2006 S 3",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:102453984,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2006_s_3/saturn/orb"}]},s_2007_s_2:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2007 S 2",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:65109312,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2007_s_2/saturn/orb"}]},s_2007_s_3:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2007 S 3",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85440096,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2007_s_3/saturn/orb"}]},s_2009_s_1:{groups:["saturn","moons","propeller moonlet"],radius:.15,label:"S/2009 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:40608,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.15,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=117e3,i.meanAngularMotion=.00015472777,i.meanAnomalyAtEpoch=-1.5,i.orbitOrientation.set(-.9397445462795919,.02005900203250964,-.052689008288728606,-.33719681579275607),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},s_2019_s_1:{groups:["saturn","moons","minor","inuit"],radius:3,label:"S/2019 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:38342592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"s_2019_s_1/saturn/orb"}]},saturn_liv:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LIV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85738176,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_liv/saturn/orb"}]},saturn_lv:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96327360,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lv/saturn/orb"}]},saturn_lvi:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:101297088,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lvi/saturn/orb"}]},saturn_lvii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96869088,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lvii/saturn/orb"}]},saturn_lviii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVIII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:140744736,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lviii/saturn/orb"}]},saturn_lix:{groups:["saturn","moons","minor","norse"],radius:3,label:"Saturn LIX",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:91120032,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lix/saturn/orb"}]},saturn_lx:{groups:["saturn","moons","minor","inuit"],radius:2,label:"Saturn LX",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72782496,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lx/saturn/orb"}]},saturn_lxi:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LXI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96300576,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxi/saturn/orb"}]},saturn_lxii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:97908480,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxii/saturn/orb"}]},saturn_lxiii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXIII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:113160672,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxiii/saturn/orb"}]},saturn_lxiv:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LXIV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:126476640,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxiv/saturn/orb"}]},saturn_lxv:{groups:["saturn","moons","minor","norse"],radius:3,label:"Saturn LXV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:104288256,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxv/saturn/orb"}]},saturn_lxvi:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXVI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:109711584,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"saturn_lxvi/saturn/orb"}]},siarnaq:{groups:["saturn","moons","minor","inuit"],radius:20,label:"Siarnaq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:76453632,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[20,20,20],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"siarnaq/saturn/orb"}]},skathi:{groups:["saturn","moons","minor","norse"],radius:4,label:"Skathi",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:63289728,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4,4,4],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"skathi/saturn/orb"}]},skoll:{groups:["saturn","moons","minor","norse"],radius:3,label:"Skoll",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:74508768,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"skoll/saturn/orb"}]},surtur:{groups:["saturn","moons","minor","norse"],radius:3,label:"Surtur",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:107339904,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"surtur/saturn/orb"}]},suttungr:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Suttungr",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:88371648,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"suttungr/saturn/orb"}]},tarqeq:{groups:["saturn","moons","minor","inuit"],radius:3,label:"Tarqeq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:77315904,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"tarqeq/saturn/orb"}]},tarvos:{groups:["saturn","moons","minor","gallic"],radius:7.5,label:"Tarvos",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81581472,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[7.5,7.5,7.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"tarvos/saturn/orb"}]},telesto:{groups:["saturn","moons","minor","trojan"],radius:12.4,label:"Telesto",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[12.4,12.4,12.4],shadowEntities:["saturn"]},dynamo:[{url:"telesto/saturn/orb"},{url:"telesto/ori"}]},thrymr:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Thrymr",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:93146976,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"thrymr/saturn/orb"}]},ymir:{groups:["saturn","moons","minor","norse"],radius:9,label:"Ymir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:108358560,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[9,9,9],shadowEntities:["saturn"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"ymir/saturn/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(531).default.register({ariel:{groups:["uranus","moons","major"],radius:578.9,label:"Ariel",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:217728,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:578.9,polarRadius:578.9,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"ariel/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"ariel/uranus/orb"},{url:"ariel/ori"}]},miranda:{groups:["uranus","moons","major"],radius:235.8,label:"Miranda",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:122125,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:235.8,polarRadius:235.8,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"miranda/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["uranus"]},dynamo:[{url:"miranda/uranus/orb"},{url:"miranda/ori"}]},oberon:{groups:["uranus","moons","major"],radius:761.4,label:"Oberon",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:1163223,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:761.4,polarRadius:761.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"oberon/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"oberon/uranus/orb"},{url:"oberon/ori"}]},titania:{groups:["uranus","moons","major"],radius:788.4,label:"Titania",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:752219,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:788.4,polarRadius:788.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"titania/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"titania/uranus/orb"},{url:"titania/ori"}]},umbriel:{groups:["uranus","moons","major"],radius:584.7,label:"Umbriel",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:358042,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:584.7,polarRadius:584.7,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"umbriel/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["uranus"]},dynamo:[{url:"umbriel/uranus/orb"},{url:"umbriel/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({belinda:{groups:["uranus","moons","minor","inner"],radius:45,label:"Belinda",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:53873,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[45,45,45],shadowEntities:["uranus"]},dynamo:[{url:"belinda/uranus/orb"},{url:"belinda/ori"}]},bianca:{groups:["uranus","moons","minor","inner"],radius:25.7,label:"Bianca",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:37548,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[25.7,25.7,25.7],shadowEntities:["uranus"]},dynamo:[{url:"bianca/uranus/orb"},{url:"bianca/ori"}]},caliban:{groups:["uranus","moons","minor","irregular"],radius:36,label:"Caliban",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:50068800,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[36,36,36],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"caliban/uranus/orb"}]},cordelia:{groups:["uranus","moons","minor","inner"],radius:20.1,label:"Cordelia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:28947,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[20.1,20.1,20.1],shadowEntities:["uranus"]},dynamo:[{url:"cordelia/uranus/orb"},{url:"cordelia/ori"}]},cressida:{groups:["uranus","moons","minor","inner"],radius:39.8,label:"Cressida",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:40052,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[39.8,39.8,39.8],shadowEntities:["uranus"]},dynamo:[{url:"cressida/uranus/orb"},{url:"cressida/ori"}]},cupid:{groups:["uranus","moons","minor","inner"],radius:9,label:"Cupid",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:53395,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[9,9,9],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"cupid/uranus/orb"}]},desdemona:{groups:["uranus","moons","minor","inner"],radius:32,label:"Desdemona",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:40923,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[32,32,32],shadowEntities:["uranus"]},dynamo:[{url:"desdemona/uranus/orb"},{url:"desdemona/ori"}]},ferdinand:{groups:["uranus","moons","minor","irregular"],radius:10,label:"Ferdinand",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:243941760,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[10,10,10],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"ferdinand/uranus/orb"}]},francisco:{groups:["uranus","moons","minor","irregular"],radius:11,label:"Francisco",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:23030784,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[11,11,11],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"francisco/uranus/orb"}]},juliet:{groups:["uranus","moons","minor","inner"],radius:46.8,label:"Juliet",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:42601,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[46.8,46.8,46.8],shadowEntities:["uranus"]},dynamo:[{url:"juliet/uranus/orb"},{url:"juliet/ori"}]},mab:{groups:["uranus","moons","minor","inner"],radius:12.5,label:"Mab",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:79747,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[12.5,12.5,12.5],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"mab/uranus/orb"}]},margaret:{groups:["uranus","moons","minor","irregular"],radius:10,label:"Margaret",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:146430720,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[10,10,10],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"margaret/uranus/orb"}]},ophelia:{groups:["uranus","moons","minor","inner"],radius:22.4,label:"Ophelia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:32521,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[22.4,22.4,22.4],shadowEntities:["uranus"]},dynamo:[{url:"ophelia/uranus/orb"},{url:"ophelia/ori"}]},perdita:{groups:["uranus","moons","minor","inner"],radius:15,label:"Perdita",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:55123,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[15,15,15],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"perdita/uranus/orb"}]},portia:{groups:["uranus","moons","minor","inner"],radius:67.6,label:"Portia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:44340,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[67.6,67.6,67.6],shadowEntities:["uranus"]},dynamo:[{url:"portia/uranus/orb"},{url:"portia/ori"}]},prospero:{groups:["uranus","moons","minor","irregular"],radius:25,label:"Prospero",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:172177920,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[25,25,25],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"prospero/uranus/orb"}]},puck:{groups:["uranus","moons","minor","inner"],radius:81,label:"Puck",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:65822,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[81,81,81],shadowEntities:["uranus"]},dynamo:[{url:"puck/uranus/orb"},{url:"puck/ori"}]},rosalind:{groups:["uranus","moons","minor","inner"],radius:36,label:"Rosalind",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:48251,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[36,36,36],shadowEntities:["uranus"]},dynamo:[{url:"rosalind/uranus/orb"},{url:"rosalind/ori"}]},setebos:{groups:["uranus","moons","minor","irregular"],radius:24,label:"Setebos",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:190278720,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[24,24,24],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"setebos/uranus/orb"}]},stephano:{groups:["uranus","moons","minor","irregular"],radius:16,label:"Stephano",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:58449600,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[16,16,16],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"stephano/uranus/orb"}]},sycorax:{groups:["uranus","moons","minor","irregular"],radius:82,label:"Sycorax",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:110885760,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[82,82,82],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sycorax/uranus/orb"}]},trinculo:{groups:["uranus","moons","minor","irregular"],radius:9,label:"Trinculo",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:65499840,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[9,9,9],shadowEntities:["uranus"]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"trinculo/uranus/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(643),o=i(5);s.default.register({sc_3d_winds:{groups:["earth","spacecraft"],occlusionRadius:.002,extentsRadius:.0025,label:"3D-Winds",parents:[[347025366.1839032,"earth"]],trail:{length:5573},dynamo:[{url:"sc_3d_winds"}]},sc_ace:{groups:["earth","spacecraft"],occlusionRadius:8e-4,extentsRadius:.0023,label:"ACE",parents:[[265550465.18489534,"earth"],[694267269.1839212,""]],trail:{length:31715490},model:{url:"$STATIC_ASSETS_URL/models/sc_ace/ace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.0033},animdata:[{url:"sc_ace",type:"pos"}]},sc_acrimsat:{groups:["earth","spacecraft"],radius:.0015,label:"ACRIMSAT",parents:[[362596073.18419105,"earth"],[484210266.185391,""]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_acrimsat/acrimsat.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.00238},dynamo:[{url:"sc_acrimsat"}]},sc_aim:{groups:["earth","spacecraft"],occlusionRadius:7e-4,extentsRadius:.0014,label:"AIM",parents:[[344589947.18311954,"earth"]],trail:{length:5788.83},dynamo:[{url:"sc_aim"}]},sc_aqua:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.007,label:"Aqua",parents:[[344589947.18311954,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_aqua/Aqua.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_aqua",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_aqua"}]},sc_ascends:{groups:["earth","spacecraft"],radius:.004,label:"ASCENDS",parents:[[347025366.1839032,"earth"]],trail:{length:5573},dynamo:[{url:"sc_ascends"}]},sc_aura:{groups:["earth","spacecraft"],occlusionRadius:.00345,extentsRadius:.0085,label:"Aura",parents:[[344589947.18311954,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_aura/Aura.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_aura",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_aura"}]},sc_c_nofs:{groups:["earth","spacecraft"],radius:.004,label:"C/NOFS",parents:[[352800006.1854904,"earth"],[502051928.18300515,""]],trail:{length:5573},dynamo:[{url:"sc_c_nofs"}]},sc_calipso:{groups:["earth","spacecraft"],occlusionRadius:.00165,extentsRadius:.0043,label:"CALIPSO",parents:[[344589947.18311954,"earth"]],trail:{length:5933},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_calipso",axis:o.Vector3.YAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_calipso/calipso.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_calipso"}]},sc_chandra:{groups:["earth","spacecraft"],occlusionRadius:.0059,extentsRadius:.01,label:"Chandra",parents:[[339465600,"earth"],[709344e3,""]],trail:{length:228505.5},align:{primary:{type:"point",target:"sun",axis:new o.Vector3(-.70710678118,-.70710678118,0)}},model:{url:"$STATIC_ASSETS_URL/models/sc_chandra/chandra.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_chandra/earth/all",type:"pos"}]},sc_clarreo:{groups:["earth","spacecraft"],radius:.004,label:"CLARREO",parents:[[347025366.1839032,"earth"]],trail:{length:5573},dynamo:[{url:"sc_clarreo"}]},sc_cloudsat:{groups:["earth","spacecraft"],radius:.0025,label:"CloudSat",parents:[[344589947.18311954,"earth"]],trail:{length:5933.5},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cloudsat",axis:o.Vector3.XAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cloudsat/CloudSat.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cloudsat"}]},sc_cluster_ii_fm5:{groups:["earth","spacecraft"],occlusionRadius:.00145,extentsRadius:.00435,label:"Rumba",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:195541.5},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm5",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm5"}]},sc_cluster_ii_fm6:{groups:["earth","spacecraft"],occlusionRadius:.00145,extentsRadius:.00435,label:"Salsa",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:195351},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm6",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm6"}]},sc_cluster_ii_fm7:{groups:["earth","spacecraft"],occlusionRadius:.00145,extentsRadius:.00435,label:"Samba",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:195316},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm7",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm7"}]},sc_cluster_ii_fm8:{groups:["earth","spacecraft"],occlusionRadius:.00145,extentsRadius:.00435,label:"Tango",parents:[[405425863.18259597,"earth"],[661006268.1833516,""]],trail:{length:195388},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm8",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm8"}]},sc_cygnss_1:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 1",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_1",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_1"}]},sc_cygnss_2:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 2",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_2",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_2"}]},sc_cygnss_3:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 3",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_3",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_3"}]},sc_cygnss_4:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 4",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_4",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_4"}]},sc_cygnss_5:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 5",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_5",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_5"}]},sc_cygnss_6:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 6",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_6",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_6"}]},sc_cygnss_7:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 7",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_7",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_7"}]},sc_cygnss_8:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 8",parents:[[548415404.1851876,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_8",axis:o.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_8"}]},sc_dscovr:{groups:["earth","spacecraft"],occlusionRadius:9e-4,extentsRadius:.002,label:"DSCOVR",parents:[[476711467.18497694,"earth"]],trail:{length:31536e3},align:{primary:{type:"point",target:"earth",axis:o.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_dscovr",axis:o.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_dscovr/dscovr.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_dscovr/earth/all",type:"pos"}]},sc_eo_1:{groups:["earth","spacecraft"],occlusionRadius:.003,extentsRadius:.001,label:"EO-1",parents:[[344589947.18311954,"earth"],[544104069.186,""]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxis},secondary:{type:"velocity",target:"sc_eo_1",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_eo_1/eo-1.gltf",rotate:[{y:45}],shadowEntities:["earth","moon"]},dynamo:[{url:"sc_eo_1"}]},sc_explorer_1:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.001,label:"Explorer-1",parents:[[-1322726967.5151942,"earth"],[-939025102.1479388,""]],trail:{length:6885.5},model:{url:"$STATIC_ASSETS_URL/models/sc_explorer_1/Explorer_1.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"velocity",target:"sc_explorer_1",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxisNeg,periodInHours:22e-6},animdata:[{url:"sc_explorer_1",type:"pos"}]},sc_face:{groups:["earth","spacecraft"],radius:.004,label:"FACE",parents:[[347025366.1839032,"earth"],[631022168.1838934,""]],trail:{length:5933.33},dynamo:[{url:"sc_face"}]},sc_fgrst:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"FGRST",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:5733},dynamo:[{url:"sc_fgrst"}]},sc_gacm:{groups:["earth","spacecraft"],radius:.004,label:"GACM",parents:[[347025366.1839032,"earth"]],trail:{length:5733},dynamo:[{url:"sc_gacm"}]},sc_galex:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.0014,label:"GALEX",parents:[[352800006.1854904,"earth"],[425718607.184,""]],trail:{length:5733},dynamo:[{url:"sc_galex"}]},sc_geo_cape:{groups:["earth","spacecraft"],radius:.004,label:"GEO-CAPE",parents:[[347025366.1839032,"earth"]],trail:{length:5733},dynamo:[{url:"sc_geo_cape"}]},sc_geotail:{groups:["earth","spacecraft"],occlusionRadius:.0018,extentsRadius:.003,label:"Geotail",parents:[[291384066.1856425,"earth"],[612619269.1849155,""]],trail:{length:450372},animdata:[{url:"sc_geotail/earth/all",type:"pos"}]},sc_goes_12:{groups:["earth","spacecraft"],radius:.003,label:"GOES 12",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:5733},dynamo:[{url:"sc_goes_12"}]},sc_goes_13:{groups:["earth","spacecraft"],radius:.003,label:"GOES 13",parents:[[344589947.18311954,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_13"}]},sc_goes_14:{groups:["earth","spacecraft"],radius:.003,label:"GOES 14",parents:[[344589947.18311954,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_14"}]},sc_goes_15:{groups:["earth","spacecraft"],radius:.003,label:"GOES 15",parents:[[344589947.18311954,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_15"}]},sc_gpm:{groups:["earth","spacecraft"],occlusionRadius:.002,extentsRadius:.004,label:"GPM",parents:[[629484755.7856493,"earth"]],trail:{length:5549.5},model:{url:"$STATIC_ASSETS_URL/models/sc_gpm/GPM.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_gpm",axis:o.Vector3.ZAxis}},dynamo:[{url:"sc_gpm"}],postCreateFunction:t=>{const e=t.addController("spin");e.setJoint("GPM_antenna"),e.setRate(o.MathUtils.degToRad(192)),e.setAxis(o.Vector3.YAxisNeg,!0),e.setClampedToRealTime(!0)}},sc_grace_1:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-1",parents:[[69656411.096817,"earth"],[562382552.2587994,""]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace/grace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_2",axis:o.Vector3.YAxisNeg},secondary:{type:"point",target:"earth",axis:o.Vector3.ZAxis}},dynamo:[{url:"sc_grace_1/earth/orb"}],coverages:[{coverage:[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY],update:t=>{const e=t.getComponent("microwave"),i=t.getScene().getEngine(),s=o.MathUtils.wrap(e.getTextureYOffset()-o.MathUtils.clamp(i.getTimeRate(),-1,1)*i.getDeltaTime(),0,1);e.setTextureYOffset(s);const n=t.getScene().getEntity("sc_grace_2"),a=null!==n&&n.getPosition().distance(t.getPosition())<=3929;a!==e.isEnabled()&&e.setEnabled(a)}}],postCreateFunction:t=>{const e=t.addComponent("connectedSprite","microwave");e.setTextureUrl("$STATIC_ASSETS_URL/sprites/sine_wave.png"),e.setEntity1("sc_grace_1"),e.setEntity1Offset(new o.Vector3(0,-.00165,0)),e.setEntity2("sc_grace_2"),e.setEntity2Offset(new o.Vector3(0,-.00165,0)),e.setWidth(5e-4),e.setColorMultiplier(new o.Color(.5,1,1)),e.setTextureRepeat(!0),e.setTextureStretch(4)}},sc_grace_2:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-2",parents:[[69656411.096817,"earth"],[562382552.2588,""]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace/grace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_1",axis:o.Vector3.YAxisNeg},secondary:{type:"point",target:"earth",axis:o.Vector3.ZAxis}},dynamo:[{url:"sc_grace_2/earth/orb"}]},sc_grace_fo1:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-FO 1",parents:[[580290547.185,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_fo2",axis:o.Vector3.ZAxisNeg},secondary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg}},dynamo:[{url:"sc_grace_fo1"}],coverages:[{coverage:[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY],update:t=>{const e=t.getComponent("microwave"),i=t.getScene().getEngine(),s=o.MathUtils.wrap(e.getTextureYOffset()-o.MathUtils.clamp(i.getTimeRate(),-1,1)*i.getDeltaTime(),0,1);e.setTextureYOffset(s);const n=t.getScene().getEntity("sc_grace_fo2"),a=null!==n&&n.getPosition().distance(t.getPosition())<=3929;if(a!==e.isEnabled()){const i=t.getComponent("laser1"),s=t.getComponent("laser2");e.setEnabled(a),i.setEnabled(a),s.setEnabled(a)}}}],postCreateFunction:t=>{const e=t.addComponent("connectedSprite","microwave");e.setTextureUrl("$STATIC_ASSETS_URL/sprites/sine_wave.png"),e.setEntity1("sc_grace_fo1"),e.setEntity1Offset(new o.Vector3(0,0,-.00165)),e.setEntity2("sc_grace_fo2"),e.setEntity2Offset(new o.Vector3(0,0,-.00165)),e.setWidth(5e-4),e.setColorMultiplier(new o.Color(.5,1,1)),e.setTextureRepeat(!0),e.setTextureStretch(4);const i=t.addComponent("connectedSprite","laser1");i.setTextureUrl("$STATIC_ASSETS_URL/sprites/line.png"),i.setEntity1("sc_grace_fo1"),i.setEntity1Offset(new o.Vector3(3e-4,15e-5,-.00165)),i.setEntity2("sc_grace_fo2"),i.setEntity2Offset(new o.Vector3(-3e-4,15e-5,-.00165)),i.setWidth(2e-5),i.setColorMultiplier(new o.Color(1,.24,.64)),i.setTextureRepeat(!1);const s=t.addComponent("connectedSprite","laser2");s.setTextureUrl("$STATIC_ASSETS_URL/sprites/line.png"),s.setEntity1("sc_grace_fo1"),s.setEntity1Offset(new o.Vector3(-3e-4,15e-5,-.00165)),s.setEntity2("sc_grace_fo2"),s.setEntity2Offset(new o.Vector3(3e-4,15e-5,-.00165)),s.setWidth(2e-5),s.setColorMultiplier(new o.Color(1,.24,.64)),s.setTextureRepeat(!1)}},sc_grace_fo2:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-FO 2",parents:[[580290547.185,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_fo1",axis:o.Vector3.ZAxisNeg},secondary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg}},dynamo:[{url:"sc_grace_fo2"}]},sc_grifex:{groups:["earth","spacecraft"],occlusionRadius:15e-5,extentsRadius:25e-5,label:"GRIFEX",parents:[[476542806.1849232,"earth"]],trail:{length:5706.25},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_grifex",axis:o.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_grifex/grifex.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_grifex"}]},sc_hubble_space_telescope:{groups:["earth","spacecraft","telescope"],occlusionRadius:.0066,extentsRadius:.0066,label:"Hubble",parents:[[-305719099.92837775,"earth"]],trail:{length:5748.5},model:{url:"$STATIC_ASSETS_URL/models/sc_hubble/Hubble.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_hubble_space_telescope",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_hubble_space_telescope/earth/orb"}]},sc_hyspiri:{groups:["earth","spacecraft"],radius:.004,label:"HyspIRI",parents:[[347025366.1839032,"earth"]],trail:{length:5733},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_hyspiri",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_hyspiri/HyspIRI.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_hyspiri"}]},sc_ibex:{groups:["earth","spacecraft"],occlusionRadius:5e-4,extentsRadius:.001,label:"IBEX",parents:[[277718464.1823969,"earth"]],trail:{length:797489.16},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxis,periodInHours:.00416},model:{url:"$STATIC_ASSETS_URL/models/sc_ibex/iBEX.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_ibex",type:"pos"}]},sc_icesat_2:{groups:["earth","spacecraft"],occlusionRadius:.00198,extentsRadius:.004,label:"ICESat-2",parents:[[590288589.182,"earth"]],trail:{length:5653.2},model:{url:"$STATIC_ASSETS_URL/models/sc_icesatii/ICESat2.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxis},secondary:{type:"velocity",target:"sc_icesat_2",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_icesat_2"}]},sc_image:{groups:["earth","spacecraft"],occlusionRadius:.00113,extentsRadius:.006,label:"IMAGE",parents:[[7288547.186,"earth"],[188163587.1835355,""]],trail:{length:55541},model:{url:"$STATIC_ASSETS_URL/models/sc_image/image.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_image",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_image"}]},sc_integral:{groups:["earth","spacecraft"],occlusionRadius:.0025,extentsRadius:.005,label:"INTEGRAL",parents:[[367498866.18276465,"earth"]],trail:{length:229689},dynamo:[{url:"sc_integral"}]},sc_ipex:{groups:["earth","spacecraft"],occlusionRadius:1e-4,extentsRadius:15e-5,label:"IPEX",parents:[[439586087.183,"earth"]],trail:{length:5862},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_ipex",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_ipex/IPEX.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_ipex"}]},sc_isas:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.0015,label:"ISAS",parents:[[-186102945.06492478,"earth"],[-183424845.06434903,""]],trail:{length:92680.5},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_isas",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_isas/isas.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_isas",type:"pos"}]},sc_iss:{groups:["earth","spacecraft"],occlusionRadius:.008,extentsRadius:.055,label:"ISS",parents:[[344589947.18311954,"earth"]],trail:{length:5573},model:{url:"$STATIC_ASSETS_URL/models/sc_iss/ISS_stationary.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_iss",axis:o.Vector3.ZAxis}},dynamo:[{url:"sc_iss"}],postCreateFunction:t=>{const e=new o.Vector3(0,.5,.5*Math.sqrt(3)),i=new o.Vector3(0,.5*Math.sqrt(3),-.5),s=new o.Vector3(0,.5,.5*Math.sqrt(3));let a=t.addController("align");a.setJoint("20_P4_Truss"),a.setPrimaryAxis(o.Vector3.XAxis),a.setSecondaryAxis(e),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("23_S4_Truss"),a.setPrimaryAxis(o.Vector3.XAxis),a.setSecondaryAxis(e),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("20_P4_Truss_01"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("20_P4_Truss_02"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("23_S4_Truss_01"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("23_S4_Truss_02"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("32_S6_Truss_01"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("32_S6_Truss_02"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("08_P6_Truss_01"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun"),a=t.addController("align"),a.setJoint("08_P6_Truss_02"),a.setPrimaryAxis(i),a.setSecondaryAxis(s),a.setSecondaryAlignType("point"),a.setSecondaryTargetEntity("sun");const r=t.addController("spin");r.setJoint("RapidScat_dish"),r.setRate(o.MathUtils.degToRad(108)),r.setAxis(o.Vector3.ZAxis,!0),r.setClampedToRealTime(!0),r.setCoverage(new o.Interval(465418867.184,524890952.183)),n.EntityUtils.showSubObjectDuringInterval(t,"Ecostress",584127348,Number.POSITIVE_INFINITY),n.EntityUtils.showSubObjectDuringInterval(t,"EMIT",711345507,Number.POSITIVE_INFINITY),n.EntityUtils.showSubObjectDuringInterval(t,"OCO3",610718469,Number.POSITIVE_INFINITY),n.EntityUtils.showSubObjectDuringInterval(t,"45_RapidScat",465418867.184,575406069.184)}},sc_iss_ecostress:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"ECOSTRESS",parents:[[584127348,"sc_iss"]],fixed:{orientation:o.Quaternion.Identity,position:new o.Vector3(.0200195,-.00202631,.0161099),coverage:[584127348,Number.POSITIVE_INFINITY]},postCreateFunction:t=>{t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(584127348,Number.POSITIVE_INFINITY))}},sc_iss_emit:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"EMIT",parents:[[711345507,"sc_iss"]],fixed:{orientation:o.Quaternion.Identity,position:new o.Vector3(.024,-.00225,.00325),coverage:[711345507,Number.POSITIVE_INFINITY]},postCreateFunction:t=>{t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(711345507,Number.POSITIVE_INFINITY))}},sc_iss_oco_3:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"OCO-3",parents:[[610718469,"sc_iss"]],fixed:{orientation:o.Quaternion.Identity,position:new o.Vector3(.0156458,-.00195982,.0200232),coverage:[610718469,Number.POSITIVE_INFINITY]},postCreateFunction:t=>{t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(610718469,Number.POSITIVE_INFINITY))}},sc_iss_rapidscat:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"RapidScat",parents:[[465418867.184,"sc_iss"],[575406069.184,""]],fixed:{orientation:o.Quaternion.Identity,position:new o.Vector3(-.0100725,-.00133401,.0162145),coverage:[465418867.184,575406069.184]},postCreateFunction:t=>{t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(465418867.184,575406069.184))}},sc_ixpe:{groups:["earth","spacecraft","telescope"],occlusionRadius:.0055,extentsRadius:.0026,label:"IXPE",parents:[[692324766.6007013,"earth"]],trail:{length:5400},fixed:{orientation:o.Quaternion.Identity},model:{url:"$STATIC_ASSETS_URL/models/sc_ixpe/ixpe.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_ixpe"}]},sc_jason_1:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"Jason-1",parents:[[352800006.1854904,"earth"],[458074266.1839004,""]],trail:{length:6744.5},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_1",axis:o.Vector3.ZAxisNeg}},animdata:[{url:"sc_jason_1",type:"pos"}]},sc_jason_2:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"OSTM/Jason-2",parents:[[344589947.18311954,"earth"],[623851269.182,""]],trail:{length:6744.25},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_2",axis:o.Vector3.ZAxisNeg}},dynamo:[{url:"sc_jason_2"}]},sc_jason_3:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"Jason-3",parents:[[506497796.18443054,"earth"]],trail:{length:6721},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_3",axis:o.Vector3.ZAxisNeg}},dynamo:[{url:"sc_jason_3"}]},sc_jwst:{groups:["earth","spacecraft"],radius:.01,label:"James Webb Space Telescope",parents:[[693708549.184,"earth"]],trail:{length:5900033.33},model:{url:"$STATIC_ASSETS_URL/models/sc_jwst/webb_deployed.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxisNeg},secondary:{type:"align",target:"sun",axis:o.Vector3.ZAxis,targetAxis:o.Vector3.ZAxis}},coverages:[{coverage:[Number.NEGATIVE_INFINITY,694937889.184],enter:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_jwst/webb_stowed.gltf")},exit:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_jwst/webb_deployed.gltf")}}],dynamo:[{url:"sc_jwst/earth/orb"}]},sc_landsat_5:{groups:["earth","spacecraft"],radius:.004,label:"Landsat 5",parents:[[352800006.1854904,"earth"],[473889066.18410677,""]],trail:{length:5933.33},dynamo:[{url:"sc_landsat_5"}]},sc_landsat_7:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.005,label:"Landsat 7",parents:[[344589947.18311954,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxis},secondary:{type:"velocity",target:"sc_landsat_7",axis:o.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_7/LandSat7.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_7"}]},sc_landsat_8:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.005,label:"Landsat 8",parents:[[413877787.185,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxisNeg},secondary:{type:"velocity",target:"sc_landsat_8",axis:o.Vector3.YAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_8/LandSat8.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_8"}]},sc_landsat_9:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.005,label:"Landsat 9",parents:[[686043940.723348,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxis},secondary:{type:"velocity",target:"sc_landsat_9",axis:o.Vector3.XAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_9/Landsat9.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_9"}]},sc_list:{groups:["earth","spacecraft"],radius:.004,label:"LIST",parents:[[347025366.1839032,"earth"]],trail:{length:5933.33},dynamo:[{url:"sc_list"}]},sc_m_cubed:{groups:["earth","spacecraft"],radius:1e-4,label:"M-Cubed",parents:[[373032066.182,"earth"]],trail:{length:5768.333333333333},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_m_cubed",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_m_cubed/mCubed.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_m_cubed"}]},sc_mcubed_2:{groups:["earth","spacecraft"],occlusionRadius:1e-4,extentsRadius:2e-4,label:"MCubed-2",parents:[[439560067.183,"earth"]],trail:{length:5861},align:{primary:{type:"point",target:"earth",axis:o.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_mcubed_2",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_mcubed_2/M-Cubed2.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mcubed_2"}]},sc_mms_1:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 1",parents:[[479519767.1855569,"earth"]],trail:{length:85994},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_1"}]},sc_mms_2:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 2",parents:[[479519767.1855569,"earth"]],trail:{length:85962},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_2"}]},sc_mms_3:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 3",parents:[[479519767.1855569,"earth"]],trail:{length:86347},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_3"}]},sc_mms_4:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 4",parents:[[479519767.1855569,"earth"]],trail:{length:86024},spin:{axis:o.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_4"}]},sc_nisar:{groups:["earth","spacecraft"],occlusionRadius:.006,extentsRadius:.006,label:"NISAR",parents:[[347025366.1839032,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_nisar",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_nisar/Nisar.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_nisar"}]},sc_noaa_14:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 14",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:5933},dynamo:[{url:"sc_noaa_14"}]},sc_noaa_15:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 15",parents:[[344589947.18311954,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_15"}]},sc_noaa_16:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 16",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:5933},dynamo:[{url:"sc_noaa_16"}]},sc_noaa_17:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 17",parents:[[344589947.18311954,"earth"],[661006268.1833516,""]],trail:{length:5933},dynamo:[{url:"sc_noaa_17"}]},sc_noaa_18:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 18",parents:[[344589947.18311954,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_18"}]},sc_noaa_19:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 19",parents:[[344589947.18311954,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_19"}]},sc_nustar:{groups:["earth","spacecraft"],occlusionRadius:.006,extentsRadius:.006,label:"NuSTAR",parents:[[392875303.185,"earth"]],trail:{length:5798.66},model:{url:"$STATIC_ASSETS_URL/models/sc_nustar/nustar.gltf",shadowEntities:["earth"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.ZAxisNeg},secondary:{type:"align",axis:o.Vector3.XAxis,target:"sun",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_nustar"}]},sc_oco_2:{groups:["earth","spacecraft"],occlusionRadius:.0021,extentsRadius:.003,label:"OCO-2",parents:[[457567050.184,"earth"]],trail:{length:5933.333333333333},model:{url:"$STATIC_ASSETS_URL/models/sc_oco_2/oco2.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxisNeg},secondary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_oco_2"}]},sc_path:{groups:["earth","spacecraft"],radius:.004,label:"PATH",parents:[[347025366.1839032,"earth"]],trail:{length:5933},dynamo:[{url:"sc_path"}]},sc_polar:{groups:["earth","spacecraft"],occlusionRadius:.0012,extentsRadius:.005,label:"Polar",parents:[[-121608237.81469652,"earth"],[262612565.1855274,""]],trail:{length:66571},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_polar",axis:o.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_polar/polar.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_polar",type:"pos"}]},sc_quikscat:{groups:["earth","spacecraft"],occlusionRadius:.0016,extentsRadius:.0018,label:"QuikSCAT",parents:[[344589947.18311954,"earth"],[591710469.182,""]],trail:{length:6061.33},align:{primary:{type:"point",target:"earth",axis:o.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_quikscat",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_quikscat/QuikSCAT.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_quikscat"}]},sc_race:{groups:["earth","spacecraft"],radius:15e-5,label:"RACE",parents:[[467726467.182,"earth"],[467812867.182,""]],trail:{length:5933},dynamo:[{url:"sc_race"}]},sc_raincube:{groups:["earth","spacecraft"],occlusionRadius:35e-5,extentsRadius:5e-4,label:"RainCube",parents:[[608189026.1856545,"earth"],[662040069.184,""]],trail:{length:5743},model:{url:"$STATIC_ASSETS_URL/models/sc_raincube/Raincube.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_raincube",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_raincube"}]},sc_rax_2:{groups:["earth","spacecraft"],radius:2e-4,label:"RAX-2",parents:[[373067348.182,"earth"],[418824067.186,""]],trail:{length:5743},dynamo:[{url:"sc_rax_2"}]},sc_rbsp_a:{groups:["earth","spacecraft"],radius:.004,label:"Van Allen Probe A",parents:[[399585967.183,"earth"],[624628869.182,""]],trail:{length:32214},model:{url:"$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_rbsp_a",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_rbsp_a"}]},sc_rbsp_b:{groups:["earth","spacecraft"],radius:.004,label:"Van Allen Probe B",parents:[[399585967.183,"earth"],[616766469.184,""]],trail:{length:32574},model:{url:"$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_rbsp_b",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_rbsp_b"}]},sc_sac_d:{groups:["earth","spacecraft"],occlusionRadius:.003,extentsRadius:.0045,label:"Aquarius",parents:[[360987666.185,"earth"],[486907267.185,""]],trail:{length:5884.25},model:{url:"$STATIC_ASSETS_URL/models/sc_sac_d/aquarius.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.XAxis},secondary:{type:"velocity",target:"sc_sac_d",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_sac_d"}]},sc_sclp:{groups:["earth","spacecraft"],radius:.004,label:"SCLP",parents:[[347025366.1839032,"earth"]],trail:{length:5933},dynamo:[{url:"sc_sclp"}]},sc_sdo:{groups:["earth","spacecraft"],occlusionRadius:.0022,extentsRadius:.00315,label:"SDO",parents:[[505918808.18474686,"earth"]],trail:{length:86137.66},model:{url:"$STATIC_ASSETS_URL/models/sc_sdo/sdo.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sdo",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_sdo"}]},sc_sentinel_6:{groups:["earth","spacecraft"],occlusionRadius:.0026,extentsRadius:.0026,label:"Sentinel-6 Michael Freilich",parents:[[659322339.7879795,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_sentinel_6/Sentinel6.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sentinel_6",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_sentinel_6"}]},sc_smap:{groups:["earth","spacecraft"],occlusionRadius:.003,extentsRadius:.006,label:"SMAP",parents:[[476542806.1849232,"earth"]],trail:{length:5906.8},model:{url:"$STATIC_ASSETS_URL/models/sc_smap/SMAP.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_smap",axis:o.Vector3.XAxis}},dynamo:[{url:"sc_smap"}],postCreateFunction:t=>{const e=t.addController("spin");e.setJoint("arm_etc"),e.setRate(o.MathUtils.degToRad(87.6)),e.setAxis(o.Vector3.YAxis,!0),e.setClampedToRealTime(!0)}},sc_soho:{groups:["earth","spacecraft"],occlusionRadius:.00215,extentsRadius:.00425,label:"SOHO",parents:[[265550465.18489534,"earth"]],trail:{length:31536e3},model:{url:"$STATIC_ASSETS_URL/models/sc_soho/soho.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_soho",axis:o.Vector3.XAxis}},animdata:[{url:"sc_soho",type:"pos"}]},sc_sorce:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.0022,label:"SORCE",parents:[[344589947.18311954,"earth"],[635860869.185,""]],trail:{length:5812.5},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sorce",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_sorce/sorce.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_sorce"}]},sc_suomi_npp:{groups:["earth","spacecraft"],occlusionRadius:.0022,extentsRadius:.004,label:"Suomi NPP",parents:[[373067348.01,"earth"]],trail:{length:5798.66},model:{url:"$STATIC_ASSETS_URL/models/sc_npp/NPP.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_suomi_npp",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_suomi_npp"}]},sc_swift:{groups:["earth","spacecraft"],occlusionRadius:.0028,extentsRadius:.0028,label:"Swift",parents:[[344589947.18311954,"earth"]],trail:{length:5933},dynamo:[{url:"sc_swift"}]},sc_swot:{groups:["earth","spacecraft"],occlusionRadius:.005,extentsRadius:.006,label:"SWOT",parents:[[347025366.1839032,"earth"]],trail:{length:5933},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_swot",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_swot/SWOT.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_swot"}]},sc_tdrs_3:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 3",parents:[[344589947.18311954,"earth"]],trail:{length:86137.33},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_3"}]},sc_tdrs_5:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 5",parents:[[344589947.18311954,"earth"]],trail:{length:86137.66},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_5"}]},sc_tdrs_6:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 6",parents:[[344589947.18311954,"earth"]],trail:{length:86137.66},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_6"}]},sc_tdrs_7:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 7",parents:[[344589947.18311954,"earth"]],trail:{length:86151},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_7"}]},sc_tdrs_8:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 8",parents:[[344589947.18311954,"earth"]],trail:{length:86151.2},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_8"}]},sc_tdrs_9:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 9",parents:[[344589947.18311954,"earth"]],trail:{length:86151},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_9"}]},sc_tdrs_10:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 10",parents:[[344589947.18311954,"earth"]],trail:{length:86151.2},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_10"}]},sc_tdrs_11:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 11",parents:[[412868947.185,"earth"]],trail:{length:86151},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_11"}]},sc_tdrs_12:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 12",parents:[[443808067.185,"earth"]],trail:{length:86151},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_12"}]},sc_tdrs_13:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 13",parents:[[556338669.183,"earth"]],trail:{length:86151},model:{url:"$STATIC_ASSETS_URL/models/sc_tdrs/tdrs.gltf"},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis},secondary:{type:"align",axis:o.Vector3.ZAxis,target:"earth",targetAxis:o.Vector3.ZAxis}},dynamo:[{url:"sc_tdrs_13"}]},sc_terra:{groups:["earth","spacecraft"],occlusionRadius:.0034,extentsRadius:.006,label:"Terra",parents:[[344589947.18311954,"earth"]],trail:{length:5933.33},model:{url:"$STATIC_ASSETS_URL/models/sc_terra/Terra.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_terra",axis:o.Vector3.XAxisNeg}},dynamo:[{url:"sc_terra"}]},sc_tess:{groups:["earth","spacecraft","telescope"],occlusionRadius:.002,extentsRadius:.003,label:"TESS",parents:[[577366932.3626,"earth"]],trail:{length:591840},model:{url:"$STATIC_ASSETS_URL/models/sc_tess/TESS.gltf",shadowEntities:["earth","moon"]},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"sc_tess/earth/orb"}]},sc_themis_a:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS A",parents:[[344589947.18311954,"earth"]],trail:{length:98428},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_a"}]},sc_themis_d:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS D",parents:[[344589947.18311954,"earth"]],trail:{length:114807},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_d"}]},sc_themis_e:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS E",parents:[[344589947.18311954,"earth"]],trail:{length:105907.5},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},spin:{axis:o.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_e"}]},sc_timed:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.005,label:"TIMED",parents:[[344589947.18311954,"earth"]],trail:{length:5933},dynamo:[{url:"sc_timed"}]},sc_trmm:{groups:["earth","spacecraft"],occlusionRadius:.00255,extentsRadius:.0073,label:"TRMM",parents:[[-66052736.817,"earth"],[482328067.186,""]],trail:{length:5545.6},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_trmm",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_trmm/TRMM.gltf",shadowEntities:["earth","moon"]},tle:{tleName:"TRMM",url:"$DYNAMIC_ASSETS_URL/tle/local_tles.txt",coverage:[-66052736.817,482328067.186]}},sc_uars:{groups:["earth","spacecraft"],occlusionRadius:.00535,extentsRadius:.00535,label:"UARS",parents:[[352800006.1854904,"earth"],[370106644.184,""]],trail:{length:5490},animdata:[{url:"sc_uars",type:"pos"}]},sc_wind:{groups:["earth","spacecraft"],occlusionRadius:.0012,extentsRadius:.0075,label:"WIND",parents:[[330091266.1844764,"earth"],[650203266.1830707,""]],trail:{length:16485927},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_wind",axis:o.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_wind/wind.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_wind",type:"pos"}]},sc_wise:{groups:["earth","spacecraft"],occlusionRadius:.00142,extentsRadius:.00142,label:"WISE",parents:[[344589947.18311954,"earth"]],trail:{length:5715.4},dynamo:[{url:"sc_wise"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({sc_apollo_15:{groups:["moon","spacecraft"],radius:.004,label:"Apollo 15",parents:[[-897044358.3260887,"moon"],[-896822958.3195117,""]],trail:{length:6855},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_apollo_15",type:"pos"}]},sc_artemis_1:{groups:["moon","spacecraft"],radius:.005,label:"Artemis I",parents:[[721860361,"earth"],[724052473,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_artemis_1/artemis_cmsm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"velocity",target:"sc_artemis_1",axis:n.Vector3.YAxis},secondary:{type:"align",target:"moon",axis:n.Vector3.ZAxis,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_artemis_1/earth/pos"}]},sc_capstone:{groups:["moon","spacecraft"],radius:5e-4,label:"CAPSTONE",parents:[[710192447.9999855,"earth"],[721583059,"moon"]],trail:{length:void 0,lengthCoverages:[[4e6,Number.NEGATIVE_INFINITY,721583059],[1210909,721583059,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_capstone/capstone.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxisNeg},secondary:{type:"align",target:"moon",axis:n.Vector3.XAxis,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_capstone/earth/orb"},{url:"sc_capstone/moon/orb"}]},sc_clementine:{groups:["moon","spacecraft"],radius:.002,label:"Clementine",parents:[[-187185539.81536362,"moon"],[-178496939.81459716,""]],trail:{length:5408.5},model:{url:"$STATIC_ASSETS_URL/models/sc_clementine/clementine.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.YAxisNeg},secondary:{type:"point",target:"sun",axis:n.Vector3.ZAxisNeg}},animdata:[{url:"sc_clementine/moon/all",type:"pos"}]},sc_grail_a:{groups:["moon","spacecraft"],radius:.001,label:"Ebb",parents:[[368763e3,"moon"],[414201667.18513304,""]],trail:{length:41115.75},model:{url:"$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_grail_a",axis:n.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:n.Vector3.ZAxis}},animdata:[{url:"sc_grail_a/moon/all",type:"pos"}]},sc_grail_b:{groups:["moon","spacecraft"],radius:.001,label:"Flow",parents:[[368763e3,"moon"],[414201667.18513304,""]],trail:{length:41239.8},model:{url:"$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_grail_b",axis:n.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:n.Vector3.ZAxis}},animdata:[{url:"sc_grail_b/moon/all",type:"pos"}]},sc_ladee:{groups:["moon","spacecraft"],radius:.0012,label:"LADEE",parents:[[431798467.18253195,"moon"],[451355187.44558257,""]],trail:{length:7889.57},model:{url:"$STATIC_ASSETS_URL/models/sc_ladee/ladee.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_ladee",axis:n.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:n.Vector3.ZAxis}},animdata:[{url:"sc_ladee/moon/all",type:"pos"}]},sc_lcross:{groups:["moon","spacecraft"],occlusionRadius:.0013,extentsRadius:.0022,label:"LCROSS",parents:[[298635466.0304444,"moon"],[308360200.75,""]],trail:{length:3598022},model:{url:"$STATIC_ASSETS_URL/models/sc_lcross/lcross.gltf",rotate:[{z:-90}],shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_lcross",axis:n.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:n.Vector3.ZAxis}},animdata:[{url:"sc_lcross/moon/all",type:"pos",coverage:[Number.NEGATIVE_INFINITY,308360200.75]}]},sc_lcross_impact_site:{groups:["moon","sc_lcross","sites"],radius:.001,systemRadius:200,label:"LCROSS Impact Site",parents:[[298635466.0304444,"moon"]],fixed:{llaOnSpheroid:new n.LatLonAlt(-1.4782008103461848,-.8648271467797672,0),coverage:[298635466.0304444,Number.POSITIVE_INFINITY]}},sc_lunar_flashlight:{groups:["moon","spacecraft"],occlusionRadius:25e-5,extentsRadius:5e-4,label:"Lunar Flashlight",parents:[[723159083,"earth"],[732648342,"moon"]],trail:{length:void 0,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,732648342],[4e5,732648342,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_flashlight/lunar_flashlight.gltf",shadowEntities:["moon"]},align:{primary:{type:"align",target:"moon",axis:n.Vector3.ZAxisNeg,targetAxis:n.Vector3.ZAxis},secondary:{type:"point",target:"sun",axis:n.Vector3.YAxis}},dynamo:[{url:"sc_lunar_flashlight/earth/orb"},{url:"sc_lunar_flashlight/moon/orb"}]},sc_lunar_icecube:{groups:["moon","spacecraft"],occlusionRadius:2e-4,extentsRadius:.0012,label:"Lunar IceCube",parents:[[721864426,"earth"],[734111601,"moon"]],trail:{length:void 0,lengthCoverages:[[3e6,Number.NEGATIVE_INFINITY,734111601],[441920,734111601,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_icecube/lunar_icecube.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis},secondary:{type:"align",target:"sun",axis:n.Vector3.ZAxis,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_lunar_icecube/earth/pos"},{url:"sc_lunar_icecube/moon/orb"}]},sc_lunar_prospector:{groups:["moon","spacecraft"],occlusionRadius:653e-6,extentsRadius:.0022,label:"Lunar Prospector",parents:[[-62206800,"moon"],[-13402020,""]],trail:{length:7260},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_prospector/lunar_prospector.gltf",shadowEntities:["moon"]},align:{primary:{type:"align",target:"moon",axis:n.Vector3.YAxisNeg,targetAxis:n.Vector3.ZAxis}},spin:{axis:n.Vector3.YAxisNeg,periodInHours:.008333},animdata:[{url:"sc_lunar_prospector/moon/all",type:"pos"}]},sc_lunar_reconnaissance_orbiter:{groups:["moon","spacecraft"],occlusionRadius:.00272,extentsRadius:.0038,label:"Lunar Reconnaissance Orbiter",parents:[[298635426.1844444,"earth"],[298929666,"moon"]],trail:{length:7106.66,lengthCoverages:[[1e6,Number.NEGATIVE_INFINITY,299040641],[7106.66,299040641,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_reconnaissance_orbiter/LRO.gltf",rotate:[{z:-90}],shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_lunar_reconnaissance_orbiter",axis:n.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:n.Vector3.ZAxis}},dynamo:[{url:"sc_lunar_reconnaissance_orbiter/earth/orb"},{url:"sc_lunar_reconnaissance_orbiter/moon/orb"},{url:"sc_lunar_reconnaissance_orbiter/ori"}]},sc_smart_1:{groups:["moon","spacecraft"],occlusionRadius:.0015,extentsRadius:.00653,label:"SMART-1",parents:[[117977163.35299999,"moon"],[210585600,""]],trail:{length:273091},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_smart_1/moon/all",type:"pos"}]},sc_themis_b:{groups:["moon","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"ARTEMIS P1",parents:[[366638466.1829504,"moon"],[694267209.1839211,""]],trail:{length:94838},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis}},spin:{axis:n.Vector3.YAxis,periodInHours:8333e-7},animdata:[{url:"sc_themis_b/moon/all",type:"pos"}]},sc_themis_c:{groups:["moon","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"ARTEMIS P2",parents:[[366638466.1829504,"moon"],[694267209.1839211,""]],trail:{length:204186},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis}},spin:{axis:n.Vector3.YAxis,periodInHours:8333e-7},animdata:[{url:"sc_themis_c/moon/all",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({sc_mars_science_laboratory:{groups:["mars","spacecraft","landers"],occlusionRadius:.001515,extentsRadius:.004,label:"MSL",parents:[[375594732.3829685,"earth"],[376039259,"sun"],[397477501,"mars"],[397502026,"sc_mars_science_laboratory_landing_site"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,397477501],[6720,397477501,397502026],[0,397502026,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_science_laboratory/msl_cruisestage.gltf"},align:{primary:{type:"point",target:"sc_mars_science_laboratory_landing_site",axis:n.Vector3.YAxisNeg}},dynamo:[{url:"sc_mars_science_laboratory/earth/orb"},{url:"sc_mars_science_laboratory/sun/orb"},{url:"sc_mars_science_laboratory/mars/pos"},{url:"sc_mars_science_laboratory/surface/pos"}],spin:{axis:n.Vector3.YAxisNeg,periodInHours:.00833333333,coverage:[Number.NEGATIVE_INFINITY,397502026]},postCreateFunction:t=>{const e=t.addController("rotate","landingRotation",t.getControllerByType("align")),i=new n.Quaternion;i.setFromAxes(n.Vector3.YAxis,n.Vector3.XAxisNeg,void 0),e.setRotation(i),e.setRotatingOrientation(!1),e.setCoverage(new n.Interval(397502026,Number.POSITIVE_INFINITY));const s=t.addController("rotateByEntityOrientation","landingRotateByParent",t.getControllerByType("align"));s.setRotatingOrientation(!1),s.setCoverage(new n.Interval(397502026,Number.POSITIVE_INFINITY))}},sc_mars_science_laboratory_landing_site:{groups:["mars","sc_mars_science_laboratory","sites"],occlusionRadius:.001515,extentsRadius:.004,systemRadius:200,label:"MSL Landing Site",parents:[[375594732.3829685,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(-4.643851*Math.PI/180,137.4417*Math.PI/180,-4.926878),coverage:[375594732.3829685,Number.POSITIVE_INFINITY]}},sc_mars_exploration_rover_1:{groups:["mars","spacecraft","landers"],occlusionRadius:.0013,extentsRadius:.0026,label:"Opportunity",parents:[[110911022.184,"earth"],[111234172,"sun"],[128262836,"mars"],[128278419,"sc_mars_exploration_rover_1_landing_site"],[581920316.8566707,""]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,128262836],[6720,128262836,128278419],[0,128278523.336,581920316.856]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/cruise/mpf_mera_merb_cruise.gltf",rotate:[{x:90}]},align:{primary:{type:"velocity",target:"sc_mars_exploration_rover_1",axis:n.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:n.Vector3.YAxis,targetAxis:n.Vector3.ZAxis},coverage:[Number.NEGATIVE_INFINITY,128278523.336]},dynamo:[{url:"sc_mars_exploration_rover_1/earth/orb"},{url:"sc_mars_exploration_rover_1/sun/orb"},{url:"sc_mars_exploration_rover_1/mars/pos"},{url:"sc_mars_exploration_rover_1/edl/pos"},{url:"sc_mars_exploration_rover_1/surface/pos"}],coverages:[{coverage:[128278419,581920316.856],enter:t=>{const e=t.getComponentByType("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.getComponentByType("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}},{coverage:[128278523.336,581920316.856],enter:t=>{const e=t.getComponentByType("model");null!==e&&e.setUrl("$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/rover/mer_static.gltf")},exit:t=>{const e=t.getComponentByType("model");null!==e&&e.setUrl("$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/cruise/mpf_mera_merb_cruise.gltf")}},{coverage:[Number.NEGATIVE_INFINITY,128262836],enter:t=>{const e=t.getControllerByType("align");null!==e&&(e.setPrimaryAlignType("point"),e.setPrimaryAxis(n.Vector3.ZAxis),e.setPrimaryTargetEntity("sun"))},exit:t=>{const e=t.getControllerByType("align");null!==e&&(e.setPrimaryAlignType("velocity"),e.setPrimaryAxis(n.Vector3.ZAxisNeg),e.setPrimaryTargetEntity("sc_mars_exploration_rover_1"))}}],postCreateFunction:t=>{const e=t.addController("fixed");e.setOrientation(n.Quaternion.Identity),e.setCoverage(new n.Interval(128278523.336,581920316.856));const i=t.addController("rotate"),s=new n.Quaternion;s.setFromAxes(n.Vector3.YAxis,n.Vector3.XAxisNeg,void 0),i.setRotation(s),i.setRotatingOrientation(!1),i.setCoverage(new n.Interval(128278419,581920316.856));t.addController("rotateByEntityOrientation","landingRotateByEntity",t.getControllerByType("align")).setCoverage(new n.Interval(128278419,581920316.856))}},sc_mars_exploration_rover_1_landing_site:{groups:["mars","sc_mars_exploration_rover_1","sites"],radius:.001,systemRadius:200,label:"Opportunity Landing Site",parents:[[110911022.184,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(-.034003934569818886,-.09644392740547784,-2.018490164449304),coverage:[110911022.184,Number.POSITIVE_INFINITY]}},sc_mars_exploration_rover_2:{groups:["mars","spacecraft","landers"],occlusionRadius:.0013,extentsRadius:.0026,label:"Spirit",parents:[[108541883.184,"earth"],[108887371,"sun"],[126444477,"mars"],[126462105,"sc_mars_exploration_rover_2_landing_site"],[322567479.3896215,""]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,126444477],[6720,126444477,126462105],[0,126462396.1058,322567479.38962]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/cruise/mpf_mera_merb_cruise.gltf",rotate:[{x:90}]},align:{primary:{type:"velocity",target:"sc_mars_exploration_rover_2",axis:n.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:n.Vector3.YAxis,targetAxis:n.Vector3.ZAxis},coverage:[Number.NEGATIVE_INFINITY,126462105]},dynamo:[{url:"sc_mars_exploration_rover_2/earth/orb"},{url:"sc_mars_exploration_rover_2/sun/orb"},{url:"sc_mars_exploration_rover_2/mars/pos"},{url:"sc_mars_exploration_rover_2/edl/pos"},{url:"sc_mars_exploration_rover_2/surface/pos"}],coverages:[{coverage:[126462105,322567479.38962],enter:t=>{const e=t.getComponentByType("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.getComponentByType("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}},{coverage:[126462396.1058,322567479.38962],enter:t=>{const e=t.getComponentByType("model");null!==e&&e.setUrl("$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/rover/mer_static.gltf")},exit:t=>{const e=t.getComponentByType("model");null!==e&&e.setUrl("$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/cruise/mpf_mera_merb_cruise.gltf")}},{coverage:[Number.NEGATIVE_INFINITY,126444477],enter:t=>{const e=t.getControllerByType("align");null!==e&&(e.setPrimaryAlignType("point"),e.setPrimaryAxis(n.Vector3.ZAxis),e.setPrimaryTargetEntity("sun"))},exit:t=>{const e=t.getControllerByType("align");null!==e&&(e.setPrimaryAlignType("velocity"),e.setPrimaryAxis(n.Vector3.ZAxisNeg),e.setPrimaryTargetEntity("sc_mars_exploration_rover_2"))}}],postCreateFunction:t=>{const e=t.addController("fixed");e.setOrientation(n.Quaternion.Identity),e.setCoverage(new n.Interval(126462105,322567479.38962));const i=t.addController("rotate"),s=new n.Quaternion;s.setFromAxes(n.Vector3.YAxis,n.Vector3.XAxisNeg,void 0),i.setRotation(s),i.setRotatingOrientation(!1),i.setCoverage(new n.Interval(126462105,322567479.38962));t.addController("rotateByEntityOrientation","landingRotateByEntity",t.getControllerByType("align")).setCoverage(new n.Interval(126462105,322567479.38962))}},sc_mars_exploration_rover_2_landing_site:{groups:["mars","sc_mars_exploration_rover_2","sites"],radius:.001,systemRadius:200,label:"Spirit Landing Site",parents:[[108541883.184,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(-.25432749290990797,3.062677242395019,-2.614394925059969),coverage:[108541883.184,Number.POSITIVE_INFINITY]}},sc_insight:{groups:["mars","spacecraft","landers"],radius:.00306,label:"InSight",parents:[[578795968.9654216,"earth"],[579182469.185,"sun"],[596376069.183,"mars"]],trail:{length:32137022.16,lengthCoverages:[[32137022.16,Number.NEGATIVE_INFINITY,596376069.183],[14400,596376069.183,596529871.284],[3600,596529871.284,596533602],[0,596533602,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_insight/model.gltf",rotate:[{y:90}]},align:{primary:{type:"point",target:"mars",axis:n.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:n.Vector3.YAxis,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_insight/earth/pos"},{url:"sc_insight/sun/orb"},{url:"sc_insight/mars/orb"},{url:"sc_insight_edl/mars/pos"},{url:"sc_insight/ori"},{url:"sc_insight_edl/ori"}],coverages:[{coverage:[596529871.284,596533602],enter:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}}],postCreateFunction:t=>{const e=t.getControllerByType("align"),i=t.addController("fixed","fixedLanding",e);i.setPosition(new n.Vector3(-2432.935716315694,2349.9743692542434,267.1293812071009)),i.setCoverage(new n.Interval(596533602,Number.POSITIVE_INFINITY));const s=t.addController("rotateByEntityOrientation","fixedLandingRotation",e);s.setRotatingOrientation(!1),s.setCoverage(new n.Interval(596533602,Number.POSITIVE_INFINITY))}},sc_insight_landing_site:{groups:["mars","sc_insight","sites"],radius:.001,systemRadius:200,label:"InSight Landing Site",parents:[[578795968.9654216,"mars"],[596533602,""]],fixed:{llaOnSpheroid:new n.LatLonAlt(.07880952080218703,2.3735381213938798,-2.9965049849733987),coverage:[578795968.9654216,596533602]}},sc_marco_a:{groups:["mars","spacecraft"],radius:44375e-8,label:"MarCO A",parents:[[578796051,"earth"],[579182469.185,"sun"],[596376069.183,"mars"],[596552080,"sun"],[631152e3,""]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,579182469.185],[6720,579182469.185,596552080],[1e7,596552080,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_marco/model.gltf"},dynamo:[{url:"sc_marco_a/earth/orb"},{url:"sc_marco_a/sun/1/orb"},{url:"sc_marco_a/mars/orb"},{url:"sc_marco_a/sun/2/orb"}],align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis}}},sc_marco_b:{groups:["mars","spacecraft"],radius:44375e-8,label:"MarCO B",parents:[[578796051,"earth"],[579182469.185,"sun"],[596376069.183,"mars"],[596552080,"sun"],[631152e3,""]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,579182469.185],[6720,579182469.185,596552080],[1e7,596552080,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_marco/model.gltf"},dynamo:[{url:"sc_marco_b/earth/orb"},{url:"sc_marco_b/sun/1/orb"},{url:"sc_marco_b/mars/orb"},{url:"sc_marco_b/sun/2/orb"}],align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis}}},sc_mars_odyssey:{groups:["mars","spacecraft"],occlusionRadius:.0013,extentsRadius:.004,label:"Mars Odyssey",parents:[[39932700,"earth"],[40233664,"sun"],[57128464,"mars"]],trail:{length:6727,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,57128464],[6727,57128464,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_odyssey/mars_odyssey.gltf",environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:new n.Vector3(-.95630475596,.29237170472,0)},secondary:{type:"velocity",target:"sc_mars_odyssey",axis:new n.Vector3(.29237170472,.95630475596,0)}},dynamo:[{url:"sc_mars_odyssey/earth/orb"},{url:"sc_mars_odyssey/sun/orb"},{url:"sc_mars_odyssey/mars/orb"},{url:"sc_mars_odyssey/ori"}]},sc_mars_reconnaissance_orbiter:{groups:["mars","spacecraft"],radius:.0068,label:"Mars Reconnaissance Orbiter",parents:[[177122516,"earth"],[177429664,"sun"],[195285665,"mars"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,195285665],[6720,195285665,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_reconnaissance_orbiter/MRO.gltf",environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:n.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_mars_reconnaissance_orbiter",axis:n.Vector3.XAxis}},dynamo:[{url:"sc_mars_reconnaissance_orbiter/earth/orb"},{url:"sc_mars_reconnaissance_orbiter/sun/orb"},{url:"sc_mars_reconnaissance_orbiter/mars/orb"},{url:"sc_mars_reconnaissance_orbiter/ori"}]},sc_maven:{groups:["mars","spacecraft"],radius:.0057,label:"MAVEN",parents:[[438074509.3428109,"earth"],[438296467,"sun"],[464590867,"mars"]],trail:{length:16139},model:{url:"$STATIC_ASSETS_URL/models/sc_maven/Maven.gltf",rotate:[{x:90},{z:90}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxis}},dynamo:[{url:"sc_maven/earth/orb"},{url:"sc_maven/sun/orb"},{url:"sc_maven/mars/orb"},{url:"sc_maven/ori"}]},sc_mars_express:{groups:["mars","spacecraft"],radius:.006,label:"Mars Express",parents:[[107853140.59600002,"earth"],[108232264,"sun"],[125539264,"mars"]],trail:{length:25e3,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,126749131],[12720,126749131,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_express/mars_express.gltf",rotate:[{x:90},{z:-180}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:n.Vector3.XAxisNeg}},dynamo:[{url:"sc_mars_express/earth/orb"},{url:"sc_mars_express/sun/orb"},{url:"sc_mars_express/mars/orb"},{url:"sc_mars_express/ori"}]},sc_perseverance:{groups:["mars","spacecraft","landers"],occlusionRadius:.0015,extentsRadius:.003,label:"Mars 2020",parents:[[649385563.6433017,"earth"],[649595376,"sun"],[666932224,"mars"]],trail:{length:1e7},model:{url:"$STATIC_ASSETS_URL/models/sc_perseverance/cruise/MSLcruiseStage.gltf"},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis},coverage:[Number.NEGATIVE_INFINITY,666953078]},spin:{axis:n.Vector3.YAxis,periodInHours:-.00833333333,coverage:[Number.NEGATIVE_INFINITY,666932224]},dynamo:[{url:"sc_perseverance/earth/orb"},{url:"sc_perseverance/sun/orb"},{url:"sc_perseverance/mars/pos"}],coverages:[{coverage:[666952341,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("trail");null!==e&&(e.setStartTime(1e3),e.setRelativeToEntityOrientation(!0),e.resetPoints());const i=t.get("align");null!==i&&(i.setPrimaryAlignType("velocity"),i.setPrimaryAxis(n.Vector3.YAxisNeg),i.setPrimaryTargetEntity(t.getName())),t.get("spin").setEnabled(!1)},exit:t=>{const e=t.get("trail");null!==e&&(e.setStartTime(1e7),e.setRelativeToEntityOrientation(!1),e.resetPoints());const i=t.get("align");null!==i&&(i.setPrimaryAlignType("point"),i.setPrimaryAxis(n.Vector3.YAxis),i.setPrimaryTargetEntity("sun")),t.get("spin").setEnabled(!0)}}],postCreateFunction:t=>{const e=t.addController("fixed");e.setPosition(new n.Vector3(700.6720498758596,3140.3161023698767,1073.6913476720615)),e.setOrientation(n.Quaternion.Identity),e.setCoverage(new n.Interval(666953078,Number.POSITIVE_INFINITY));t.addController("rotateByEntityOrientation","landingRotateByEntity").setCoverage(new n.Interval(666953078,Number.POSITIVE_INFINITY))}},sc_perseverance_landing_site:{groups:["mars","sc_perseverance","sites"],radius:.001,systemRadius:200,label:"Perseverance Landing Site",parents:[[649385563.6433017,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(18.470270180371674*Math.PI/180,77.4326757785127*Math.PI/180,-2.2130185476344195),coverage:[649385563.6433017,Number.POSITIVE_INFINITY]}},sc_phoenix:{groups:["mars","spacecraft"],radius:.0027,label:"Phoenix",parents:[[239496427,"earth"],[239618121,"sun"],[265008306,"mars"],[265030318,"sc_phoenix_landing_site"],[278942465,""]],trail:{length:45411186,lengthCoverages:[[45411186,Number.NEGATIVE_INFINITY,265008306],[5e4,265008306,265030318],[500,265030318,265030769],[0,265030769,278942465]]},model:{url:"$STATIC_ASSETS_URL/models/sc_phoenix/cruise/phoenix_cruise.gltf",rotate:[{z:90}]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_phoenix/earth/orb"},{url:"sc_phoenix/sun/orb"},{url:"sc_phoenix/mars/orb"},{url:"sc_phoenix/phx_topo/pos"},{url:"sc_phoenix/ori"}],coverages:[{coverage:[265029904,Number.POSITIVE_INFINITY],enter:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_phoenix/edl/phoenix_edl.gltf")},exit:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_phoenix/cruise/phoenix_cruise.gltf")}}],postCreateFunction:t=>{const e=t.getControllerByType("align"),i=t.addController("fixed",void 0,e);i.setPosition(new n.Vector3(.027059368126568832,.013878235928918032,-.04367634407940447)),i.setCoverage(new n.Interval(265030769,278942465));const s=t.addController("rotateByEntityOrientation",void 0,e);s.setCoverage(new n.Interval(265030769,278942465)),s.setRotatingOrientation(!1),t.addParentChangedCallback(((t,e,i)=>{if(null!==i){const e=i.getName(),s=t.getComponentByType("trail");"sc_phoenix_landing_site"===e?(s.setRelativeToEntity("mars"),s.setRelativeToEntityOrientation(!0)):(s.setRelativeToEntity(""),s.setRelativeToEntityOrientation(!1))}}))}},sc_phoenix_landing_site:{groups:["mars","sc_phoenix","sites"],radius:.001,systemRadius:200,label:"Phoenix Landing Site",parents:[[239496427,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(1.1906355815662266,-2.1947740491302206,-2.5912352775421823),coverage:[239496427,Number.POSITIVE_INFINITY]}},sc_trace_gas_orbiter:{groups:["mars","spacecraft"],radius:.00875915,label:"Trace Gas Orbiter",parents:[[511257268,"earth"],[511941668,"sun"],[530107268,"mars"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,530160041],[6720,530160041,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_trace_gas_orbiter/TGO.gltf",rotate:[{x:-90},{y:-90}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:n.Vector3.YAxisNeg},secondary:{type:"point",target:"sun",axis:n.Vector3.XAxisNeg}},dynamo:[{url:"sc_trace_gas_orbiter/earth/orb"},{url:"sc_trace_gas_orbiter/sun/orb"},{url:"sc_trace_gas_orbiter/mars/orb"},{url:"sc_trace_gas_orbiter/ori"}],postCreateFunction:t=>{let e=t.addController("align");e.setJoint("right_array_1"),e.setPrimaryAxis(n.Vector3.XAxis),e.setSecondaryAxis(n.Vector3.YAxis),e.setSecondaryAlignType("point"),e.setSecondaryTargetEntity("sun"),e=t.addController("align"),e.setJoint("left_array_1"),e.setPrimaryAxis(n.Vector3.XAxis),e.setSecondaryAxis(n.Vector3.YAxis),e.setSecondaryAlignType("point"),e.setSecondaryTargetEntity("sun")}},sc_mars_orbiter_mission:{groups:["mars","spacecraft"],radius:.00275,label:"Mars Orbiter Mission",parents:[[623211069.1823474,"mars"]],trail:{length:234146},animdata:[{url:"sc_mars_orbiter_mission/mars",type:"pos"}]},sc_mars_global_surveyor:{groups:["mars","spacecraft"],occlusionRadius:.003,extentsRadius:.005,label:"Mars Global Surveyor",parents:[[-72699545,"mars"],[215697664.184,""]],trail:{length:7068.67},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_global_surveyor/mars_global_surveyor.gltf",shadowEntities:["mars"]},align:{primary:{type:"point",target:"mars",axis:n.Vector3.XAxisNeg}},animdata:[{url:"sc_mars_global_surveyor_mission",type:"pos"}]},sc_mars_climate_orbiter:{groups:["mars","spacecraft"],radius:.0011,label:"Mars Climate Orbiter",parents:[[-33318e3,"sun"],[-8650375.816,""]],trail:{length:73762215},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_mars_climate_orbiter",type:"pos"}]},sc_mars_pathfinder:{groups:["mars","spacecraft"],radius:33e-5,label:"Mars Pathfinder",parents:[[-91704541,"sun"],[-78692880,""]],trail:{length:51497488},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_mars_pathfinder",type:"pos"}]},sc_mars_pathfinder_landing_site:{groups:["mars","sc_mars_pathfinder","sites"],radius:.001,systemRadius:200,label:"Mars Pathfinder Landing Site",parents:[[-97045250.817,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(19.13*Math.PI/180,-33.22*Math.PI/180,0),coverage:[-97045250.817,Number.POSITIVE_INFINITY]}},sc_mars_polar_lander:{groups:["mars","spacecraft"],radius:.0018,label:"Mars Polar Lander",parents:[[-31298400,"sun"],[-2476735.816,""]],trail:{length:41109006},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_mars_polar_lander",type:"pos"}]},sc_viking_1_orbiter:{groups:["mars","spacecraft"],radius:.0047,label:"Viking 1 Orbiter",parents:[[-742490410,"mars"],[-663249600,""]],trail:{length:88649},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_viking_1_orbiter",type:"pos"}]},sc_viking_1_lander_landing_site:{groups:["mars","sc_viking_1_lander","sites"],radius:.001,systemRadius:200,label:"Viking 1 Lander Landing Site",parents:[[-768926233.817,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(22.27*Math.PI/180,312.05*Math.PI/180,0),coverage:[-768926233.817,Number.POSITIVE_INFINITY]}},sc_viking_2_orbiter:{groups:["mars","spacecraft"],radius:.0047,label:"Viking 2 Orbiter",parents:[[-738460186,"mars"],[-676517400,""]],trail:{length:98694},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_viking_2_orbiter",type:"pos"}]},sc_viking_2_lander_landing_site:{groups:["mars","sc_viking_2_lander","sites"],radius:.001,systemRadius:200,label:"Viking 2 Lander Landing Site",parents:[[-767208013.818,"mars"]],fixed:{llaOnSpheroid:new n.LatLonAlt(47.64*Math.PI/180,-225.71*Math.PI/180,0),coverage:[-767208013.818,Number.POSITIVE_INFINITY]}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({sc_messenger:{groups:["mercury","spacecraft"],occlusionRadius:.00133,extentsRadius:.0035,label:"MESSENGER",parents:[[144789279.39320505,"earth"],[145066469,"sun"],[175801890,"earth"],[176659095,"sun"],[214828942,"venus"],[215033751,"sun"],[234289415,"venus"],[234436749,"sun"],[253547108,"mercury"],[253671753,"sun"],[276485360,"mercury"],[276627276,"sun"],[307423681,"mercury"],[307651285,"sun"],[353474040,"mercury"],[483694028.351,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_messenger/Messenger.gltf",rotate:[{z:-90},{y:90}],shadowEntities:["mercury"]},align:{primary:{type:"point",target:"mercury",axis:n.Vector3.YAxis},secondary:{type:"velocity",target:"sc_messenger",axis:n.Vector3.ZAxis}},dynamo:[{url:"sc_messenger/earth/launch/orb"},{url:"sc_messenger/sun/1/orb"},{url:"sc_messenger/earth/flyby/orb"},{url:"sc_messenger/sun/2/orb"},{url:"sc_messenger/venus/flyby1/orb"},{url:"sc_messenger/sun/3/orb"},{url:"sc_messenger/venus/flyby2/orb"},{url:"sc_messenger/sun/4/orb"},{url:"sc_messenger/mercury/flyby1/orb"},{url:"sc_messenger/sun/5/orb"},{url:"sc_messenger/mercury/flyby2/orb"},{url:"sc_messenger/sun/6/orb"},{url:"sc_messenger/mercury/flyby3/orb"},{url:"sc_messenger/sun/7/orb"},{url:"sc_messenger/mercury/orb"},{url:"sc_messenger/ori"}]},sc_messenger_impact_site:{groups:["mercury","sc_messenger","sites"],radius:.001,label:"MESSENGER Impact Site",parents:[[Number.NEGATIVE_INFINITY,"mercury"]],fixed:{llaOnSpheroid:new n.LatLonAlt(.9501527254431932,-2.615904550043192,-.910251923861324),coverage:[483694028.351,Number.POSITIVE_INFINITY]}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5),o=i(636),a=i(637);s.default.register({sc_juno:{groups:["jupiter","spacecraft"],occlusionRadius:.001732,extentsRadius:.01,label:"Juno",parents:[[365836752.1832,"earth"],[366088266.183,"sun"],[434433667.182,"earth"],[434793667.182,"sun"],[519652868.184,"jupiter"],[676339597,"ganymede"],[676381521,"jupiter"],[717700360,"europa"],[717727733,"jupiter"],[757191924,"io"],[757203571,"jupiter"],[760247560,"io"],[760262808,"jupiter"]],trail:{length:void 0,lengthCoverages:[[63072e3,Number.NEGATIVE_INFINITY,519652868.184],[5184e3,519652868.184,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_juno/Juno.gltf",rotate:[{x:90}],shadowEntities:["jupiter","europa","ganymede","callisto","io"]},dynamo:[{url:"sc_juno/earth/launch/orb"},{url:"sc_juno/sun/preflyby/orb"},{url:"sc_juno/earth/flyby/orb"},{url:"sc_juno/sun/postflyby/orb"},{url:"sc_juno/jupiter/orb"},{url:"sc_juno/ganymede/orb"},{url:"sc_juno/europa/orb"},{url:"sc_juno/io/1/orb"},{url:"sc_juno/io/2/orb"},{url:"sc_juno/ori"}],coverages:[{coverage:[393471366,529749008],update:t=>{const e=t.getComponentByType("model").getThreeJsObjectByName("engine_cover");if(null!==e){const i=t.getScene().getEngine().getTime(),s=n.Sort.getIndex(i,r,((t,e)=>t[1]<e)),o=r[s][0],a=r[s][1],l=n.MathUtils.clamp01(((a-o)/2-Math.abs(i-(a+o)/2))/600);e.rotation.x=n.MathUtils.lerp(Math.PI,Math.PI/8,l)}},exit:t=>{const e=t.getComponentByType("model").getThreeJsObjectByName("engine_cover");null!==e&&(e.rotation.x=Math.PI)}},{coverage:[399637867.183,520959604.184],update:t=>{const e=t.getComponentByType("particleSpray"),i=t.getScene().getEngine().getTime(),s=n.Sort.getIndex(i,l,((t,e)=>t[1]<e)),o=l[s][0],a=l[s][1],r=o<=i&&i<a;e.setEnabled(r)},exit:t=>{t.getComponentByType("particleSpray").setEnabled(!1)}},{coverage:[519652868.184,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getComponentByType("trail");e&&e.setRelativeToEntity("jupiter")},exit:t=>{const e=t.getComponentByType("trail");e&&e.setRelativeToEntity("")}}],postCreateFunction:t=>{const e=t.getScene().getEngine();e.isControllerTypeRegistered("keyframePointing")||e.registerControllerType("keyframePointing",o.default),e.isControllerTypeRegistered("keyframeSpin")||e.registerControllerType("keyframeSpin",a.default);const i=t.addController("fixed",void 0,t.getControllerByType("dynamo"));i.setOrientation(n.Quaternion.Identity),i.setCoverage(new n.Interval(365836752.1832,Number.POSITIVE_INFINITY));const s=t.addController("keyframePointing");s.setKeyframes(c),s.setDirection(n.Vector3.ZAxis),s.setCoverage(new n.Interval(365836752.1832,521025625));const r=t.addController("keyframeSpin");r.setKeyframes(h),r.setAxis(n.Vector3.ZAxis),r.setCoverage(new n.Interval(365836752.1832,521025625)),r.setStartingAngle(-.96);const l=t.addComponent("particleSpray");l.setNumberOfParticles(100),l.setSizeOfParticles(3e-4),l.setSpeedOfParticles(.01),l.setColorOfParticles(new n.Color(1,.75,0,.25)),l.setSpread(-3),l.setParticleSpacingRandom(!1),l.setLength(.003),l.setOriginOffset(new n.Vector3(0,0,-.0017)),l.setDirection(n.Vector3.ZAxisNeg),l.setEnabled(!1)}},sc_cassini:{groups:["saturn","spacecraft"],occlusionRadius:.0034,extentsRadius:.0055,label:"Cassini",parents:[[-69820368.42763124,"earth"],[-69537536.818,"sun"],[-53179136.814,"venus"],[-53092736.814,"sun"],[-16495135.816,"venus"],[-16451935.816,"sun"],[-11951935.817,"earth"],[-11660335.817,"sun"],[139219264.185,"saturn"],[558743640,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_cassini/Cassini.gltf",rotate:[{x:-90},{z:180}],shadowEntities:["saturn","titan","enceladus","mimas","tethys"]},dynamo:[{url:"sc_cassini/earth/launch/orb"},{url:"sc_cassini/sun/1/orb"},{url:"sc_cassini/venus/flyby1/orb"},{url:"sc_cassini/sun/2/orb"},{url:"sc_cassini/venus/flyby2/orb"},{url:"sc_cassini/sun/3/orb"},{url:"sc_cassini/earth/flyby/orb"},{url:"sc_cassini/sun/4/orb"},{url:"sc_cassini/saturn/orb"},{url:"sc_cassini/ori"}],coverages:[{coverage:[157212064.184,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("huygens_probe",!0)},exit:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("huygens_probe",!1)}}]},sc_europa_clipper:{groups:["jupiter","europa","ganymede","callisto","spacecraft"],occlusionRadius:.003,extentsRadius:.011,label:"Europa Clipper",parents:[[781796651,"sun"],[849443647,"earth"],[849694384,"sun"],[954569001,"jupiter"],[1096736672,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_europa_clipper/europa_clipper.gltf",shadowEntities:["jupiter","earth","mars","europa"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxis}},dynamo:[{url:"sc_europa_clipper/sun/orb"},{url:"sc_europa_clipper/earth/flyby/orb"},{url:"sc_europa_clipper/jupiter/orb"}]},sc_galileo:{groups:["jupiter","spacecraft"],occlusionRadius:.003,extentsRadius:.0055,label:"Galileo",parents:[[-321964226.73959994,"earth"],[-321559829,"sun"],[-312199026,"venus"],[-311946958,"sun"],[-286252262,"earth"],[-285827020,"sun"],[-223105356,"earth"],[-222610262,"sun"],[-129268796,"jupiter"],[117442702,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_galileo/galileo.gltf",shadowEntities:["jupiter","earth","venus"],rotate:[{x:-90},{z:180}]},dynamo:[{url:"sc_galileo/earth/launch/orb"},{url:"sc_galileo/sun/orb"},{url:"sc_galileo/venus/flyby/orb"},{url:"sc_galileo/earth/flyby1/orb"},{url:"sc_galileo/earth/flyby2/orb"},{url:"sc_galileo/jupiter/orb"},{url:"sc_galileo/quat"}],postCreateFunction:t=>{const e=t.addController("align",void 0,t.getControllerByType("dynamo",6));e.setPrimaryAlignType("point"),e.setPrimaryTargetEntity("mercury"),e.setPrimaryAxis(n.Vector3.ZAxisNeg),e.setSecondaryAlignType("align"),e.setSecondaryAxis(n.Vector3.YAxis),e.setSecondaryTargetAxis(n.Vector3.ZAxis),e.setSecondaryTargetEntity("earth");const i=t.addController("spin");i.setJoint("spinning_section"),i.setRate(6*Math.PI/60),i.setAxis(n.Vector3.YAxisNeg,!0)}},sc_galileo_probe:{groups:["jupiter","spacecraft"],radius:72e-5,label:"Galileo Probe",parents:[[-321964226.73959994,"sc_galileo"],[-129268796,"jupiter"],[-128353980,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_galileo_probe/galileo_probe.gltf",rotate:[{x:-90}]},fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity,coverage:[-321964226.73959994,-141114537.48322043]},dynamo:[{url:"sc_galileo_probe/galileo/orb"},{url:"sc_galileo_probe/jupiter/orb"}],coverages:[{coverage:[Number.NEGATIVE_INFINITY,-141114537.48322043],enter:t=>{t.getComponentByType("div").setEnabled(!1),t.getComponentByType("trail").setEnabled(!1);t.getControllerByType("translate").setTranslation(new n.Vector3(0,0,.001))},exit:t=>{t.getComponentByType("div").setEnabled(!0),t.getComponentByType("trail").setEnabled(!0);t.getControllerByType("translate").setTranslation(new n.Vector3(-16e-6,24e-6,7e-4))}}],postCreateFunction:t=>{t.get("model").setTranslation(new n.Vector3(0,0,-.001));const e=t.addController("translate");e.setTranslation(new n.Vector3(-16e-6,24e-6,7e-4)),e.setRelativeToOrientation(!0),e.setCoverage(new n.Interval(-321964226.73959994,-128353980));t.addController("rotateByEntityOrientation").setCoverage(new n.Interval(-321964226.73959994,-141114537.48322043));const i=t.addController("fixed");i.setOrientation(new n.Quaternion(.40004226980201746,.3894033591393042,-.7928008139628516,.24453645053961984)),i.setCoverage(new n.Interval(-141114537.48322043,Number.POSITIVE_INFINITY))}},sc_huygens:{groups:["saturn","spacecraft","titan"],occlusionRadius:.0013,extentsRadius:.0013,label:"Huygens",parents:[[157212064.184,"saturn"],[158945582,"titan"],[158974766.184,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_huygens/Huygens.gltf",rotate:[{x:-90},{z:180}],shadowEntities:["saturn","titan","enceladus","mimas","tethys"]},fixed:{orientation:new n.Quaternion(.8295521744501194,.09912464029342342,-.04158756948048668,-.5479853735424731)},dynamo:[{url:"sc_huygens/saturn/orb"},{url:"sc_huygens/titan/orb"}],coverages:[{coverage:[158965616.707,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}}],postCreateFunction:t=>{t.get("model").setTranslation(new n.Vector3(.0013,0,-.0011));const e=t.addController("keyframe");e.addPositionKeyframe(158965616.707,new n.Vector3(-74.84608000701567,-3832.0774028380238,-305.9513410781612)),e.addPositionKeyframe(158965667.7750001,new n.Vector3(-168.19015737501377,-3541.733393771429,-291.12326824195395)),e.addPositionKeyframe(158965894.184,new n.Vector3(-376.8992769951708,-2686.9622048526126,-273.33138256355716));const i=t.addController("keyframe");i.addPositionKeyframe(158965894.184,new n.Vector3(-376.8992769951708,-2686.9622048526126,-273.33138256355716)),i.addPositionKeyframe(158974766.184,new n.Vector3(-251.2479743710496,-2548.813556954952,-266.5500089234507));const s=t.addController("translate");s.setTranslation(new n.Vector3(-.0013,0,.0011)),s.setRelativeToOrientation(!0),s.setCoverage(new n.Interval(157212064.184,158974766.184));const o=t.addController("spin");o.setAxis(new n.Vector3(-1,0,0),!0),o.setRate(.78539816339),o.setReferenceTime(157212064.184)}},sc_huygens_landing_site:{groups:["titan","sc_huygens","sites"],radius:.001,systemRadius:200,label:"Huygens Landing Site",parents:[[157212064.184,"titan"]],fixed:{llaOnSpheroid:new n.LatLonAlt(-.18453331247520502,2.9263055188728955,0),coverage:[157212064.184,Number.POSITIVE_INFINITY]}},sc_pioneer_10:{groups:["sun","jupiter","spacecraft"],occlusionRadius:.002118055,extentsRadius:.003,label:"Pioneer 10",parents:[[-878291717.8145751,"earth"],[-878146409,"sun"],[-824046472,"jupiter"],[-822011429,"sun"]],trail:{length:31536e4},model:{url:"$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.YAxis}},dynamo:[{url:"sc_pioneer_10/earth/orb"},{url:"sc_pioneer_10/sun/1/orb"},{url:"sc_pioneer_10/jupiter/orb"},{url:"sc_pioneer_10/sun/2/orb"}]},sc_pioneer_11:{groups:["sun","jupiter","saturn","spacecraft"],occlusionRadius:.002118055,extentsRadius:.003,label:"Pioneer 11",parents:[[-843816855.8143449,"earth"],[-843644357,"sun"],[-792658454,"jupiter"],[-790152245,"sun"],[-643302619,"saturn"],[-640194311,"sun"]],trail:{length:31536e4},model:{url:"$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.YAxis}},dynamo:[{url:"sc_pioneer_11/earth/orb"},{url:"sc_pioneer_11/sun/1/orb"},{url:"sc_pioneer_11/jupiter/orb"},{url:"sc_pioneer_11/sun/2/orb"},{url:"sc_pioneer_11/saturn/orb"},{url:"sc_pioneer_11/sun/3/orb"}]},sc_voyager_1:{groups:["jupiter","saturn","sun","spacecraft"],occlusionRadius:.00183,extentsRadius:.0043,label:"Voyager 1",parents:[[-704412035.617,"earth"],[-703530245,"sun"],[-660264745,"jupiter"],[-655057463,"sun"],[-606239665,"saturn"],[-600733702,"sun"]],trail:{length:94608e4,lengthCoverages:[[15768e4,Number.NEGATIVE_INFINITY,377123932.454],[94608e4,377123932.454,Number.POSITIVE_INFINITY],[5184e3,-660264745,-655057463],[5184e3,-606239665,-600733702]]},model:{url:"$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf",rotate:[{x:-90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_voyager_1/earth/orb"},{url:"sc_voyager_1/sun/1/orb"},{url:"sc_voyager_1/jupiter/orb"},{url:"sc_voyager_1/sun/2/orb"},{url:"sc_voyager_1/saturn/orb"},{url:"sc_voyager_1/sun/3/orb"},{url:"sc_voyager_1/ori"}]},sc_voyager_2:{groups:["jupiter","saturn","uranus","neptune","sun","spacecraft"],occlusionRadius:.00183,extentsRadius:.0043,label:"Voyager 2",parents:[[-705788847.817,"earth"],[-704774613,"sun"],[-650828783,"jupiter"],[-642276063,"sun"],[-582886481,"saturn"],[-574538624,"sun"],[-440395228,"uranus"],[-439259319,"sun"],[-327233138,"neptune"],[-326252606,"sun"]],trail:{length:94608e4,lengthCoverages:[[15768e4,Number.NEGATIVE_INFINITY,651751314.724],[94608e4,651751314.724,Number.POSITIVE_INFINITY],[5184e3,-650828783,-642276063],[5184e3,-582886481,-574538624],[5184e3,-440395228,-439259319],[5184e3,-327233138,-326252606]]},model:{url:"$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf",rotate:[{x:-90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_voyager_2/earth/orb"},{url:"sc_voyager_2/sun/1/orb"},{url:"sc_voyager_2/jupiter/orb"},{url:"sc_voyager_2/sun/2/orb"},{url:"sc_voyager_2/saturn/orb"},{url:"sc_voyager_2/sun/3/orb"},{url:"sc_voyager_2/uranus/orb"},{url:"sc_voyager_2/sun/4/orb"},{url:"sc_voyager_2/neptune/orb"},{url:"sc_voyager_2/sun/5/orb"},{url:"sc_voyager_2/ori"}]}});const r=[[393471366,393501486],[399019747,399883447],[400569547,400988887],[420541747,420794647],[454490527,454650187],[487136707,487309687],[519804068,521041748],[528958868,529749008]],l=[[399637867.183,399639659.183],[400933867.182,400935660.182],[420714067.185,420714072.185],[454572067.185,454572072.185],[487231267.185,487231272.185],[520957868.184,520959604.184]],c=[[365835906,"velocity"],[365836206,"sun"],[371908866,"sun"],[371909466,"earth"],[399631646,"earth"],[399632628,"sun"],[399635271,"sun"],[399636306,"-velocity"],[399640481,"-velocity"],[399641686,"sun"],[399700717,"sun"],[399641887,"earth"],[400927646,"earth"],[400928454,"sun"],[400931272,"sun"],[400932282,"-velocity"],[400936477,"-velocity"],[400937632,"sun"],[401003197,"sun"],[401009197,"earth"],[423014467,"earth"],[423014767,"sun"],[436924867,"sun"],[436925167,"earth"],[520954868,"earth"],[520955888,"-velocity"],[520960808,"-velocity"],[520962008,"sun"],[521018048,"sun"],[521025625,"earth"]],h=[[394545667,1*Math.PI/30],[394545967,2*Math.PI/30],[399636967,2*Math.PI/30],[399637264,5*Math.PI/30],[399637866,5*Math.PI/30],[399639659,5.5*Math.PI/30],[399639788,5.5*Math.PI/30],[399640072,2*Math.PI/30],[400932921,2*Math.PI/30],[400933214,5*Math.PI/30],[400933866,5*Math.PI/30],[400935660,5.5*Math.PI/30],[400935790,5.5*Math.PI/30],[400936068,2*Math.PI/30],[520956548,2*Math.PI/30],[520956848,5*Math.PI/30],[520960088,5*Math.PI/30],[520960388,2*Math.PI/30],[521025625,2*Math.PI/30]];e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(659),o=i(5);s.default.register({sc_dart:{groups:["small body spacecraft","asteroid spacecraft","65803_didymos","dimorphos","spacecraft"],occlusionRadius:.0012,extentsRadius:.00625,label:"DART",parents:[[691007069,"earth"],[691418893,"sun"],[717454117,"65803_didymos"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_dart/dart.gltf",shadowEntities:["earth"]},align:{primary:{type:"velocity",target:"sc_dart",axis:o.Vector3.ZAxisNeg},secondary:{type:"point",target:"sun",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_dart/earth/orb"},{url:"sc_dart/sun/orb"},{url:"sc_dart/65803_didymos/pos"}],coverages:[{coverage:[717454117,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getControllerByType("align");e.setPrimaryAlignType("point"),e.setPrimaryTargetEntity("dimorphos"),e.setPrimaryAxis(o.Vector3.ZAxisNeg)},exit:t=>{const e=t.getControllerByType("align");e.setPrimaryAlignType("velocity"),e.setPrimaryTargetEntity("sc_dart"),e.setPrimaryAxis(o.Vector3.ZAxisNeg)}}],postCreateFunction:t=>{const e=t.addController("keyframe",void 0,t.getControllerByType("align"));e.addPositionKeyframe(717503237,new o.Vector3(-10320.163052194115,13421.106828492655,5349.381737812169)),e.addPositionKeyframe(717506127.238318,new o.Vector3(-.9047084058613565,-.7147384471771195,-.30125475602973617))}},sc_dawn:{groups:["small body spacecraft","asteroid spacecraft","dwarf planet spacecraft","4_vesta","1_ceres","spacecraft"],occlusionRadius:885e-6,extentsRadius:.00985,label:"Dawn",parents:[[244168849.8323595,"earth"],[244461608,"sun"],[288169447,"mars"],[288210177,"sun"],[363182466,"4_vesta"],[400075267,"sun"],[476712067,"1_ceres"],[594302469.184,""]],trail:{length:659889.75},model:{url:"$STATIC_ASSETS_URL/models/sc_dawn/model.gltf",rotate:[{z:-90}]},fixed:{orientation:new o.Quaternion(.9999478154504517,.008904517167862874,.004868284692665544,-.0011729254143642916),coverage:[244168849.8323595,244171353.18400002]},dynamo:[{url:"sc_dawn/earth/orb"},{url:"sc_dawn/sun/1/orb"},{url:"sc_dawn/mars/orb"},{url:"sc_dawn/sun/2/orb"},{url:"sc_dawn/vesta/orb"},{url:"sc_dawn/sun/3/orb"},{url:"sc_dawn/ceres/orb"},{url:"sc_dawn/ori"}]},sc_deep_impact:{groups:["small body spacecraft","comet spacecraft","9p_tempel_1","103p_hartley_2","spacecraft"],occlusionRadius:.00165,extentsRadius:.003,label:"Deep Impact",parents:[[158829812.068274,"earth"],[159287744,"sun"],[173560752,"9p_tempel_1"],[173923158,"sun"],[251798121,"earth"],[253531474,"sun"],[282984399,"earth"],[285405903,"sun"],[330384030,"earth"],[331534813,"sun"],[342017751,"103p_hartley_2"],[342368983,"sun"],[429192067,""]],trail:{length:47421459,lengthCoverages:[[362406,173560752,173923158],[1733353,251798121,253531474],[2421504,282984399,285405903],[1150783,330384030,331534813],[351232,342017751,342368983]]},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_impact/deep_impact_wo_impactor.gltf",rotate:[{y:-90}]},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"sc_deep_impact/earth/launch/orb"},{url:"sc_deep_impact/sun/orb"},{url:"sc_deep_impact/9p_tempel_1/pos"},{url:"sc_deep_impact/earth/flyby1/orb"},{url:"sc_deep_impact/earth/flyby2/orb"},{url:"sc_deep_impact/earth/flyby3/orb"},{url:"sc_deep_impact/103p_hartley_2/pos"},{url:"sc_deep_impact/quat"}]},sc_deep_impact_impactor:{groups:["small body spacecraft","comet spacecraft","9p_tempel_1","sc_deep_impact","spacecraft"],occlusionRadius:.001,extentsRadius:.001,label:"Deep Impact Impactor",parents:[[158829812.068274,"sc_deep_impact"],[173642464.18400002,"9p_tempel_1"],[173727938.18158135,""]],trail:{length:27830},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_impact_impactor/deep_impact_impactor.gltf",rotate:[{y:-90}]},fixed:{position:new o.Vector3(-713e-6,-55e-6,0),orientation:o.Quaternion.Identity,relativeToEntity:"sc_deep_impact",coverage:[158829812.068274,173642464.18400002]},dynamo:[{url:"sc_deep_impact_impactor/quat",coverage:[173642464.18400002,Number.POSITIVE_INFINITY]}],postCreateFunction:t=>{const e=t.addController("keyframe");e.addPositionKeyframe(173642464.18400002,new o.Vector3(-713e-6,-55e-6,0),"sc_deep_impact",void 0,"sc_deep_impact"),e.addPositionKeyframe(173656621.40411958,new o.Vector3(-123095.24746842826,-48294.70341251187,61743.99881253781),"sc_deep_impact",173642464.18400002),e.addPositionKeyframe(173727938.18158135,new o.Vector3(1.580046751199936,3.178179950746365,-.628457454223176));const i=t.addController("fixed","",t.getControllerByType("dynamo"));i.setOrientation(new o.Quaternion(.9060465048532422,.3173702681972099,.2649483984949708,.09032269948692226)),i.setCoverage(new o.Interval(173642464.18400002,Number.POSITIVE_INFINITY))}},sc_deep_impact_impactor_impact_site:{groups:["small body sites","comet sites","9p_tempel_1","sc_deep_impact","sc_deep_impact_impactor","sites"],radius:.001,label:"Deep Impact Impactor Impact Site",parents:[[173727938.18158135,"9p_tempel_1"]],fixed:{position:new o.Vector3(3.1153282512332603,-1.2860729555237982,-1.277920399403075),orientation:o.Quaternion.Identity,relativeToEntity:"9p_tempel_1",coverage:[173727938.18158135,Number.POSITIVE_INFINITY]}},sc_deep_space_1:{groups:["small body spacecraft","asteroid spacecraft","9969_braille","spacecraft"],occlusionRadius:.00125,extentsRadius:.005,label:"Deep Space 1",parents:[[-37470248,"earth"],[-36628312,"sun"],[-13523799,"9969_braille"],[-13496699,"sun"],[54458637,"19p_borrelly"],[54476825,"sun"],[61977664.184,""]],trail:{length:40845609,lengthCoverages:[[27100,-13523799,-13496699],[18188,54458637,54476825]]},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_space_1/deep_space_1.gltf",rotate:[{x:90},{z:90}]},dynamo:[{url:"sc_deep_space_1/earth/orb"},{url:"sc_deep_space_1/sun/orb"},{url:"sc_deep_space_1/9969_braille/pos"},{url:"sc_deep_space_1/19p_borrelly/pos"},{url:"sc_deep_space_1/quat"}],postCreateFunction:t=>{const e=t.addController("align","",t.getControllerByType("dynamo",4));e.setPrimaryAlignType("point"),e.setPrimaryAxis(o.Vector3.XAxis),e.setPrimaryTargetEntity("earth"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(o.Vector3.ZAxisNeg),e.setSecondaryTargetEntity("sun")}},sc_near_shoemaker:{groups:["small body spacecraft","asteroid spacecraft","253_mathilde","433_eros","spacecraft"],occlusionRadius:.002,extentsRadius:.0034,label:"NEAR",parents:[[-122129937,"sun"],[-61397606,"earth"],[-60793811,"sun"],[-79403925,"253_mathilde"],[-79210250,"sun"],[-8425610,"433_eros"],[36675809.3654,""]],trail:{length:63919069,lengthCoverages:[[4e5,-8425610,35279032.137],[0,35279032.137,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_near_shoemaker/near.gltf",rotate:[{x:90},{z:135}]},fixed:{orientation:new o.Quaternion(.5052018803124495,-.11842169431143575,.7652511949887616,-.3809697770341459),coverage:[-122129937,-121953528.049046]},dynamo:[{url:"sc_near_shoemaker/sun/orb"},{url:"sc_near_shoemaker/earth/flyby/orb"},{url:"sc_near_shoemaker/253_mathilde/pos"},{url:"sc_near_shoemaker/433_eros/orb"},{url:"sc_near_shoemaker/quat"}],postCreateFunction:t=>{const e=t.addController("orbitalElements"),i=new o.OrbitalElements;i.eccentricity=.3722732412046076,i.epoch=-122129937,i.semiMajorAxis=235420679.8644008,i.orbitOrientation.set(.25408339907533106,.05463135384055627,-.18986948069810847,.9467875272685549),i.meanAngularMotion=1.0085301888805118e-7,i.meanAnomalyAtEpoch=-.005941352116228519,e.addOrbitalElements(-122129937,i),e.addOrbitalElements(-113227200,i),e.setCoverage(new o.Interval(-122129937,-113227200));const s=t.addController("fixed");s.setPosition(new o.Vector3(.930389249841349,4.935129554115763,-4.002004469114965)),s.setOrientation(new o.Quaternion(.11222410400554989,.7066112547219852,-.6897721372150081,.11099857612696495)),s.setCoverage(new o.Interval(35279032.137,36675809.3654));t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(35279032.137,36675809.3654))}},sc_near_shoemaker_landing_site:{groups:["433_eros","sc_near_shoemaker","sites"],radius:.001,systemRadius:200,label:"NEAR Shoemaker Landing Site",parents:[[36675809.3654,"433_eros"]],fixed:{position:new o.Vector3(.930389249841349,4.935129554115763,-4.002004469114965),orientation:new o.Quaternion(.11222410400554989,.7066112547219852,-.6897721372150081,.11099857612696495),relativeToEntity:"433_eros",coverage:[36675809.3654,Number.POSITIVE_INFINITY]}},sc_lucy:{groups:["small body spacecraft","asteroid spacecraft","52246_donaldjohanson","3548_eurybates","15094_polymele","11351_leucus","21900_orus","617_patroclus","menoetius","spacecraft"],occlusionRadius:.002,extentsRadius:.007125,label:"Lucy",parents:[[687656642.763,"earth"],[687915086,"sun"],[718960993,"earth"],[719531941,"sun"],[787134972,"earth"],[787532222,"sun"],[798252820,"52246_donaldjohanson"],[798584539,"sun"],[870652086,"3548_eurybates"],[872642047,"sun"],[872642047,"15094_polymele"],[875308504,"sun"],[891166024,"11351_leucus"],[894761809,"sun"],[909384911,"21900_orus"],[912190135,"sun"],[977590306,"earth"],[978108682,"sun"],[1046169596,"617_patroclus_barycenter"],[1047892376,"sun"]],trail:{length:63919069,lengthCoverages:[[570948,718960993,719531941],[397250,787134972,787532222],[331719,798252820,798584539],[1989961,870652086,872642047],[2666457,872642047,875308504],[3595785,891166024,894761809],[2805224,909384911,912190135],[518376,977590306,978108682],[1722780,1046169596,1047892376]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lucy/lucy.gltf",rotate:[{x:90},{z:90}]},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"sc_lucy/earth/launch/orb"},{url:"sc_lucy/sun/orb"},{url:"sc_lucy/earth/flyby1/orb"},{url:"sc_lucy/earth/flyby2/orb"},{url:"sc_lucy/52246_donaldjohanson/pos"},{url:"sc_lucy/3548_eurybates/pos"},{url:"sc_lucy/15094_polymele/pos"},{url:"sc_lucy/11351_leucus/pos"},{url:"sc_lucy/21900_orus/pos"},{url:"sc_lucy/earth/flyby3/orb"},{url:"sc_lucy/617_patroclus/pos"},{url:"sc_lucy/quat"}],postCreateFunction:t=>{const e=t.addController("align",void 0,t.getControllerByType("dynamo",11));e.setPrimaryAlignType("point"),e.setPrimaryAxis(o.Vector3.XAxis),e.setPrimaryTargetEntity("earth"),e.setSecondaryAlignType("align"),e.setSecondaryAxis(o.Vector3.YAxis),e.setSecondaryTargetAxis(o.Vector3.ZAxis),e.setSecondaryTargetEntity("sun")}},sc_new_horizons:{groups:["small body spacecraft","dwarf planet spacecraft","TNO spacecraft","134340_pluto","486958_arrokoth","spacecraft"],occlusionRadius:.00135,extentsRadius:.0026,label:"New Horizons",parents:[[190972278.33046317,"earth"],[191055829,"sun"],[225619606,"jupiter"],[226100665,"sun"],[490130161,"134340_pluto"],[490167848,"sun"],[598753684,"486958_arrokoth"],[600203601,"sun"]],trail:{length:94608e3},model:{url:"$STATIC_ASSETS_URL/models/sc_new_horizons/new_horizons.gltf",rotate:[{y:90}]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.YAxis}},dynamo:[{url:"sc_new_horizons/earth/orb"},{url:"sc_new_horizons/sun/1/orb"},{url:"sc_new_horizons/jupiter/orb"},{url:"sc_new_horizons/sun/2/orb"},{url:"sc_new_horizons/pluto/orb"},{url:"sc_new_horizons/sun/3/pos"},{url:"sc_new_horizons/mu69/pos"},{url:"sc_new_horizons/sun/4/pos"},{url:"sc_new_horizons/ori/1"},{url:"sc_new_horizons/ori/2"}]},sc_rosetta:{groups:["small body spacecraft","comet spacecraft","67p_churyumov_gerasimenko","spacecraft"],occlusionRadius:.0014,extentsRadius:.016,label:"Rosetta",parents:[[131491581.583,"earth"],[131901500,"sun"],[162704887,"earth"],[163831232,"sun"],[225623375,"mars"],[225657862,"sun"],[248111015,"earth"],[248475560,"sun"],[311055929,"earth"],[311664877,"sun"],[452394238,"67p_churyumov_gerasimenko"],[528503957.968,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_rosetta/rosettaPhilae.gltf",rotate:[{x:180},{z:90}]},fixed:{orientation:o.Quaternion.Identity},dynamo:[{url:"sc_rosetta/earth/launch/orb"},{url:"sc_rosetta/sun/1/orb"},{url:"sc_rosetta/earth/flyby1/orb"},{url:"sc_rosetta/sun/2/orb"},{url:"sc_rosetta/mars/flyby/orb"},{url:"sc_rosetta/sun/3/orb"},{url:"sc_rosetta/earth/flyby2/orb"},{url:"sc_rosetta/sun/4/orb"},{url:"sc_rosetta/earth/flyby3/orb"},{url:"sc_rosetta/sun/5/orb"},{url:"sc_rosetta/67p_churyumov_gerasimenko/pos"},{url:"sc_rosetta/ori"}],coverages:[{coverage:[469053367.183,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("Philae",!0)},exit:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("Philae",!1)}}],postCreateFunction:t=>{const e=t.addController("align");e.setJoint("panels_01"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(o.Vector3.ZAxis),e.setSecondaryTargetEntity("sun");const i=t.addController("align");i.setJoint("panels_02"),i.setSecondaryAlignType("point"),i.setSecondaryAxis(o.Vector3.ZAxis),i.setSecondaryTargetEntity("sun")}},sc_rosetta_impact_site:{groups:["small body sites","comet sites","67p_churyumov_gerasimenko","sc_rosetta","sites"],radius:.001,label:"Rosetta Impact Site",parents:[[528503957.968,"67p_churyumov_gerasimenko"]],fixed:{position:new o.Vector3(1.7309310500292525,.3509303067271947,1.1641920075039298),orientation:o.Quaternion.Identity,relativeToEntity:"67p_churyumov_gerasimenko",coverage:[528503957.968,Number.POSITIVE_INFINITY]}},sc_osiris_rex:{groups:["small body spacecraft","asteroid spacecraft","101955_bennu","spacecraft"],occlusionRadius:.0016,extentsRadius:.005,label:"OSIRIS-REx",parents:[[526676400,"earth"],[527025408,"sun"],[558938468,"earth"],[559919190,"sun"],[591770603,"101955_bennu"],[674049669,"sun"],[748358886,"earth"]],trail:{length:102742.5,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,599748661],[672e3,599748661,668095733],[1e7,668095733,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_osiris_rex/osiris_rex.gltf",rotate:[{x:90}],shadowEntities:["bennu"]},align:{primary:{type:"point",target:"sun",axis:o.Vector3.ZAxisNeg}},dynamo:[{url:"sc_osiris_rex/earth/launch/orb"},{url:"sc_osiris_rex/sun/1/orb"},{url:"sc_osiris_rex/earth/flyby/orb"},{url:"sc_osiris_rex/sun/2/orb"},{url:"sc_osiris_rex/bennu/pos"},{url:"sc_osiris_rex/sun/3/orb"},{url:"sc_osiris_rex/earth/landing/orb"},{url:"sc_osiris_rex/ori"}],postCreateFunction:t=>{const e=t.getComponentByType("model");e.setResourcesLoadedCallback((()=>{e.getThreeJsObjectByName("Tagsam_rod_bottom").rotation.x=0,e.getThreeJsObjectByName("Tagsam_rod_bottom").rotation.z=0,e.getThreeJsObjectByName("Tagsam_rod_top").rotation.x=0,e.getThreeJsObjectByName("Tagsam_rod_top").rotation.z=0,e.getThreeJsObjectByName("tagsam_head").rotation.x=0,e.getThreeJsObjectByName("tagsam_head").rotation.z=0})),n.default.makeSubobjectVisibleAnimation(e,"Tagsam_housing_cover",!0,[[593036911,!1]]),n.default.makeJointRotationAnimation(e,"Tagsam_rod_bottom","y",[[595442726,2.51758508612],[595442906,0],[595443086,0],[595443266,2.51758508612],[656489486,2.51758508612],[656489846,0],[656502896,0],[656503076,2.51758508612],[657366686,2.51758508612],[657367046,-.22013488789],[657367406,2.51758508612]]),n.default.makeJointRotationAnimation(e,"Tagsam_rod_top","y",[[593728111,-2.73247002363],[593728113,-2.58247002363],[595442726,-2.58247002363],[595442906,0],[595443086,0],[595443266,-2.58247002363],[656489486,-2.58247002363],[656489846,0],[656502896,0],[656503076,-2.58247002363],[657366686,-2.58247002363],[657366866,-1.57110175941],[657367046,-2.22286878863],[657367226,-1.57110175941],[657367406,-2.58247002363]]),n.default.makeJointRotationAnimation(e,"tagsam_head","y",[[595442906,-1.37257230233],[595442996,0],[595443086,-1.37257230233],[656489486,-1.37257230233],[656489576,0],[656502806,0],[656502896,-1.37257230233],[657366686,-1.37257230233],[657367046,-.55616487411]]),n.default.makeSubobjectVisibleAnimation(e,"tagsam_head",!0,[[657367046,!1]])}},sc_philae:{groups:["small body spacecraft","comet spacecraft","67p_churyumov_gerasimenko","spacecraft","landers"],occlusionRadius:6e-4,extentsRadius:.001,label:"Philae",parents:[[469053367.183,"67p_churyumov_gerasimenko"],[469078512.324,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_philae/philae.gltf",rotate:[{x:180},{z:90}]},fixed:{orientation:new o.Quaternion(.05763938670269045,.04093459828351704,.6750586755218195,.7343690110337115)},dynamo:[{url:"sc_philae/67p_churyumov_gerasimenko/pos"}],postCreateFunction:t=>{const e=new o.Vector3(.0021658104318583687,.0011575046500869896,.00011875498849156656),i=new o.Vector3(.00147,0,0),s=t.addController("translate");s.setTranslation(e),s.setCoverage(new o.Interval(469053367.183,469078512.324));t.get("model").setTranslation(i)}},sc_philae_landing_site:{groups:["small body sites","comet sites","67p_churyumov_gerasimenko","sc_philae","sites"],radius:.001,systemRadius:200,label:"Philae Landing Site",parents:[[469078512.324,"67p_churyumov_gerasimenko"]],fixed:{position:new o.Vector3(2.4452763955965984,-.12110982508097201,-.36032099522959377),orientation:o.Quaternion.Identity,relativeToEntity:"67p_churyumov_gerasimenko",coverage:[469078512.324,Number.POSITIVE_INFINITY]}},sc_psyche:{groups:["small body spacecraft","asteroid spacecraft","16_psyche","spacecraft"],occlusionRadius:.0031,extentsRadius:.025,label:"Psyche",parents:[[712659243.191877,"earth"],[713424696,"sun"],[736836669,"mars"],[737177380,"sun"],[820013200,"16_psyche"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_psyche/psyche.gltf",rotate:[{y:-90},{x:90}]},align:{primary:{type:"point",target:"earth",axis:o.Vector3.XAxisNeg}},dynamo:[{url:"sc_psyche/earth/orb"},{url:"sc_psyche/sun/orb"},{url:"sc_psyche/mars/orb"},{url:"sc_psyche/16_psyche/orb"}],postCreateFunction:t=>{const e=t.addController("align");e.setJoint("ArrayGimbleLeft"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(o.Vector3.YAxis),e.setSecondaryTargetEntity("sun");const i=t.addController("align");i.setJoint("ArrayGimbleRight"),i.setSecondaryAlignType("point"),i.setSecondaryAxis(o.Vector3.YAxis),i.setSecondaryTargetEntity("sun")}},sc_stardust:{groups:["small body spacecraft","comet spacecraft","81p_wild_2","9p_tempel_1","spacecraft"],occlusionRadius:65e-5,extentsRadius:.003,label:"Stardust",parents:[[-28304869.3,"earth"],[-28038699,"sun"],[32627842,"earth"],[33120541,"sun"],[89379733,"5535_annefrank"],[89550209,"sun"],[126009572,"81p_wild_2"],[126678668,"sun"],[190336290,"earth"],[190866114,"sun"],[284944970,"earth"],[285742028,"sun"],[350896766,"9p_tempel_1"],[351068113,"sun"],[354279666,""]],trail:{length:62659492},model:{url:"$STATIC_ASSETS_URL/models/sc_stardust/stardust_articulated.gltf",shadowEntities:["earth"],rotate:[{x:90},{z:90}]},fixed:{orientation:new o.Quaternion(.382740492391079,-.1080542417135509,-.5511677923678098,-.7335175941913997),coverage:[351017063,354279666]},dynamo:[{url:"sc_stardust/earth/launch/orb"},{url:"sc_stardust/sun/orb"},{url:"sc_stardust/earth/flyby1/orb"},{url:"sc_stardust/5535_annefrank/pos"},{url:"sc_stardust/81p_wild_2/pos"},{url:"sc_stardust/earth/flyby2/orb"},{url:"sc_stardust/earth/flyby3/orb"},{url:"sc_stardust/9p_tempel_1/pos"},{url:"sc_stardust/quat"}],coverages:[{coverage:[190576690.7833838,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getComponentByType("model");for(const t of["Stardust_capsule","Stardust_tex_01_c","Stardust_tex_02_c","Stardust_tex_03_c","Stardust_tex_02_c2","Stardust_Sample_Collection1"])e.setHiddenObject(t,!0)},exit:t=>{const e=t.getComponentByType("model");for(const t of["Stardust_capsule","Stardust_tex_01_c","Stardust_tex_02_c","Stardust_tex_03_c","Stardust_tex_02_c2","Stardust_Sample_Collection1"])e.setHiddenObject(t,!1)}}],postCreateFunction:t=>{const e=t.getComponentByType("model"),i=(t,e,i)=>[[4449664+e,t],[4449664+e+i,0],[10411264-e-i,0],[10411264-e,t],[81864064+e,t],[81864064+e+i,0],[92664064-e-i,0],[92664064-e,t],[125496064+e,t],[125496064+e+i,0],[126363664-e-i,0],[126363664-e,t]];n.default.makeJointRotationAnimation(e,"Stardust_capsule","x",i(1.481785,0,600)),n.default.makeJointRotationAnimation(e,"Stardust_Sample_Collection1","x",i(-Math.PI,610,300)),n.default.makeJointRotationAnimation(e,"Stardust_Sample_Collection2","x",i(-Math.PI,920,300))}},sc_stardust_src:{groups:["small body spacecraft","comet spacecraft","81p_wild_2","earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:8e-4,label:"Stardust SRC",parents:[[190576690.7833838,"sc_stardust"],[190576755.185,"earth"],[190591985.184,""]],trail:{length:14547},fixed:{orientation:new o.Quaternion(.5761056269233067,.6860897901682099,.2627910947477326,.3582233199772653)},model:{url:"$STATIC_ASSETS_URL/models/sc_stardust_src/stardust_capsule.gltf",shadowEntities:["earth"],rotate:[{x:90},{z:90}]},dynamo:[{url:"sc_stardust_src/earth/pos"}],coverages:[{coverage:[190591100,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getComponentByType("trail");e.setRelativeToEntityOrientation(!0),e.setStartTime(1600)},exit:t=>{const e=t.getComponentByType("trail");e.setRelativeToEntityOrientation(!1),e.setStartTime(18e3)}}],postCreateFunction:t=>{const e=t.addController("keyframe");e.addPositionKeyframe(190576690.7833838,new o.Vector3(-.0010057,0,1569e-7),"sc_stardust",void 0,"sc_stardust",void 0),e.addPositionKeyframe(190576755.185,new o.Vector3(-.016734488308429718,-.019199222326278687,-.00404781848192215),"sc_stardust");const i=t.addController("keyframe");i.addPositionKeyframe(190591163,new o.Vector3(-1979.4577357598625,-4478.591383446022,4136.322858267745),"earth"),i.addPositionKeyframe(190591445.184,new o.Vector3(-1947.8360605285134,-4491.082890234251,4123.1018367103425),"earth"),i.addPositionKeyframe(190591985.184,new o.Vector3(-1918.7633689113482,-4478.864184129612,4103.897124245734),"earth");t.addController("rotateByEntityOrientation").setCoverage(new o.Interval(190591163,190591985.184))}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(5);e.default=class Animation{static makeSubobjectVisibleAnimation(t,e,i,n){if(0===n.length)return;n.sort(((t,e)=>t[0]-e[0]));const o=t.getEntity();(o.getControllerByType("coverage")||o.addController("coverage")).addCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),void 0,void 0,(()=>{const a=o.getScene().getEngine().getTime(),r=s.Sort.getIndex(a,n,((t,e)=>t[0]<e));0===r?t.setHiddenObject(e,!i):t.setHiddenObject(e,!n[r-1][1])}))}static makeJointRotationAnimation(t,e,i,n){if(0===n.length)return;n.sort(((t,e)=>t[0]-e[0]));const o=t.getEntity();(o.getControllerByType("coverage")||o.addController("coverage")).addCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),void 0,void 0,(()=>{const a=t.getThreeJsObjectByName(e);if(null!==a){const t=o.getScene().getEngine().getTime(),e=s.Sort.getIndex(t,n,((t,e)=>t[0]<e));if(0===e)a.rotation[i]=n[0][1];else if(e===n.length)a.rotation[i]=n[n.length-1][1];else{const o=n[e-1],r=n[e],l=(t-o[0])/(r[0]-o[0]);a.rotation[i]=s.MathUtils.lerp(o[1],r[1],l)}}}))}}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({sc_biosentinel:{groups:["sun","spacecraft"],occlusionRadius:2e-4,extentsRadius:5e-4,label:"BioSentinel",parents:[[721866289,"earth"],[722273637,"moon"],[722923565,"sun"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_biosentinel/biosentinel.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis},secondary:{type:"align",target:"sun",axis:n.Vector3.ZAxis,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_biosentinel/earth/orb"},{url:"sc_biosentinel/moon/orb"},{url:"sc_biosentinel/sun/orb"}]},sc_kepler_space_telescope:{groups:["sun","spacecraft","telescope"],occlusionRadius:.00235,extentsRadius:.004,label:"Kepler",parents:[[289679042.1855,"earth"],[290348743,"sun"],[595512069.183,""]],trail:{length:32190048},model:{url:"$STATIC_ASSETS_URL/models/sc_kepler/Kepler.gltf"},align:{primary:{type:"align",target:"sun",targetAxis:new n.Vector3(.25176480336,-.66735243742,.7009092643),axis:n.Vector3.YAxis},secondary:{type:"point",target:"sun",axis:n.Vector3.XAxisNeg}},dynamo:[{url:"sc_kepler/earth/orb"},{url:"sc_kepler/sun/orb"}]},sc_mariner_2:{groups:["sun","spacecraft"],occlusionRadius:.002,extentsRadius:.0025,label:"Mariner 2",parents:[[-1178599240.703784,"sun"],[409233667.18358755,""]],trail:{length:29411352},animdata:[{url:"sc_mariner_2",type:"pos"}]},sc_parker_solar_probe:{groups:["sun","spacecraft"],occlusionRadius:.0015,extentsRadius:.003,label:"Parker Solar Probe",parents:[[587333783.3431,"earth"],[587454078,"sun"]],trail:{length:12942631},model:{url:"$STATIC_ASSETS_URL/models/sc_parker_solar_probe/PSP.gltf"},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_parker_solar_probe/earth/orb"},{url:"sc_parker_solar_probe/sun/orb"}]},sc_spitzer:{groups:["sun","spacecraft"],occlusionRadius:.0085,extentsRadius:.004,label:"Spitzer",parents:[[115064803.183,"earth"],[115493678,"sun"],[633614469.185,""]],trail:{length:32167331},model:{url:"$STATIC_ASSETS_URL/models/sc_spitzer/SPITZER.gltf",rotate:[{z:-90},{x:-90}],shadowEntities:["venus","mercury"]},fixed:{orientation:new n.Quaternion(.5258297992951877,.8139480432783324,-.1400557906856776,-.20341086625833524),coverage:[633777341.191,Number.POSITIVE_INFINITY]},dynamo:[{url:"sc_spitzer/earth/orb"},{url:"sc_spitzer/sun/orb"},{url:"sc_spitzer/quat"}]},sc_stereo_ahead:{groups:["sun","spacecraft"],occlusionRadius:.003,extentsRadius:.003,label:"STEREO Ahead",parents:[[215097110,"earth"],[221418192,"sun"]],trail:{length:29809031},model:{url:"$STATIC_ASSETS_URL/models/sc_stereo_ahead/stereo_a.gltf",rotate:[{x:90}],shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_stereo_ahead",axis:n.Vector3.YAxisNeg}},dynamo:[{url:"sc_stereo_ahead/earth/orb"},{url:"sc_stereo_ahead/sun/orb"}]},sc_stereo_behind:{groups:["sun","spacecraft"],occlusionRadius:.003,extentsRadius:.003,label:"STEREO Behind",parents:[[215097110,"earth"],[224468337,"sun"],[527860868.182,""]],trail:{length:33473699},model:{url:"$STATIC_ASSETS_URL/models/sc_stereo_behind/stereo_b.gltf",rotate:[{x:90}],shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_stereo_behind",axis:n.Vector3.YAxisNeg}},dynamo:[{url:"sc_stereo_behind/earth/orb"},{url:"sc_stereo_behind/sun/orb"}]},sc_ulysses:{groups:["sun","spacecraft"],occlusionRadius:.002,extentsRadius:.002,label:"Ulysses",parents:[[-291488100,"sun"],[268142464.18410408,""]],trail:{length:140294739},model:{url:"$STATIC_ASSETS_URL/models/sc_ulysses/ulysses.gltf",shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_ulysses",axis:n.Vector3.YAxisNeg}},animdata:[{url:"sc_ulysses",type:"pos"}]},sc_wmap:{groups:["sun","spacecraft"],occlusionRadius:.0026,extentsRadius:.0026,label:"WMAP",parents:[[339422466.184,"sun"],[360158466.184,""]],trail:{length:31536e3},animdata:[{url:"sc_wmap",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({sc_magellan:{groups:["venus","spacecraft"],occlusionRadius:.0032,extentsRadius:.006,label:"Magellan",parents:[[-336388283.36,"sun"],[-296448521.457,"venus"],[-164631538.81763855,""]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_magellan/magellan.gltf",shadowEntities:["venus"]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.YAxis},secondary:{type:"align",axis:new n.Vector3(-Math.sqrt(.5),Math.sqrt(.5),0),target:"venus",targetAxis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_magellan/venus/orb"}],postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new n.OrbitalElements;i.epoch=-336394683.816,i.eccentricity=.1791852824104108,i.semiMajorAxis=128280596.63956015,i.meanAngularMotion=2.5073465306679634e-7,i.meanAnomalyAtEpoch=2.9229288382327625,i.orbitOrientation.set(.8728453580255966,.1876084386162498,-.08948587100888229,.4415159494547423),e.addOrbitalElements(-336388283.36,i),e.addOrbitalElements(-296448521.457,i);const s=t.addController("orbitalElements",void 0,t.getControllerByType("align")),o=new n.OrbitalElements;o.epoch=-296448521.457,o.eccentricity=1.272922970547487,o.semiMajorAxis=23358.593430196037,o.meanAngularMotion=.00015965302516479147,o.meanAnomalyAtEpoch=-6.138103356108873,o.orbitOrientation.set(-.49933963770188916,.11817755769547109,.7262027627540558,-.45751889408554064),s.addOrbitalElements(-296448521.457,o),s.addOrbitalElements(-296410230.351,o);const a=new n.OrbitalElements;a.epoch=-295884037.7511,a.eccentricity=.39186818222106645,a.semiMajorAxis=10434.012201911135,a.meanAngularMotion=.000534773863104956,a.meanAnomalyAtEpoch=-1.5165416917234864,a.orbitOrientation.set(-.4665778554219434,.18802595119032475,.7217932088991018,-.47535871728198204),s.addOrbitalElements(-296410230.351,a),s.addOrbitalElements(-295884037.7511,a)}},sc_venus_express:{groups:["venus","spacecraft"],occlusionRadius:9e-4,extentsRadius:.004,label:"Venus Express",parents:[[184784701.549,"venus"],[505628714.4371663,""]],trail:{length:779592.165087551},fixed:{orientation:n.Quaternion.Identity},animdata:[{url:"sc_venus_express/venus/all",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(531),n=i(5);s.default.register({rose_bowl:{groups:["comparison"],radius:.15,label:"Rose Bowl",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/rose_bowl/rose_bowl.gltf",rotate:[{x:90},{z:-90}]},fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity}},school_bus:{groups:["comparison"],radius:.0065,label:"School bus",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/school_bus/school_bus.gltf",rotate:[{x:90},{z:-90}]},fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity}},scientist:{groups:["comparison"],radius:835e-6,label:"Scientist",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/scientist/scientist.gltf",rotate:[{x:90}]},fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity}}}),e.default={}},function(t,e,i){"use strict";i.r(e),i.d(e,{LayerManager:function(){return LayerManager}});var s=i(528),n=(i(5),i(2));class LayerManager extends n.BaseManager{constructor(t){super(t),this._sceneManager=t.getManager("scene"),this._contentManager=t.getManager("content"),this._layers={},this._contextualLayersList=["majorMoons","minorMoons","landers","orbiters","heliosphere"],this._targetId="",this._previousTarget=[],this._dependencies=new Set,this._previousDependencies=new Set,this.bindFunctions(["resetContextualVisibility","toggleLayer","changeSpheroidMap","resetContextualLayers"]),this._eventNames.push("toggleLayer"),this._initCallbacks()}addLayer(t,{name:e="",group:i="",categories:s=[],defaultVisibility:n=!0,toggleCallback:o=[],sublayers:a=[]}){void 0===this._layers[t]&&(this._layers[t]={}),this._layers[t].name=e,this._layers[t].group=i,this._layers[t].defaultVisibility=n,this._layers[t].visible=n,Array.isArray(s)||(s=[s]),this._layers[t].categories=s,Array.isArray(a)||(a=[a]),this._layers[t].sublayers=a;for(let e=0;e<a.length;e++){const i=a[e];void 0===this._layers[i]&&(this._layers[i]={}),this._layers[i].parent=t}Array.isArray(o)||(o=[o]),this._layers[t].toggleCallback=o}addCallback(t,e){const i=this.getLayer(t);null!==i&&i.toggleCallback.push(e)}removeCallback(t,e){const i=this.getLayer(t);if(null===i)return;const s=i.toggleCallback.indexOf(e);i.toggleCallback.splice(s,1)}getLayer(t){return void 0===this._layers[t]?null:this._layers[t]}async changeSpheroidMap(t,e){if("cmts"===e.type)return void console.error("This function does not yet handle CMTS texture");const i=this.app.getManager("scene"),s=i.get("main").getEntity(t).getComponentByType("spheroidLOD"),n=i.get("main").getEntity(t).getComponentByType("atmosphere"),o=i.get("main").getEntity(t).getComponentByType("wmts");"texture"===e.type?(s.setEnabled(!0),i.addLoading(t,"spheroidLOD"),Object.keys(e.textures).forEach((t=>{const i="$STATIC_ASSETS_URL/maps/"+e.textures[t].url;s.setTexture(t,i,e.textures[t].sizes)})),await i.pioneer.waitUntilNextFrame(),await s.getLoadedPromise(),null!==o&&o.setEnabled(!1),i.removeLoading(t,"spheroidLOD")):"wmts"===e.type&&(null===o?await i.addWMTSComponent(t,e):!1===o.isEnabled()&&await i.enableWMTSComponent(t,o)),null!=n&&n.setEnabled(e.features.includes("atmosphere")),this.app.getComponent("contentPanel")?.updateHDButton()}toggleLayer(t,e,i){if(void 0===this._layers[t])return;if(void 0===e&&(e={}),e.layerId=t,void 0!==i&&this._layers[t].visible===i)return;this._layers[t].visible=!this._layers[t].visible;for(let i=0;i<this._layers[t].toggleCallback.length;i++){(0,this._layers[t].toggleCallback[i])(this._layers[t].visible,e)}for(let i=0;i<this._layers[t].sublayers.length;i++){this.getLayer(this._layers[t].sublayers[i]).visible=this._layers[t].visible,this.triggerCallbacks("toggleLayer",[this._layers[t].sublayers[i],this._layers[t].visible,e])}this.triggerCallbacks("toggleLayer",[t,this._layers[t].visible,e]);const s=this.app.getManager("scene");null!==e.parentId&&void 0!==e.parentId?s.updateEntityLayerVisibilityForChildren(e.parentId):s.updateEntityLayerVisibility()}setTarget(t){if(this._previousTarget.push(this._targetId),this._previousDependencies=new Set([...this._previousDependencies,...this._dependencies]),this._targetId=t,this._dependencies.clear(),""!==this._targetId){const t=this._sceneManager.getDependencies(this._targetId);this._dependencies=new Set(t)}}resetTarget(){for(let t=0;t<this._previousTarget.length;t++){const e=this._previousTarget[t],i=this.app.getManager("camera").cameraEntity;if(null===i||null===i.getParent())return;if(i.getParent().getName()===e)return}for(let t=0;t<this._previousTarget.length;t++){const e=this._previousTarget[t];this.resetContextualVisibility(e)}this._previousTarget=[],this._previousDependencies.clear()}resetContextualVisibility(t){const e=this._sceneManager.main.getEngine().getTime();let i=this.getContextualLayers(t);for(;""!==t&&0===i.length;)t=s.Parenting.getParentOfEntity(t,e),i=this.getContextualLayers(t);let n=this._targetId;for(i=this.getContextualLayers(n);""!==n&&0===i.length;)n=s.Parenting.getParentOfEntity(n,e),i=this.getContextualLayers(n);if(n!==t){this._contextId=t;for(let e=0;e<i.length;e++){const s=i[e],n=this.getLayer(s);if(void 0!==n.parent){this.getLayer(n.parent).visible!==n.visible&&this.toggleLayer(s,{parentId:t,group:n.group})}else n.visible!==n.defaultVisibility&&this.toggleLayer(s,{parentId:t,group:n.group})}}}getTarget(){return this._targetId}getEntityLayer(t){const e=this._contentManager.getEntityInfo(t);if(null===e)return null;const i=e.category,s=e.subcategory;return this.getLayerFromCategory(s)||this.getLayerFromCategory(i)}getLayerFromCategory(t){if(!t)return null;for(const[e,i]of Object.entries(this._layers))if(i.categories.includes(t))return this._layers[e];return null}getContextualLayers(t){const e=[];if(""===t)return e;const i=this.app.getManager("content"),n=i.getEntityInfo(t)?.hasMoons?s.Entity.getEntityNamesInGroup(t+", moons"):new Set,o=s.Entity.getEntityNamesInGroup(t+", spacecraft");"sun"===t&&!1===e.includes("heliosphere")&&e.push("heliosphere"),n.forEach((t=>{const s=i.getEntityInfo(t);if(null!==s){switch(s.subcategory||s.category){case"Major Moon":!1===e.includes("majorMoons")&&e.push("majorMoons");break;case"Minor Moon":!1===e.includes("minorMoons")&&e.push("minorMoons")}}}));const a=this._app.pioneer.getTime();return o.forEach((n=>{const o=i.getEntityInfo(n);if(null!==o){switch(o.subcategory||o.category){case"Orbiter":!1===e.includes("orbiters")&&s.Parenting.getParentOfEntity(n,a)===t&&e.push("orbiters");break;case"Landing Site":case"Lander":case"Rover":!1===e.includes("landers")&&s.Parenting.getParentOfEntity(n,a)===t&&e.push("landers")}}})),e.sort(((t,e)=>{const i=Object.keys(this._layers);return i.indexOf(t)-i.indexOf(e)})),e}resetContextualLayers(t,e){const i=this.getContextualLayers(t);this._contextualLayersList.forEach((t=>{!1===i.includes(t)&&("heliosphere"===t?this.toggleLayer(t,{parentId:void 0},!1):this.toggleLayer(t,{parentId:e},this.getLayer(t).defaultVisibility||!1))}))}isEntityVisibleWithCurrentLayers(t){const e=this._contentManager.getEntityInfo(t);if(null!==e){const t=this.getLayerFromCategory(e.category),i=this.getLayerFromCategory(e.subcategory);return null!==i?i.visible:null!==t?t.visible:null===t&&null===i}return!0}}},function(t,e,i){"use strict";i.r(e),i.d(e,{TrailManager:function(){return TrailManager}});var s=i(5),n=i(528),o=i(2);class TrailManager extends o.BaseManager{constructor(t,e){super(t),this._scene=e,this._ids=[],this._hiddenIds=[],this._opacity={primary:.75,secondary:.35,hover:1},this._width={default:[0,2],hover:[2,4]},this._orbitLinesOpts={lineWidth:{default:1.2,hover:2},glowWidth:{default:0,hover:0},alphaFade:[22,8]},this._orbitLineEntityNames=n.Entity.getEntityNamesInGroup("planets").add("moon"),this._colors={default:new s.Color(1,1,1,this._opacity.secondary),mercury:new s.Color(151/255,104/255,172/255,this._opacity.primary),venus:new s.Color(176/255,121/255,25/255,this._opacity.primary),earth:new s.Color(0,.6,.8,this._opacity.primary),mars:new s.Color(154/255,78/255,25/255,this._opacity.primary),jupiter:new s.Color(218/255,139/255,114/255,this._opacity.primary),saturn:new s.Color(213/255,193/255,135/255,this._opacity.primary),uranus:new s.Color(104/255,.8,218/255,this._opacity.primary),neptune:new s.Color(112/255,140/255,227/255,this._opacity.primary)},this.bindFunctions(["onHoverChange","setUpTrail","toggleTrails","toggleOrbits"])}setScene(t){this._scene=t}create(t){if(this._scene.get(t,"trail"))return void console.warn("Trail already exists for",t);const e=this._scene.get(t).addComponent("trail");return this._ids.push(t),e}setStartTime(t,e){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++){const s=this._scene.get(t[i],"trail");s&&s.setStartTime(e)}}setEndTime(t,e){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++){const s=this._scene.get(t[i],"trail");s&&s.setEndTime(e)}}onHoverChange(t,e,i=!1){const n=this._scene.get(t),o=this._scene.get(t,"trail"),a=n?.get("orbitLine");if(!n||!o&&!a)return;const r=new s.Color,l=o??a,c=e?"hover":"default";if(a){const{lineWidth:t,glowWidth:e}=this._orbitLinesOpts;a.setLineWidth(t[c]),a.setGlowWidth(e[c])}else if(o){const t=n.trailHover?.width?.[c]??this._width[c];o.setWidths(...t)}const{primary:h,secondary:u,hover:d}=this._opacity,p=e?d:this._colors[t]?h:u;r.copy(l.getColor()),r.a=p,l.setColor(r),i&&o.setAlphaFade(r.a)}setFade(t,e){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++){const s=this._scene.get(t[i],"trail");s&&s.setAlphaFade(e)}}setWidths(t,e,i){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++){const n=this._scene.get(t[s],"trail");n&&n.setWidths(e,i)}}setMultipleWidths(t,e,i){for(const s of t){const t=this._scene.get(s,"trail");t&&t.setWidths(e,i)}}getColor(t){const e=this._scene.get(t,"trail");return e?e.getColor():null}setColor(t,e=null){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++){const n=t[i],o=this._scene.get(n,"trail");if(o){const t=e instanceof s.Color?e:this._colors[n]||this._colors.default;o.setColor(t)}}}setUpTrail(t){const e=this._app.getManager("layer"),i=this._app.getManager("scene"),s=t.getName(),n=e.getLayer("trails");this._orbitLineEntityNames.has(s)&&this.createOrbitLine(t),null===n||n.visible||i.setVisibility(!1,s)}show(t=null){null===t?t=this._hiddenIds.length>0?this._hiddenIds:this._ids:Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const i=t[e],s=this._scene.get(i,"trail");if(s){const t=this._hiddenIds.indexOf(i);-1!==t&&this._hiddenIds.splice(t,1),s.setEnabled(!0)}else console.warn("TrailManager.show: Trail does not exist - ",i)}}hide(t=null){null===t?t=this._ids:Array.isArray(t)||(t=[t]),this._hiddenIds=t;for(let e=0;e<t.length;e++){const i=this._scene.get(t[e],"trail");i&&i.setEnabled(!1)}}toggleTrails(t,{scene:e}={}){void 0===e&&(e=this._scene);for(let i=0;i<e.getNumEntities();i++){const s=e.getEntity(i),n=s.get("trail");if(null!==n){const e=this._app.getManager("content").getEntityInfo(s.getName());if(e){const i=e.category,s=e.subcategory,o=this._app.getManager("layer").getLayerFromCategory(s)||this._app.getManager("layer").getLayerFromCategory(i);null===o||o.visible?n.setEnabled(t):n.setEnabled(!1)}else n.setEnabled(t)}}}createOrbitLine(t){const e=t.get("trail");e&&t.removeComponent(e);const i=t.addComponent("orbitLine"),{lineWidth:s,glowWidth:n,alphaFade:o}=this._orbitLinesOpts,a=this._colors[t.getName()]??this._colors.default;i.setColor(a),i.setPixelSpaceRadiiAlphaFade(...o),i.setLineWidth(s.default),i.setGlowWidth(n.default);const r=this._app.getManager("layer").getLayer("orbits").visible;i.setEnabled(r)}toggleOrbits(t){this._orbitLineEntityNames.forEach((e=>{this._scene.get(e,"orbitLine")?.setEnabled(t)}))}get ids(){return this._ids}set ids(t){Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const i=t[e];if(this._ids.includes(i))continue;this._scene.get(i,"trail")&&this._ids.push(i)}}}},function(t,e,i){"use strict";i.r(e),i.d(e,{CameraManager:function(){return CameraManager}});var s=i(5),n=i(528),o=i(2);class CameraManager extends o.BaseManager{constructor(t,e){super(t),this._viewport=null,this._defaultScene=e,this._cameraEntity=null,this._id=null,this._previousId=null,this._context={id:""},this._isTransitioning=!1,this._defaultMaxDistance=2e18,this._selectionCallback=null,this._dynEnvMap=null,this._isFreeFly=!1,this._zoomSensitivity={click:.3,hold:.1},this.bindFunctions(["zoomIn","zoomOut","addDynamicEnvMap"])}createViewportAndCamera(t){t&&(this._defaultScene=t),null===this.pioneer.getViewport("main-viewport")&&(this._viewport=this.pioneer.addViewport("main-viewport"),this._viewport.getDiv().style.width="100%",this._viewport.getDiv().style.height="100%",this._viewport.getDiv().style.left="0",this._viewport.getDiv().style.top="0"),null===this._defaultScene.get("camera")&&(this._cameraEntity=this._defaultScene.addEntity("camera")),this._cameraEntity.setOrientation(s.Quaternion.Identity);let e=this._cameraEntity.getComponentByType("camera");null===e&&(e=this._cameraEntity.addComponent("camera")),this._viewport.setCamera(e),this._cameraLight=this._cameraEntity.get("lightSource"),null===this._cameraLight&&(this._cameraLight=this._cameraEntity.addComponent("lightSource"),this._cameraLight.setEnabled(!1)),null===this._dynEnvMap&&(this._dynEnvMap=this._cameraEntity.addComponent("dynEnvMap"))}getContext(){return this._context}setContext(t){this._context=t,this._previousId=this._id,this._id=this._context.id;const e=new CustomEvent("cameraupdate",{detail:{target:this._id,context:this._context}});window.dispatchEvent(e)}getCurrentId(){return this._id}get defaultScene(){return this._defaultScene}get cameraEntity(){return this._cameraEntity}get cameraLight(){return this._cameraLight}get dynamicEnvMap(){return this._dynEnvMap}toggleCameraLight(t,e){null!==this._cameraLight&&(this._cameraLight.setEnabled(t),void 0!==e&&this._cameraLight.setColor(e))}getSelectionCallback(){return this._selectionCallback}setSelectionCallback(t){"function"==typeof t&&(this._selectionCallback=t)}enterFreeFly(){this._isFreeFly=!0,this._cameraEntity.clearControllers(),this._cameraEntity.addController("freeFly"),this._cameraEntity.addController("look"),this._cameraEntity.addController("roll")}toggleFreeFly(){this._isFreeFly?this.exitFreeFly():this.enterFreeFly()}async goToEntity(t,{camera:e,scene:i,destination:o,distance:a,cinematic:r=!1,minRadius:l=.001,maxRadius:c=this._defaultMaxDistance,duration:h=.75,destinationUp:u,zoom:d=!0,select:p=!0,slowWhenCloseToParent:_=!0,useSpheroidRadiusForDistance:g=!1,roll:m=!1,keyframes:y,transitionFunction:f}={}){const b=e||this._cameraEntity,T=i||this._defaultScene;if(await n.SceneHelpers.waitTillEntitiesInPlace(T,[t]),this._isTransitioning=!0,void 0!==o){const e=new s.Vector3;e.sub(b.getPosition(),o);const i=b.getParent();if(null!==i){const n=i.getName();if(!isNaN(e.magnitude())){const t=s.MathUtils.clamp01(e.magnitude()/b.getPosition().magnitude());h=Math.max(h/5,h*t)}if(!isNaN(e.magnitude())&&e.magnitude()<=.001&&t===n)return void(this._isTransitioning=!1)}}try{if(void 0!==y){b.clearControllers();const t=b.addController("orbitKeyframe");if(y.position)for(let e=0;e<y.position.length;e++){const i=y.position[e];t.setPositionKeyframe(i.frame,i.position,i.relativeTo)}if(y.up)for(let e=0;e<y.up.length;e++){const i=y.up[e];t.setUpKeyframe(i.frame,i.up)}if(y.focus)for(let e=0;e<y.focus.length;e++){const i=y.focus[e];t.setFocusKeyframe(i.frame,i.name)}await t.getEndPromise(),b.clearControllers()}if(await n.Cameras.goToEntity(b,T.getEntity(t),{destination:o,distance:a,up:!1,duration:h,destinationUp:u,zoom:d,transitionFunction:f}),p){const t=b.addController("select");null!==this._selectionCallback&&t.setCallback(this._selectionCallback)}const e=b.get("orbit");e instanceof s.OrbitController&&e.slowWhenCloseToParent(_);const i=b.get("zoom");if(i&&i instanceof s.ZoomController&&(i.setDistanceClamp(new s.Interval(l,c)),i.setUseSpheroidRadiusForDistance(g)),m){b.get("roll")instanceof s.RollController||b.addController("roll")}if(r){const t=b.getControllerByType("align"),e=b.addController("spin",void 0,t);e instanceof s.SpinController&&(e.setAxis(s.Vector3.ZAxis,!0),e.setRate(.01),e.setUsingRealTime(!0),e.setRotatingPosition(!0));const i=b.addController("tap");i instanceof s.TapController&&i.setTapCallback((()=>{b.removeController(e),b.removeController(i)}))}}catch(t){t&&console.error(t)}finally{this._isTransitioning=!1}}zoom(t,e=this._cameraEntity){let i=e.getPosition().magnitude();Number.isNaN(i)&&(i=1),i*=t;const n=s.Vector3.pool.get();n.normalize(e.getPosition()),n.mult(n,i),e.setPosition(n),s.Vector3.pool.release(n)}zoomIn(t=!1){let e=1;const i=t?this._zoomSensitivity.hold:this._zoomSensitivity.click;e/=Math.pow(2,i),this.zoom(e)}zoomOut(t=!1){let e=1;const i=t?this._zoomSensitivity.hold:this._zoomSensitivity.click;e*=Math.pow(2,i),this.zoom(e)}get defaultMaxDistance(){return this._defaultMaxDistance}set defaultMaxDistance(t){this._defaultMaxDistance=t}addDynamicEnvMap(t){if(!this.dynamicEnvMap)return;const e=t.get("model");null!==e&&e.setDynamicEnvironmentMapComponent(this.dynamicEnvMap)}}},function(t,e,i){"use strict";i.r(e),i.d(e,{CameraScripts:function(){return CameraScripts}});var s=i(5),n=i(528),o=i(2);class CameraScripts extends o.BaseManager{constructor(t){super(t),this._cameraManager=null,this._customSystemDistances={mercury:425648,venus:862136,earth:1040264,mars:8e4,jupiter:7157638,saturn:4869142,uranus:1886367,neptune:2407045,"134340_pluto":122231,"136199_eris":180309,"1_ceres":87225,"136108_haumea":126609,"136472_makemake":118584},this._onCameraTransition=null,this._easeInOutExpoTransition=this._easeInOutExpoTransition.bind(this),this._easeOutExpoTransition=this._easeOutExpoTransition.bind(this)}setCameraManager(t){this._cameraManager=t}get scene(){return this._scene}set scene(t){this._scene=t}get cameraEntity(){return this._cameraEntity}set cameraEntity(t){this._cameraEntity=t}getNormalToEcliptic(t,e){const i=new s.Quaternion;this._cameraManager.pioneer.get("main",e,"dynamo").getOrbitOrientation(i,this._cameraManager.pioneer.getTime()),i.getAxis(t,2)}isBarycenter(t){return!!t.includes("_barycenter")}removeBarycenter(t){return this.isBarycenter(t)?t.replace("_barycenter",""):t}async goToCelestialObject(t,{scene:e,starId:i="sun",cinematic:o=!0,duration:a=1.5,distance:r=1.3}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.CELESTIAL_OBJECT}),void 0===e&&(e=this._scene);const l=e.getEntity(t),c=e.getEntity(i);let h=new s.Vector3;l.getPositionRelativeToEntity(h,s.Vector3.Zero,c),0===h.magnitude()&&(h=new s.Vector3(0,1,0));const u=new s.Vector3;l.getOrientation().getAxis(u,2),h.neg(h),h.normalize(h);let d=l.getOcclusionRadius();null!==l.getComponentByType("spheroid")&&(d=l.getComponentByType("spheroid").getEquatorialRadius());const p=1.2*d,_=new s.Quaternion;_.setFromAxes(void 0,h,u);let g=n.Cameras.getDistanceToFitEntities(this._cameraEntity,_,l,[l]);g*=r,h.mult(h,g),await this._cameraManager.goToEntity(t,{distance:g,duration:a/2}),await this._cameraManager.goToEntity(t,{destination:h,cinematic:o,minRadius:p,destinationUp:u,duration:a/2})}_easeOutExpoTransition(t,e,i,n,o,a){const r=s.Vector3.pool.get(),l=s.Quaternion.pool.get(),c=1-Math.pow(1-a,4);r.lerp(e,i,c),l.slerp(n,o,c),this._onCameraTransition?.(c),t.setPosition(r),t.setOrientation(l),s.Vector3.pool.release(r),s.Quaternion.pool.release(l)}_easeInOutExpoTransition(t,e,i,n,o,a){const r=s.Vector3.pool.get(),l=s.Quaternion.pool.get(),c=((a*=2)<=1?Math.pow(a,4):2-Math.pow(2-a,4))/2;r.lerp(e,i,c),l.slerp(n,o,c),this._onCameraTransition?.(c),t.setPosition(r),t.setOrientation(l),s.Vector3.pool.release(r),s.Quaternion.pool.release(l)}async goToSpacecraft(t,{scene:e,starId:i="sun",planeId:o="earth",distance:a,cinematic:r=!0,duration:l=1.5,verticalOffset:c=0,horizontalOffset:h=0}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.SPACECRAFT}),void 0===e&&(e=this._scene);const u=this._app.getManager("content").getEntityInfo(t)?.customDistance||a;await n.SceneHelpers.waitTillEntitiesInPlace(e,[t]);const d=e.getEntity(t),p=1.2*d.getOcclusionRadius(),_=new s.Vector3;_.normalize(d.getPosition());const g=new s.Vector3,m=d.getParent();m&&(m.getName()===i&&null!==e.get(o)?(this.getNormalToEcliptic(g,o),g.isNaN()&&g.copy(new s.Vector3(0,0,1))):m.getOrientation().getAxis(g,2)),g.normalize(g),_.magnitude()<1e-4&&(d.getOrientation().getAxis(_,0),_.normalize(_));const y=new s.Vector3;y.cross(_,g),y.normalize(y);const f=new s.Quaternion;f.setFromAxisAngle(y,s.MathUtils.degToRad(c)),_.rotate(f,_),f.setFromAxisAngle(g,s.MathUtils.degToRad(h)),_.rotate(f,_);let b=0;if(void 0!==u)b=u;else{const t=new s.Quaternion;t.setFromAxes(void 0,_,g);b=1.3*n.Cameras.getDistanceToFitEntities(this._cameraEntity,t,d,[d])}_.mult(_,b),await this._cameraManager.goToEntity(t,{distance:b}),await this._cameraManager.goToEntity(t,{destination:_,cinematic:r,minRadius:p,destinationUp:g,duration:l})}async goToInstrument(t,{scene:e,distance:i,duration:o=1.5,upVector:a="z-axis",forwardVector:r="y-axis"}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.INSTRUMENT}),void 0===e&&(e=this._scene);const l=this._app.getManager("content").getEntityInfo(t)?.customDistance||i,c=e.getEntity(t),h=c.getParent();await n.SceneHelpers.waitTillEntitiesInPlace(e,[h.getName(),t]);const u=c.getOcclusionRadius(),d=h.getOcclusionRadius(),p=1.2*u,_=new s.Vector3;c.getPositionRelativeToEntity(_,s.Vector3.Zero,h);const g=new s.Vector3,m=r.endsWith("y-axis")?1:r.endsWith("z-axis")?2:0;h.getOrientation().getAxis(g,m),r.startsWith("-")&&g.mult(g,-1),_.mult(g,-1);const y=new s.Vector3;let f=r.endsWith("y-axis")?2:1;a.endsWith("x-axis")?f=0:a.endsWith("z-axis")&&(f=2),h.getOrientation().getAxis(y,f),a.startsWith("-")&&y.mult(y,-1);let b=4*p;void 0!==l&&(b=l),_.mult(_,b),await this._cameraManager.goToEntity(h.getName(),{destinationUp:y,distance:1.2*d}),await this._cameraManager.goToEntity(t,{destination:_,minRadius:p,destinationUp:y,duration:o})}async compareObjects(t,e,{cameraLeft:i,cameraRight:s,cameraLeftPosition:n,cameraRightPosition:o,cameraUp:a,scene:r,minRadius:l,maxRadius:c,duration:h=.75}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.COMPARE,to:e});const u=new CustomEvent("cameracompare",{detail:{left:t,right:e}});window.dispatchEvent(u);const d=this._cameraManager.goToEntity(t,{minRadius:l,maxRadius:c,camera:i,destination:n,destinationUp:a,scene:r,select:!1,duration:h,zoom:!0,cinematic:!0}),p=this._cameraManager.goToEntity(e,{minRadius:l,maxRadius:c,camera:s,destination:o,destinationUp:a,scene:r,select:!1,duration:h,zoom:!0,cinematic:!0});await Promise.all([d,p])}async showLocation(t,e,i,o="northPole",{duration:a=2,otherEntityNames:r=[],distance:l,rotateByScreenRatio:c=!0}={}){this._cameraManager.setContext({id:"",targetEntityName:t,context:CameraScripts.CONTEXT.LOCATION,options:{otherEntityNames:r}});const h=this._scene.getEntity(t),u=this._scene.getEntity(e),d=this._scene.getEntity(i);if(null===h||null===u||null===d)return;const p=[];p.push(h),p.push(u),p.push(d);for(let t=0,e=r.length;t<e;t++){const e=this._scene.getEntity(r[t]);null!==e&&p.push(e)}const _=new s.Vector3;"northPole"===o?u.getOrientation().getAxis(_,2):"planeNormal"===o&&(_.cross(u.getPosition(),u.getVelocity()),_.normalize(_));const g=new s.Vector3;g.neg(_);const m=new s.Vector3;h.getPositionRelativeToEntity(m,s.Vector3.Zero,d),m.normalize(m),m.setNormalTo(g,m),m.neg(m);const y=this._cameraEntity.getComponentByType("camera");c&&y.getHorizontalFieldOfView()>y.getVerticalFieldOfView()&&m.cross(m,g);const f=new s.Quaternion;f.setFromAxes(void 0,g,m);let b=l||n.Cameras.getDistanceToFitEntities(this._cameraEntity,f,h,p);y.getHorizontalFieldOfView()<y.getVerticalFieldOfView()&&(b*=1.3*y.getVerticalFieldOfView()),b*=2,_.setMagnitude(_,b),null===this._cameraEntity.getParent()&&await this._cameraManager.goToEntity(t,{distance:b});const T={up:[{frame:a,up:m}],position:[{frame:a,position:_,relativeTo:h.getName()}],focus:[{frame:a,name:t}]};await this._cameraManager.goToEntity(t,{keyframes:T,destination:_,destinationUp:m,cinematic:!1,duration:.2})}async alignObjects(t,e,{verticalOffset:i=0,horizontalOffset:o=0,duration:a=1.5,transitionDuration:r,alignDuration:l,distance:c=1,cinematic:h=!1,useEase:u=!0}={}){this._cameraManager.setContext({id:"",targetEntityName:t,context:CameraScripts.CONTEXT.ALIGN_OBJECTS,focus:e});const d=this._scene.getEntity(t),p=this._scene.getEntity(e);await n.SceneHelpers.waitTillEntitiesInPlace(this._scene,[t,e]);const _=d.getOcclusionRadius(),g=new s.Vector3,m=this._cameraManager.pioneer.getTime();d.getPositionRelativeToEntity(g,s.Vector3.Zero,p,m),g.isNaN()?g.copy(new s.Vector3(0,-1,0)):g.normalize(g),g.mult(g,c);const y=new s.Vector3;p.getOrientation().getAxis(y,2);const f=new s.Vector3;f.cross(g,y),f.normalize(f);const b=new s.Quaternion;b.setFromAxisAngle(f,s.MathUtils.degToRad(i)),g.rotate(b,g),b.setFromAxisAngle(y,s.MathUtils.degToRad(o)),g.rotate(b,g),await this._cameraManager.goToEntity(t,{distance:c,destinationUp:y,duration:r||.5*a,transitionFunction:u?this._easeOutExpoTransition:void 0}),await this._cameraManager.goToEntity(t,{destination:g,cinematic:h,minRadius:_,destinationUp:y,duration:l||.5*a,transitionFunction:u?this._easeOutExpoTransition:void 0})}async alignSpacecraftPlanet(t,{duration:e=1.5,minRadius:i=50,distanceMultiplier:n=3}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.ALIGN_SPACECRAFT});const o=this._scene.getEntity(t);let a=o.getParent();for(;null!==a&&null===a.getComponentByType("spheroid")&&null===a.getComponentByType("model");)a=a.getParent();let r=a.getOcclusionRadius();null!==a.getComponentByType("spheroid")&&(r=a.getComponentByType("spheroid").getEquatorialRadius());const l=new s.Vector3;o.getPositionRelativeToEntity(l,s.Vector3.Zero,a),l.normalize(l),l.magnitude()<1e-4&&(o.getOrientation().getAxis(l,0),l.normalize(l)),l.mult(l,Math.max(i,n*r));const c=new s.Vector3;a.getOrientation().getAxis(c,2),await this._cameraManager.goToEntity(a.getName()),await this._cameraManager.goToEntity(t,{destination:l,cinematic:!1,minRadius:Math.min(r,i),destinationUp:c,duration:e})}async viewFromSide(t,{planeId:e="earth",distance:i,cinematic:o=!1,duration:a=.75,verticalOffset:r=0,horizontalOffset:l=0,forwardVector:c="x-axis",upVector:h=""}={}){const u=this._scene.get(t),d=this._scene.get(e)||u.getParent();await n.SceneHelpers.waitTillEntitiesInPlace(this._scene,[t,e]);const p=u.getOcclusionRadius(),_=1.2*p,g=new s.Vector3,m=new s.Vector3;let y=0;"z-axis"===c?y=2:"y-axis"===c&&(y=1),u.getOrientation().getAxis(m,y),m.normalize(m);const f=new s.Vector3;u.getPositionRelativeToEntity(f,s.Vector3.Zero,d),f.normalize(f),g.cross(m,f),g.normalize(g),g.mult(g,-1);const b=new s.Vector3;if(h){let t=1;h.includes("x-axis")?t=0:h.includes("z-axis")&&(t=2),u.getOrientation().getAxis(b,t),h.startsWith("-")&&b.mult(b,-1)}else u.getPositionRelativeToEntity(b,u,d),b.normalize(b);const T=new s.Vector3;if(T.cross(g,b),T.normalize(T),b.cross(T,g),0!==r){const t=new s.Quaternion,e=s.MathUtils.degToRad(r);t.setFromAxisAngle(T,e),g.rotate(t,g)}if(b.cross(T,g),0!==l){const t=new s.Quaternion,e=s.MathUtils.degToRad(l);t.setFromAxisAngle(b,e),g.rotate(t,g)}T.cross(g,b),T.normalize(T),void 0===i?g.mult(g,10*p):g.mult(g,i),await this._cameraManager.goToEntity(t,{destination:g,cinematic:o,minRadius:_,destinationUp:b,duration:a})}async spacecraftLookAtTarget(t,e){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.LOOK_AT,target:e})}async spacecraftLockedOnTarget(t,e){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.LOCKED_ON,target:e})}async goToSystemSideway(t,{distance:e,minDistance:i=0,duration:o=1,otherEntityNames:a=[],includeChildren:r=!0,angleInDegree:l=0,cinematic:c=!1}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.SYSTEM});const h=this._scene.getEntity(t),u=this.isBarycenter(t)?this.removeBarycenter(t):t,d=u in this._customSystemDistances?this._customSystemDistances[u]:0,p=[h];for(let t=0;t<a.length;t++)p.push(this._scene.getEntity(a[t]));if(r)for(let t=0;t<h.getNumChildren();t++){const e=h.getChild(t);null===e.getComponentByType("camera")&&(e.getName().startsWith("sc")||e.getPosition().isNaN()||p.push(e))}const _=new s.Vector3;_.normalize(h.getVelocity());const g=new s.Vector3;g.normalize(h.getPosition()),g.setNormalTo(_,g);const m=new s.Vector3;m.cross(g,_);const y=new s.Vector3;y.mult(_,-1),y.addMult(y,m,Math.tan(s.MathUtils.degToRad(l)));let f=h.getOcclusionRadius();const b=h.getComponentByType("spheroid");if(null!==b)f=b.getEquatorialRadius();else if(this.isBarycenter(t)){const e=this.removeBarycenter(t),i=this._scene.getEntity(e).getComponentByType("spheroid");null!==b&&(f=i.getEquatorialRadius())}const T=1.2*f;let v=e;if(void 0===v){const t=new s.Quaternion;t.setFromAxes(g,y,void 0),v=n.Cameras.getDistanceToFitEntities(this._cameraEntity,t,h,p),v*=1.3}v=Math.max(d,v);const E=this._cameraEntity.getComponentByType("camera");E.getHorizontalFieldOfView()<E.getVerticalFieldOfView()&&(v*=1.3*E.getVerticalFieldOfView()),y.setMagnitude(y,v),await this._cameraManager.goToEntity(t,{destination:y,cinematic:c,minRadius:T,destinationUp:m,duration:o})}async goToSystem(t,e={}){if("inner_solar_system"===t)Object.assign(e,{distance:7e8,angle:25,planeId:"earth"}),await this._goToSystem("sun",e);else if("outer_solar_system"===t)Object.assign(e,{distance:1e10,angle:25,planeId:"earth"}),await this._goToSystem("sun",e);else{const i=this.isBarycenter(t)?this.removeBarycenter(t):t,s=i in this._customSystemDistances?this._customSystemDistances[i]:0,n=this._app.getManager("content").getEntityInfo(t),o="planeId"in e?e.planeId:n?.planeEntity||"";Object.assign(e,{minDistance:s,planeId:o}),await this._goToSystem(t,e)}}async _goToSystem(t,{distance:e,angle:i=25,minDistance:o=0,duration:a=1,planeId:r="",otherEntityNames:l=[],includeChildren:c=!0,isRelativeToPreviousCamera:h=!0}={}){this._cameraManager.setContext({id:t,context:CameraScripts.CONTEXT.SYSTEM});const u=this._scene.getEntity(t),d=[u];for(let t=0;t<l.length;t++)d.push(this._scene.getEntity(l[t]));if(c)for(let t=0;t<u.getNumChildren();t++){const e=u.getChild(t);null===e.getComponentByType("camera")&&(e.getName().startsWith("sc")||e.getPosition().isNaN()||d.push(e))}const p=new s.Vector3,_=new s.Vector3;h?(this._cameraEntity.getPositionRelativeToEntity(_,s.Vector3.Zero,u),_.isNaN()?(p.copy(new s.Vector3(0,-1,0)),p.mult(p,1e10)):p.copy(_)):(p.normalize(u.getPosition()),p.mult(p,-1));const g=new s.Vector3;""!==r&&null!==this._scene.get(r)?(this.getNormalToEcliptic(g,r),g.isNaN()&&g.copy(new s.Vector3(0,0,1))):u.getOrientation().getAxis(g,2);const m=new s.Vector3;m.cross(p,g),m.normalize(m),p.setNormalTo(g,p),p.normalize(p);const y=new s.Quaternion;y.setFromAxisAngle(m,s.MathUtils.degToRad(i)),p.rotate(y,p);let f=u.getOcclusionRadius();const b=u.getComponentByType("spheroid");if(null!==b)f=b.getEquatorialRadius();else if(this.isBarycenter(t)){const e=this.removeBarycenter(t),i=this._scene.getEntity(e).getComponentByType("spheroid");null!==b&&(f=i.getEquatorialRadius())}const T=1.2*f;let v=e;if(void 0===v){const t=new s.Quaternion;t.setFromAxes(m,p,void 0),v=n.Cameras.getDistanceToFitEntities(this._cameraEntity,t,u,d),v*=1.3}v=Math.max(o,v);const E=this._cameraEntity.getComponentByType("camera");if(E.getHorizontalFieldOfView()<E.getVerticalFieldOfView()&&(v*=1.3*E.getVerticalFieldOfView()),h){const e=new s.Vector3;this._cameraEntity.getPositionRelativeToEntity(_,s.Vector3.Zero,u),_.isNaN()?(e.copy(new s.Vector3(0,-1,0)),e.setNormalTo(g,e),e.mult(e,1e10),e.rotate(y,e)):e.copy(_),await this._cameraManager.goToEntity(t,{destination:e,destinationUp:g,duration:a})}else await this._cameraManager.goToEntity(t,{distance:e,duration:a/2});p.mult(p,v),await this._cameraManager.goToEntity(t,{destination:p,cinematic:!1,minRadius:T,destinationUp:g,duration:a})}async goToCenter(t,e,i,n={}){this._cameraManager.setContext({id:"centerSystem",context:CameraScripts.CONTEXT.CENTER_SYSTEM});const o=new s.Vector3,a=this._scene.getEntity(e),r=new s.Vector3,l=[];for(let e=0;e<t.length;e++){const n=this._scene.getEntity(t[e]);l.push(n),n.getPositionRelativeToEntity(r,s.Vector3.Zero,a,i),o.addMult(o,r,1/t.length)}let c=this._scene.getEntity("center");null===c&&(c=this._scene.addEntity("center"),c.setOrientation(s.Quaternion.Identity)),c.setParent(a),c.setPosition(o),await this._scene.getLoadedPromise(),await this._cameraManager.pioneer.waitUntilNextFrame(),n.otherEntityNames=t,await this._goToSystem(c.getName(),n)}async showLocationCenter(t,e,i,n,o,a,r={}){this._cameraManager.setContext({id:"centerLocation",context:CameraScripts.CONTEXT.CENTER_LOCATION});const l=new s.Vector3,c=this._scene.getEntity(e),h=new s.Vector3,u=[];for(let e=0;e<t.length;e++){const n=this._scene.getEntity(t[e]);u.push(n),n.getPositionRelativeToEntity(h,s.Vector3.Zero,c,i),l.addMult(l,h,1/t.length)}let d=this._scene.getEntity("center");null===d&&(d=this._scene.addEntity("center"),d.setOrientation(s.Quaternion.Identity)),d.setParent(c),d.setPosition(l),await this._scene.getLoadedPromise(),await this._cameraManager.pioneer.waitUntilNextFrame(),r.otherEntityNames=t,await this.showLocation(d.getName(),n,o,a,r)}async showLocationInParentSystem(t,e={}){const i=this._app.getManager("scene").getParent(t);await this.showLocation(t,i,i,"northPole",e)}async showLocationInSolarSystem(t,e={}){let i=this._scene.getEntity(t).getParent();if("sun"!==i.getName())for(;"sun"!==i.getParent().getName();)i=i.getParent();else i=this._scene.getEntity("earth");await this.showLocation(t,i.getName(),"sun","planeNormal",e)}}CameraScripts.CONTEXT={CELESTIAL_OBJECT:0,SPACECRAFT:1,ALIGN_SPACECRAFT:2,LOCATION:3,SYSTEM:4,COMPARE:5,LOOK_AT:6,LOCKED_ON:7,INSTRUMENT:8,ALIGN_OBJECTS:9,CENTER_SYSTEM:10,CENTER_LOCATION:11}},function(t,e,i){"use strict";i.r(e),i.d(e,{ERTManager:function(){return ERTManager}});var s=i(2);class ERTManager extends s.BaseManager{constructor(t,{isERT:e=!1,ertTarget:i="",sceneMgr:s=null}={}){super(t),this._isERT=e,this._ertTarget=i,this._sceneMgr=s,this.getNow=this.getNow.bind(this)}isERT(){return this._isERT}setERT(t){this._isERT=t}getERTTarget(){return this._ertTarget}setERTTarget(t){this._ertTarget=t}getERTScene(){return this._sceneMgr}setERTScene(t){this._sceneMgr=t}getERTOffset(){if(null!==this._sceneMgr){return this._sceneMgr.getDistance(this._ertTarget,"earth",{subtractRadius:!0})/s.AppUtils.constants.speedOfLight}return console.warn("Clock: could not get scene manager."),0}getERTFromTime(t){const e=this.getERTOffset();return t.add(e,"s"),t}getTimeFromERT(t){const e=this.getERTOffset();return t.subtract(e,"s"),t}getNow(t){return this._isERT?this.getTimeFromERT(t):t}}},function(t,e,i){"use strict";i.r(e),i.d(e,{TimeManager:function(){return TimeManager}});var s=i(5),n=i(215),o=i.n(n),a=i(2);class TimeManager extends a.BaseManager{constructor(t){super(t),this._dateFormats={utc:{full:"YYYY-MM-D HH[:]mm[:]ss",datetime:"YYYY-MM-D HH[:]mm",date:"YYYY MMMM D",time:"HH[:]mm[:]ss",url:"YYYY-MM-DDTHH:mm:ss.SSSZ"},local:{full:"M/D/YY hh[:]mm[:]ss",datetime:"M/D/YY hh[:]mm",date:"MMMM D, YYYY",time:"hh[:]mm[:]ss",meridiem:"a"}},this._timeLimits={min:null,max:null},this._defaultLimits={min:null,max:null},this._startTime=null,this._forcedPause=!1,this._isUTC=!0,this._ertMgr=null,this._rate=0,this._defaultRate=1,this._utcTimezone="Etc/UTC",this._localTimezone=o().tz.guess(),this._previousTimeRate=this.pioneer.getTimeRate(),this._timezone=this._utcTimezone,this._eventNames.push("update","change","timezone","ratechange","forcedpause","forcedpauseresume","getnow"),this._initCallbacks(),this.setToNow(),this.pioneer.addCallback((()=>{const t=this.pioneer.getTime(),e=this.pioneer.getTimeRate();this._time=o().tz(1e3*s.TimeUtils.etToUnix(t),this._timezone);let i=o().tz(1e3*s.TimeUtils.etToUnix(t+e/this.pioneer.getFPS()),this._timezone);isNaN(i)&&(i=this._time),this._timeLimits.max&&i.valueOf()>this._timeLimits.max.valueOf()?(console.warn("[Time Manager]: Clock has reached maximum limit."),this._onLimitReach("max")):this._timeLimits.min&&i.valueOf()<this._timeLimits.min.valueOf()?(console.warn("[Time Manager]: Clock has reached minimum limit."),this._onLimitReach("min")):this._timeLimits.max&&i.valueOf()<this._timeLimits.max.valueOf()&&this._timeLimits.min&&i.valueOf()>this._timeLimits.min.valueOf()&&this._forcedPause&&(this._forcedPause=!1,0===this.getTimeRate()&&(this.play(),this.triggerCallbacks("forcedpauseresume",[this._time]))),this.triggerCallbacks("update",[this._time])}),!0)}_onLimitReach(t){0!==this.getTimeRate()&&(this._forcedPause=!0,this.pause(),this._previousTimeRate=0,this.triggerCallbacks("forcedpause",[this._time])),this.setTime(this._timeLimits[t])}setERTManager(t){this._ertMgr=t}isNow(){return 1===this._rate&&Math.abs(this._time.valueOf()-this.getNow().valueOf())<1e3}getNow(){let t=o()().tz(this._timezone);for(let e=this._callbacks.getnow.length-1;e>=0;e--){t=(0,this._callbacks.getnow[e])(t)}return t}setToNow(){this.setTime(this.getNow())}setStartTime(t){this._startTime=t}setToStart(){null!==this._startTime&&this.setTime(this._startTime)}getTime(){return this._time}setTime(t){t=this.parseTime(t);const e=this.momentToET(t);this.pioneer.setTime(e),this._time=o().tz(1e3*s.TimeUtils.etToUnix(this.pioneer.getTime()),this._timezone),this.triggerCallbacks("change",[this._time])}parseTime(t,e="url"){let i=this._isUTC,s=o().ISO_8601;if("string"==typeof t&&""!==t){const n=/^(?:[1-9]\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)T(?:[01]\d|2[0-3]):[0-5]\d(?:|:[0-5]\d)(?:\.\d{1,6})?(?:|Z|[+-][01]\d:[0-5]\d)$/;i=null!==t.match(n);const o=i?"utc":"local",a=this.getDateFormat(e,o);a&&(s=a)}else"number"==typeof t&&(i=!0);return i?o().utc(t):o().tz(t,s,!0,this._localTimezone)}etToMoment(t){return o().tz(1e3*s.TimeUtils.etToUnix(t),"Etc/UTC")}momentToET(t){const e=t.valueOf()/1e3,i=s.TimeUtils.unixToEt(e);return Math.round(1e3*i)/1e3}getTimezone(){return this._timezone}getUTCTimezone(){return this._utcTimezone}getLocalTimezone(){return this._localTimezone}isUTC(){return this._isUTC}setDisplayUTC(t){this._isUTC=t,this._timezone=this._isUTC?this._utcTimezone:this._localTimezone,this.triggerCallbacks("timezone",[t])}getDateFormats(){return this._dateFormats}setDateFormats(t){for(const[e,i]of Object.entries(t))void 0!==this._dateFormats[e]?Object.assign(this._dateFormats[e],i):this._dateFormats[e]=i}getDateFormat(t,e){return e||(e=this._isUTC?"utc":"local"),this._dateFormats[e][t]}setDateFormat(t,e){this._dateFormats[t]=e}getLimits(){return this._timeLimits}setLimits(t){this._timeLimits.min=t.min.clone(),this._timeLimits.max=t.max.clone()}getDefaultLimits(){return this._defaultLimits}setDefaultLimits(t){this._defaultLimits.min=t.min.clone(),this._defaultLimits.max=t.max.clone()}resetLimits(){this._timeLimits.min=this._defaultLimits.min.clone(),this._timeLimits.max=this._defaultLimits.max.clone()}setMin(t){this._timeLimits.min=o().tz(t,this._timezone)}resetMin(){this._timeLimits.min=this._defaultLimits.min.clone()}setMax(t){this._timeLimits.max=o().tz(t,this._timezone)}resetMax(){this._timeLimits.max=this._defaultLimits.max.clone()}getTimeUrl(t){return(t=t?o().utc(o().tz(t,this._timezone)):o().utc(this._time)).utc().format(this._dateFormats.utc.url)}getDefaultTimeRate(){return this._defaultRate}setDefaultTimeRate(t){this._defaultRate=t}resetTimeRate(){this.setTimeRate(this._defaultRate)}getTimeRate(){return this.pioneer.getTimeRate()}setTimeRate(t){this._rate=t,this.pioneer.setTimeRate(t),this.triggerCallbacks("ratechange",[this._rate])}play(){const t=0===this._previousTimeRate?this._defaultRate:this._previousTimeRate;this.setTimeRate(t)}pause(){this._previousTimeRate=this.getTimeRate(),this.setTimeRate(0)}getMidTime(t,e){const i=(t.unix()+e.unix())/2;return o()(i,"X")}getEventNames(){return this._eventNames}isWithinLimits(t){return this._timeLimits.min&&t.isBefore(this._timeLimits.min)?-1:this._timeLimits.max&&t.isAfter(this._timeLimits.max)?1:0}get timeLimits(){return this._timeLimits}get forcedPause(){return this._forcedPause}get previousTimeRate(){return this._previousTimeRate}}},function(t,e,i){"use strict";i.r(e),i.d(e,{ComparisonManager:function(){return ComparisonManager}});var s=i(5),n=i(2),o=i(528);class ComparisonManager extends n.BaseManager{constructor(t,e){super(t),this._scene=e,this.bindFunctions(["adjustZoomFromViewport","zoomIn","zoomOut"]),this._comparisonScene=null,this._leftEntity=null,this._rightEntity=null,this._leftPosition=new s.Vector3(0,1e10,0),this._rightPosition=new s.Vector3(0,-1e10,0),this._componentsToBeCopied=["rings","atmosphere","model","spheroid","spheroidLOD","div"],this._isComparisonOn=!1,this._activeViewports=[],this._customRotations={rose_bowl:{x:45},sc_juno:{x:45},saturn:{x:25},sc_lucy:{z:-90,y:-25},sc_ixpe:{z:-90,y:180},sc_hubble_space_telescope:{x:90,z:90}},this._zoomSensitivity={click:.3,hold:.1},this._replacements={sun:"sun_compare"},this._init()}_init(){this._leftViewport=this.pioneer.addViewport("left-viewport"),this._leftViewport.getDiv().className="compare left-desktop",this._leftViewport.setEnabled(!1),this._rightViewport=this.pioneer.addViewport("right-viewport"),this._rightViewport.getDiv().className="compare right-desktop",this._rightViewport.setEnabled(!1),this._comparisonScene=this.app.getManager("scene").add("comparison"),this._comparisonScene.setAmbientLightColor(new s.Color(.005,.005,.005)),this._leftCameraEntity=this._comparisonScene.addEntity("leftCamera"),this._leftCamera=this._leftCameraEntity.addComponent("camera"),this._leftLight=this._leftCameraEntity.addComponent("lightSource"),this._leftLight.setEnabled(!1),this._rightCameraEntity=this._comparisonScene.addEntity("rightCamera"),this._rightCamera=this._rightCameraEntity.addComponent("camera"),this._rightLight=this._rightCameraEntity.addComponent("lightSource"),this._rightLight.setEnabled(!1),this._leftViewport.setCamera(this._leftCamera),this._rightViewport.setCamera(this._rightCamera),o.Entity.create("observable_universe",this._comparisonScene),o.Entity.create("milky_way",this._comparisonScene),this._sun=o.Entity.create("sun",this._comparisonScene),this._sun.getComponentByType("div").setEnabled(!1),this._sun.getComponentByType("atmosphere").setEnabled(!1),this._sun.getComponentByType("sprite").setEnabled(!1),this._sun.getComponentByType("spheroidLOD").setEnabled(!1),this._sunLight=this._sun.get("lightSource"),this.pioneer.addCallback(this.adjustZoomFromViewport,!0)}setScene(t){this._scene=t}adjustZoomFromViewport(){if(!this._leftViewport||!this._leftViewport.isEnabled())return!1;if(!this._rightViewport||!this._rightViewport.isEnabled())return!1;if(!this._leftCameraEntity||!this._rightCameraEntity)return!1;let t=this._leftCameraEntity.getPosition().magnitude();Number.isNaN(t)&&(t=1);const e=this._app.pioneer.getInput().getActiveViewport();e&&"right-viewport"===e._name&&(t=this._rightCameraEntity.getPosition().magnitude(),Number.isNaN(t)&&(t=1));const i=s.Vector3.pool.get();i.normalize(this._leftCameraEntity.getPosition()),i.mult(i,t);const n=s.Vector3.pool.get();return n.normalize(this._rightCameraEntity.getPosition()),n.mult(n,t),this._leftCameraEntity.setPosition(i),this._rightCameraEntity.setPosition(n),!0}zoomIn(t=!1){let e=1;const i=t?this._zoomSensitivity.hold:this._zoomSensitivity.click;e/=Math.pow(2,i);const s=this.app.getManager("camera");s.zoom(e,this._leftCameraEntity),s.zoom(e,this._rightCameraEntity)}zoomOut(t=!1){let e=1;const i=t?this._zoomSensitivity.hold:this._zoomSensitivity.click;e*=Math.pow(2,i);const s=this.app.getManager("camera");s.zoom(e,this._leftCameraEntity),s.zoom(e,this._rightCameraEntity)}_createCopy(t,e){if(null!==this._leftEntity&&this._leftEntity.getName()===t&&"left"===e||null!==this._rightEntity&&this._rightEntity.getName()===t&&"right"===e)return;"left"===e&&null!==this._leftEntity&&this._leftEntity.getName()!==t?(this._leftCameraEntity.setParent(this._sun),this._comparisonScene.removeEntity(this._leftEntity)):"right"===e&&null!==this._rightEntity&&this._rightEntity.getName()!==t&&(this._rightCameraEntity.setParent(this._sun),this._comparisonScene.removeEntity(this._rightEntity));let i=null;const s=this._scene.get(t);i=t in this._replacements?this._comparisonScene.addEntity(this._replacements[t]):this._comparisonScene.addEntity(t),i.setParent(this._sun),i.setExtentsRadius(s.getExtentsRadius()),i.setOcclusionRadius(s.getOcclusionRadius());for(let n=0;n<s.getNumComponents();n++)if(this._componentsToBeCopied.includes(s.getComponent(n)._type))switch(s.getComponent(n)._type){case"spheroid":this._copySpheroid(i,s.getComponent(n));break;case"spheroidLOD":this._copySpheroidLOD(i,s.getComponent(n));break;case"rings":this._copyRings(i,s.getComponent(n));break;case"div":this._copyDiv(i,s.getComponent(n),e);break;case"model":"sun"!==t&&this._copyModel(i,s.getComponent(n));break;case"atmosphere":this._copyAtmosphere(i,s.getComponent(n))}"left"===e?this._leftEntity=i:this._rightEntity=i}_copySpheroid(t,e){const i=t.addComponent("spheroid");i.setEquatorialRadius(e.getEquatorialRadius()),i.setPolarRadius(e.getPolarRadius())}_copySpheroidLOD(t,e){const i=t.addComponent("spheroidLOD"),s=e.getTextureNames();for(let t=0;t<s.length;t++){const n=s[t],o=e.getTextureSizes(n),a=e.getTextureUrl(n);i.setTexture(n,a,o)}i.setMapping(e.getMapping());const n=e._features.entries();for(const t of n)i.setFeature(t[0],!0)}_copyRings(t,e){const i=t.addComponent("rings");i.setInnerRadius(e.getInnerRadius()),i.setOuterRadius(e.getOuterRadius()),i.setTopTextureUrl(e.getTopTextureUrl()),i.setBottomTextureUrl(e.getBottomTextureUrl())}_copyModel(t,e){const i=t.addComponent("model");i.setScale(e.getScale()),i.setRotation(e.getRotation()),""!==e._environmentCubemapUrl?i.setEnvironmentCubemapUrl(e._environmentCubemapUrl):""!==e._environmentCylindricalUrl&&i.setEnvironmentCylindricalUrl(e._environmentCylindricalUrl),i.setUrl(e.getUrl())}_copyAtmosphere(t,e){const i=t.addComponent("atmosphere");i.setDensity(e.getDensity()),i.setScaleHeight(e.getScaleHeight()),i.setEmissivity(e.getEmissivity()),i.setColor(e.getColor()),i.setSunBrightness(e.getSunBrightness()),i.setSunsetColor(e.getSunsetColor()),i.setSunsetIntensity(e.getSunsetIntensity())}_copyDiv(t,e,i){const s=t.addComponent("div");"left"===i?s.setActiveCamera(this._leftCamera):s.setActiveCamera(this._rightCamera),s.setAlignment(e.getAlignment()),s.getDiv().innerHTML=e.getDiv().innerHTML;let n=t.getName();for(const t in this._replacements)if(n===this._replacements[t]){n=t;break}const o=this.app.getManager("content").getClassName(n);s.getDiv().className="pioneer-label-div no-select "+o}_positionEntity(t,e){t.setOrientation(s.Quaternion.Identity);let i=this._leftPosition;"right"===e&&(i=this._rightPosition);const n=new s.Vector3,o=new s.Quaternion,a=t.getName();if(void 0!==this._customRotations[a]){o.set(1,0,0,0);for(const t in this._customRotations[a]){let i,n=this._customRotations[a][t];if("right"===e&&(n*=-1),"x"===t)i=new s.Vector3(1,0,0);else if("y"===t)i=new s.Vector3(0,1,0);else{if("z"!==t)throw new Error("Invalid model rotate axis.");i=new s.Vector3(0,0,1)}n=s.MathUtils.degToRad(n);const r=new s.Quaternion;r.setFromAxisAngle(i,n),o.mult(o,r)}}else t.getOrientation().getAxis(n,2),o.setFromAxisAngle(n,s.MathUtils.degToRad(180));t.setOrientation(o),t.setPosition(i)}_showViewports(){this._isComparisonOn=!0;const t=this.pioneer.getNumViewports();for(let e=0;e<t;e++){const t=this.pioneer.getViewport(e);t.isEnabled()&&(this._activeViewports.push(e),t.setEnabled(!1))}this._leftViewport.setEnabled(this._isComparisonOn),this._rightViewport.setEnabled(this._isComparisonOn)}_hideViewports(){this._isComparisonOn=!1,this._leftViewport.setEnabled(this._isComparisonOn),this._rightViewport.setEnabled(this._isComparisonOn);for(let t=0;t<this._activeViewports.length;t++){const e=this._activeViewports[t];this.pioneer.getViewport(e).setEnabled(!0)}this._activeViewports=[]}async compare(t,e){if(null===this._scene.get(t)&&o.Entity.create(t,this._scene),null===this._scene.get(e)&&o.Entity.create(e,this._scene),null===this._scene.get(t)||null===this._scene.get(e))return;if(this._createCopy(t,"left"),this._positionEntity(this._leftEntity,"left"),this._createCopy(e,"right"),this._positionEntity(this._rightEntity,"right"),this._leftEntity.setEnabled(!0),this._rightEntity.setEnabled(!0),!this._isComparisonOn){this._showViewports();const t=new CustomEvent("comparisonenter",{detail:{}});window.dispatchEvent(t)}const i=new s.Quaternion;i.setFromAxes(new s.Vector3(0,-1,0),void 0,new s.Vector3(0,0,1));const n=o.Cameras.getDistanceToFitEntities(this._leftCameraEntity,i,this._leftEntity,[this._leftEntity]);i.setFromAxes(new s.Vector3(0,1,0),void 0,new s.Vector3(0,0,1));const a=o.Cameras.getDistanceToFitEntities(this._rightCameraEntity,i,this._rightEntity,[this._rightEntity]);let r=Math.max(a,n);r*=1.6;const l=new s.Vector3(0,-1,0);l.mult(l,r);const c=new s.Vector3(0,1,0);c.mult(c,r);const h=new s.Vector3(0,0,1);this._leftCameraEntity.clearControllers(),this._rightCameraEntity.clearControllers();const u={cameraLeft:this._leftCameraEntity,cameraRight:this._rightCameraEntity,cameraLeftPosition:l,cameraRightPosition:c,cameraUp:h,minRadius:.5*r,maxRadius:10*r,scene:this._comparisonScene};t in this._replacements&&(t=this._replacements[t]),e in this._replacements&&(e=this._replacements[e]),await this.app.cameraScripts.compareObjects(t,e,u)}isACopy(t){return!!t.getName().includes("_copy")}toggleCameraLight(t,e){this._leftLight.setEnabled(t),this._rightLight.setEnabled(t),void 0!==e&&(this._leftLight.setColor(e),this._rightLight.setColor(e)),this._sunLight.setEnabled(!t)}clear(){null!==this._leftEntity&&this._leftEntity.setEnabled(!1),null!==this._rightEntity&&this._rightEntity.setEnabled(!1)}exit(){this.clear(),this._leftEntity&&this._comparisonScene.removeEntity(this._leftEntity),this._leftCameraEntity.setParent(this._sun),this._leftEntity=null,this._rightEntity&&this._comparisonScene.removeEntity(this._rightEntity),this._rightCameraEntity.setParent(this._sun),this._rightEntity=null,this._isComparisonOn&&this._hideViewports();const t=new CustomEvent("comparisonexit",{detail:{}});window.dispatchEvent(t)}isComparing(){return this._isComparisonOn}getScene(){return this._comparisonScene}}},function(t,e,i){"use strict";i.r(e),i.d(e,{SearchManager:function(){return SearchManager}});var s=i(671),n=i(2);class SearchManager extends n.BaseManager{constructor(t,e={}){super(t),this._maxEntries=10,this._fuse=null,this._database=null,this._options={threshold:.4,keys:[{name:"id",weight:.99},{name:"name",weight:.98}],includeScore:!0,includeMatches:!0,ignoreLocation:!0,...e}}setOptions(t){Object.assign(this._options,t),this._fuse=new s.default(this._database,this._options)}setDatabase(t,e={}){t?(Object.assign(this._options,e),this._database=Object.keys(t).filter((e=>!1!==t[e].searchable)).map((e=>{const i=t[e].keywords||[];return i.map((t=>({value:t}))),t[e].keywords=i,t[e]})),Array.isArray(this._database)?this._fuse=new s.default(this._database,this._options):console.error("[SearchManager.setDatabase] Database is not an array.")):console.error("[SearchManager.setDatabase] Missing database.")}getEntry(t){return this._database.find((e=>e.id===t))}find(t){if(""===t||null==t||!this._fuse)return null;let e=this._fuse.search(t);return e=e.slice(0,this._maxEntries),e}}},,function(t,e,i){"use strict";i.r(e),i.d(e,{BaseView:function(){return BaseView}});var s=i(215),n=i.n(s),o=i(528),a=i(2);class BaseView extends a.BaseComponent{constructor(t,e,i=[]){super(t,e),this._components=[...i],this._validQueries=[],this._rules={},this._target=null,this._enabled=!1,this.bindFunctions(["resize","updateVisibility","toggleViewUI"])}get app(){return super.app}_showControls(){}_hideControls(){}_shouldHideControls(){return!1}updateVisibility(){this._app.getManager("layer").getLayer("ui").visible&&(this._shouldHideControls()?this._hideControls():this._showControls())}resize(){this.updateVisibility()}toggleViewUI(){}_shouldResetStatus(){return this._app.getManager("layer").getLayer("ui").visible}_resetStatus(t=[]){if(this._shouldResetStatus()){const e=Object.keys(this._app.getComponents());for(let i=e.length-1;i>=0;i--){const s=e[i];t.includes(s)||this._app.getComponent(s).setEnabled(this._components.includes(s))}}}registerCallbacks(){this._app.getManager("layer").addCallback("ui",this.toggleViewUI)}removeCallbacks(){this._app.getManager("layer").removeCallback("ui",this.toggleViewUI)}async onEnter(t,e=[]){if(t.cancelToken.isCanceled)return;this._resetStatus(e),window.addEventListener("resize",this.resize),this.registerCallbacks();const i=this._app.getManager("router").currentView+"-view";document.body.classList.add(i),this._app.getManager("router").configs.locked&&(document.body.classList.add("locked"),this._app.getManager("label").setClickable(!1),this._app.getManager("selection").setClickable(!1))}async onRouteChange(t){if(await this.before(t),!t.cancelToken.isCanceled&&(this._reset(t),await this._updateResources(t),!t.cancelToken.isCanceled&&(t.setTimeLimits=!0,await this.processQuery(t),await this._updateComponentsVisibility(t),!t.cancelToken.isCanceled))){await this._checkReady(t);try{await this._updateCamera(t),this._updateLoading(t)}finally{await this.after(t)}}}async onQueryChange(t){t.cancelToken.isCanceled||await this.processQuery(t)}validateQuery(t){const e={...t},i=Object.keys(e),s={},n={},o=this._app.getManager("router");for(let t=i.length-1;t>=0;t--){const a=i[t];if(!(a in this._rules)){delete e[a];continue}const r=this._rules[a];if(!("function"==typeof r.value?r.value(e[a]):r.value===e[a])){if(n[a]=e[a],"function"==typeof this._rules.redirect)return this._rules.redirect(e[a]),!1;if("route"in r)return o.navigate(r.route),!1;"default"in r&&(s[a]=r.default)}}return a.AppUtils.isEmptyObject(s)?!!a.AppUtils.isEmptyObject(n)||(this._handleError(`validateQuery: Invalid input - ${JSON.stringify(n)}`),!1):(o.navigate({...e,...s}),!1)}async processQuery(t){await this._updateTime(t),this._updateTimeRate(t);const e=this._app.getManager("router"),i=e.parseQuery(e.previousRoute?.query);for(const s of Object.keys(e._queryCallbacks)){const n=t[s],o=i[s];(n||o)&&e._queryCallbacks[s].forEach((t=>t(n,o)))}const s=this._app.getManager("layer"),n=this._app.getComponent("layerPanel"),o={layerUI:"ui",layerTrails:"trails",layerOrbits:"orbits",layerLabels:"labels",layerIcons:"icons",layerPlanets:"planets",layerAsteroids:"asteroids",layerComets:"comets",layerDwarfPlanets:"dwarfPlanets",layerConstellations:"constellations",layerSpacecraft:"spacecraft"};for(const e in o)if(e in t){const i=o[e];"disable"===t[e]?n?.setCategoryEnabled(i,!1):n?.isCategoryEnabled(i)&&("show"===t[e]?s.getLayer(i).visible||n.toggleLayer(i):"hide"===t[e]&&s.getLayer(i).visible&&n.toggleLayer(i))}}_handleError(t=""){const e=new Error(t);console.error(e);if(null!==this._app.getManager("router")){let t=this._app.getManager("router").previousRoute.url;t||(t=this._app.getManager("router").homeRoute),this._app.getManager("router").navigate(t)}}onLeave(t){window.removeEventListener("resize",this.resize),this.removeCallbacks();const e=this._app.getManager("router").previousView+"-view";document.body.classList.remove(e),this._app.getManager("selection").unselect(),this._app.getManager("scene").clearForceLoad(),this._validQueries.length&&this._app.getManager("router").navigate({__remove:this._validQueries})}_reset(t){this._app.getManager("scene").clearForceLoad()}async _updateResources(t){}_updateTimeRate(t){const e=this._app.getManager("time");"rate"in t?e.setTimeRate(parseInt(t.rate)):e.resetTimeRate()}async _updateTime(t){const e=this._app.getManager("time");if(this._target||(e.resetMin(),e.resetMax()),this._target)await this._updateTimeForTarget(t);else if(t.time){this._app.getManager("time").parseTime(t.time).isValid()?this._app.getManager("time").setTime(t.time):this._app.getManager("router").navigate({__remove:["time"]})}else this._app.getManager("time").setToNow()}async _updateTimeForTarget(t,e=!0){const i=this._app.getManager("time");let s=i.timeLimits.min.clone(),o=i.timeLimits.max.clone();if(t.setTimeLimits){const t=i.getDefaultLimits();s=t.min.clone(),o=t.max.clone(),e&&await this._app.getManager("scene").get("main").getEntity(this._target).getLoadedPromise();const a=this._app.getManager("scene").getCoverage(this._target);if(null!==a.min&&(s=n().max(s,a.min)),null!==a.max&&(o=n().min(o,a.max)),this._entityDesc?.dates?.start){const t=i.parseTime(this._entityDesc.dates.start);s=n().max(t,s)}if(this._entityDesc?.dates?.end){const t=i.parseTime(this._entityDesc.dates.end);o=n().min(t,o)}if(s.isAfter(o)){console.error("Start date provided is after end date.");const t=this._app.getManager("router");return this._app.getComponent("clock")?.setLimitMessage(1,"time limit error"),void setTimeout((()=>t.navigate("/")),1e3)}i.setMax(o),i.setMin(s)}if(!t.time&&this._eventInfo?.start){const t=i.parseTime(this._eventInfo.start);i.setTime(n().max(t,s))}else if(t.time){const e=i.parseTime(t.time);e.isAfter(o)?(i.setTime(o),i.setTimeRate(0),this._app.getComponent("clock")?.setLimitMessage(1)):e.isBefore(s)?(i.setTime(s),this._app.getComponent("clock")?.setLimitMessage(-1)):i.setTime(e)}else{const t=this._app.getManager("time").getNow();t.isAfter(o)||t.isBefore(s)?i.setTime(s):i.setToNow()}}async _updateComponentsVisibility(t){await this._updateComponents(t),t.cancelToken.isCanceled||this.updateVisibility()}async _updateComponents(t){}async _updateCamera(t){}_updateLoading(t){if(null!==this._target){const t=[],e=["model","wmts","spheroidLOD"],i=this._app.getManager("scene"),s=this._app.getManager("content").getEntityInfo(this._target)?.category;s&&"Instrument"===s&&i.addLoading(i._scene.getEntity(this._target).getParent().getName(),"view"),i.addLoading(this._target,"view");for(let s=0;s<e.length;s++){const n=i.get("main").get(this._target,e[s]);null!==n&&(i.forceLoad(n),t.push(i.componentIsReady(n)))}Promise.all(t).then((()=>{s&&"Instrument"===s&&i.removeLoading(i._scene.getEntity(this._target).getParent().getName(),"view"),i.removeLoading(this._target,"view")}))}}async _checkReady(t){if(null===this._target)return;const e=[];let i=this._target;for(;"sun"!==i;){e.push(i);const t=this._app.getManager("scene").get("main").get(i)?.getParent();if(!t)break;i=t.getName()}await o.SceneHelpers.waitTillEntitiesInPlace(this._app.getManager("scene").get("main"),e),await this._app.pioneer.waitUntilNextFrame()}async before(t){}after(t){this._app.getManager("layer").resetTarget(),this._app.getManager("scene").clearTempEntities()}}},function(t,e,i){"use strict";i.r(e),i.d(e,{BaseApp:function(){return BaseApp}});var s=i(215),n=i.n(s),o=i(5),a=i(528),r=(i(674),i(687)),l=i(688),c=i(689),h=i(2);class BaseApp{static setAppClass(){BaseApp._appClass=this}constructor(t){window.app=this,this._pioneer=null,this._scene=null,this._router=null,this._element=null,this._dynamicElement=null,this._timeInfo={},this._sceneInfo=void 0,this._cameraScripts=new h.CameraScripts(this),this._componentInfo=[],this._componentTypes=t,this._managers={},this._components={},this._views={},this._viewInfo=[],this._viewClasses={},this._updates=[],this.isTouch=null,this.canHover=null,this._touchStartPos={x:0,y:0},this._dragging=!1,this.bindFunctions(["resize","onTouchStart","onTouchMove","onTouchEnd","update"]),this._touchCount=0,this._scrollable=!1,this._touchMax=!1,window.addEventListener("touchstart",this.onTouchStart,!1),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd);const e=window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",this.resize,!1),this.resize()}async init(){this._element=document.getElementById("ui"),this._dynamicElement=document.getElementById("dynamic-ui");const t=document.getElementById("pioneer");t.style.position="absolute",this._pioneer=new o.Engine(t),"string"==typeof window.config.staticAssetsUrl&&this._pioneer.getDownloader().setReplacement("STATIC_ASSETS_URL",window.config.staticAssetsUrl),"string"==typeof window.config.dynamicAssetsUrl&&this._pioneer.getDownloader().setReplacement("DYNAMIC_ASSETS_URL",window.config.dynamicAssetsUrl),"string"==typeof window.config.animdataUrl&&this._pioneer.getDownloader().setReplacement("ANIMDATA_URL",window.config.animdataUrl),this._pioneer.getConfig().setValue("fontFamily","Raleway"),this._pioneer.getConfig().setValue("fontSize",16),this._pioneer.getConfig().setValue("pbr",!0),this._pioneer.registerComponentType("orbiterLineOfSight",h.OrbiterLineOfSightComponent),this._pioneer.registerComponentType("wmts",a.WMTSComponent),this._pioneer.registerComponentType("discGrid",a.DiscGridComponent),this._pioneer.registerComponentType("torus",a.TorusComponent),this._pioneer.registerComponentType("constellations",a.ConstellationsComponent),this._pioneer.registerControllerType("positionSum",a.PositionSumController),this._pioneer.registerControllerType("zoomFit",a.ZoomFitController),this._pioneer.registerComponentType("orbitLine",a.OrbitLineComponent),this._pioneer.setTime(o.TimeUtils.now()),this._pioneer.setTimeRate(1),await this.createManagers(),await this.createComponents(),this.setUpRoutes(),this.setUpUpdates(),this.getManager("router").start()}get pioneer(){return this._pioneer}get scene(){return this._scene}set scene(t){this._scene=t}get cameraScripts(){return this._cameraScripts}get dynamicElement(){return this._dynamicElement}get sceneInfo(){return this._sceneInfo}get element(){return this._element}set element(t){this._element=t}addManager(t,e,...i){return void 0===this._managers[t]&&(this._managers[t]=new e(this,...i)),this._managers[t]}removeManager(t){void 0!==this._managers[t]&&(this._managers[t].destroy(),delete this._managers[t])}getManager(t){return void 0!==this._managers[t]?this._managers[t]:null}async createManagers(){const t=h.Types.get("TimeManager"),e=this.addManager("time",t),i=n().tz("1949-12-31","Etc/UTC"),s=n().tz("2049-12-31","Etc/UTC");e.setDefaultLimits({min:i,max:s}),e.setLimits({min:i,max:s});const o=this.addManager("content",h.ContentManager);o.setEntityList(r),o.setSpheroidLayers(l.default),o.setSpheroidFeatures(c.default),o.setFolders({description:"descriptions/",event:"events/",stories:"stories/"});const a=this.addManager("scene",h.SceneManager);this._scene=a.main;const u=this.addManager("layer",h.LayerManager);u.addLayer("ui",{name:"User Interface"}),u.addLayer("trails",{name:"Trails"}),u.addLayer("orbits",{name:"Orbits"}),u.addLayer("labels",{name:"Labels"}),u.addLayer("icons",{name:"Icons"}),u.addLayer("planets",{name:"Planets",categories:"Planet"}),u.addLayer("asteroids",{name:"Asteroids",categories:"Asteroid",defaultVisibility:!1}),u.addLayer("comets",{name:"Comets",categories:"Comet",defaultVisibility:!1}),u.addLayer("dwarfPlanets",{name:"Dwarf Planets",categories:"Dwarf Planet",defaultVisibility:!1}),u.addLayer("spacecraft",{name:"Spacecraft",categories:"Spacecraft",sublayers:["orbiters","landers"]}),u.addLayer("majorMoons",{name:"Major Moons",categories:"Major Moon",group:"moons"}),u.addLayer("minorMoons",{name:"Minor Moons",categories:"Minor Moon",defaultVisibility:!1,group:"moons"}),u.addLayer("orbiters",{name:"Orbiters",categories:"Orbiter",group:"spacecraft"}),u.addLayer("landers",{name:"Landers",categories:["Lander","Rover","Landing site"],group:"spacecraft"}),u.addLayer("starfield",{name:"Star Field",defaultVisibility:!1}),u.addLayer("heliosphere",{name:"Heliosphere",defaultVisibility:!1}),u.addLayer("constellations",{name:"Constellations",categories:"Constellations",defaultVisibility:!1});const d=this.addManager("camera",h.CameraManager,this._scene);this._cameraScripts.setCameraManager(d),d.createViewportAndCamera(this._scene),this.addManager("search",h.SearchManager,{keys:[{name:"iauName",weight:.99},{name:"displayName",weight:.98},{name:"altName",weight:.98},{name:"keywords",weight:.3},{name:"category",weight:.3}]}),this.addManager("comparison",h.ComparisonManager,this._scene);const p=h.Types.get("LabelManager"),_=this.addManager("label",p,this._scene);_.setWeights(o.getEntityList()),_.setAlgorithm(p.Quadtree);const g=h.Types.get("SelectionManager"),m=this.addManager("selection",g,this._scene);m.init3Dcallback(d),_.registerCallback("labelclicked",m.setSuppress);const y=this.addManager("router",h.RouteManager);y.setValidQueries(["time","rate"]),y.init(),y.addConfigs({embed:void 0,logo:void 0,content:void 0,featured:void 0,search:void 0,menu:void 0,locked:void 0});const f=this.addManager("trail",h.TrailManager,this._scene);_.registerCallback("hoverchange",f.onHoverChange),u.addCallback("trails",f.toggleTrails),u.addCallback("orbits",f.toggleOrbits),u.addCallback("labels",_.toggleLabels),u.addCallback("icons",_.toggleIcons),u.addCallback("starfield",a.toggleStarfield),u.addCallback("heliosphere",a.toggleHeliosphere),u.addCallback("constellations",a.toggleConstellations),this.addViews(),this.setUpViewportAndCamera(),await this.setUpScene(),this.setUpManagers(),await this.setUpComponents(),this._pioneer.addCallback(this.update,!0)}setUpManagers(){const t=this.scene,e=this.getManager("trail"),i=this.getManager("time");let{limits:s}=this._timeInfo;s?(s.min="min"in s&&"-Infinity"!==s.min?this.getManager("time").parseTime(s.min):n()(h.AppUtils.constants.minDate),s.max="max"in s&&"Infinity"!==s.max?this.getManager("time").parseTime(s.max):n()(h.AppUtils.constants.maxDate)):s={min:n()(h.AppUtils.constants.minDate),max:n()(h.AppUtils.constants.maxDate)},i.setDefaultLimits(s),i.setLimits(s),this.getManager("label").setScene(t),this.getManager("selection").setScene(t),this.getManager("comparison").setScene(t),e.setScene(t),e.ids=Array.from(this.getManager("scene").getEntitiesNames()),e.setColor(e.ids)}async addComponent(t,e,...i){if(void 0!==this._components[t])throw new Error(`Component ${t} was already added.`);const s=new e(this,...i);return this._components[t]=s,await s.init(),s}async addComponentWithPlaceholder(t,e=document,i=null){if(t.args||(t.args=[]),t.options||(t.options={}),!i){const s=Array.from(e.getElementsByTagName(t.type.name));if(!(i=s.find((e=>e instanceof HTMLElement&&e.id===t.name)))&&s[0]instanceof HTMLElement&&(i=s[0]),!i)return Promise.reject(new Error(`addComponentWithPlaceholder: There is no placeholder element for ${t.type}`))}Object.assign(t.options,h.AppUtils.convertObjType({...i.dataset}));const s=await this.addComponent(t.name,t.type,...t.args,t.options);return s.setParent(i.parentElement,i),s}removeComponent(t){return void 0!==this._components[t]&&(this._components[t].destroy(),delete this._components[t],!0)}removeComponents(){for(let t=0;t<this._componentInfo.length;t++)this.removeComponent(this._componentInfo[t].name)}getComponent(t){return void 0!==this._components[t]?this._components[t]:null}getComponents(){return this._components}async createComponents(){const t=[{name:"loadIcon",type:"LoadIcon"},{name:"overlay",type:"Overlay",options:{isOpenButtonVisible:!1}}];for(let e=0;e<t.length;e++){const{name:i,type:s,hasPlaceholder:n,args:o,options:a,postCreationFunction:r}=t[e],l=h.Types.get(s),c=await l.create(this,i,l,n,o,a);r&&r(this,c)}}async setUpComponents(){this.dynamicElement.innerHTML=this.constructor.html;for(let t=0;t<this._componentInfo.length;t++){const{name:e,type:i,hasPlaceholder:s,args:n,options:o,postCreationFunction:a}=this._componentInfo[t],r=h.Types.get(i),l=await r.create(this,e,r,s,n,o);a&&a(this,l)}}getViews(){return this._views}addViews(){for(let t=0;t<this._viewInfo.length;t++){const e=this._viewInfo[t];this.addView(e.name,this._viewClasses[e.class],this._element,e.components)}}removeViews(){for(const t in this._views)this.removeView(t)}getView(t){return void 0!==this._views[t]?this._views[t]:null}addView(t,e,...i){return void 0===this._views[t]&&(this._views[t]=new e(this,...i)),this._views[t]}removeView(t){void 0!==this._views[t]&&delete this._views[t]}async setUpScene(){if(void 0===this._sceneInfo)return void console.error("App._sceneInfo needs to be set.");this.getManager("camera").defaultMaxDistance=this._sceneInfo.zoomMax||2e18;const t=this.getManager("scene");t.addEntitiesFromSceneInfo(this._sceneInfo);const e=this.getManager("label"),i=this.getManager("trail"),s=this.getManager("camera");t.addEntityLoadedCallback(e.setUpLabel),t.addEntityLoadedCallback(i.setUpTrail),t.addEntityLoadedCallback(e.setUpIcon),t.addEntityLoadedCallback(s.addDynamicEnvMap),t.addEntityLoadedCallback((t=>{"sc_perseverance_landing_site"===t.getName()||"sc_mars_science_laboratory_landing_site"===t.getName()?t.get("div").setEnabled(!1):"sc_mars_science_laboratory"===t.getName()&&t.get("div").setFadeWhenCloseToEntity("mars")})),t.addEntityWillBeUnloadedCallback(e.removeLabel),t.update(),this.scene=this.getManager("scene").main,this.scene.get("sun","model")?.setEnabled(!1)}setUpViewportAndCamera(){const t=this.getManager("scene").main,e=this.getManager("camera");e.createViewportAndCamera(t),this.cameraScripts.scene=t,this.cameraScripts.cameraEntity=e.cameraEntity}setUpUpdates(){this.addUpdate(this.getManager("scene").update),this.addUpdate(this.getManager("label").update),this.addUpdate(this.getManager("camera").update)}addUpdate(t){"function"==typeof t&&this._updates.push(t)}removeUpdate(t){const e=this._updates.indexOf(t);e<0||this._updates.splice(e,1)}update(){for(let t=0;t<this._updates.length;t++){(0,this._updates[t])()}}bindFunctions(t=[]){const e=this;for(let i=0;i<t.length;i++){const s=t[i];e[s]=e[s].bind(this)}}endLoadingScreen(){const t=document.getElementById("loading-screen");if(t){const e=400;t.style.transition=`opacity ${e/1e3}s ease-out`,t.style.opacity=0,setTimeout((()=>{t.remove()}),e)}}setUpRoutes(){}isDragging(){return this._dragging}isTouchMax(){return this._touchMax}resize(){const t=window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`),document.body.style.height=t+"px";const e=h.AppUtils.isTouch(),i=h.AppUtils.canHover();this.isTouch!==e&&(document.body.classList.toggle("touch",e),this.isTouch=e),this.canHover!==i&&(document.body.classList.toggle("hover",i),this.canHover=i),setTimeout((()=>{if(t!==window.innerHeight){const t=window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`),document.body.style.height=t+"px"}}),1e3)}onTouchStart(t){this._touchCount++,this._touchMax=this._touchCount>1;const e=t.changedTouches[0];this._touchStartPos.x=e.pageX,this._touchStartPos.y=e.pageY,this._dragging=!1,this._scrollable=!1;let i=t.target;for(;null!==i.parentElement;){if(i.classList.contains("scrollable")){this._scrollable=!0;break}i=i.parentElement}}onTouchMove(t){const e=t.changedTouches[0];Math.max(Math.abs(e.pageX-this._touchStartPos.x),Math.abs(e.pageY-this._touchStartPos.y))>5&&(this._dragging=!0),this._scrollable||t.preventDefault()}onTouchEnd(t){this._touchCount--,0===t.touches.length&&(this._touchMax=!1),this._dragging=!1,this._scrollable=!1}getVersion(){return h.Version}}window.addEventListener("load",(async()=>{try{const t=new BaseApp._appClass;await t.init()}catch(t){throw document.body.innerHTML="",t}})),BaseApp._appClass=BaseApp,window.Pioneer=o,window.PioneerScripts=a},function(t,e,i){"use strict";i.r(e);i(675),i(676),i(677),i(678),i(679),i(680),i(681),i(682),i(683),i(684),i(685),i(686)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t){"use strict";t.exports=JSON.parse('{"observable_universe":{"id":"observable_universe","displayName":"Observable universe","category":"Universe","searchable":false},"milky_way":{"id":"milky_way","displayName":"Milky way","category":"Galaxy","searchable":false},"sun":{"id":"sun","iauName":"Sun","category":"Star","subcategory":"Yellow Dwarf Star","planeEntity":"earth","keywords":["star","solar system"]},"mercury":{"id":"mercury","iauName":"Mercury","category":"Planet","subcategory":"Terrestrial","keywords":["terrestrial planet","solar system","planets"]},"venus":{"id":"venus","iauName":"Venus","category":"Planet","subcategory":"Terrestrial","keywords":["terrestrial planet","solar system","planets"]},"earth":{"id":"earth","iauName":"Earth","category":"Planet","subcategory":"Terrestrial","hasMoons":true,"planeEntity":"moon","keywords":["terrestrial planet","solar system","planets"]},"mars":{"id":"mars","iauName":"Mars","category":"Planet","subcategory":"Terrestrial","hasMoons":true,"keywords":["terrestrial planet","solar system","planets"]},"jupiter":{"id":"jupiter","iauName":"Jupiter","category":"Planet","subcategory":"Gas Giant","hasMoons":true,"keywords":["gas giant","solar system","planets"]},"saturn":{"id":"saturn","iauName":"Saturn","category":"Planet","subcategory":"Gas Giant","hasMoons":true,"keywords":["gas giant","solar system","planets"]},"neptune":{"id":"neptune","iauName":"Neptune","category":"Planet","subcategory":"Ice Giant","hasMoons":true,"keywords":["ice giant","solar system","planets"]},"uranus":{"id":"uranus","iauName":"Uranus","category":"Planet","subcategory":"Ice Giant","hasMoons":true,"keywords":["gas giant","solar system","planets","1781"]},"134340_pluto":{"id":"134340_pluto","iauName":"134340 Pluto","displayName":"Pluto","category":"Dwarf Planet","keywords":["dwarf planet","solar system","dwarf planet","trans-neptunian object","plutoid","kuiper belt object","plutino","synchronous","1930"]},"134340_pluto_barycenter":{"id":"134340_pluto_barycenter","displayName":"Pluto system","hasMoons":true,"comparisonFeature":false,"category":"Dwarf Planet","subcategory":"Barycenter","planeEntity":"134340_pluto","forceVisibleEntities":["134340_pluto"],"keywords":["barycenter"]},"617_patroclus_barycenter":{"id":"617_patroclus_barycenter","displayName":"Patroclus barycenter","category":"Asteroid","subcategory":"Barycenter","comparisonFeature":false,"forceVisibleEntities":["617_patroclus","menoetius"]},"1i_oumuamua":{"id":"1i_oumuamua","iauName":"1I/\'Oumuamua","displayName":"Oumuamua","category":"Asteroid","keywords":["asteroid","asteroids","distant minor planet"]},"21_lutetia":{"id":"21_lutetia","iauName":"21 Lutetia","displayName":"Lutetia","category":"Asteroid","keywords":["asteroid","asteroids","Rosetta"]},"253_mathilde":{"id":"253_mathilde","iauName":"253 Mathilde","displayName":"Mathilde","category":"Asteroid","keywords":["asteroid","asteroids"]},"11351_leucus":{"id":"11351_leucus","iauName":"11351 Leucus","displayName":"Leucus","category":"Asteroid","keywords":["asteroid","asteroids"]},"15094_polymele":{"id":"15094_polymele","iauName":"15094 Polymele","displayName":"Polymele","category":"Asteroid","keywords":["asteroid","asteroids"]},"21900_orus":{"id":"21900_orus","iauName":"21900 Orus","displayName":"Orus","category":"Asteroid","keywords":["asteroid","asteroids"]},"3548_eurybates":{"id":"3548_eurybates","iauName":"3548 Eurybates","displayName":"Eurybates","category":"Asteroid","keywords":["asteroid","asteroids"]},"5535_annefrank":{"id":"5535_annefrank","iauName":"5535 Annefrank","displayName":"Annefrank","category":"Asteroid","keywords":["asteroid","asteroids"]},"52246_donaldjohanson":{"id":"52246_donaldjohanson","iauName":"52246 Donaldjohanson","displayName":"Donaldjohanson","category":"Asteroid","keywords":["asteroid","asteroids"]},"617_patroclus":{"id":"617_patroclus","iauName":"617 Patroclus","displayName":"Patroclus","category":"Asteroid","keywords":["asteroid","asteroids"]},"951_gaspra":{"id":"951_gaspra","iauName":"951 Gaspra","displayName":"Gaspra","category":"Asteroid","keywords":["asteroid","asteroids"]},"2867_steins":{"id":"2867_steins","iauName":"2867 Steins","displayName":"Steins","category":"Asteroid","keywords":["asteroid","asteroids"]},"ariel":{"id":"ariel","iauName":"Ariel","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","uranus","moons","prograde","synchronous","1851"]},"90377_sedna":{"id":"90377_sedna","iauName":"90377 Sedna","displayName":"Sedna","category":"Dwarf Planet","keywords":["dwarf planet","asteroids"]},"99942_apophis":{"id":"99942_apophis","iauName":"99942 Apophis","displayName":"Apophis","category":"Asteroid","keywords":["asteroid","asteroids"]},"486958_arrokoth":{"id":"486958_arrokoth","iauName":"486958 Arrokoth","displayName":"Arrokoth","category":"Asteroid","subcategory":"Kuiper Belt Object","keywords":["mu69","asteroid","asteroids","tno","cubewano","distant minor planet","pt1","1110113y","ultima thule","2014","kuiper belt object"]},"101955_bennu":{"id":"101955_bennu","iauName":"101955 Bennu","displayName":"Bennu","category":"Asteroid","subcategory":"B-Type Asteroid","keywords":["asteroid","asteroids","apollo","neo","pha","1999 rq36","1999","b-type"]},"16_psyche":{"id":"16_psyche","iauName":"16 Psyche","displayName":"16 Psyche","category":"Asteroid","subcategory":"M-Type Asteroid","keywords":["asteroid","asteroids","m-type"]},"1_ceres":{"id":"1_ceres","iauName":"1 Ceres","displayName":"Ceres","category":"Dwarf Planet","keywords":["dwarf planet","asteroids","asteroid belt","a899 of","1943 xb","1801"]},"2_pallas":{"id":"2_pallas","iauName":"2 Pallas","displayName":"Pallas","category":"Asteroid","keywords":["asteroid","asteroids"]},"3_juno":{"id":"3_juno","iauName":"3 Juno","displayName":"Juno","category":"Asteroid","keywords":["asteroid","asteroids"]},"216_kleopatra":{"id":"216_kleopatra","iauName":"216 Kleopatra","displayName":"Kleopatra","category":"Asteroid","keywords":["asteroid","asteroids"]},"243_ida":{"id":"243_ida","iauName":"243 Ida","displayName":"Ida","category":"Asteroid","keywords":["asteroid","asteroids"],"hasMoons":true},"1566_icarus":{"id":"1566_icarus","iauName":"1566 Icarus","displayName":"Icarus","category":"Asteroid","keywords":["asteroid","asteroids"]},"1620_geographos":{"id":"1620_geographos","iauName":"1620 Geographos","displayName":"Geographos","category":"Asteroid","keywords":["asteroid","asteroids"]},"1862_apollo":{"id":"1862_apollo","iauName":"1862 Apollo","displayName":"Apollo","category":"Asteroid","keywords":["asteroid","asteroids"]},"1981_midas":{"id":"1981_midas","iauName":"1981 Midas","displayName":"Midas","category":"Asteroid","keywords":["asteroid","asteroids"]},"2063_bacchus":{"id":"2063_bacchus","iauName":"2063 Bacchus","displayName":"Bacchus","category":"Asteroid","keywords":["asteroid","asteroids"]},"2101_adonis":{"id":"2101_adonis","iauName":"2101 Adonis","displayName":"Adonis","category":"Asteroid","keywords":["asteroid","asteroids"]},"2102_tantalus":{"id":"2102_tantalus","iauName":"2102 Tantalus","displayName":"Tantalus","category":"Asteroid","keywords":["asteroid","asteroids"]},"2135_aristaeus":{"id":"2135_aristaeus","iauName":"2135 Aristaeus","displayName":"Aristaeus","category":"Asteroid","keywords":["asteroid","asteroids"]},"2340_hathor":{"id":"2340_hathor","iauName":"2340 Hathor","displayName":"Hathor","category":"Asteroid","keywords":["asteroid","asteroids"]},"3122_florence":{"id":"3122_florence","iauName":"3122 Florence","displayName":"Florence","category":"Asteroid","keywords":["asteroid","asteroids"]},"3200_phaethon":{"id":"3200_phaethon","iauName":"3200 Phaethon","displayName":"Phaethon","category":"Asteroid","keywords":["asteroid","asteroids"]},"3362_khufu":{"id":"3362_khufu","iauName":"3362 Khufu","displayName":"Khufu","category":"Asteroid","keywords":["asteroid","asteroids"]},"4015_wilson-harrington":{"id":"4015_wilson-harrington","iauName":"4015 Wilson-Harrington","displayName":"Wilson-Harrington","category":"Asteroid","keywords":["asteroid","asteroids"]},"4179_toutatis":{"id":"4179_toutatis","iauName":"4179 Toutatis","displayName":"Toutatis","category":"Asteroid","keywords":["asteroid","asteroids"]},"4183_cuno":{"id":"4183_cuno","iauName":"4183 Cuno","displayName":"Cuno","category":"Asteroid","keywords":["asteroid","asteroids"]},"4450_pan":{"id":"4450_pan","iauName":"4450 Pan","displayName":"Pan","category":"Asteroid","keywords":["asteroid","asteroids","minor moon","saturn"]},"4486_mithra":{"id":"4486_mithra","iauName":"4486 Mithra","displayName":"Mithra","category":"Asteroid","keywords":["asteroid","asteroids"]},"4769_castalia":{"id":"4769_castalia","iauName":"4769 Castalia","displayName":"Castalia","category":"Asteroid","keywords":["asteroid","asteroids"]},"5011_ptah":{"id":"5011_ptah","iauName":"5011 Ptah","displayName":"Ptah","category":"Asteroid","keywords":["asteroid","asteroids"]},"6239_minos":{"id":"6239_minos","iauName":"6239 Minos","displayName":"Minos","category":"Asteroid","keywords":["asteroid","asteroids"]},"6489_golevka":{"id":"6489_golevka","iauName":"6489 Golevka","displayName":"Golevka","category":"Asteroid","keywords":["asteroid","asteroids"]},"9969_braille":{"id":"9969_braille","iauName":"9969 Braille","displayName":"Braille","category":"Asteroid","keywords":["asteroid","asteroids"]},"12923_zephyr":{"id":"12923_zephyr","iauName":"12923 Zephyr","displayName":"Zephyr","category":"Asteroid","keywords":["asteroid","asteroids"]},"14827_hypnos":{"id":"14827_hypnos","iauName":"14827 Hypnos","displayName":"Hypnos","category":"Asteroid","keywords":["asteroid","asteroids"]},"25143_itokawa":{"id":"25143_itokawa","iauName":"25143 Itokawa","displayName":"Itokawa","category":"Asteroid","keywords":["asteroid","asteroids"]},"37655_illapa":{"id":"37655_illapa","iauName":"37655 Illapa","displayName":"Illapa","category":"Asteroid","keywords":["asteroid","asteroids"]},"65803_didymos":{"id":"65803_didymos","iauName":"65803 Didymos","displayName":"Didymos","category":"Asteroid","keywords":["asteroid","asteroids"],"hasMoons":true},"69230_hermes":{"id":"69230_hermes","iauName":"69230 Hermes","displayName":"Hermes","category":"Asteroid","keywords":["asteroid","asteroids"]},"136199_eris":{"id":"136199_eris","iauName":"136199 Eris","displayName":"Eris","category":"Dwarf Planet","keywords":["asteroid","asteroids","dwarf planet","tno","plutoid","sdo","binary","dysnomia","2005"]},"136108_haumea":{"id":"136108_haumea","iauName":"136108 Haumea","displayName":"Haumea","category":"Dwarf Planet","keywords":["asteroid","asteroids","dwarf planet","plutoid","tno","cubewano","trinary","2003 el61","2004"],"hasMoons":true},"136472_makemake":{"id":"136472_makemake","iauName":"136472 Makemake","displayName":"Makemake","category":"Dwarf Planet","keywords":["asteroid","asteroids","dwarf planet","cubewano","scattered-near","kuiper belt","2005 fy9","2005"]},"162173_ryugu":{"id":"162173_ryugu","iauName":"162173 Ryugu","displayName":"Ryugu","category":"Asteroid","keywords":["asteroid","asteroids","neo","pha","b-type","c-type"]},"4_vesta":{"id":"4_vesta","iauName":"4 Vesta","displayName":"Vesta","category":"Asteroid","subcategory":"Protoplanet","keywords":["asteroid","asteroids","main belt","vesta family","1807","protoplanet"]},"433_eros":{"id":"433_eros","iauName":"433 Eros","displayName":"Eros","category":"Asteroid","subcategory":"S-Type Asteroid","keywords":["asteroid","asteroids","neo","1898","prograde"]},"callisto":{"id":"callisto","iauName":"Callisto","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","jupiter","moons","main group","galilean moons","prograde","synchronous","1610"]},"sc_chandra":{"id":"sc_chandra","iauName":"Chandra X-ray Observatory","category":"Spacecraft","subcategory":"Orbiter","keywords":["telescope","orbiter","earth","Columbia","X-ray","astrophysics"]},"charon":{"id":"charon","iauName":"Charon","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","pluto","moons","prograde","synchronous","1978"]},"67p_churyumov_gerasimenko":{"id":"67p_churyumov_gerasimenko","iauName":"67P/Churyumov-Gerasimenko","displayName":"67P/Churyumov-Gerasimenko","category":"Comet","subcategory":"Short-Period Comet","keywords":["comet","comets","jupiter-family","1969 r1","1969 iv","1969h","1975 p1","1976 vii","1975i","1982 viii","1982f","1989 vi","1988i","1969","chury","short-period"]},"1p_halley":{"id":"1p_halley","iauName":"1P/Halley","displayName":"Halley","category":"Comet","subcategory":"Short-Period Comet","keywords":["comet","comets","short-period","1p/halley"]},"103p_hartley_2":{"id":"103p_hartley_2","iauName":"103P/Hartley","displayName":"Hartley 2","category":"Comet","keywords":["comet"]},"9p_tempel_1":{"id":"9p_tempel_1","iauName":"9P/Tempel 1","displayName":"Tempel 1","category":"Comet","subcategory":"Jupiter-Family Comet","keywords":["comet","comets","periodic","jupiter-family","9p/tempel","1867"]},"19p_borrelly":{"id":"19p_borrelly","iauName":"19P/Borrelly","displayName":"Borrelly","category":"Comet","subcategory":"Jupiter-Family Comet","keywords":["comet","comets","periodic","jupiter-family","19p/borrelly","Deep Space 1"]},"81p_wild_2":{"id":"81p_wild_2","iauName":"81P/Wild 2","displayName":"Wild 2","category":"Comet","subcategory":"Short-Period Comet","keywords":["comet","comets","81p/wild","1978 xi","1984 xiv","1990 xxviii","1978"]},"adrastea":{"id":"adrastea","iauName":"Adrastea","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"aegaeon":{"id":"aegaeon","iauName":"Aegaeon","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"aegir":{"id":"aegir","iauName":"Aegir","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"aitne":{"id":"aitne","iauName":"Aitne","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"albiorix":{"id":"albiorix","iauName":"Albiorix","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"amalthea":{"id":"amalthea","iauName":"Amalthea","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"ananke":{"id":"ananke","iauName":"Ananke","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"anthe":{"id":"anthe","iauName":"Anthe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"aoede":{"id":"aoede","iauName":"Aoede","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"arche":{"id":"arche","iauName":"Arche","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"atlas":{"id":"atlas","iauName":"Atlas","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"autonoe":{"id":"autonoe","iauName":"Autonoe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"bebhionn":{"id":"bebhionn","iauName":"Bebhionn","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"belinda":{"id":"belinda","iauName":"Belinda","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"bergelmir":{"id":"bergelmir","iauName":"Bergelmir","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"bestla":{"id":"bestla","iauName":"Bestla","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"bianca":{"id":"bianca","iauName":"Bianca","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"c_2010_x1":{"id":"c_2010_x1","iauName":"C/2010 X1","displayName":"Elenin","category":"Comet","keywords":["comet"]},"c_2012_s1":{"id":"c_2012_s1","iauName":"C/2012 S1","displayName":"ISON","category":"Comet","keywords":["comet"]},"caliban":{"id":"caliban","iauName":"Caliban","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"callirrhoe":{"id":"callirrhoe","iauName":"Callirrhoe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"calypso":{"id":"calypso","iauName":"Calypso","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"carme":{"id":"carme","iauName":"Carme","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"carpo":{"id":"carpo","iauName":"Carpo","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"chaldene":{"id":"chaldene","iauName":"Chaldene","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"cordelia":{"id":"cordelia","iauName":"Cordelia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"cressida":{"id":"cressida","iauName":"Cressida","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"cupid":{"id":"cupid","iauName":"Cupid","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"cyllene":{"id":"cyllene","iauName":"Cyllene","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"dactyl":{"id":"dactyl","iauName":"243 Ida I Dactyl","displayName":"Dactyl","category":"Moon","subcategory":"Major Moon","keywords":["asteroid","minor moon","ida"]},"daphnis":{"id":"daphnis","iauName":"Daphnis","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"deimos":{"id":"deimos","iauName":"Deimos","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","mars","moons","synchronous","1877"]},"desdemona":{"id":"desdemona","iauName":"Desdemona","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"despina":{"id":"despina","iauName":"Despina","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"dia":{"id":"dia","iauName":"Dia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"dimorphos":{"id":"dimorphos","iauName":"Dimorphos","category":"Moon","subcategory":"Major Moon","keywords":["minor moon","solar system","65803 Didymos","asteroid"]},"dione":{"id":"dione","iauName":"Dione","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","inner moons","prograde","synchronous","1684"]},"sc_dscovr":{"id":"sc_dscovr","iauName":"DSCOVR","category":"Spacecraft","subcategory":"Orbiter","keywords":["earth","orbiter","Deep Space Climate Observatory"]},"eirene":{"id":"eirene","iauName":"Eirene","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"elara":{"id":"elara","iauName":"Elara","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"enceladus":{"id":"enceladus","iauName":"Enceladus","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","inner moons","prograde","synchronous","1789"]},"epimetheus":{"id":"epimetheus","iauName":"Epimetheus","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"erinome":{"id":"erinome","iauName":"Erinome","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"erriapus":{"id":"erriapus","iauName":"Erriapus","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"ersa":{"id":"ersa","iauName":"Ersa","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"euanthe":{"id":"euanthe","iauName":"Euanthe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"eukelade":{"id":"eukelade","iauName":"Eukelade","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"eupheme":{"id":"eupheme","iauName":"Eupheme","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"euporie":{"id":"euporie","iauName":"Euporie","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"europa":{"id":"europa","iauName":"Europa","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","jupiter","moons","main group","galilean moons","prograde","synchronous","1610"]},"eurydome":{"id":"eurydome","iauName":"Eurydome","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"farbauti":{"id":"farbauti","iauName":"Farbauti","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"fenrir":{"id":"fenrir","iauName":"Fenrir","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"galatea":{"id":"galatea","iauName":"Galatea","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"ganymede":{"id":"ganymede","iauName":"Ganymede","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","jupiter","moons","main group","galilean moons","prograde","synchronous","1610"]},"greip":{"id":"greip","iauName":"Greip","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"c_1995_o1":{"id":"c_1995_o1","iauName":"C/1995 O1","displayName":"Hale-Bopp","category":"Comet","subcategory":"Long-Period Comet","keywords":["comet","solar system","The Great Comet of 1997","C/1995 O1","1995"]},"ferdinand":{"id":"ferdinand","iauName":"Ferdinand","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"fornjot":{"id":"fornjot","iauName":"Fornjot","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"francisco":{"id":"francisco","iauName":"Francisco","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"halimede":{"id":"halimede","iauName":"Halimede","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"harpalyke":{"id":"harpalyke","iauName":"Harpalyke","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"hati":{"id":"hati","iauName":"Hati","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"hegemone":{"id":"hegemone","iauName":"Hegemone","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"helene":{"id":"helene","iauName":"Helene","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"helike":{"id":"helike","iauName":"Helike","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"hermippe":{"id":"hermippe","iauName":"Hermippe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"herse":{"id":"herse","iauName":"Herse","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"hiiaka":{"id":"hiiaka","iauName":"Hi\'iaka","displayName":"Hi\'iaka","category":"Moon","subcategory":"Major Moon","keywords":["asteroid","minor moon","haumea"]},"himalia":{"id":"himalia","iauName":"Himalia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"hippocamp":{"id":"hippocamp","iauName":"Hippocamp","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"hydra":{"id":"hydra","iauName":"Hydra","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","pluto","moons","outer moons"]},"hyperion":{"id":"hyperion","iauName":"Hyperion","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","outer moons","prograde","1848"]},"hyrrokkin":{"id":"hyrrokkin","iauName":"Hyrrokkin","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"iapetus":{"id":"iapetus","iauName":"Iapetus","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","outer moons","prograde","synchronous","1671"]},"io":{"id":"io","iauName":"Io","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","jupiter","moons","main group","galilean moons","prograde","synchronous","1610"]},"ijiraq":{"id":"ijiraq","iauName":"Ijiraq","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"iocaste":{"id":"iocaste","iauName":"Iocaste","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"isonoe":{"id":"isonoe","iauName":"Isonoe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"janus":{"id":"janus","iauName":"Janus","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"jarnsaxa":{"id":"jarnsaxa","iauName":"Jarnsaxa","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"juliet":{"id":"juliet","iauName":"Juliet","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"jupiter_li":{"id":"jupiter_li","iauName":"Jupiter LI","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lii":{"id":"jupiter_lii","iauName":"Jupiter LII","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_liv":{"id":"jupiter_liv","iauName":"Jupiter LIV","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lix":{"id":"jupiter_lix","iauName":"Jupiter LIX","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lv":{"id":"jupiter_lv","iauName":"Jupiter LV","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lvi":{"id":"jupiter_lvi","iauName":"Jupiter LVI","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxi":{"id":"jupiter_lxi","iauName":"Jupiter LXI","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxiii":{"id":"jupiter_lxiii","iauName":"Jupiter LXIII","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxiv":{"id":"jupiter_lxiv","iauName":"Jupiter LXIV","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxix":{"id":"jupiter_lxix","iauName":"Jupiter LXIX","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxvi":{"id":"jupiter_lxvi","iauName":"Jupiter LXVI","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxvii":{"id":"jupiter_lxvii","iauName":"Jupiter LXVI","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxviii":{"id":"jupiter_lxviii","iauName":"Jupiter LXVIII","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxx":{"id":"jupiter_lxx","iauName":"Jupiter LXX","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"jupiter_lxxii":{"id":"jupiter_lxxii","iauName":"Jupiter LXXII","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"kale":{"id":"kale","iauName":"Kale","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"kallichore":{"id":"kallichore","iauName":"Kallichore","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"kalyke":{"id":"kalyke","iauName":"Kalyke","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"kari":{"id":"kari","iauName":"Kari","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"kerberos":{"id":"kerberos","iauName":"Kerberos","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","pluto","moons"]},"kiviuq":{"id":"kiviuq","iauName":"Kiviuq","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"kore":{"id":"kore","iauName":"Kore","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"laomedeia":{"id":"laomedeia","iauName":"Laomedeia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"larissa":{"id":"larissa","iauName":"Larissa","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"leda":{"id":"leda","iauName":"Leda","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"loge":{"id":"loge","iauName":"Loge","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"lysithea":{"id":"lysithea","iauName":"Lysithea","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"mab":{"id":"mab","iauName":"Mab","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"margaret":{"id":"margaret","iauName":"Margaret","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"megaclite":{"id":"megaclite","iauName":"Megaclite","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons","jupiter xix","S/2000 J 8"]},"menoetius":{"id":"menoetius","iauName":"Menoetius","displayName":"Menoetius","category":"Asteroid","keywords":["asteroid","asteroids","solar system","617 Patroclus"]},"methone":{"id":"methone","iauName":"Methone","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"metis":{"id":"metis","iauName":"Metis","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"mimas":{"id":"mimas","iauName":"Mimas","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","inner moons","prograde","synchronous","1789","death star"]},"miranda":{"id":"miranda","iauName":"Miranda","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","uranus","moons","prograde","synchronous","1948"]},"mneme":{"id":"mneme","iauName":"Mneme","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"moon":{"id":"moon","iauName":"Moon","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","earth","moons","synchronous"]},"mundilfari":{"id":"mundilfari","iauName":"Mundilfari","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"naiad":{"id":"naiad","iauName":"Naiad","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"namaka":{"id":"namaka","iauName":"Namaka","displayName":"Namaka","category":"Moon","subcategory":"Major Moon","keywords":["asteroid","minor moon","haumea"]},"narvi":{"id":"narvi","iauName":"Narvi","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"nix":{"id":"nix","iauName":"Nix","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","pluto","moons"]},"nereid":{"id":"nereid","iauName":"Nereid","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons","irregular moons","prograde","1949"]},"neso":{"id":"neso","iauName":"Neso","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"oberon":{"id":"oberon","iauName":"Oberon","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","uranus","moons","prograde","synchronous","1787"]},"ophelia":{"id":"ophelia","iauName":"Ophelia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"orthosie":{"id":"orthosie","iauName":"Orthosie","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"paaliaq":{"id":"paaliaq","iauName":"Paaliaq","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"pallene":{"id":"pallene","iauName":"Pallene","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"pan":{"id":"pan","iauName":"Pan","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"pandia":{"id":"pandia","iauName":"Pandia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"pandora":{"id":"pandora","iauName":"Pandora","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"pasiphae":{"id":"pasiphae","iauName":"Pasiphae","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"pasithee":{"id":"pasithee","iauName":"Pasithee","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"perdita":{"id":"perdita","iauName":"Perdita","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"philophrosyne":{"id":"philophrosyne","iauName":"Philophrosyne","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"phobos":{"id":"phobos","iauName":"Phobos","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","mars","moons","synchronous","1877"]},"phoebe":{"id":"phoebe","iauName":"Phoebe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","norse group","retrograde","1899"]},"polydeuces":{"id":"polydeuces","iauName":"Polydeuces","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"portia":{"id":"portia","iauName":"Portia","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"praxidike":{"id":"praxidike","iauName":"Praxidike","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"prometheus":{"id":"prometheus","iauName":"Prometheus","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"prospero":{"id":"prospero","iauName":"Prospero","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"proteus":{"id":"proteus","iauName":"Proteus","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons","regular moons","prograde","synchronous","1989"]},"psamathe":{"id":"psamathe","iauName":"Psamathe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"puck":{"id":"puck","iauName":"Puck","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"rhea":{"id":"rhea","iauName":"Rhea","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","outer moons","prograde","synchronous","1672"]},"rosalind":{"id":"rosalind","iauName":"Rosalind","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"s_2003_j_10":{"id":"s_2003_j_10","iauName":"S/2003 J 10","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_12":{"id":"s_2003_j_12","iauName":"S/2003 J 12","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_16":{"id":"s_2003_j_16","iauName":"S/2003 J 16","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_2":{"id":"s_2003_j_2","iauName":"S/2003 J 2","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_23":{"id":"s_2003_j_23","iauName":"S/2003 J 23","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_4":{"id":"s_2003_j_4","iauName":"S/2003 J 4","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2003_j_9":{"id":"s_2003_j_9","iauName":"S/2003 J 9","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"s_2004_s_13":{"id":"s_2004_s_13","iauName":"S/2004 S 13","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_17":{"id":"s_2004_s_17","iauName":"S/2004 S 17","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_21":{"id":"s_2004_s_21","iauName":"S/2004 S 21","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_24":{"id":"s_2004_s_24","iauName":"S/2004 S 24","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_28":{"id":"s_2004_s_28","iauName":"S/2004 S 28","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_31":{"id":"s_2004_s_31","iauName":"S/2004 S 31","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_36":{"id":"s_2004_s_36","iauName":"S/2004 S 36","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_37":{"id":"s_2004_s_37","iauName":"S/2004 S 37","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2004_s_39":{"id":"s_2004_s_39","iauName":"S/2004 S 39","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2006_s_1":{"id":"s_2006_s_1","iauName":"S/2006 S 1","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2006_s_3":{"id":"s_2006_s_3","iauName":"S/2006 S 3","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2007_s_2":{"id":"s_2007_s_2","iauName":"S/2007 S 2","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2007_s_3":{"id":"s_2007_s_3","iauName":"S/2007 S 3","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"s_2009_s_1":{"id":"s_2009_s_1","iauName":"S/2009 S 1","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"sao":{"id":"sao","iauName":"Sao","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"saturn_liv":{"id":"saturn_liv","iauName":"Gridr","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S20","saturn liv"]},"saturn_lv":{"id":"saturn_lv","iauName":"Angrboda","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S22","saturn lv"]},"saturn_lvi":{"id":"saturn_lvi","iauName":"Skrymir","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S23","saturn lvi"]},"saturn_lvii":{"id":"saturn_lvii","iauName":"Gerd","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S25","saturn lvii"]},"saturn_lviii":{"id":"saturn_lviii","iauName":"Saturn LVIII","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"saturn_lix":{"id":"saturn_lix","iauName":"Eggther","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S27","saturn lix"]},"saturn_lx":{"id":"saturn_lx","iauName":"Saturn LX","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"saturn_lxi":{"id":"saturn_lxi","iauName":"Beli","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S30","saturn lxi"]},"saturn_lxii":{"id":"saturn_lxii","iauName":"Gunnlod","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S32","saturn lxii"]},"saturn_lxiii":{"id":"saturn_lxiii","iauName":"Thiazzi","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S33","saturn lxiii"]},"saturn_lxiv":{"id":"saturn_lxiv","iauName":"Saturn LXIV","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"saturn_lxv":{"id":"saturn_lxv","iauName":"Alvaldi","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S35","saturn lxv"]},"saturn_lxvi":{"id":"saturn_lxvi","iauName":"Geirrod","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons","S/2004 S38","saturn lxvi"]},"setebos":{"id":"setebos","iauName":"Setebos","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"siarnaq":{"id":"siarnaq","iauName":"Siarnaq","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"sinope":{"id":"sinope","iauName":"Sinope","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"skathi":{"id":"skathi","iauName":"Skathi","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"skoll":{"id":"skoll","iauName":"Skoll","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"sponde":{"id":"sponde","iauName":"Sponde","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"stephano":{"id":"stephano","iauName":"Stephano","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"styx":{"id":"styx","iauName":"Styx","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","pluto","moons"]},"surtur":{"id":"surtur","iauName":"Surtur","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"suttungr":{"id":"suttungr","iauName":"Suttungr","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"sycorax":{"id":"sycorax","iauName":"Sycorax","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"tarqeq":{"id":"tarqeq","iauName":"Tarqeq","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"tarvos":{"id":"tarvos","iauName":"Tarvos","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"taygete":{"id":"taygete","iauName":"Taygete","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"telesto":{"id":"telesto","iauName":"Telesto","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"tethys":{"id":"tethys","iauName":"Tethys","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","inner moons","prograde","synchronous","1684"]},"thalassa":{"id":"thalassa","iauName":"Thalassa","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","neptune","moons"]},"thebe":{"id":"thebe","iauName":"Thebe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"thelxinoe":{"id":"thelxinoe","iauName":"Thelxinoe","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"themisto":{"id":"themisto","iauName":"Themisto","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"thrymr":{"id":"thrymr","iauName":"Thrymr","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"thyone":{"id":"thyone","iauName":"Thyone","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"titan":{"id":"titan","iauName":"Titan","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","saturn","moons","outer moons","prograde","synchronous","1655"]},"titania":{"id":"titania","iauName":"Titania","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","uranus","moons","prograde","synchronous","1787"]},"trinculo":{"id":"trinculo","iauName":"Trinculo","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","uranus","moons"]},"triton":{"id":"triton","iauName":"Triton","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","neptune","moons","irregular moons","retrograde","synchronous","1846"]},"umbriel":{"id":"umbriel","iauName":"Umbriel","category":"Moon","subcategory":"Major Moon","keywords":["major moon","solar system","uranus","moons","prograde","synchronous","1851"]},"ymir":{"id":"ymir","iauName":"Ymir","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","saturn","moons"]},"sc_ace":{"id":"sc_ace","iauName":"ACE","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_acrimsat":{"id":"sc_acrimsat","iauName":"ACRIMSAT","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_aqua":{"id":"sc_aqua","iauName":"Aqua","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_artemis_1":{"id":"sc_artemis_1","iauName":"Artemis I","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_aura":{"id":"sc_aura","iauName":"Aura","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_biosentinel":{"id":"sc_biosentinel","iauName":"BioSentinel","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_calipso":{"id":"sc_calipso","iauName":"CALIPSO","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_capstone":{"id":"sc_capstone","iauName":"CAPSTONE","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_cassini":{"id":"sc_cassini","iauName":"Cassini","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","saturn"],"hasEvents":true},"sc_clementine":{"id":"sc_clementine","iauName":"Clementine","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_cloudsat":{"id":"sc_cloudsat","iauName":"CloudSat","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cluster_ii_fm5":{"id":"sc_cluster_ii_fm5","iauName":"Rumba","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cluster_ii_fm6":{"id":"sc_cluster_ii_fm6","iauName":"Salsa","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cluster_ii_fm7":{"id":"sc_cluster_ii_fm7","iauName":"Samba","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cluster_ii_fm8":{"id":"sc_cluster_ii_fm8","iauName":"Tango","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_1":{"id":"sc_cygnss_1","iauName":"CYGNSS 1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_2":{"id":"sc_cygnss_2","iauName":"CYGNSS 2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_3":{"id":"sc_cygnss_3","iauName":"CYGNSS 3","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_4":{"id":"sc_cygnss_4","iauName":"CYGNSS 4","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_5":{"id":"sc_cygnss_5","iauName":"CYGNSS 5","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_6":{"id":"sc_cygnss_6","iauName":"CYGNSS 6","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_7":{"id":"sc_cygnss_7","iauName":"CYGNSS 7","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_cygnss_8":{"id":"sc_cygnss_8","iauName":"CYGNSS 8","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_dart":{"id":"sc_dart","iauName":"DART","category":"Spacecraft","subcategory":"Impactor","altName":"boom","keywords":["spacecraft","65803_didymos","dimorphos","asteroid"],"hasEvents":true},"sc_dawn":{"id":"sc_dawn","iauName":"Dawn","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","vesta","ceres","small body mission"],"related":{"asteroid":["4_vesta","1_ceres"]},"hasEvents":true},"sc_deep_impact":{"id":"sc_deep_impact","iauName":"Deep Impact","category":"Spacecraft","subcategory":"Flyby","altName":"DI","keywords":["spacecraft","tempel 1","small body mission"],"related":{"comet":["9p_temp_1"]},"hasEvents":true},"sc_deep_impact_impactor":{"id":"sc_deep_impact_impactor","iauName":"Deep Impact Impactor","category":"Spacecraft","subcategory":"Impactor","altName":"DII","keywords":["spacecraft","tempel 1","small body mission"],"related":{"comet":["9p_temp_1"]},"hasEvents":true},"sc_deep_impact_impactor_impact_site":{"id":"sc_deep_impact_impactor_impact_site","displayName":"Deep Impact Impactor Impact Site","category":"Landing site","comparisonFeature":false},"sc_deep_space_1":{"id":"sc_deep_space_1","iauName":"Deep Space 1","category":"Spacecraft","subcategory":"Flyby","altName":"DS1","keywords":["spacecraft","9660 Braille","19p/Borrelly","small body mission"],"related":{"asteroid":["9969_braille"],"comet":["19p_borrelly"]},"hasEvents":true},"sc_eo_1":{"id":"sc_eo_1","iauName":"EO-1","category":"Spacecraft","subcategory":"Orbiter","altName":"Earth Observing-1","keywords":["spacecraft","earth","orbiter"]},"sc_europa_clipper":{"id":"sc_europa_clipper","iauName":"Europa Clipper","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter","europa"]},"sc_explorer_1":{"id":"sc_explorer_1","iauName":"Explorer 1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_galileo":{"id":"sc_galileo","iauName":"Galileo","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","outer planet mission","orbiter","jupiter"],"hasEvents":true},"sc_galileo_probe":{"id":"sc_galileo_probe","iauName":"Galileo Probe","category":"Spacecraft","subcategory":"Lander","keywords":["spacecraft","outer planet mission","orbiter","jupiter"],"hasEvents":true},"sc_gpm":{"id":"sc_gpm","iauName":"GPM","category":"Spacecraft","subcategory":"Orbiter","altName":"Global Precipitation Measurement","keywords":["spacecraft","earth","orbiter"]},"sc_grace_1":{"id":"sc_grace_1","iauName":"GRACE-1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_grace_2":{"id":"sc_grace_2","iauName":"GRACE-2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_grace_fo1":{"id":"sc_grace_fo1","iauName":"GRACE-FO1","category":"Spacecraft","subcategory":"Orbiter","altName":"GRACE Follow-On","keywords":["spacecraft","earth","orbiter"]},"sc_grace_fo2":{"id":"sc_grace_fo2","iauName":"GRACE-FO2","category":"Spacecraft","subcategory":"Orbiter","altName":"GRACE Follow-On","keywords":["spacecraft","earth","orbiter"]},"sc_grail_a":{"id":"sc_grail_a","iauName":"GRAIL A","category":"Spacecraft","subcategory":"Orbiter","altName":"Ebb","keywords":["spacecraft","moon","orbiter","ebb"]},"sc_grail_b":{"id":"sc_grail_b","iauName":"GRAIL B","category":"Spacecraft","subcategory":"Orbiter","altName":"Flow","keywords":["spacecraft","moon","orbiter","flow"]},"sc_grifex":{"id":"sc_grifex","iauName":"GRIFEX","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_hubble_space_telescope":{"id":"sc_hubble_space_telescope","iauName":"Hubble Space Telescope","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter","telescope","1990"]},"sc_huygens":{"id":"sc_huygens","iauName":"Huygens","category":"Spacecraft","subcategory":"Lander","keywords":["spacecraft","titan","cassini","lander"],"hasEvents":true},"sc_ibex":{"id":"sc_ibex","iauName":"IBEX","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_icesat_2":{"id":"sc_icesat_2","iauName":"ICESat-2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_image":{"id":"sc_image","iauName":"IMAGE","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_insight":{"id":"sc_insight","iauName":"InSight","category":"Spacecraft","subcategory":"Lander","keywords":["spacecraft","mars","lander","seismic","2018"],"landingDate":"2018-11-26T19:45:00"},"sc_ipex":{"id":"sc_ipex","iauName":"IPEX","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_isas":{"id":"sc_isas","iauName":"ISAS","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_iss":{"id":"sc_iss","iauName":"International Space Station","category":"Spacecraft","subcategory":"Orbiter","altName":"ISS","keywords":["iss","international","international space","station","earth","orbiter","1998","emit","ecostress","oco-3"],"customDistance":0.1},"sc_iss_ecostress":{"id":"sc_iss_ecostress","iauName":"ECOSTRESS","category":"Instrument","cameraOptions":{"forwardVector":"-y-axis"},"comparisonFeature":false,"keywords":["spacecraft","earth","iss","orbiter"]},"sc_iss_emit":{"id":"sc_iss_emit","iauName":"EMIT","category":"Instrument","cameraOptions":{"forwardVector":"y-axis","distance":0.006},"comparisonFeature":false,"altName":"Earth Surface Mineral Dust Source Investigation","keywords":["spacecraft","earth","iss","orbiter"]},"sc_iss_oco_3":{"id":"sc_iss_oco_3","iauName":"OCO-3","category":"Instrument","cameraOptions":{"forwardVector":"-y-axis"},"comparisonFeature":false,"altName":"Orbiting Carbon Observatory 3","keywords":["spacecraft","earth","iss","orbiter"]},"sc_iss_rapidscat":{"id":"sc_iss_rapidscat","iauName":"RapidScat","category":"Instrument","cameraOptions":{"upVector":"-y-axis","forwardVector":"x-axis","distance":0.007},"comparisonFeature":false,"keywords":["spacecraft","earth","iss","orbiter"]},"sc_ixpe":{"id":"sc_ixpe","iauName":"IXPE","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter","telescope","2021","x-ray","imaging x-ray polarimetry explorer","cosmic x-rays"]},"sc_jason_1":{"id":"sc_jason_1","iauName":"Jason-1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_jason_2":{"id":"sc_jason_2","iauName":"Jason-2/OSTM","category":"Spacecraft","subcategory":"Orbiter","altName":"OSTM","keywords":["spacecraft","earth","orbiter","jason-2"]},"sc_jason_3":{"id":"sc_jason_3","iauName":"Jason-3","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_juno":{"id":"sc_juno","iauName":"Juno","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","jupiter","orbiter","gravity","magnetic field","atmosphere","junocam","bruh","2011"],"customDistance":0.04,"hasEvents":true},"sc_jwst":{"id":"sc_jwst","iauName":"James Webb Space Telescope","category":"Spacecraft","subcategory":"Orbiter","altName":"James Webb Space Telescope","keywords":["spacecraft","earth","orbiter","telescope","jwst"],"hasEvents":true},"sc_kepler_space_telescope":{"id":"sc_kepler_space_telescope","iauName":"Kepler","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter","telescope"]},"sc_ladee":{"id":"sc_ladee","iauName":"LADEE","category":"Spacecraft","subcategory":"Orbiter","altName":"Lunar Atmosphere and Dust Environment Explorer","keywords":["spacecraft","moon","orbiter"]},"sc_landsat_7":{"id":"sc_landsat_7","iauName":"Landsat 7","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_landsat_8":{"id":"sc_landsat_8","iauName":"Landsat 8","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_landsat_9":{"id":"sc_landsat_9","iauName":"Landsat 9","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_lcross":{"id":"sc_lcross","iauName":"LCROSS","category":"Spacecraft","subcategory":"Orbiter","altName":"Lunar Crater Observation and Sensing Satellite","keywords":["spacecraft","moon","orbiter"],"hasEvents":true},"sc_lucy":{"id":"sc_lucy","iauName":"Lucy","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"],"hasEvents":true},"sc_lunar_flashlight":{"id":"sc_lunar_flashlight","iauName":"Lunar Flashlight","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_lunar_icecube":{"id":"sc_lunar_icecube","iauName":"Lunar IceCube","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_lunar_prospector":{"id":"sc_lunar_prospector","iauName":"Lunar Prospector","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_lunar_reconnaissance_orbiter":{"id":"sc_lunar_reconnaissance_orbiter","iauName":"Lunar Reconnaissance Orbiter","category":"Spacecraft","subcategory":"Orbiter","altName":"LRO","keywords":["spacecraft","moon","orbiter","lro","temperature","imaging","albedo","polar","2009"]},"sc_lunir":{"id":"sc_lunir","iauName":"Lunar Reconnaissance Orbiter","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter","artemis"],"disabled":true},"sc_magellan":{"id":"sc_magellan","iauName":"Magellan","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","inner planet mission","venus"]},"sc_marco_a":{"id":"sc_marco_a","iauName":"MarCO A","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","insight","cubesat"]},"sc_marco_b":{"id":"sc_marco_b","iauName":"MarCO B","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","insight","cubesat"]},"sc_mars_exploration_rover_1_landing_site":{"id":"sc_mars_exploration_rover_1_landing_site","displayName":"Opportunity Rover landing site","category":"Landing site","comparisonFeature":false},"sc_mars_exploration_rover_1":{"id":"sc_mars_exploration_rover_1","iauName":"Mars Exploration Rover B (Opportunity)","displayName":"Opportunity","category":"Spacecraft","subcategory":"Rover","keywords":["spacecraft","mars","lander","rover","opportunity","meridiani planum","2003","MER-B","MER-1","mer b"],"landingDate":"2004-01-25T04:54:00"},"sc_mars_exploration_rover_2_landing_site":{"id":"sc_mars_exploration_rover_2_landing_site","displayName":"Spirit Rover landing site","category":"Landing site","comparisonFeature":false},"sc_mars_exploration_rover_2":{"id":"sc_mars_exploration_rover_2","iauName":"Mars Exploration Rover A (Spirit)","displayName":"Spirit","category":"Spacecraft","subcategory":"Rover","keywords":["spacecraft","mars","lander","rover","spirit","MER-A","MER-2","mer a"],"landingDate":"2004-01-25T04:54:00"},"sc_mars_express":{"id":"sc_mars_express","iauName":"Mars Express","category":"Spacecraft","subcategory":"Orbiter","altName":"MEX","keywords":["spacecraft","mars","orbiter","water","geology","atmosphere","surface","relay","2003"]},"sc_mars_global_surveyor":{"id":"sc_mars_global_surveyor","iauName":"Mars Global Surveyor","category":"Spacecraft","subcategory":"Orbiter","altName":"MGS","keywords":["spacecraft","mars","MGS"]},"sc_mars_odyssey":{"id":"sc_mars_odyssey","iauName":"Mars Odyssey","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","mars","orbiter","elements","minerals","hydrogen","water","polar","radiation","relay","2001"]},"sc_mars_reconnaissance_orbiter":{"id":"sc_mars_reconnaissance_orbiter","iauName":"Mars Reconnaissance Orbiter","category":"Spacecraft","subcategory":"Orbiter","altName":"MRO","keywords":["spacecraft","mars","orbiter","mro","water","dust","atmosphere","relay","2005"]},"sc_mars_science_laboratory_landing_site":{"id":"sc_mars_science_laboratory_landing_site","displayName":"Curiosity Rover landing site","category":"Landing site","comparisonFeature":false},"sc_mars_science_laboratory":{"id":"sc_mars_science_laboratory","iauName":"Mars Science Laboratory (Curiosity)","displayName":"Curiosity","category":"Spacecraft","subcategory":"Rover","altName":"MSL","keywords":["spacecraft","mars","lander","rover","msl","curiosity","microbes","habitability","2011"],"landingDate":"2012-08-06T05:32:00"},"sc_maven":{"id":"sc_maven","iauName":"MAVEN","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","mars","orbiter","atmosphere","ionosphere","solar wind","relay","2013"]},"sc_messenger":{"id":"sc_messenger","iauName":"MESSENGER","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","mercury","orbiter"]},"sc_messenger_impact_site":{"id":"sc_messenger_impact_site","displayName":"MESSENGER Impact Site","category":"Landing site","comparisonFeature":false},"sc_mcubed_2":{"id":"sc_mcubed_2","iauName":"M-Cubed 2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_mms_1":{"id":"sc_mms_1","iauName":"MMS 1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_mms_2":{"id":"sc_mms_2","iauName":"MMS 2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_mms_3":{"id":"sc_mms_3","iauName":"MMS 3","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_mms_4":{"id":"sc_mms_4","iauName":"MMS 4","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_near_shoemaker":{"id":"sc_near_shoemaker","iauName":"NEAR Shoemaker","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","eros","orbiter"],"related":{"asteroid":["433_eros"]},"hasEvents":true},"sc_new_horizons":{"id":"sc_new_horizons","iauName":"New Horizons","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","pluto","flyby","imager","spectrometer","ultraviolet","solar wind","extended mission","2006"],"hasEvents":true},"sc_nustar":{"id":"sc_nustar","iauName":"NuSTAR","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","telescope","X-ray","astrophysics"]},"sc_oco_2":{"id":"sc_oco_2","iauName":"OCO-2","category":"Spacecraft","subcategory":"Orbiter","altName":"Orbiting Carbon Observatory 2","keywords":["spacecraft","earth","orbiter"]},"sc_osiris_rex":{"id":"sc_osiris_rex","iauName":"OSIRIS-REx","category":"Spacecraft","subcategory":"Orbiter","altName":"ORX","keywords":["spacecraft","bennu","lander","sample return","asteroids","chemistry","mineralogy","2016"],"related":{"asteroid":["101955_bennu"]},"hasEvents":true},"sc_parker_solar_probe":{"id":"sc_parker_solar_probe","iauName":"Parker Solar Probe","category":"Spacecraft","subcategory":"Orbiter","altName":"PSP","keywords":["spacecraft","psp"]},"sc_perseverance":{"id":"sc_perseverance","iauName":"Mars 2020 (Perseverance)","category":"Spacecraft","subcategory":"Rover","altName":"Percy","keywords":["spacecraft","mars","lander","rover","perseverance","mars 2020","mars2020","m2020"],"landingDate":"2021-02-18T20:55:00"},"sc_perseverance_landing_site":{"id":"sc_perseverance_landing_site","displayName":"Perseverance Rover landing site","category":"Landing site","comparisonFeature":false},"sc_philae":{"id":"sc_philae","iauName":"Philae","category":"Spacecraft","subcategory":"Lander","keywords":["spacecraft","67P/Churyumov-Gerasimenko","lander","Rosetta"],"related":{"comet":["67p_churyumov_gerasimenko"]},"hasEvents":true},"sc_phoenix":{"id":"sc_phoenix","iauName":"Phoenix","category":"Spacecraft","subcategory":"Lander","altName":"PHX","keywords":["spacecraft","mars","lander"],"landingDate":"2008-05-25T23:53:44"},"sc_phoenix_landing_site":{"id":"sc_phoenix_landing_site","displayName":"Phoenix landing site","category":"Landing site","comparisonFeature":false},"sc_pioneer_10":{"id":"sc_pioneer_10","iauName":"Pioneer 10","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","jupiter","callisto","ganymede","europa","io","flyby","outer planets","interstellar","1972"],"hasEvents":true},"sc_pioneer_11":{"id":"sc_pioneer_11","iauName":"Pioneer 11","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","jupiter","callisto","ganymede","io","europa","amalthea","saturn","iapetus","phoebe","hyperion","epimetheus","atlas","dione","mimas","janus","tethys","enceladus","calypso","rhea","titan","flyby","magnetic field","solar wind","outer planets","interstellar","1973"],"hasEvents":true},"sc_polar":{"id":"sc_polar","iauName":"Polar","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_psyche":{"id":"sc_psyche","iauName":"Psyche","category":"Future Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","16 Psyche","orbiter"],"related":{"asteroid":["16_psyche"]},"hasEvents":true,"searchable":false},"sc_quikscat":{"id":"sc_quikscat","iauName":"QuikSCAT","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_raincube":{"id":"sc_raincube","iauName":"RainCube","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","cubesat"]},"sc_rbsp_a":{"id":"sc_rbsp_a","iauName":"Van Allen Probe A","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_rbsp_b":{"id":"sc_rbsp_b","iauName":"Van Allen Probe B","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_sac_d":{"id":"sc_sac_d","iauName":"Aquarius","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_rosetta":{"id":"sc_rosetta","iauName":"Rosetta","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","small body mission","67P/Churyumov-Gerasimenko"],"related":{"comet":["67p_churyumov_gerasimenko"]},"hasEvents":true},"sc_sdo":{"id":"sc_sdo","iauName":"Solar Dynamics Observatory","category":"Spacecraft","subcategory":"Orbiter","altName":"SDO","keywords":["spacecraft","earth","orbiter"]},"sc_sentinel_6":{"id":"sc_sentinel_6","iauName":"Sentinel-6 Michael Freilich","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter","2020","sea level","jason","jason-cs","copernicus","topex/poseidon"]},"sc_smap":{"id":"sc_smap","iauName":"SMAP","category":"Spacecraft","subcategory":"Orbiter","altName":"Soil Moisture Active Passive","keywords":["spacecraft","earth","orbiter"]},"sc_soho":{"id":"sc_soho","iauName":"SOHO","category":"Spacecraft","subcategory":"Orbiter","altName":"Solar and Heliospheric Observatory","keywords":["spacecraft","sun","orbiter"]},"sc_sorce":{"id":"sc_sorce","iauName":"SORCE","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_spitzer":{"id":"sc_spitzer","iauName":"Spitzer Space Telescope","category":"Spacecraft","subcategory":"Orbiter","altName":"SIRTF","keywords":["spacecraft","sun","orbiter","sirtf","space infrared telescope facility","spitzer space telescope","2003"]},"sc_stardust":{"id":"sc_stardust","iauName":"Stardust","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","Wild-2","orbiter"],"related":{"comet":["81p_wild_2"]},"hasEvents":true},"sc_stardust_src":{"id":"sc_stardust_src","iauName":"Stardust Sample Return Capsule","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","Wild-2","orbiter"],"related":{"comet":["81p_wild_2"]}},"sc_stereo_ahead":{"id":"sc_stereo_ahead","iauName":"STEREO Ahead","category":"Spacecraft","subcategory":"Orbiter","altName":"STA","keywords":["spacecraft","sun","orbiter","solar terrestrial relations observatory","stereoscopic","coronal mass ejections","cme","2006"]},"sc_stereo_behind":{"id":"sc_stereo_behind","iauName":"STEREO Behind","category":"Spacecraft","subcategory":"Orbiter","altName":"STB","keywords":["spacecraft","sun","orbiter","solar terrestrial relations observatory","stereoscopic","coronal mass ejections","cme","2006"]},"sc_tdrs_3":{"id":"sc_tdrs_3","iauName":"TDRS-3","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_5":{"id":"sc_tdrs_5","iauName":"TDRS-5","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_6":{"id":"sc_tdrs_6","iauName":"TDRS-6","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_7":{"id":"sc_tdrs_7","iauName":"TDRS-7","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_8":{"id":"sc_tdrs_8","iauName":"TDRS-8","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_9":{"id":"sc_tdrs_9","iauName":"TDRS-9","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_10":{"id":"sc_tdrs_10","iauName":"TDRS-10","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_11":{"id":"sc_tdrs_11","iauName":"TDRS-11","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_12":{"id":"sc_tdrs_12","iauName":"TDRS-12","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_tdrs_13":{"id":"sc_tdrs_13","iauName":"TDRS-13","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","orbiter"]},"sc_suomi_npp":{"id":"sc_suomi_npp","iauName":"Suomi NPP","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_terra":{"id":"sc_terra","iauName":"Terra","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_tess":{"id":"sc_tess","iauName":"TESS","category":"Spacecraft","subcategory":"Orbiter","altName":"Transiting Exoplanet Survey Satellite","keywords":["spacecraft","earth","telescope","transiting exoplanet survey satellite","orbiter","2018","exoplanets"]},"sc_themis_a":{"id":"sc_themis_a","iauName":"THEMIS-A","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_themis_b":{"id":"sc_themis_b","iauName":"ARTEMIS P1","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_themis_c":{"id":"sc_themis_c","iauName":"ARTEMIS P2","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","moon","orbiter"]},"sc_themis_d":{"id":"sc_themis_d","iauName":"THEMIS-D","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_themis_e":{"id":"sc_themis_e","iauName":"THEMIS-E","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_trace_gas_orbiter":{"id":"sc_trace_gas_orbiter","iauName":"Trace Gas Orbiter","category":"Spacecraft","subcategory":"Orbiter","altName":"TGO","keywords":["spacecraft","mars","orbiter","tgo","atmosphere","relay","2016"]},"sc_trmm":{"id":"sc_trmm","iauName":"TRMM","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","earth","orbiter"]},"sc_ulysses":{"id":"sc_ulysses","iauName":"Ulysses","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","sun","orbiter"]},"sc_voyager_1":{"id":"sc_voyager_1","iauName":"Voyager 1","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","jupiter","saturn","flyby","imaging","vger","radio science","infrared","ultraviolet","magnetometer","plasma","1977"],"hasEvents":true},"sc_voyager_2":{"id":"sc_voyager_2","iauName":"Voyager 2","category":"Spacecraft","subcategory":"Flyby","keywords":["spacecraft","jupiter","saturn","uranus","vger","neptune","flyby","imaging","radio science","infrared","ultraviolet","magnetometer","plasma","1977"],"hasEvents":true},"sc_wind":{"id":"sc_wind","iauName":"WIND","category":"Spacecraft","subcategory":"Orbiter","keywords":["spacecraft","solar wind","earth","orbiter"]},"valetudo":{"id":"valetudo","iauName":"Valetudo","category":"Moon","subcategory":"Minor Moon","keywords":["minor moon","solar system","jupiter","moons"]},"scientist":{"id":"scientist","displayName":"Scientist","category":"Human","searchable":false},"school_bus":{"id":"school_bus","displayName":"School Bus","category":"Vehicle","searchable":false},"rose_bowl":{"id":"rose_bowl","displayName":"Stadium","category":"Building","searchable":false}}')},function(t,e,i){"use strict";i.r(e),e.default={earth:[{id:"viirs",title:"High-quality global mosaic from yesterday",description:"This daily global mosaic is from The Visible Infrared Imaging Radiometer Suite (VIIRS), which is one of the key instruments onboard the Suomi National Polar-Orbiting Partnership (Suomi NPP) spacecraft.",type:"wmts",features:["shadowEntities","atmosphere"],endPoint:"assets/wmts_xml",layer:"VIIRS_SNPP_CorrectedReflectance_TrueColor",tile:"250m",time:"yesterday"}],mars:[{id:"vikingMosaic",title:"Global mosaic from the Viking missions to Mars.",description:"The two Mars Viking Orbiters imaged the entire surface of Mars at a resolution of 150 to 300 meters.",type:"wmts",features:["shadowEntities","atmosphere"],endPoint:"https://trek.nasa.gov/tiles/Mars/EQ/corrected/Mars_Viking_MDIM21_ClrMosaic_global_232m",layer:"Mars_Viking_MDIM21_ClrMosaic_global_232m"}],moon:[{id:"lroMosaic",title:"Global mosaic from the Lunar Reconnaissance Orbiter mission",description:"The wide-angle camera on LRO mapped the entire moon at 100 meters/pixel.",type:"wmts",features:["shadowEntities"],endPoint:"https://trek.nasa.gov/tiles/Moon/EQ/corrected/LRO_WAC_Mosaic_Global_303ppd_v02",layer:"LRO_WAC_Mosaic_Global_303ppd_v02"}],titan:[{id:"surface",title:"Surface imagery of Titan from Cassini's Imaging Science Subsystem camera",description:"This global mosaic is at 4 km/pixel, combining one hundred flybys of Titan by the Cassini mission",type:"texture",features:["shadowEntities"],textures:{color:{url:"titan/surface_$SIZE_$FACE.png",sizes:[16,512,2048]}}},{id:"radar",title:"Radar Map of Titan's Surface",description:"This 351 meters/pixel map incorporates 104 Titan flybys by the Cassini mission.",type:"texture",features:["shadowEntities"],textures:{color:{url:"titan/radar_$SIZE_$FACE.png",sizes:[16,512,2048]}}}],venus:[{id:"surface",title:"Radar Map of the Surface of Venus",description:"The Magellan mission used radar to see beneath the smog of Venus.",type:"texture",features:["shadowEntities"],textures:{color:{url:"venus/surface_$SIZE_$FACE.png",sizes:[16,512,1024]}}}]}},function(t,e,i){"use strict";i.r(e),e.default={jupiter:[{id:"magnetosphere",title:"Jupiter's Magnetic Field",description:"DESCRIPTION"},{id:"auroras",title:"Jupiter's Auroras",description:"DESCRIPTION"},{id:"radiationBelt",title:"Jupiter's Radiation Belt",description:"DESCRIPTION"}],saturn:[{id:"magnetosphere",title:"Saturn's Magnetic Field",description:"DESCRIPTION"}]}},function(t,e,i){"use strict";i.r(e),i.d(e,{Types:function(){return n}});var s=i(2);const n=new Map;n.set("TimeManager",s.TimeManager),n.set("SelectionManager",s.SelectionManager),n.set("LabelManager",s.LabelManager),n.set("LoadIcon",s.LoadIcon),n.set("Overlay",s.Overlay),n.set("Settings",s.Settings),n.set("Breadcrumb",s.Breadcrumb),n.set("Clock",s.Clock),n.set("ClockShortcut",s.ClockShortcut),n.set("Story",s.Story),n.set("LayerPanel",s.LayerPanel),n.set("Search",s.Search),n.set("Carousel",s.Carousel),n.set("TutorialOverlay",s.TutorialOverlay),n.set("CarouselPanel",s.CarouselPanel),n.set("TimeSlider",s.TimeSlider),n.set("TimeController",s.TimeController),n.set("Navigation",s.Navigation)},function(t,e,i){"use strict";i.r(e);i(692),i(693),i(694),i(695),i(696),i(697),i(698),i(699),i(700),i(701)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e);var s=i(1);e.default=[{type:"Breadcrumb",name:"breadcrumb",options:{params:{title:"Eyes on the Solar System"}}},{type:"Clock",name:"clock",hasPlaceholder:!1},{type:"Clock",name:"storyClock",hasPlaceholder:!0},{type:"ClockShortcut",name:"clockShortcut",hasPlaceholder:!1},{type:"CollapsibleMenu",name:"collapsibleMenu"},{type:"Settings",name:"settings"},{type:"ContentPanel",name:"contentPanel"},{type:"MobileExpandButton",name:"mobileExpandButton"},{type:"TimeControls",name:"timeControls",hasPlaceholder:!1},{type:"EventsTimeline",name:"eventsTimeline",hasPlaceholder:!1},{type:"Telescope",name:"telescope"},{type:"Story",name:"story"},{type:"LayerPanel",name:"layerPanel",options:{layers:[["ui"],["planets","asteroids","comets","dwarfPlanets","constellations"],["spacecraft"],["trails","orbits","labels","icons"]]}},{type:"InfoPanel",name:"infoPanel",hasPlaceholder:!1},{type:"Comparison",name:"comparison",postCreationFunction:(t,e)=>{t.getComponent("settings")?.registerCallback("unitchange",e.unitchange)}},{type:"Search",name:"searchDesktop",options:{config:{stopOnExactMatch:!0}},postCreationFunction:(t,e)=>{e.onResize=()=>{s.AppUtils.isMobileMode()?e.hide():e.show()}}},{type:"Search",name:"searchMobile",hasPlaceholder:!1,options:{alwaysOpen:!0,magClass:"mag-close",searchClass:"search-open",config:{stopOnExactMatch:!0}},postCreationFunction:(t,e)=>{e.onResize=()=>{s.AppUtils.isMobileMode()?e.show():e.hide()}}},{type:"Menu",name:"menu",postCreationFunction:(t,e)=>{const i=t.getManager("content"),s=["134340_pluto","101955_bennu","dimorphos","16_psyche","4_vesta"],n=[];for(let t=0;t<s.length;t++)n.push(i.getEntityInfo(s[t]));const o=["1p_halley","9p_tempel_1","67p_churyumov_gerasimenko","103p_hartley_2"],a=[];for(let t=0;t<o.length;t++)a.push(i.getEntityInfo(o[t]));const r=["sc_juno","sc_new_horizons","sc_voyager_1","sc_sentinel_6","sc_perseverance"],l=[];for(let t=0;t<r.length;t++)l.push(i.getEntityInfo(r[t]));const c=[],h=i.getStoryList();for(let t=0;t<h.featured.length;t++)h.stories[h.featured[t]]?c.push(h.stories[h.featured[t]]):h.external[h.featured[t]]?c.push(h.external[h.featured[t]]):h.internal[h.featured[t]]?c.push(h.internal[h.featured[t]]):console.error(`Story not found id:${h.featured[t]}`);const u=[];Object.keys(h.stories).forEach((t=>{u.push(h.stories[t])})),Object.keys(h.external).forEach((t=>{u.push(h.external[t])}));const d={stories:u,...i.entitiesByCategory},p=["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune"],_=[];for(let t=0;t<p.length;t++)_.push(i.getEntityInfo(p[t]));e.setupContent(d,c,_,n,a,l),t.getComponent("searchMobile")?.registerCallback("resultselected",e.hide)}},{type:"FeaturedStoriesPanel",name:"featuredStoriesPanel",options:{isVisible:!0}}]},function(t){"use strict";t.exports=JSON.parse('{"limits":{"min":"1949-12-31T00:00:00Z","max":"2049-12-31T00:00:00Z"}}')},function(t){"use strict";t.exports=JSON.parse('{"zoomMax":0,"staticEntityGroups":["stars","planets"],"dynamicEntities":["all"],"entityOptions":{"milkyWaySprite":true,"heliosphere":true},"meta":{"titlePrefix":"Eyes on the Solar System","titleSuffix":"NASA/JPL","url":"https://eyes.nasa.gov/apps/solar-system","description":"Eyes on the Solar System lets you explore the planets, their moons, asteroids, comets and the spacecraft exploring them from 1950 to 2050.  You are in control of time and space!  Using real trajectory data you can recreate famous moments in solar system exploration, or preview exciting adventures yet to come."}}')},function(t){"use strict";t.exports=JSON.parse('[{"class":"HomeView","name":"home","components":["clock","clockShortcut","settings","menu","layerPanel","breadcrumb","searchDesktop","searchMobile","mobileExpandButton","featuredStoriesPanel","overlay","infoPanel","collapsibleMenu","timeControls"]},{"class":"ObjectView","name":"object","components":["clock","clockShortcut","settings","menu","layerPanel","breadcrumb","searchDesktop","searchMobile","overlay","mobileExpandButton","loadIcon","contentPanel","eventsTimeline","infoPanel","collapsibleMenu","timeControls"]},{"class":"StoryView","name":"story","components":["storyClock","settings","layerPanel","breadcrumb","story","overlay","infoPanel"]},{"class":"CompareView","name":"compare","components":["settings","breadcrumb","loadIcon","comparison","infoPanel","overlay"]},{"class":"EventView","name":"event","components":["clock","clockShortcut","settings","menu","layerPanel","breadcrumb","searchDesktop","searchMobile","overlay","mobileExpandButton","loadIcon","contentPanel","eventsTimeline","infoPanel","collapsibleMenu","timeControls"]},{"class":"TelescopeView","name":"telescope","components":["menu","telescope","breadcrumb","searchDesktop","searchMobile","overlay","loadIcon","infoPanel"]},{"class":"FeatureView","name":"feature","components":["clock","clockShortcut","settings","menu","layerPanel","breadcrumb","searchDesktop","searchMobile","overlay","mobileExpandButton","loadIcon","contentPanel","infoPanel","collapsibleMenu","timeControls"]}]')},function(t,e,i){"use strict";i.r(e);var s=i(707),n=i(710),o=i(851),a=i(852),r=i(853),l=i(986),c=i(987);e.default={CompareView:s.CompareView,EventView:n.EventView,FeatureView:o.FeatureView,HomeView:a.HomeView,ObjectView:r.ObjectView,StoryView:l.StoryView,TelescopeView:c.TelescopeView}},function(t,e,i){"use strict";i.r(e),i.d(e,{CompareView:function(){return CompareView}});var s=i(708),n=i(1),o=i(528),a=i(709);const r={metric:{radius:{unit:"KM",small:{unit:"M",multiplier:n.AppUtils.conversionTable.kmToM}}},imperial:{radius:{unit:"MI",multiplier:n.AppUtils.conversionTable.kmToMi,small:{unit:"FT",multiplier:n.AppUtils.conversionTable.kmToFt}}}};class CompareView extends s.default{constructor(...t){super(...t),this._validQueries.push("id"),this._rules.spaceObject={value:t=>null!==this._app.getManager("content").getEntityInfo(t)},this.defaultConfig=null,this._category="",this._compare=null,this.bindFunctions(["togglePhotoMode"])}async _updateResources(t){this._app.getManager("layer").setTarget("");const e=this._app.getManager("content").getEntityInfo(t.spaceObject);this._category=e.category}async processQuery(t){await super.processQuery(t);const{spaceObject:e,id:i}=t;let s=a.default;this._category&&a[this._category]&&(s=a[this._category]),s=s.filter((t=>t!==e));const n=i||s[0];e!==this._compare&&this._app.getComponent("comparison").clearLeftPanelText(e),this._compare=e,this._compareTo=n,this._entityInfo=this._app.getManager("content").getEntityInfo(this._compare),this._compareEntityInfo=this._app.getManager("content").getEntityInfo(this._compareTo),this._app.getComponent("comparison").clearRightPanelText(n),await this._app.getManager("comparison").compare(e,n),this._app.getComponent("comparison").setup({list:s,name:e,compare:n,unitConverter:r,...t}),this._updateTitle(),await this._updateLoading(t,e,n)}async _updateLoading(t,e,i){if(!e||!i)return;const s=this.app.getManager("scene");s.setEntitiesForceVisible([e,i],!1),await o.SceneHelpers.waitTillEntitiesInPlace(this._app.scene,[e,i]);const n=[],a=["model","spheroid"],r=[e,i];for(let t=0;t<r.length;t++){const e=r[t];s.addLoading(e,"compare");for(let t=0;t<a.length;t++){const i=s.get("comparison").get(e,a[t]);null!==i&&(s.forceLoad(i),n.push(s.componentIsReady(i)))}}Promise.all(n).then((()=>{s.removeLoading(e,"compare"),s.removeLoading(i,"compare")}))}async _updateComponents(t){super._updateComponents(t);const e=this._app.getManager("router").currentRoute.url.match(/[^/]+/g);this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:e}),this._app.getComponent("settings").toggleLightOptions("flood");const i=this._app.getComponent("settings");if(i){const t=i.getConfig();this.defaultConfig=n.AppUtils.deepCopy(t),t.advancedSettings=!1,t.allowGuidedCamera=!1,t.allowZoom=!0,t.allowLayers=!1,t.allowInfoPanel=!1,t.allowToggleUnit=!0,t.allowPhotoMode=!0,t.zoomIn=this._app.getManager("comparison").zoomIn,t.zoomOut=this._app.getManager("comparison").zoomOut,i.setConfig(t)}this._app.getComponent("settings").getState("isPhotoMode")&&this._app.getComponent("settings").togglePhotoMode()}togglePhotoMode(t){t?(this._app.getComponent("settings").collapse(),this._app.getComponent("comparison").hide()):this._app.getComponent("comparison").show()}onLeave(t){super.onLeave(t),this._app.getManager("comparison").exit(),this._compare=null;const e=this._app.getComponent("settings");e&&this.defaultConfig&&(this.defaultConfig.zoomIn=this._app.getManager("camera").zoomIn,this.defaultConfig.zoomOut=this._app.getManager("camera").zoomOut,e.setConfig(this.defaultConfig))}registerCallbacks(){super.registerCallbacks(),this._app.getComponent("settings").registerCallback("photomodechange",this.togglePhotoMode)}removeCallbacks(){super.removeCallbacks(),this._app.getComponent("settings").removeCallback("photomodechange",this.togglePhotoMode)}_updateTitle(){let{iauName:t,displayName:e}=this._entityInfo||{};const i=t||e||"";let{iauName:s,displayName:n}=this._compareEntityInfo||{};const o=s||n||"";document.title=`${i} Comparison to ${o} - Eyes on the Solar System - NASA/JPL`}}},function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return ExtendedBaseView}});var s=i(1);class ExtendedBaseView extends s.BaseView{constructor(...t){super(...t),this._collapsibleItemOptions=[{itemTitle:"Events Timeline",componentNames:["eventsTimeline"],positionIndex:0,dimensions:{width:{min:320,max:600},height:{min:80,max:100}},expand:!1},{itemTitle:"Time Controls",componentNames:["timeControls","clock","clockShortcut"],positionIndex:1,dimensions:{width:{min:320,max:600},height:{min:100,max:120}}}],this._collapsibleItems=null,this._offsetPanel=null,this.bindFunctions(["setViewportOffset"])}async onEnter(t){this._offsetPanel||this.setViewportOffset(!1);const{menu:e,featured:i,search:s,content:n}=this._app.getManager("router").configs;if(!1===e){const t="menu",e=this._components.indexOf(t);e>-1&&(this._components.splice(e,1),this._app.removeComponent(t))}if(!1===i){const t="featuredStoriesPanel",e=this._components.indexOf(t);e>-1&&(this._components.splice(e,1),this._app.removeComponent(t))}if(!1===s){const t=["searchDesktop","searchMobile"];for(let e=0;e<t.length;e++){const i=t[e],s=this._components.indexOf(i);s>-1&&(this._components.splice(s,1),this._app.removeComponent(i))}}if(!1===n){const t="contentPanel",e=this._components.indexOf(t);e>-1&&(this._components.splice(e,1),this._app.removeComponent(t))}await super.onEnter(t)}async onLeave(t){this._offsetPanel&&this.setViewportOffset(!1,!0),this._offsetPanel=null;const e=this._app.getComponent("clockShortcut");e.setCallback(null),e.hide(),await super.onLeave(t)}registerCallbacks(){super.registerCallbacks(),this._offsetPanel?.registerCallback("expandtoggle",this.setViewportOffset)}removeCallbacks(){super.removeCallbacks(),this._offsetPanel?.removeCallback("expandtoggle",this.setViewportOffset)}_reset(){super._reset(),this._app.getComponent("timeControls")?.setCanUpdate(!1)}async _updateComponents(t){const e=!this._app.getManager("router").configs.locked&&this._isSpacecraft&&this._scOrderedEvents?.length>1,i=this._components.indexOf("eventsTimeline");e&&-1===i?(this._components.push("eventsTimeline"),this.app.getComponent("eventsTimeline").setEnabled(!0)):!e&&i>-1&&this._components.splice(i,1);const s=this._app.getComponent("collapsibleMenu"),n=this._components.includes("collapsibleMenu");s?.removeAllItems(),n&&(this._collapsibleItems=this._collapsibleItemOptions.map((t=>t.componentNames.every((t=>this._components.includes(t)))&&s.addItem(t))));if(this._components.includes("timeControls")){const t=this._app.getComponent("timeControls");this._collapsibleItems=await Promise.all(this._collapsibleItems),this._target?this._app.getManager("scene").get("main").getEntity(this._target).getLoadedPromise().then((()=>{t.setCanUpdate(!0)})):t.setCanUpdate(!0)}await this._app.getComponent("settings").setConfig({orientation:{tabletPortrait:{ori:"horizontal"},smallLandscape:{ori:"horizontal"},tabletLandscape:{ori:"horizontal"}}}),this._updateTitle()}_updateTitle(){const{iauName:t,displayName:e}=this._entityInfo||{},i=t||e||"Home";document.title=`${i} - Eyes on the Solar System - NASA/JPL`}_showControls(){const t=this._app.getComponent("settings"),e=this._app.getComponent("collapsibleMenu");this._app.getComponent("clock").show(),this._app.getComponent("clockShortcut").show(),e.show(),t.show(),document.getElementById("float-mid-bottom").classList.remove("hidden"),document.getElementById("float-mid-bottom").classList.add("active");const{embed:i,content:n,locked:o}=this._app.getManager("router").configs;if(!1!==n&&s.AppUtils.isMobileMode()?this._app.getComponent("mobileExpandButton")?.show():this._app.getComponent("mobileExpandButton")?.hide(),i&&(t.collapse(),e.collapse()),o){this._app.getComponent("searchDesktop")?.hide();const t=this._app.getComponent("menu");t?.hide(),t?.setEnabled(!1)}}_hideControls(){if(s.AppUtils.isMobileMode()){this._app.getComponent("clock").hide(),this._app.getComponent("clockShortcut").hide(),this._app.getComponent("collapsibleMenu").hide(),this._app.getComponent("settings").hide(),document.getElementById("float-mid-bottom").classList.add("hidden"),document.getElementById("float-mid-bottom").classList.remove("active");const t=this._app.getComponent("eventsTimeline");this._app.getComponent("contentPanel")?.getState("isOverlay")&&t.hide()}}toggleViewUI(){const t=document.getElementById("extended-controls"),{visible:e}=this._app.getManager("layer").getLayer("ui");e?(this._components.forEach((t=>{"contentPanel"===t?this._app.getComponent(t).show():this._app.getComponent(t).setEnabled(!0)})),t&&t.classList.remove("hidden"),this.updateVisibility()):(this._components.forEach((t=>{"breadcrumb"!==t&&"settings"!==t&&"layerPanel"!==t&&this._app.getComponent(t).setEnabled(!1),"settings"===t&&this._app.getComponent(t).collapse(),"layerPanel"===t&&this._app.getComponent(t).hide(),"contentPanel"===t&&this._app.getComponent(t).hide()})),t&&t.classList.add("hidden"));this.setViewportOffset(e,!0)}get shouldOffsetRight(){return s.AppUtils.isDesktop()}get shouldOffsetUp(){return!s.AppUtils.isDesktop()}setViewportOffset(t,e=!1){const{visible:i}=this._app.getManager("layer").getLayer("ui"),s=this._offsetPanel?.isEnabled()&&this._offsetPanel._state.isVisible,n=e?s:(t&&i)??s,o=this.shouldOffsetRight&&n,a=this.shouldOffsetUp&&n;document.body.classList.toggle("offset-right",o),document.body.classList.toggle("offset-up",a)}resize(){this.setViewportOffset(),super.resize()}}},function(t){"use strict";t.exports=JSON.parse('{"Planet":["mercury","venus","earth","sun","moon","mars","1_ceres","jupiter","saturn","uranus","neptune","134340_pluto"],"Moon":["mercury","moon","phobos","1_ceres","io","europa","ganymede","callisto","enceladus","titan","134340_pluto"],"Asteroid":["101955_bennu","16_psyche","433_eros","4_vesta","1p_halley","67p_churyumov_gerasimenko","81p_wild_2","9p_tempel_1","c_1995_o1"],"Comet":["101955_bennu","16_psyche","433_eros","4_vesta","1p_halley","67p_churyumov_gerasimenko","81p_wild_2","9p_tempel_1","c_1995_o1"],"DwarfPlanet":["earth","moon","1_ceres","io","europa","titan","134340_pluto","136472_makemake","136108_haumea","136199_eris"],"Spacecraft":["sc_hubble_space_telescope","sc_jwst","scientist","school_bus","rose_bowl","sc_parker_solar_probe","sc_osiris_rex","sc_juno","sc_new_horizons","sc_voyager_1"],"default":["sun","mercury","venus","earth","moon","mars","4_vesta","jupiter","saturn","uranus","neptune","134340_pluto"]}')},function(t,e,i){"use strict";i.r(e),i.d(e,{EventView:function(){return EventView}});var s=i(1),n=i(708),o=i(711),a=i.n(o);class EventView extends n.default{constructor(...t){super(...t),this._rules.spaceObject={value:t=>null!==this._app.getManager("content").getEntityInfo(t)},this._entityInfo=null,this._entityDesc=null,this._scEvents=null,this._scOrderedEvents=null,this._eventName=null,this._eventInfo=null,this._eventDesc=null,this._isSpacecraft=!0,this._hasLoaded=!1,this._onLoaded=null,this.bindFunctions(["_backToLive","_loaded"])}async onEnter(t){this._app.getComponent("clockShortcut").setCallback(this._backToLive),this._offsetPanel=this._app.getComponent("contentPanel"),await super.onEnter(t)}async onLeave(t){this._app.getManager("layer").toggleLayer("heliosphere",{parentId:"sun"},!1),await super.onLeave(t)}registerCallbacks(){super.registerCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.registerCallback("visiblechange",this.updateVisibility),t.registerCallback("overlay",this.updateVisibility)),this._app.getManager("scene").registerCallback("loaded",this._loaded)}removeCallbacks(){super.removeCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.removeCallback("visiblechange",this.updateVisibility),t.removeCallback("overlay",this.updateVisibility)),this._app.getManager("scene").removeCallback("loaded",this._loaded)}_reset(t){super._reset(t),this._entityInfo=null,this._entityDesc=null,this._scEvents=null,this._scOrderedEvents=null,this._eventName=null,this._eventInfo=null,this._eventDesc=null,this._hasLoaded=!1,this._onLoaded=null,this._backRoute=null,this._target=t.spaceObject}async _updateResources(t){if(this._app.getManager("layer").setTarget(this._target),this._app.getManager("selection").selectEntity(this._target),this._entityInfo=this._app.getManager("content").getEntityInfo(this._target),null===this._entityInfo)return void this._handleError(`EventView._updateResources: Cannot find entity named ${this._target}.`);if(this._app.getManager("content").resetContext(),this._hasLoaded=!1,await this._app.getManager("content").loadEvents(this._target,{all:"all_events"}),t.cancelToken.isCanceled)return;if(null===this._app.getManager("content").context.events)return void this._handleError(`EventView._updateResources: Cannot find events list of ${this._target}.`);if(this._scEvents=s.AppUtils.deepCopy(this._app.getManager("content").context.events),null!==this._app.getManager("content").context.orderedEvents&&(this._scOrderedEvents=s.AppUtils.deepCopy(this._app.getManager("content").context.orderedEvents)),await this._app.getManager("content").loadDescriptions([this._target]),t.cancelToken.isCanceled)return;if(null!==this._app.getManager("content").context[this._target]&&(this._entityDesc=s.AppUtils.deepCopy(this._app.getManager("content").context[this._target])),void 0!==t.child){if(void 0===this._scEvents[t.child])return this._eventName=null,void this._handleError(`EventView._updateResources: Cannot find event named ${t.child}.`);this._eventName=t.child,this._eventInfo=this._scEvents[this._eventName]}else this._eventName=null,this._eventInfo=null;if(null!==this._eventName){if(await this._app.getManager("content").loadEvents(this._target,{event:this._eventName}),t.cancelToken.isCanceled)return;null!==this._app.getManager("content").context.eventDesc&&(this._eventDesc=s.AppUtils.deepCopy(this._app.getManager("content").context.eventDesc))}else this._eventDesc=null;const e=this._eventDesc?.target||this._eventInfo?.target;this.app.getManager("scene").setEntitiesForceVisible([...this._eventDesc?.related?this._eventDesc.related:[],...e?[e]:[],...null!==this._target?[this._target]:[]],!1)}async _updateComponents(t){await super._updateComponents(t);const e=this._app.getManager("router"),i=e.currentRoute.url.match(/[^/]+/g);this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:i}),this._app.getManager("layer").toggleLayer("heliosphere",{parentId:"sun"},!1);const s=this._app.getComponent("contentPanel");if(s&&(this._eventName?(await s.onRouteChangeEvent(this._target,this._eventName,this._eventInfo,this._eventDesc,this._scOrderedEvents,t.cancelToken,i),s.updateHDButton()):await s.onRouteChangeEventsOverview(this._target,this._entityDesc,this._scOrderedEvents,t.cancelToken,i),t.embed?s.hide():s.show(),this._app.getComponent("mobileExpandButton").showCPButton(!0,"contentPanel")),t.cancelToken.isCanceled)return;this._collapsibleItems=await(await Promise.all(this._collapsibleItems)).filter((t=>t));const n=this._collapsibleItems.find((t=>"Events Timeline"===t.getState("itemTitle")));e.previousRoute.params?.spaceObject!==this._target&&n?.hide();const{id:o,iauName:a,displayName:r}=this._entityInfo,{dates:l}=this._entityDesc,c={id:o,title:a||r,dates:l,orderedEvents:this._scOrderedEvents};this._onLoaded=()=>{const t=this._app.getComponent("eventsTimeline");t.setTarget(c),t.resize(),n?.show(),this._app.getComponent("contentPanel")?.updateHDButton()},this._hasLoaded&&(this._onLoaded(),this._onLoaded=null)}async _updateTimeForTarget(t){const e=null===this._eventInfo;await super._updateTimeForTarget(t,e);const i=this._app.getManager("time"),s=this._app.getManager("router"),{setTimeLimits:n}=t,o=this._eventInfo?.rate||this._eventDesc?.rate,r=i.getTime(),{start:l,end:c}=this._eventInfo||{},[h,u]=[l&&a()(l),c&&a()(c)];h&&u&&this._setMinEventEnd(h,u);const d=void 0===t.rate,p=void 0===t.time,_=d&&p,g=r.valueOf()===u?.valueOf(),m=!_&&0===t.rate&&a()(t.time).valueOf()===r.valueOf(),y=h&&(_||u&&r.isAfter(u)||h&&r.isBefore(h)||g&&t.rate>0),f=void 0!==o&&(d||y);if(_&&this._backRoute&&this._backRoute.url!==s.currentRoute.url){const t=this._backRoute.query?`${this._backRoute.url}?${this._backRoute.query}`:this._backRoute.url;return void s.navigate(t)}n&&(h&&i.setMin(h),u&&i.setMax(u),s.previousRoute?.url&&(this._backRoute={...s.previousRoute}));const b=i.parseTime(t.time),T=i.isWithinLimits(b);if(-1===T||1===T){const t=`/${this._target}/events`;let e=i.getTimeUrl(b),n=1,o="time outside event limits";const{min:a,max:r}=this._app.getManager("scene").getCoverage(this._target);b.isAfter(r)?(e=i.getTimeUrl(r),n=0,o="time exceeds mission end"):b.isBefore(a)&&(e=i.getTimeUrl(a),o="time preceeds mission start");const l={rate:n,time:e};return i.setMin(a??i.getDefaultLimits().min),i.setMax(r??i.getDefaultLimits().max),this._app.getComponent("clock")?.setLimitMessage(T,o),void s.navigate(l,t)}m||!f&&!y||s.navigate({...f&&{rate:o},...y&&{time:i.getTimeUrl(h)}})}_setMinEventEnd(t,e){const i=Math.abs(e.valueOf()-t.valueOf());if(i<6e4){const t=6e4-i;e.add(t,"ms")}}_loaded(){"function"==typeof this._onLoaded&&this._onLoaded(),this._onLoaded=null,this._hasLoaded=!0}_backToLive(){const t=this._app.getManager("time"),e=t.getTimeUrl(t.getNow());this._app.getManager("router").navigate({time:e,rate:1})}replayEvent(t=!0){const e=this._app.getManager("router"),i=this._app.getManager("time"),n=i.getTime();if(t&&"event"===e.currentView){const{params:t}=e.lastRouteResolved();this._updateCamera({...t})}const{min:o}=i.timeLimits,a=n.valueOf()===o.valueOf(),r={rate:"event"===e.currentView?this._eventInfo?.rate??this._eventDesc?.rate??1:1,...o&&!a&&{time:i.getTimeUrl(o)}};this._backRoute=null;s.AppUtils.deepEqual(e.query,r)?e.reload():e.navigate(r)}async _updateCamera(t){const e=this._eventDesc?.target||this._eventInfo?.target;this._app.getManager("content").hasLanded(this._entityInfo)?await this._app.cameraScripts.alignSpacecraftPlanet(this._target):e?await this._app.cameraScripts.alignObjects(this._target,e,{duration:this._eventDesc.duration||this._eventInfo.duration,distance:this._eventDesc.distance||this._eventInfo.distance,horizontalOffset:this._eventDesc.horizontalOffset||this._eventInfo.horizontalOffset,verticalOffset:this._eventDesc.verticalOffset||this._eventInfo.verticalOffset}):await this._app.cameraScripts.goToSpacecraft(this._target);this.app.getManager("scene").setEntitiesForceVisible([...this._eventDesc?.related?this._eventDesc.related:[],...e?[e]:[],...null!==this._target?[this._target]:[]],!0)}_shouldHideControls(){return s.AppUtils.isMobileMode()&&this._app.getComponent("contentPanel")?.getState("isVisible")}_updateTitle(){const{iauName:t,displayName:e}=this._entityInfo||{},i=t||e||"Home";let s=`${i} Events`;null!==this._eventInfo&&(s=`${this._eventInfo.title} - ${i}`),document.title=`${s} - Eyes on the Solar System - NASA/JPL`}}},,,,function(t,e,i){var s={"./af":715,"./af.js":715,"./ar":716,"./ar-dz":717,"./ar-dz.js":717,"./ar-kw":718,"./ar-kw.js":718,"./ar-ly":719,"./ar-ly.js":719,"./ar-ma":720,"./ar-ma.js":720,"./ar-sa":721,"./ar-sa.js":721,"./ar-tn":722,"./ar-tn.js":722,"./ar.js":716,"./az":723,"./az.js":723,"./be":724,"./be.js":724,"./bg":725,"./bg.js":725,"./bm":726,"./bm.js":726,"./bn":727,"./bn-bd":728,"./bn-bd.js":728,"./bn.js":727,"./bo":729,"./bo.js":729,"./br":730,"./br.js":730,"./bs":731,"./bs.js":731,"./ca":732,"./ca.js":732,"./cs":733,"./cs.js":733,"./cv":734,"./cv.js":734,"./cy":735,"./cy.js":735,"./da":736,"./da.js":736,"./de":737,"./de-at":738,"./de-at.js":738,"./de-ch":739,"./de-ch.js":739,"./de.js":737,"./dv":740,"./dv.js":740,"./el":741,"./el.js":741,"./en-au":742,"./en-au.js":742,"./en-ca":743,"./en-ca.js":743,"./en-gb":744,"./en-gb.js":744,"./en-ie":745,"./en-ie.js":745,"./en-il":746,"./en-il.js":746,"./en-in":747,"./en-in.js":747,"./en-nz":748,"./en-nz.js":748,"./en-sg":749,"./en-sg.js":749,"./eo":750,"./eo.js":750,"./es":751,"./es-do":752,"./es-do.js":752,"./es-mx":753,"./es-mx.js":753,"./es-us":754,"./es-us.js":754,"./es.js":751,"./et":755,"./et.js":755,"./eu":756,"./eu.js":756,"./fa":757,"./fa.js":757,"./fi":758,"./fi.js":758,"./fil":759,"./fil.js":759,"./fo":760,"./fo.js":760,"./fr":761,"./fr-ca":762,"./fr-ca.js":762,"./fr-ch":763,"./fr-ch.js":763,"./fr.js":761,"./fy":764,"./fy.js":764,"./ga":765,"./ga.js":765,"./gd":766,"./gd.js":766,"./gl":767,"./gl.js":767,"./gom-deva":768,"./gom-deva.js":768,"./gom-latn":769,"./gom-latn.js":769,"./gu":770,"./gu.js":770,"./he":771,"./he.js":771,"./hi":772,"./hi.js":772,"./hr":773,"./hr.js":773,"./hu":774,"./hu.js":774,"./hy-am":775,"./hy-am.js":775,"./id":776,"./id.js":776,"./is":777,"./is.js":777,"./it":778,"./it-ch":779,"./it-ch.js":779,"./it.js":778,"./ja":780,"./ja.js":780,"./jv":781,"./jv.js":781,"./ka":782,"./ka.js":782,"./kk":783,"./kk.js":783,"./km":784,"./km.js":784,"./kn":785,"./kn.js":785,"./ko":786,"./ko.js":786,"./ku":787,"./ku.js":787,"./ky":788,"./ky.js":788,"./lb":789,"./lb.js":789,"./lo":790,"./lo.js":790,"./lt":791,"./lt.js":791,"./lv":792,"./lv.js":792,"./me":793,"./me.js":793,"./mi":794,"./mi.js":794,"./mk":795,"./mk.js":795,"./ml":796,"./ml.js":796,"./mn":797,"./mn.js":797,"./mr":798,"./mr.js":798,"./ms":799,"./ms-my":800,"./ms-my.js":800,"./ms.js":799,"./mt":801,"./mt.js":801,"./my":802,"./my.js":802,"./nb":803,"./nb.js":803,"./ne":804,"./ne.js":804,"./nl":805,"./nl-be":806,"./nl-be.js":806,"./nl.js":805,"./nn":807,"./nn.js":807,"./oc-lnc":808,"./oc-lnc.js":808,"./pa-in":809,"./pa-in.js":809,"./pl":810,"./pl.js":810,"./pt":811,"./pt-br":812,"./pt-br.js":812,"./pt.js":811,"./ro":813,"./ro.js":813,"./ru":814,"./ru.js":814,"./sd":815,"./sd.js":815,"./se":816,"./se.js":816,"./si":817,"./si.js":817,"./sk":818,"./sk.js":818,"./sl":819,"./sl.js":819,"./sq":820,"./sq.js":820,"./sr":821,"./sr-cyrl":822,"./sr-cyrl.js":822,"./sr.js":821,"./ss":823,"./ss.js":823,"./sv":824,"./sv.js":824,"./sw":825,"./sw.js":825,"./ta":826,"./ta.js":826,"./te":827,"./te.js":827,"./tet":828,"./tet.js":828,"./tg":829,"./tg.js":829,"./th":830,"./th.js":830,"./tk":831,"./tk.js":831,"./tl-ph":832,"./tl-ph.js":832,"./tlh":833,"./tlh.js":833,"./tr":834,"./tr.js":834,"./tzl":835,"./tzl.js":835,"./tzm":836,"./tzm-latn":837,"./tzm-latn.js":837,"./tzm.js":836,"./ug-cn":838,"./ug-cn.js":838,"./uk":839,"./uk.js":839,"./ur":840,"./ur.js":840,"./uz":841,"./uz-latn":842,"./uz-latn.js":842,"./uz.js":841,"./vi":843,"./vi.js":843,"./x-pseudo":844,"./x-pseudo.js":844,"./yo":845,"./yo.js":845,"./zh-cn":846,"./zh-cn.js":846,"./zh-hk":847,"./zh-hk.js":847,"./zh-mo":848,"./zh-mo.js":848,"./zh-tw":849,"./zh-tw.js":849};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=714},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,{FeatureView:function(){return FeatureView}});var s=i(528),n=i(1),o=i(708);class FeatureView extends o.default{constructor(...t){super(...t),this._rules.spaceObject={value:t=>null!==this._app.getManager("content").getEntityInfo(t)},this._rules.feature={value:t=>{const e=this._app.getManager("router").currentRoute.params.spaceObject,i=this._app.getManager("content").getEntityInfo(e);return!("moons"===t&&!i.hasMoons)}},this._entityInfo=null,this._entityDesc=null,this._featureDesc=null,this._featureInfo={},this._forceLoadEntities=[]}async onEnter(t){const e=this._app.getComponent("contentPanel");this._offsetPanel=e,await super.onEnter(t,e?.components)}registerCallbacks(){super.registerCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.registerCallback("visiblechange",this.updateVisibility),t.registerCallback("overlay",this.updateVisibility))}removeCallbacks(){super.removeCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.removeCallback("visiblechange",this.updateVisibility),t.removeCallback("overlay",this.updateVisibility))}_reset(t){super._reset(t),this._entityInfo=null,this._entityDesc=null,this._featureDesc=null,this._featureInfo={},this._forceLoadEntities=[],this._target=t.spaceObject}async _updateResources(t){const e=this._app.getManager("content").getEntityList();if(this._entityInfo=this._app.getManager("content").getEntityInfo(this._target),null===this._entityInfo)return void this._handleError(`FeatureView._updateResources: Cannot find entity named ${this._target}.`);this._app.getManager("content").resetContext();const i=this.app.getManager("scene");switch(null!==this._target&&this._forceLoadEntities.push(this._target),this._app.cameraScripts.isBarycenter(this._target)&&this._forceLoadEntities.push(this._app.cameraScripts.removeBarycenter(this._target)),i.setEntitiesForceVisible(this._forceLoadEntities,!1),await s.SceneHelpers.waitTillEntitiesInPlace(this._app.scene,this._forceLoadEntities),this._app.getManager("layer").setTarget(this._target),this._app.getManager("selection").selectEntity(this._target),t.feature){case"moons":{const t=await this._app.getManager("content").getEntityDesc(this._target);let i=[];if(null!==t&&(i=t.featuredMoons,i&&i.length>0)){i=i.filter((t=>t in e));const t=i.map((t=>{const e=this._app.getManager("content").getEntityInfo(t);return{title:e.displayName||e.iauName,url:`${this._app.getManager("router").currentRoute.url}/${t}`}})),s=5,n=t.length>s?s:t.length;this._featureInfo={initial:t.slice(0,n),more:n===s?t.slice(n):[]}}break}case"events":this._featureInfo={};break;default:return void this._handleError(`FeatureView._updateResources: Unrecognized feature - ${t.feature}.`)}if(this._featureInfo.initial&&0===this._featureInfo.initial.length)return void this._handleError(`FeatureView._updateResources: No data to display for ${this._target}'s ${t.feature}.`);const o=`${this._target}_${t.feature}`;await this._app.getManager("content").loadDescriptions([this._target,o]),t.cancelToken.isCanceled||(null!==this._app.getManager("content").context[this._target]&&(this._entityDesc=n.AppUtils.deepCopy(this._app.getManager("content").context[this._target])),this._featureDesc=this._app.getManager("content").context[o]?n.AppUtils.deepCopy(this._app.getManager("content").context[o]):{title:`${this._entityInfo.displayName||this._entityInfo.iauName}'s ${t.feature}`})}async _updateComponents(t){super._updateComponents(t);const e=this._app.getManager("router").currentRoute.url.match(/[^/]+/g);this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:e});const i=this._app.getComponent("contentPanel");i&&(this._app.getComponent("mobileExpandButton").showCPButton(!0,"contentPanel"),await i.onRouteChangeFeature(this._target,this._entityInfo,this._featureInfo,this._featureDesc,t.cancelToken,e),t.embed?i.hide():i.show())}async _updateCamera(t){await this._app.cameraScripts.goToSystem(this._target);this.app.getManager("scene").setEntitiesForceVisible(this._forceLoadEntities,!0)}_shouldHideControls(){return n.AppUtils.isMobileMode()&&this._app.getComponent("contentPanel")?.getState("isVisible")}_updateTitle(){const{iauName:t,displayName:e}=this._entityInfo||{},i=`${t||e||"Home"} Moons`;document.title=`${i} - Eyes on the Solar System - NASA/JPL`}}},function(t,e,i){"use strict";i.r(e),i.d(e,{HomeView:function(){return HomeView}});var s=i(1),n=i(708);class HomeView extends n.default{async onEnter(t){const e=this._app.getComponent("featuredStoriesPanel");this._offsetPanel=e;const i=e?.components??[];await super.onEnter(t,i)}registerCallbacks(){super.registerCallbacks(),this._app.getComponent("featuredStoriesPanel")?.registerCallback("visiblechange",this.updateVisibility)}removeCallbacks(){super.removeCallbacks(),this._app.getComponent("featuredStoriesPanel")?.removeCallback("visiblechange",this.updateVisibility)}async _updateResources(t){this.app.getManager("scene").setEntitiesForceVisible(null!==this._target?[this._target]:[],!1),this._app.getManager("time").resetLimits(),this._app.getManager("layer").setTarget("");const e=s.AppUtils.deepCopy(this._app.getManager("content").getStoryList());this._featuredCardsList=[],e.featured.forEach((t=>{void 0!==e.stories[t]?this._featuredCardsList.push(e.stories[t]):void 0!==e.external[t]?(e.external[t].isExternal=!0,this._featuredCardsList.push(e.external[t])):void 0!==e.internal[t]&&(e.internal[t].isInternal=!0,this._featuredCardsList.push(e.internal[t]))}))}async _updateComponents(t){super._updateComponents(t);const{embed:e,locked:i}=this._app.getManager("router").configs,s=this._app.getComponent("featuredStoriesPanel");s&&(!i&&null!==this._featuredCardsList&&this._featuredCardsList.length>0?(await s.onRouteChange(t,this._featuredCardsList),e?s.hide():s.show()):(s.hide(),s.setEnabled(!1)),await(this._app.getComponent("mobileExpandButton")?.showCPButton(!0,"featuredStoriesPanel"))),await(this._app.getComponent("breadcrumb")?.onRouteChange(t))}async _updateCamera(t){await this._app.cameraScripts.goToSystem("inner_solar_system");this.app.getManager("scene").setEntitiesForceVisible(null!==this._target?[this._target]:[],!0)}_shouldHideControls(){return s.AppUtils.isMobileMode()&&this._app.getComponent("featuredStoriesPanel")?.getState("isVisible")}_updateTitle(){document.title="Eyes on the Solar System - NASA/JPL"}}},function(t,e,i){"use strict";i.r(e),i.d(e,{ObjectView:function(){return ObjectView}});var s=i(528),n=(i(5),i(1)),o=(i(854),i(708));class ObjectView extends o.default{constructor(...t){super(...t),this._rules.spaceObject={value:t=>null!==this._app.getManager("content").getEntityInfo(t)},this._entityInfo=null,this._entityDesc=null,this._scEvents=null,this._featuredCardsList=null,this._isSpacecraft=!1,this._forceLoadEntities=[],this._hasLoaded=null,this._onLoaded=[],this.bindFunctions(["onParentChanged","_loaded","onChildChanged","getCurrentTarget"])}async onEnter(t){const e=this._app.getComponent("contentPanel");this._offsetPanel=e,await super.onEnter(t,e?.components)}async onLeave(t){this._app.getManager("layer").toggleLayer("heliosphere",{parentId:"sun"},!1);const e=this._app.getManager("scene").get("main").getEntity(this._target);null!==e&&(e.removeParentChangedCallback(this.onParentChanged),e.removeChildChangedCallback(this.onChildChanged)),await super.onLeave(t)}async onRouteChange(t){const e=this._app.getManager("scene");if(null!==this._target){const t=e.get("main").getEntity(this._target);null!==t&&(t.removeParentChangedCallback(this.onParentChanged),t.removeChildChangedCallback(this.onChildChanged))}this._app.getManager("layer").toggleLayer("heliosphere",{parentId:"sun"},!1);if("Moon"===this._app.getManager("content").getEntityInfo(t.spaceObject).category){const e=this._app.getManager("scene").getParent(t.spaceObject);if(null!==e){const i="/"+e+"/moons/"+t.spaceObject;if(void 0!==this._app.getManager("router").query.time){const t={time:this._app.getManager("time").getTimeUrl(),rate:this._app.getManager("time").getTimeRate()};this._app.getManager("router").reroute(i,t)}else this._app.getManager("router").reroute(i)}}super.onRouteChange(t)}registerCallbacks(){super.registerCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.registerCallback("visiblechange",this.updateVisibility),t.registerCallback("overlay",this.updateVisibility)),this._app.getManager("scene").registerCallback("loaded",this._loaded)}removeCallbacks(){super.removeCallbacks();const t=this._app.getComponent("contentPanel");t&&(t.removeCallback("visiblechange",this.updateVisibility),t.removeCallback("overlay",this.updateVisibility)),this._app.getManager("scene").removeCallback("loaded",this._loaded)}_reset(t){super._reset(t),this._entityDesc=null,this._scEvents=null,this._featuredCardsList=null,this._scOrderedEvents=null,this._isSpacecraft=!1,this._forceLoadEntities=[],this._hasLoaded=null,this._onLoaded=[],this._target="moons"===t.feature&&t.child?t.child:t.spaceObject}async _updateResources(t){const e=this._app.getManager("content"),i=this.app.getManager("scene"),o=this._app.getManager("layer");if(this._entityInfo=e.getEntityInfo(this._target),null===this._entityInfo)return void this._handleError(`ObjectView._updateResources: Cannot find entity named ${this._target}.`);e.resetContext(),null!==this._target&&this._forceLoadEntities.push(this._target),this._app.cameraScripts.isBarycenter(this._target)&&this._forceLoadEntities.push(this._app.cameraScripts.removeBarycenter(this._target)),i.setEntitiesForceVisible(this._forceLoadEntities,!1),await s.SceneHelpers.waitTillEntitiesInPlace(this._app.scene,this._forceLoadEntities),o.setTarget(this._target),this._app.getManager("selection").selectEntity(this._target);if("spacecraft"===this._entityInfo.category.toLowerCase()&&(this._isSpacecraft=!0,this._hasLoaded=!1,this._entityInfo.hasEvents)){try{await e.loadEvents(this._target,{all:"all_events"})}catch(t){console.log("ObjectView._updateResources:",t)}if(t.cancelToken.isCanceled)return;null!==e.context.events&&(this._scEvents=n.AppUtils.deepCopy(e.context.events)),null!==e.context.orderedEvents&&(this._scOrderedEvents=n.AppUtils.deepCopy(e.context.orderedEvents))}if(await e.loadDescriptions([this._target]),t.cancelToken.isCanceled)return;null!==e.context[this._target]&&(this._entityDesc=n.AppUtils.deepCopy(e.context[this._target]));let a=null;if(null!==this._entityDesc&&(a=this._entityDesc.cards),null!=a){const t=n.AppUtils.deepCopy(e.getStoryList());this._featuredCardsList=[];for(let e=0;e<a.length;e++){const i=a[e].storyId;void 0!==t.stories[i]?this._featuredCardsList.push(t.stories[i]):void 0!==t.external[i]&&this._featuredCardsList.push(t.external[i])}}}getCurrentTarget(){return this._target}async onChildChanged(t,e){if(null===e.getComponentByType("camera")&&null!==this._target){const t=this._app.getComponent("contentPanel");t&&(await t.onChildParentChange(this._target,this._entityInfo,!0),t.updateHDButton())}}async onParentChanged(t,e,i){if(null!==this._target){const t=this._app.getManager("layer"),s=null!==e?e.getName():"",n=null!==i?i.getName():"";t.resetContextualLayers(n,s);const o=this._app.getComponent("contentPanel");o&&(await o.onChildParentChange(this._target,this._entityInfo,!0),o.updateHDButton()),this._updateCamera({oldParent:s,newParent:n})}}async _updateComponents(t){super._updateComponents(t);const e=this._app.getManager("router"),{embed:i}=t,s=e.currentRoute.url.match(/[^/]+/g);this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:s});if(this._components.includes("eventsTimeline")){this._collapsibleItems=await Promise.all(this._collapsibleItems);const t=this._collapsibleItems.find((t=>"Events Timeline"===t.getState("itemTitle")));e.previousRoute.params?.spaceObject!==this._target&&t?.hide();const{id:i,iauName:s,displayName:n}=this._entityInfo,{dates:o}=this._entityDesc,a={id:i,title:s||n,dates:o,orderedEvents:this._scOrderedEvents};if(this._onLoaded.push((()=>{const e=this._app.getComponent("eventsTimeline");e.setTarget(a),e.resize(),t?.show()})),this._hasLoaded){for(let t=0;t<this._onLoaded.length;t++)this._onLoaded[t]();this._onLoaded=[]}}if(null!==this._target){const e=this._app.getComponent("contentPanel");if(e){this._app.getComponent("mobileExpandButton").showCPButton(!0,"contentPanel");const n=this._entityDesc?.title||this._entityInfo.displayName||this._entityInfo.iauName;e.clearPanel(n),await e.onRouteChangeObject(this._target,this._entityInfo,this._entityDesc,this._scEvents,this._featuredCardsList,t.cancelToken,s),this._onLoaded.push((async n=>{t.cancelToken&&t.cancelToken.isCanceled&&n!==this.getCurrentTarget()||(await e.onRouteChangeObjectLoaded(this._target,this._entityInfo,this._entityDesc,this._scEvents,this._featuredCardsList,t.cancelToken,s),i?e.hide():e.show())}))}const n=this._app.getManager("scene").get("main").getEntity(this._target);n.addParentChangedCallback(this.onParentChanged),n.addChildChangedCallback(this.onChildChanged)}}async _updateTimeForTarget(t){await super._updateTimeForTarget(t);const e=this._app.getManager("time"),i=this._app.getManager("router"),s=e.parseTime(t.time),n=e.isWithinLimits(s);if(0!==n){const{min:t,max:s}=e.timeLimits;let o;1===n&&s?o=e.getTimeUrl(s):-1===n&&t&&(o=e.getTimeUrl(t)),o&&(this._app.getComponent("clock")?.setLimitMessage(n),i.navigate({time:o}))}}async _updateCamera(t){const e=this._entityInfo.category.toLowerCase(),{cameraScripts:i}=this._app,s=this._app.getManager("content").hasLanded(this._entityInfo),n=this._app.getComponent("contentPanel");void 0!==t?.oldParent?await this._updateCameraOnParentChange(t):n?.isEnabled()||("spacecraft"===e?s?await i.alignSpacecraftPlanet(this._target):await i.goToSpacecraft(this._target):"landing site"===e?await i.alignSpacecraftPlanet(this._target):"goToInstrument"===e?await i.goToInstrument(this._target):await i.goToCelestialObject(this._target));this.app.getManager("scene").setEntitiesForceVisible(this._forceLoadEntities,!0),n?.updateHDButton()}async _updateCameraOnParentChange(t){const e=this._app.getManager("scene"),i=this._app.getComponent("viewOptionsBlock"),{cameraScripts:s}=this._app,o=this._app.getManager("content").getEntityInfo(e.getParent(this._target)),a=o.displayName||o.iauName,r=this._entityInfo.displayName||this._entityInfo.iauName,l=this._app.getManager("content").hasLanded(this._entityInfo),c=this._app.getManager("camera").getContext().context;switch(i._currentView){case"alignSpacecraftPlanet":i.selectRadioButton(`Near ${r}`),c!==n.CameraScripts.CONTEXT.ALIGN_OBJECTS&&s.alignSpacecraftPlanet(this._target);break;case"nearSpacecraft":c!==n.CameraScripts.CONTEXT.SPACECRAFT&&await s.goToSpacecraft(this._target),i.selectRadioButton(`Near ${r}`),l&&await s.alignSpacecraftPlanet(this._target);break;case"nearInstrument":i.selectRadioButton(`Near ${r}`),c!==n.CameraScripts.CONTEXT.INSTRUMENT&&await s.goToInstrument(this._target);break;case"nearObject":i.selectRadioButton(`Near ${r}`),c!==n.CameraScripts.CONTEXT.CELESTIAL_OBJECT&&await s.goToCelestialObject(this._target);break;case"system":i.selectRadioButton("System View"),c!==n.CameraScripts.CONTEXT.SYSTEM&&s.goToSystem(this._target);break;case"aboveParent":"sun"===t.newParent?(i.selectRadioButton("Above Sun"),s.showLocationInSolarSystem(this._target,{})):"sun"===t.oldParent?i.selectRadioButton("Above Sun"):(i.selectRadioButton(`Above ${a}`),c!==n.CameraScripts.CONTEXT.LOCATION&&s.showLocationInParentSystem(this._target));break;case"aboveSun":i.selectRadioButton("Above Sun"),c!==n.CameraScripts.CONTEXT.LOCATION&&s.showLocationInSolarSystem(this._target,{})}}async _loaded(t){for(let e=0;e<this._onLoaded.length;e++)this._onLoaded[e](t);this._onLoaded=[],this._hasLoaded=!0}_shouldHideControls(){return n.AppUtils.isMobileMode()&&this._app.getComponent("contentPanel")?.getState("isVisible")}}},function(t,e,i){"use strict";i.r(e),i.d(e,{SolarSystemApp:function(){return s.SolarSystemApp},TimeManager:function(){return n.TimeManager},LinkManager:function(){return o.LinkManager},LabelManager:function(){return a.LabelManager},MobileExpandButton:function(){return r.MobileExpandButton},Menu:function(){return l.Menu},BaseContentBlock:function(){return c.BaseContentBlock},StoryBlock:function(){return h.StoryBlock},OverviewBlock:function(){return u.OverviewBlock},FeaturedMoonsBlock:function(){return d.FeaturedMoonsBlock},FeaturedEventsBlock:function(){return p.FeaturedEventsBlock},ExplorationBlock:function(){return _.ExplorationBlock},ViewOptionsBlock:function(){return g.ViewOptionsBlock},SpecialFeaturesBlock:function(){return m.SpecialFeaturesBlock},ReplayBlock:function(){return y.ReplayBlock},LayersBlock:function(){return f.LayersBlock},FeaturesBlock:function(){return b.FeaturesBlock},AllEventsBlock:function(){return T.AllEventsBlock},RelatedBlock:function(){return v.RelatedBlock},ContentPanel:function(){return E.ContentPanel},FeaturedStoriesPanel:function(){return x.FeaturedStoriesPanel},Comparison:function(){return S.Comparison},InfoPanel:function(){return C.InfoPanel},EventsTimeline:function(){return w.EventsTimeline},CollapsibleMenu:function(){return I.CollapsibleMenu},CollapsibleMenuItem:function(){return M.CollapsibleMenuItem},TimeControls:function(){return N.TimeControls},Telescope:function(){return A.Telescope},Search:function(){return L.Search},Types:function(){return R.Types}});var s=i(0),n=i(855),o=i(856),a=i(857),r=i(858),l=i(917),c=i(921),h=i(923),u=i(926),d=i(929),p=i(931),_=i(933),g=i(935),m=i(938),y=i(941),f=i(944),b=i(947),T=i(950),v=i(953),E=i(956),x=i(959),S=i(962),C=i(965),w=i(968),I=i(971),M=i(974),N=i(977),A=i(980),L=i(984),R=i(985)},function(t,e,i){"use strict";i.r(e),i.d(e,{TimeManager:function(){return TimeManager}});var s=i(1);class TimeManager extends s.TimeManager{_onLimitReach(t){const e=this._app.getManager("time"),i=this._timeLimits[t],s="min"===t?i.add(1,"ms"):i.subtract(1,"ms"),n="max"===t?1:-1;this._app.getComponent("clock")?.setLimitMessage(n),this._app.getManager("router")?.navigate({rate:0,time:e.getTimeUrl(s)})}}},function(t,e,i){"use strict";i.r(e),i.d(e,{LinkManager:function(){return LinkManager}});var s=i(1);class LinkManager extends s.BaseManager{getParsedLink(t){const e=this._app.getManager("router"),i=t.startsWith("/")?t.slice(1):t,{currentView:s}=e,{params:n}=e.currentRoute||{},o={path:`/${i}`};if("event"===s){const t=n?.spaceObject!==i;o.options=t?{__remove:"all"}:{keepTime:!0}}return o}}},function(t,e,i){"use strict";i.r(e),i.d(e,{LabelManager:function(){return LabelManager}});var s=i(1);class LabelManager extends s.LabelManager{_getLink(t){const e=super._getLink(t);return this._app.getManager("link")?.getParsedLink?.(e)||e}}},function(t,e,i){"use strict";i.r(e),i.d(e,{MobileExpandButton:function(){return MobileExpandButton}});var s=i(1),n=(i(859),i(862)),o=i(860),a=i.n(o);i(861);class MobileExpandButton extends s.BaseComponent{constructor(t){super(t),this._component="",this._expandButtonClicked=this._expandButtonClicked.bind(this),this.showCPButton=this.showCPButton.bind(this),n.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[n.followCursor]})}init(){super.init(),(0,n.default)(this._children.mobileExpandButton,{content:"Expand content panel.",placement:"top"})}_expandButtonClicked(){this._app.getComponent(this._component).onClickShowCollapse(),this.hide()}showCPButton(t,e){s.AppUtils.isMobileMode()||(t=!1),this._component=e;const i=t?"":"hidden";this.setState({isVisibleClass:i})}}MobileExpandButton.html=a()},,function(t){t.exports='<button key="mobileExpandButton" class="mobile-expand-button button clickable icon icon-expand {{isVisibleClass}}" onclick="_expandButtonClicked" data-tippy-content="Expand content panel." aria-label="Expand content panel"></button>\n'},function(t,e,i){"use strict";i.r(e)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,{Menu:function(){return Menu}});i(918);var s=i(1),n=i(919),o=i.n(n);i(920);class Menu extends s.BaseComponent{constructor(t,e={}){super(t,null,{isVisible:!1,menuClass:"",menuText:"",titleText:"",brandingText:"EYES ON THE SOLAR SYSTEM",currentInfo:null,...e}),this._backFunction=null,this._categories=["stories","planets","asteroids","comets","spacecraft"],this._listMenuContainer={},this._listMenu={},this._aToZMenu={};for(let t=0;t<this._categories.length;t++){const e=this._categories[t];this._listMenuContainer[e]=null,this._listMenu[e]=null,this._aToZMenu[e]=null}this.bindFunctions(["clickOnEntry","handleBackButton","_goToMain","_goToList","_goToAtoZ"]),this._scrollbar=null}handleBackButton(){this._backFunction()}init(){super.init(),this._children.backButton=s.AppUtils.htmlToElement('\n\t\t\t<div class="branding clickable" onclick="handleBackButton">\n\t\t\t\t<span class="icon icon-lesser clickable"></span>\n\t\t\t\t<label class="text clickable">Back</label>\n\t\t\t</div>\n\t\t'),this._setEventHandlersFromAttributes(this._children.backButton),this.resize()}resize(){if(super.resize(),s.AppUtils.isMobileMode()){this.setState({menuText:""});for(const t in this._listMenuContainer){const e=this._listMenuContainer[t],i=this._listMenu[t];null!==e&&e.contains(i)&&e.removeChild(i)}"a-to-z"===this._state.menuClass&&(this._backFunction=this._goToList)}else{this.setState({menuText:"Menu"});for(const t in this._listMenuContainer){const e=this._listMenuContainer[t],i=this._listMenu[t];null===e||e.contains(i)||e.appendChild(i)}"a-to-z"===this._state.menuClass&&(this._backFunction=this._goToMain),"list"===this._state.menuClass&&this.getState("isVisible")&&this._goToMain()}}setupAtoZ(t){const e=["0-9","a-f","g-k","l-p","q-u","v-z"].map((e=>{const i=t.entries.filter((t=>((t,e)=>{const i=t.subtitle?t.subtitle+": "+t.title:t.title,s=t.displayName||t.iauName||i;return e.test(s)})(t,new RegExp(`^[${e}]`,"i"))));return{entries:i.sort(((t,e)=>{const i=t.subtitle?t.subtitle+": "+t.title:t.title,s=e.subtitle?e.subtitle+": "+e.title:e.title;let n=t.displayName||t.iauName||i,o=e.displayName||e.iauName||s;return n=String(n).toLowerCase(),o=String(o).toLowerCase(),n<o?-1:n>o?1:0})),title:e}})),i=document.createElement("h5");i.className="semi",i.innerText=t.name;const s=document.createElement("span");s.className="icon icon-close clickable close-button",s.addEventListener("click",this.hide,!1);const n=document.createElement("div");n.className="menu-content";for(let t=0;t<e.length;t++)if(e[t]&&e[t].entries&&e[t].entries.length>0){const i=document.createElement("div");i.className="block";const s=document.createElement("div");s.className="small semi title",s.innerText=e[t].title,i.appendChild(s);const o=document.createElement("div");o.className="list-container",i.appendChild(o);for(let i=0;i<e[t].entries.length;i++){const s=e[t].entries[i],n=document.createElement("button");n.className="small clickable entry-label";const a=s.subtitle?s.subtitle+": ":"",r=s.displayName||s.iauName||a+s.title;if(s.icon){n.classList.add("with-thumb");const t=document.createElement("img");t.src=s.icon,t.classList.add("entry-image-all");const e=document.createElement("span");if(e.className="entry-image-label",e.innerText=r,s.link){const t=document.createElement("span");t.className="icon icon-external",e.appendChild(t)}n.appendChild(t),n.appendChild(e)}else n.innerText=r;n.addEventListener("click",(()=>{this.clickOnEntry(s)}),{passive:!1}),o.appendChild(n)}n.appendChild(i)}const o=document.createElement("div");o.className="container",o.appendChild(n),this._aToZMenu[t.id]=o}_goToMain(){this.setState({titleText:"",menuClass:"main"}),null!==this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),this._children.header.replaceChild(this._children.branding,this._children.header.firstChild),this._children.contentWrapper.lastChild?this._children.contentWrapper.replaceChild(this._children.mainMenu,this._children.contentWrapper.lastChild):this._children.contentWrapper.appendChild(this._children.mainMenu),this.getState("isVisible")&&this._initScrollbar()}_goToList(){this._backFunction=this._goToMain;const{currentInfo:t}=this._state;this.setState({titleText:t.name,menuClass:"list"}),null!==this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),this._children.header.replaceChild(this._children.backButton,this._children.header.firstChild),this._children.contentWrapper.replaceChild(this._listMenu[t.id],this._children.contentWrapper.lastChild),this.getState("isVisible")&&this._initScrollbar()}_goToAtoZ(){this._backFunction=s.AppUtils.isMobileMode()?this._goToList:this._goToMain;const{currentInfo:t}=this._state;this.setState({titleText:t.name,menuClass:"a-to-z"}),null!==this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),this._children.header.replaceChild(this._children.backButton,this._children.header.firstChild),this._children.contentWrapper.replaceChild(this._aToZMenu[t.id],this._children.contentWrapper.lastChild),this.getState("isVisible")&&this._initScrollbar()}clickOnEntry(t){if(this.hide(),t&&t.id)if(t.link)t.internal?this._app.getManager("router").navigate(t.link):window.open(t.link);else if(t.title){const e="story/"+t.id;this._app.getManager("router").navigate(e)}else this._app.getManager("router").navigate("/"+t.id)}_initScrollbar(){null===this._scrollbar?this._scrollbar=s.AppUtils.addScrollbar(this._children.contentWrapper):this._scrollbar.scroll(0)}show(){super.show(),this._goToMain()}hide(){null!==this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null),super.hide()}async setupContent(t,e,i,n,o,a){this._contentInfo=t,this._children.mainMenu.innerHTML="";const r=[{id:"stories",name:"Stories",max:5,featuredEntries:[...e],entries:[...this._contentInfo.stories||[]]},{id:"planets",name:"Planets & Moons",max:5,featuredEntries:[...i],entries:[...this._contentInfo.Moon||[],...this._contentInfo.Planet||[]]},{id:"asteroids",name:"Dwarf Planets & Asteroids",max:5,featuredEntries:[...n||[]],entries:[...this._contentInfo.Asteroid||[],...this._contentInfo["Dwarf Planet"]||[]]},{id:"comets",name:"Comets",max:5,featuredEntries:[...o||[]],entries:[...this._contentInfo.Comet||[]]},{id:"spacecraft",name:"Spacecraft",max:5,featuredEntries:[...a||[]],entries:[...this._contentInfo.Spacecraft||[],...this._contentInfo.Instrument||[]]}],l=document.createElement("div");l.className="menu-content";for(let t=0;t<r.length;t++)if(r[t]&&r[t].entries&&r[t].entries.length>0){const e=document.createElement("div");e.className="block",e.addEventListener("click",(()=>{s.AppUtils.isMobileMode()&&(this.setState({currentInfo:r[t]}),this._goToList())}),!1);const i=document.createElement("div");i.className="list-container",this._listMenu[r[t].id]=i,this._listMenuContainer[r[t].id]=e;const n=document.createElement("button");n.className="small semi title",n.innerText=r[t].name,e.appendChild(n),e.appendChild(i);const o=document.createElement("span");if(o.className="icon icon-greater clickable expand",e.appendChild(o),void 0!==r[t].featuredEntries){const e=document.createElement("div");e.className="entry-container featured";for(let i=0;i<r[t].featuredEntries.length;i++){const s=r[t].featuredEntries[i],n=document.createElement("div");if(n.classList.add("link-container"),s.icon){const t=document.createElement("img");t.src=s.icon,t.classList.add("entry-image"),n.appendChild(t)}const o=document.createElement("span"),a=s.subtitle?s.subtitle+": ":"";if(o.className="small clickable entry-label",o.innerText=s.displayName||s.iauName||a+s.title,o.addEventListener("click",(()=>{this.clickOnEntry(s)}),!1),s.link&&!s.internal){const t=document.createElement("span");t.className="icon icon-external",o.appendChild(t)}n.appendChild(o),e.appendChild(n)}i.appendChild(e)}else{const e=r[t].max?Math.min(r[t].entries.length,r[t].max):r[t].entries.length,s=document.createElement("div");s.className="entry-container";for(let i=0;i<e;i++){const e=r[t].entries[i],n=document.createElement("div");n.className="small clickable entry-label",n.innerText=e.displayName||e.iauName,n.addEventListener("click",(()=>{this.clickOnEntry(e)}),!1),s.appendChild(n)}i.appendChild(s)}const a=document.createElement("div");a.className="az-link-container clickable",a.addEventListener("click",(()=>{this.setState({currentInfo:r[t]}),this._goToAtoZ()}),!1);const c=document.createElement("button");c.className="small clickable az-link",c.innerHTML=`View <strong>${r[t].entries.length}</strong> ${r[t].name}`,a.appendChild(c);const h=document.createElement("span");o.className="icon icon-greater clickable expand",a.appendChild(h),i.appendChild(a),l.appendChild(e),this.setupAtoZ(r[t])}const c=this._app.getComponent("searchMobile");this._children.mainMenu.appendChild(c?.element),c?.setParent(this._children.mainMenu),this._children.mainMenu.appendChild(l);const h=new CustomEvent("setupSearch");window.dispatchEvent(h),this.resize(),this._goToMain()}}Menu.html=o()},,function(t){t.exports='<nav class="mega-menu">\n\t<div class="toggle clickable" onclick="toggle">\n\t\t<span class="icon icon-menu"></span>\n\t\t<label class="clickable">{{menuText}}</label>\n\t</div>\n\t<div class="overlay-bg clickable {{isVisibleClass}}" onclick="hide"></div>\n\t<div key="container" class="menu-container {{menuClass}} {{isVisibleClass}} scrollable">\n\t\t<div key="header" class="menu-header">\n\t\t\t<div key="branding" class="branding">\n\t\t\t\t<span class="icon icon-nasa-logo clickable" onclick="hide"></span>\n\t\t\t\t<span class="semi clickable app-title" onclick="hide">{{brandingText}}</span>\n\t\t\t</div>\n\t\t\t<h5 class="semi">{{titleText}}</h5>\n\t\t\t<span class="icon icon-close clickable close-button" onclick="hide"></span>\n\t\t</div>\n\t\t<div key="contentWrapper" class="content-wrapper">\n\t\t\t<div key="mainMenu" class="main-menu"></div>\n\t\t</div>\n\t</div>\n</nav>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{BaseContentBlock:function(){return BaseContentBlock}});var s=i(1);i(922);class BaseContentBlock extends s.BaseComponent{constructor(t,e,i={}){super(t,e,{isVisible:!0,isMoreVisible:!1,colorClass:"",hideMoreMessage:"",...i}),this._more={isVisible:{moreMessage:"Show Less",moreIcon:"icon-minus",moreClass:""},isHidden:{moreMessage:"Show More",moreIcon:"icon-plus",moreClass:"hidden"}},Object.assign(this._state,this._more.isHidden)}async init(){super.init(),this._element.classList.add("content-block","{{isVisibleClass}}"),this._setVariables(this._element)}showMore(){this.setState({isMoreVisible:!0,...this._more.isVisible})}hideMore(){this.setState({isMoreVisible:!1,...this._more.isHidden})}toggleMore(){this._state.isMoreVisible?this.hideMore():this.showMore()}}},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{StoryBlock:function(){return StoryBlock}});i(1);var s=i(854),n=i(924),o=i.n(n);i(925);class StoryBlock extends s.BaseContentBlock{constructor(t){super(t,null,{colorClass:"spacecraft",blockTitle:"",hideTitle:""}),this._more.isHidden.moreMessage="Show More",this._storyList=null}onRouteChange(t,e,i,s){if(this._storyList=this._children.storyList,null===this._storyList||void 0===this._storyList)return void this.setEnabled(!1);if("home"!==t&&void 0===this._app.getManager("content").context[t])return;this._storyList.innerHTML="",i.forEach((t=>{const e=document.createElement("li");let s=null;s=void 0===t.storyId?t:i[t.storyId];const{title:n,subtitle:o,icon:a,link:r,isExternal:l,isInternal:c}=s,h=document.createElement("div");h.classList.add("story-container"),e.appendChild(h);const u=document.createElement("div");u.classList.add("story-title");const d=document.createElement("h2");if(d.appendChild(document.createTextNode(n)),u.appendChild(d),h.appendChild(u),o){const t=document.createElement("div");t.classList.add("story-list","story-subtitle","wide-text","color","{{colorClass}}","x-small"),t.appendChild(document.createTextNode(o)),h.appendChild(t)}const p=document.createElement("div");p.classList.add("story-icon");const _=document.createElement("img"),g=`${o}: ${n}`;if(_.setAttribute("alt",g),_.setAttribute("src",a),_.classList.add("story-icon-image"),p.appendChild(_),h.appendChild(p),l)e.addEventListener("click",(()=>{window.open(r)}),!1);else if(c)e.addEventListener("click",(()=>{this._app.getManager("router").navigate(r)}),!1);else{const i="story/"+t.id;e.addEventListener("click",(()=>{this._app.getManager("router").navigate(i)}),!1)}if(l){const t=document.createElement("div");t.classList.add("icon","icon-external"),h.appendChild(t)}e.classList.add("clickable"),this._storyList.appendChild(e)}));const n=""===e?"hidden":"";this._setVariables(this._element),this.setState({blockTitle:e,hideTitle:n})}}StoryBlock.html=o()},function(t){t.exports='<div key="storyBlock" class="story-block">\n        <span class="story-block-title color {{colorClass}} small semi title-underline {{hideTitle}}">{{blockTitle}}</span>\n        <span class="story-related-list">\n                <ul key="storyList" id="story-list" class="story-list"> </ul>\n        </span>\n</div>'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{OverviewBlock:function(){return OverviewBlock}});i(1);var s=i(854),n=i(927),o=i.n(n);i(928);class OverviewBlock extends s.BaseContentBlock{constructor(t){super(t,null,{objectType:"",objectDescription:"",moreDescription:"",disclaimerClass:"hidden",disclaimerMessage:""}),this._more.isHidden.moreMessage="Read More"}onRouteChange(t,e,i,s,n=""){let o="";""!==e&&void 0!==e||(o="hidden");let a="hidden";""!==n&&(a="active"),this.hideMore(),this.setState({objectType:i,objectDescription:t,moreDescription:e,disclaimerClass:a,disclaimerMessage:n,colorClass:s,hideMoreMessage:o}),this._setVariables(this._element)}}OverviewBlock.html=o()},function(t){t.exports='<div class="overview-block">\n\t<span class="object-type small semi" >\n\t\t{{objectType}}\n\t</span>\n\t<span class="object-description small line-break-text" >\n\t\t{{objectDescription}}\n\t</span>\n\t<span class="more-description line-break-text small {{moreClass}}" >\n\t\t{{moreDescription}}\n\t</span>\n\t<span class="more-toggle {{hideMoreMessage}}" onclick="toggleMore">\n\t\t<span class="x-small more-message {{hideMoreMessage}}">\n\t\t\t{{moreMessage}}\n\t\t</span>\n\t\t<span class="button clickable icon more-icon {{hideMoreMessage}} {{moreIcon}}"></span>\n\t</span>\n\t<p class="disclaimer line-break-text x-small color gray {{disclaimerClass}}" >\n\t\t{{disclaimerMessage}}\n\t</p>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{FeaturedMoonsBlock:function(){return FeaturedMoonsBlock}});i(1);var s=i(854),n=i(930),o=i.n(n);class FeaturedMoonsBlock extends s.BaseContentBlock{constructor(t){super(t),this._featuredMoonsList=null}async onRouteChange(t,e,i){i&&i.isCanceled||(this._featuredMoonsList=this._children.featuredMoonsList,this.setState({colorClass:this._app.getManager("content").getColorClass(t)}),this._featuredMoonsList.innerHTML="",void 0!==e.initial&&0!==e.initial.length?(this._element.classList.remove("hidden"),Array.isArray(e.more)&&0!==e.more.length?this.setState({hideMoreMessage:""}):this.setState({hideMoreMessage:"hidden"}),e.initial.forEach((t=>{if(i&&i.isCanceled)return;const e=document.createElement("li"),s=t.info?`${t.title} (${t.info})`:t.title;e.appendChild(document.createTextNode(s)),e.addEventListener("click",(()=>{this._app.getManager("router").navigate(t.url)}),!1),e.classList.add("underline"),e.classList.add("clickable");const n=document.createElement("span");n.classList.add("icon","icon-greater","mobile-icon"),e.appendChild(n),this._featuredMoonsList.appendChild(e)})),e.more.forEach((t=>{if(i&&i.isCanceled)return;const e=document.createElement("li"),s=t.info?`${t.title} (${t.info})`:t.title;e.appendChild(document.createTextNode(s)),e.addEventListener("click",(()=>{this._app.getManager("router").navigate(t.url)}),!1),e.classList.add("clickable"),e.classList.add("hidden"),this._featuredMoonsList.appendChild(e),e.classList.add("clickable","{{moreClass}}","underline")}))):this.setEnabled(!1),this._setVariables(this._element))}}FeaturedMoonsBlock.html=o()},function(t){t.exports='<div>\n\t<span class="color {{colorClass}} small semi title-underline">Featured Moons</span>\n\t<span>\n\t\t<ul key="featuredMoonsList" id="featured-moons-list"></ul>\n\t</span>\n\t<span class="more-toggle {{hideMoreMessage}}" onclick="toggleMore">\n\t\t<span class="x-small more-message {{hideMoreMessage}}">\n\t\t\t{{moreMessage}}\n\t\t</span>\n\t\t<span class="button clickable icon more-icon {{moreIcon}} {{hideMoreMessage}}"></span>\n\t</span>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{FeaturedEventsBlock:function(){return FeaturedEventsBlock}});var s=i(711),n=i.n(s),o=(i(1),i(854)),a=i(932),r=i.n(a);class FeaturedEventsBlock extends o.BaseContentBlock{constructor(t){super(t),this._more.isHidden.moreMessage="Show More",this._featuredEventsList=null}async onRouteChange(t,e,i,s){this._featuredEventsList=this._children.featuredEventsList;const o=e.featuredEvents;this._featuredEventsList.innerHTML="",o.initial.forEach((e=>{const s=document.createElement("li"),o=i[e.eventId];let a="";n()(o.start).isValid()&&(a=" ("+n()(o.start).year()+")");const r=document.createElement("span");r.innerHTML=`<span class="semi">${o.title}</span> ${a}`,s.appendChild(r);const l=document.createElement("span");l.classList.add("icon","icon-greater","mobile-icon"),s.appendChild(l);const c=t+"/events/"+e.eventId;s.addEventListener("click",(()=>{this._app.getManager("router").navigate(c)}),!1),s.classList.add("featured-events-list-item","clickable","underline"),this._featuredEventsList.appendChild(s)}));let a="hidden";void 0!==o.more&&o.more.length>0&&(a="",o.more.forEach((e=>{const i=document.createElement("li"),s=this._app.getManager("content").events[e.eventId];let o="";n()(s.start).isValid()&&(o=" ("+n()(s.start).year()+")");const a=document.createElement("span");a.innerHTML=`<span class="semi">${s.title}</span> ${o}`,i.appendChild(a);const r=t+"/events/"+e.eventId;i.addEventListener("click",(()=>{this._app.getManager("router").navigate(r)}),!1),i.classList.add("featured-events-list-item","clickable","underline"),i.classList.add("{{moreClass}}");const l=document.createElement("span");l.classList.add("icon","icon-greater","mobile-icon"),i.appendChild(l),this._featuredEventsList.appendChild(i)})));const r=this._app.getManager("content").getColorClass(t);this._setVariables(this._children.featuredEventsList),this.setState({colorClass:r,hideMoreMessage:a})}}FeaturedEventsBlock.html=r()},function(t){t.exports='<div class="featured-events-block">\n\t<span class="color {{colorClass}} small semi title-underline">Featured Events</span>\n\t<span class="featured-events-underline color gray dark"></span>\n\t<span class="featured-events-related-list">\n\t\t<ul key="featuredEventsList" id="featured-events-list" class="featured-events-list"> </ul>\n\t</span>\n\t<span class="more-toggle {{hideMoreMessage}}" onclick="toggleMore">\n\t\t<span class="x-small more-message">\n\t\t\t{{moreMessage}}\n\t\t</span>\n\t\t<span class="button clickable icon more-icon {{moreIcon}}"></span>\n\t</span>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{ExplorationBlock:function(){return ExplorationBlock}});i(1);var s=i(854),n=i(934),o=i.n(n);class ExplorationBlock extends s.BaseContentBlock{constructor(t){super(t),this._explorationList=null}async onRouteChange(t,e,i){if(null===this._children.explorationList||void 0===this._children.explorationList)return console.log("explorationList is null or undefined!!!"),void this.setEnabled(!1);this._explorationList=this._children.explorationList,this.setState({colorClass:this._app.getManager("content").getColorClass(t)}),this._explorationList.innerHTML="",void 0!==e&&0!==e.initial.length?(this._element.classList.remove("hidden"),null===e.more||void 0===e.more||e.more.length<=0?this.setState({hideMoreMessage:"hidden"}):this.setState({hideMoreMessage:""}),e.initial.forEach((t=>{const e=document.createElement("li"),i=document.createElement("span");i.innerHTML=t.info?`<span class="semi">${t.title}</span> (${t.info})`:`<span class="semi">${t.title}</span>`,e.appendChild(i),e.addEventListener("click",(()=>{this._app.getManager("router").navigate(t.url)}),!1),e.classList.add("exploration-list-item","underline"),e.classList.add("clickable");const s=document.createElement("span");s.classList.add("icon","icon-greater","mobile-icon"),e.appendChild(s),this._explorationList.appendChild(e)})),e.more.forEach((t=>{const e=document.createElement("li"),i=document.createElement("span");i.innerHTML=t.info?`<span class="semi">${t.title}</span> (${t.info})`:`<span class="semi">${t.title}</span>`,e.appendChild(i),e.addEventListener("click",(()=>{this._app.getManager("router").navigate(t.url)}),!1),e.classList.add("exploration-list-item"),e.classList.add("clickable"),e.classList.add("hidden"),this._explorationList.appendChild(e),e.classList.add("clickable","{{moreClass}}","underline")}))):this.setEnabled(!1),this.setState({colorClass:this._app.getManager("content").getColorClass(t)}),this._setVariables(this._element)}}ExplorationBlock.html=o()},function(t){t.exports='<div class="exploration-block">\n\t<span class="exploration-title color {{colorClass}} small semi title-underline">Exploration</span>\n\t<span class="exploration-related-list">\n\t\t<ul key="explorationList" id="exploration-list" class="exploration-list"> </ul>\n\t</span>\n\t<span class="more-toggle {{hideMoreMessage}}" onclick="toggleMore">\n\t\t<span class="x-small more-message {{hideMoreMessage}}">\n\t\t\t{{moreMessage}}\n\t\t</span>\n\t\t<span class="button clickable icon more-icon {{moreIcon}} {{hideMoreMessage}}"></span>\n\t</span>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{ViewOptionsBlock:function(){return ViewOptionsBlock}});i(1);var s=i(854),n=i(936),o=i.n(n);i(937);class ViewOptionsBlock extends s.BaseContentBlock{constructor(t,e={}){e.config={defaultSelectionIndex:0,...e.config},super(t,null,{category:"",...e}),this._views={nearObject:(t,e)=>({text:"Near "+t,currentView:"nearObject",function:async()=>{this._currentView="nearObject",await this._app.cameraScripts.goToCelestialObject(e)}}),nearSpacecraft:(t,e)=>({text:"Near "+t,currentView:"nearSpacecraft",function:async()=>{this._currentView="nearSpacecraft",await this._app.cameraScripts.goToSpacecraft(e)}}),alignSpacecraftPlanet:(t,e)=>({text:"Near "+t,currentView:"alignSpacecraftPlanet",function:async()=>{this._currentView="alignSpacecraftPlanet",await this._app.cameraScripts.alignSpacecraftPlanet(e)}}),nearInstrument:(t,e,i)=>({text:"Near "+t,currentView:"nearInstrument",function:async()=>{this._currentView="nearInstrument",await this._app.cameraScripts.goToInstrument(e,i)}}),system:(t,e="System View")=>({text:e,currentView:"system",function:async()=>{this._currentView="system",await this._app.cameraScripts.goToSystem(t)}}),aboveParent:(t,e)=>({text:"Above "+t,currentView:"aboveParent",function:async()=>{this._currentView="aboveParent",await this._app.cameraScripts.showLocationInParentSystem(e)}}),aboveSun:(t,e)=>({text:"Above Sun",currentView:"aboveSun",function:async()=>{this._currentView="aboveSun",await this._app.cameraScripts.showLocationInSolarSystem(t,e)}})},this._viewOptionsList=[],this.bindFunctions(["selectRadioButton"])}_addOptions(t,e=!1){this._children.viewOptions.innerHTML="",this._viewOptionsList=[];for(let i=0;i<t.length;i++){const s=document.createElement("li");s.className="option clickable";const n=`${t[i].text.toLowerCase().split(" ").join("-")}-radio-button`,o=document.createElement("label");o.innerText=t[i].text,o.setAttribute("for",n);const a=document.createElement("input");a.id=n,a.className="radio-button clickable",a.type="radio",a.name="radio",s.appendChild(a),s.appendChild(o),s.addEventListener("click",(()=>{t[i].function(),a.blur()}));const r=document.createElement("span");r.className="radio-icon bg-color {{category}}",s.appendChild(r);const l=t[i].text;this._viewOptionsList.push({optionTitle:l,option:s,radioButton:a}),this._children.viewOptions.appendChild(s),e?this._currentView===t[i].currentView&&(a.checked="checked"):i===this._config.defaultSelectionIndex&&(a.checked="checked",s.click())}this._setVariables(this._children.viewOptions)}_addPlanetOptions(t,e=!1){const i=t.displayName||t.iauName,s=t.id,n=[this._views.nearObject(i,s),this._views.system(s)];this._addOptions(n,e)}_addMoonOptions(t,e=!1){const i=t.displayName||t.iauName,s=t.id,n=this._app.getManager("scene").getParent(s),o=[this._views.nearObject(i,s),this._views.system(n),this._views.aboveSun(s)];this._addOptions(o,e)}_addStarOptions(t,e=!1){const i=t.displayName||t.iauName,s=t.id,n=[this._views.nearObject(i,s),this._views.system("inner_solar_system","Inner Solar System"),this._views.system("outer_solar_system","Outer Solar System")];this._addOptions(n,e)}async _addSpacecraftOptions(t,e=!1){const i=this._app.getManager("content"),s=t.displayName||t.iauName,n=t.id;if(await this._app.getManager("scene").isReady(n),n!==this._app.getView("object")?.getCurrentTarget())return;const o=this._app.getManager("scene").getParent(n),a=i.getEntityInfo(o),r=a.displayName||a.iauName,l=[];if(i.hasLanded(t)||"Landing site"===t.category){const t="Landing site"===a.category?this._app.getManager("scene").getParent(o):o;l.push(this._views.alignSpacecraftPlanet(s,n)),l.push(this._views.system(t))}else"Instrument"===t.category?(l.push(this._views.nearInstrument(s,n,t.cameraOptions)),l.push(this._views.nearSpacecraft(r,o))):(l.push(this._views.nearSpacecraft(s,n)),l.push(this._views.aboveParent(r,n)));"sun"!==o&&l.push(this._views.aboveSun(n)),this._addOptions(l,e)}async _addDefaultOptions(t,e){const i=this._app.getManager("content"),s=t.displayName||t.iauName,n=t.id;await this._app.getManager("scene").isReady(n);const o=this._app.getManager("scene").getParent(n),a=i.getEntityInfo(o),r=a.displayName||a.iauName,l=[this._views.nearObject(s,n),this._views.aboveParent(r,n)];"sun"!==o&&l.push(this._views.aboveSun(n)),this._addOptions(l,e)}selectRadioButton(t){if(null===this._children.viewOptions.children[0].children)return;let e=!1;for(let i=0;i<this._viewOptionsList.length;i++)this._viewOptionsList[i].optionTitle===t&&(this._viewOptionsList[i].radioButton.checked=!0,e=!0);if(!1===e){switch(this._currentView){case"alignSpacecraftPlanet":case"nearSpacecraft":case"nearInstrument":case"nearObject":this._viewOptionsList[0].radioButton.checked=!0,this._viewOptionsList[0].option.click(),e=!0;break;case"system":case"aboveParent":case"aboveSun":this._viewOptionsList[1].radioButton.checked=!0,this._viewOptionsList[1].option.click(),e=!0}!1===e&&(this._viewOptionsList[0].radioButton.checked=!0,this._viewOptionsList[0].option.click(),e=!0)}}async onRouteChange(t,e){const i=t.category.toLowerCase(),s=this._app.getManager("content").getColorClass(t.id);switch(this.setState({category:"landing site"===i?"spacecraft":s}),i){case"planet":this._addPlanetOptions(t,e);break;case"moon":this._addMoonOptions(t,e);break;case"star":this._addStarOptions(t,e);break;case"spacecraft":case"landing site":case"instrument":await this._addSpacecraftOptions(t,e);break;default:this._addDefaultOptions(t,e)}}}ViewOptionsBlock.html=o()},function(t){t.exports='<div key="viewOptionsBlock" class="view-options-block">\n\t<span class="small semi color {{category}} title-underline" >\n\t\tView Options\n\t</span>\n\t<ul key="viewOptions" class="radio-button-list"></ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{SpecialFeaturesBlock:function(){return SpecialFeaturesBlock}});i(1);var s=i(528),n=i(854),o=i(939),a=i.n(o);i(940);class SpecialFeaturesBlock extends n.BaseContentBlock{constructor(t,e){super(t,e),this._state={...this._state,category:""}}init(){super.init(),this._element.classList.add("special-features")}onRouteChange(t){if(this._app.getManager("content").hasLanded(t))return void this.hide();if(!this._children.specialFeatures)return;this._children.specialFeatures.innerHTML="",this.show();const e=this._app.getManager("content").getColorClass(t.id);this.setState({category:e});const i=[];if(!1!==t.comparisonFeature&&i.push({title:"Compare size",link:"/compare"}),t.hasMoons){if(s.Entity.getEntityNamesInGroup(t.id+", moons").size>1){const e=t.displayName||t.iauName,s=e+("s"===e.slice(-1)?"'":"'s")+" Moons";i.push({title:s,link:"/moons"})}}!this._app.getManager("router").configs.locked&&t.hasEvents&&i.push({title:"Mission Events",link:"/events",query:{rate:1},options:{keepTime:!0}}),0!==i.length?("Planet"===t.category&&i.push({title:"Telescope Mode",link:"/telescope"}),i.forEach((e=>{const{link:i,query:s={},options:n={__remove:"all"}}=e,o=`/${t.id}${i}`,a=document.createElement("li");a.classList.add("item"),a.classList.add("clickable"),a.addEventListener("click",(()=>{this._app.getManager("router").navigate(s,o,n)}),!1);const r=document.createElement("button");r.classList.add("clickable","underline","capitalize"),r.innerHTML=e.title,a.appendChild(r);const l=document.createElement("span");l.classList.add("icon","icon-greater","mobile-icon"),a.appendChild(l),this._children.specialFeatures.appendChild(a)}))):this.hide()}}SpecialFeaturesBlock.html=a()},function(t){t.exports='<div>\n\t<span class="small semi color {{category}} title-underline" >\n\t\tSpecial Features\n\t</span>\n\t<ul key="specialFeatures"></ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{ReplayBlock:function(){return ReplayBlock}});i(1);var s=i(854),n=i(942),o=i.n(n);i(943);class ReplayBlock extends s.BaseContentBlock{constructor(t){super(t,null,{hideNextEventButton:""}),this._startTime=null,this._objectId=""}async onRouteChange(t,e,i,s,n){if(n&&n.isCanceled)return;this._objectId=t,this._startTime=i.start;const o=this._app.getManager("content").orderedEvents.findIndex((t=>t.id===e)),a=o<0||o===s.length-1;this._nextEventId=a?null:s[o+1].id;const r=this._app.getManager("router").configs.locked||a?"hidden":"";this.setState({hideNextEventButton:r})}nextButtonClicked(){const t=this._objectId+"/events/"+this._nextEventId;this._app.getManager("router").navigate({__remove:"all"},t)}async onClick(){this._app.getView("event")?.replayEvent()}}ReplayBlock.html=o()},function(t){t.exports='<div class="replay-block">\n\t<button class="event-button clickable color gray med small" onclick="onClick">\n\t\t<span class="replay-icon icon icon-replay"></span>\n\t\tReplay\n\t</button>\n\t<button class="event-button clickable color gray med small {{hideNextEventButton}}" onclick="nextButtonClicked">Next Event</button>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{LayersBlock:function(){return LayersBlock}});i(5);var s=i(528),n=(i(1),i(854)),o=i(945),a=i.n(o);i(946);class LayersBlock extends n.BaseContentBlock{constructor(t){super(t,null,{colorClass:"",entityName:"",majorMoons:t.getManager("layer").getLayer("majorMoons").defaultVisibility,minorMoons:t.getManager("layer").getLayer("minorMoons").defaultVisibility,orbiters:t.getManager("layer").getLayer("orbiters").defaultVisibility,landers:t.getManager("layer").getLayer("landers").defaultVisibility,heliosphere:t.getManager("layer").getLayer("heliosphere").defaultVisibility}),Object.assign(this._class,{checkbox:{true:"icon-checkmark",false:"checkbox-hover"},boxColor:{true:this.getState("colorClass"),false:""},isVisible:{true:"",false:""},showSurfaceMaps:{true:"",false:"hidden"},showContextualLayers:{true:"",false:"hidden"}}),Object.assign(this._state,{majorMoonsClass:this._class.checkbox[this._state.majorMoons],majorMoonsColorClass:this._class.boxColor[this._state.majorMoons],minorMoonsClass:this._class.checkbox[this._state.minorMoons],minorMoonsColorClass:this._class.boxColor[this._state.minorMoons],orbitersClass:this._class.checkbox[this._state.orbiters],orbitersColorClass:this._class.boxColor[this._state.orbiters],landersClass:this._class.checkbox[this._state.landers],landersColorClass:this._class.boxColor[this._state.landers],heliosphereClass:this._class.checkbox[this._state.heliosphere],heliosphereColorClass:this._class.boxColor[this._state.heliosphere],showSurfaceMaps:this._class.showSurfaceMaps.false,showContextualLayers:this._class.showContextualLayers.false}),this._layers={majorMoons:t=>({id:"majorMoons",text:()=>{let e="Major Moon";return s.Entity.getEntityNamesInGroup(t+", moons").size>1&&(e="Major Moons"),e},iconClassName:"majorMoonsClass",colorClassName:"majorMoonsColorClass",function:()=>{this._app.getManager("layer").toggleLayer("majorMoons",{parentId:t})}}),minorMoons:t=>({id:"minorMoons",text:()=>"Minor Moons",iconClassName:"minorMoonsClass",colorClassName:"minorMoonsColorClass",function:()=>{this._app.getManager("layer").toggleLayer("minorMoons",{parentId:t})}}),orbiters:t=>({id:"orbiters",text:()=>"Orbiters",iconClassName:"orbitersClass",colorClassName:"orbitersColorClass",function:()=>{this._app.getManager("layer").toggleLayer("orbiters",{parentId:t})}}),landers:t=>({id:"landers",text:()=>"Landers",iconClassName:"landersClass",colorClassName:"landersColorClass",function:()=>{this._app.getManager("layer").toggleLayer("landers",{parentId:t})}}),heliosphere:t=>({id:"heliosphere",text:()=>"Heliosphere",iconClassName:"heliosphereClass",colorClassName:"heliosphereColorClass",function:()=>{this._app.getManager("layer").toggleLayer("heliosphere",{parentId:t})}})},this._defaultTextureDescription=null,this._previousEntity=null,this.bindFunctions(["handleLayerToggle"])}_addOptions(t){this._children.layersList.innerHTML="";for(let e=0;e<t.length;e++){const i=document.createElement("li");i.className="option checkbox-list clickable",i.addEventListener("click",t[e].function);const s=document.createElement("span");s.className="bg-color checkbox icon {{category}}",s.classList.add("{{"+t[e].iconClassName+"}}","{{"+t[e].colorClassName+"}}"),i.appendChild(s);const n=document.createElement("span");n.innerHTML=""+t[e].text(),n.className="layer-name",i.appendChild(n),this._children.layersList.appendChild(i);const o=this._app.getManager("layer");this.handleLayerToggle(t[e].id,o.getLayer(t[e].id).visible)}}async _addDefaultOptions(t,e=null){const i=t.id,s=this._app.getManager("layer").getContextualLayers(i);if(0===s.length)this._children.layersList.innerHTML="",this.setState({showContextualLayers:this._class.showContextualLayers.false});else{const t=[];s.forEach((s=>{(null===e||e.includes(s))&&t.push(this._layers[s](i))})),this._addOptions(t),this.setState({showContextualLayers:this._class.showContextualLayers.true})}this._setVariables(this._children.layersBlock)}addSurfaceMaps(t){this._children.surfaceMapList.innerHTML="";const e=this._app.getManager("content"),i=e.getSpheroidLayers(t);if(void 0===i)this.setState({showSurfaceMaps:this._class.showSurfaceMaps.false});else{const s=this._app.pioneer.get("main",t,"spheroidLOD"),n=this._app.pioneer.get("main",t,"atmosphere"),o={};s.getTextureNames().forEach((t=>{o[t]={url:s.getTextureUrl(t).replace("$STATIC_ASSETS_URL/maps/",""),sizes:s.getTextureSizes(t)}}));let a=["shadowEntities"];n&&n.isEnabled()&&(a=["shadowEntities","atmosphere"]),this._defaultTextureDescription={id:"default",title:"Default Texture",type:"texture",features:a,textures:o},this._defaultTextureType="texture";const r=document.createElement("li");r.className="option checkbox-list clickable";const l="default-map-radio-button",c=document.createElement("label");c.innerText="Default Map",c.setAttribute("for",l);const h=document.createElement("input");h.id=l,h.className="radio-button clickable",h.type="radio",h.name="radio-layers",h.checked=!0,r.appendChild(h),r.appendChild(c),r.addEventListener("click",(()=>{this._app.getManager("layer").changeSpheroidMap(t,this._defaultTextureDescription),h.blur()}));const u=e.getColorClass(t),d=document.createElement("span");d.className=`radio-icon bg-color ${u}`,r.appendChild(d),this._children.surfaceMapList.appendChild(r),i.forEach((e=>{const{id:i,title:s,description:n}=e,o=document.createElement("li");o.className="option checkbox-list clickable";const a=document.createElement("div");a.className="layer-grid",o.appendChild(a);const r=`${i}-radio-button`,l=document.createElement("label");l.innerText=s,l.className="layer-name",l.setAttribute("for",r);const c=document.createElement("input");c.id=r,c.className="radio-button clickable",c.type="radio",c.name="radio-layers",a.appendChild(c),a.appendChild(l),o.addEventListener("click",(()=>{this._app.getManager("layer").changeSpheroidMap(t,e),c.blur()}));const h=document.createElement("span");h.className=`layer-radio-icon bg-color ${u}`,a.appendChild(h),this._children.surfaceMapList.appendChild(o);const d=document.createElement("p");d.className="layer-description x-small grayMed",d.innerHTML=n,a.appendChild(d)})),this.setState({showSurfaceMaps:this._class.showSurfaceMaps.true})}}async onRouteChange(t,e,i=null){const{id:s}=t,n=this._app.getManager("content").getColorClass(s);this._class.boxColor.true=n;const o=this._previousEntity&&this._app.scene.getEntity(this._previousEntity);null!==this._defaultTextureDescription&&o&&this._app.getManager("layer").changeSpheroidMap(this._previousEntity,this._defaultTextureDescription),this._defaultTextureDescription=null,this._previousEntity=t.id,this._addDefaultOptions(t,i),this.addSurfaceMaps(t.id),this.setState({colorClass:n,entityName:e})}handleLayerToggle(t,e,i){const s=t+"Class",n=t+"ColorClass";null!==this.getState(t)&&this.setState({[t]:e,[n]:this._class.boxColor[e],[s]:this._class.checkbox[e]})}}LayersBlock.html=a()},function(t){t.exports='<div key="layersBlock" class="layers-block">\n\t<span class="small semi color {{colorClass}} {{showContextualLayers}} title-underline" >\n\t\t<span >{{entityName}}</span>\n\t\t<span> Layers</span>\n\t</span>\n\t<ul key="layersList" class="checkbox-list"></ul>\n\t<span class="small semi color second-title {{colorClass}} {{showSurfaceMaps}} title-underline" >\n\t\t<span >{{entityName}}</span>\n\t\t<span> Surface Maps</span>\n\t</span>\n\t<ul key="surfaceMapList" class="radio-button-list"></ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{FeaturesBlock:function(){return FeaturesBlock}});i(1);var s=i(528),n=i(854),o=i(948),a=i.n(o);i(949);class FeaturesBlock extends n.BaseContentBlock{constructor(t){super(t,null,{colorClass:""}),Object.assign(this._class,{checkbox:{true:"icon-checkmark",false:"checkbox-hover"},boxColor:{true:this.getState("colorClass"),false:"none"},isVisible:{true:"active",false:"hidden"},showFeatures:{true:"active",false:"hidden"}})}addFeatures(t){this._children.featuresList.innerHTML="";const e=this._app.getManager("content"),i=this._app.getManager("scene"),n=e.getColorClass(t),o=e.getSpheroidFeatures(t);if(void 0===o)this.setState({showFeatures:this._class.showFeatures.false});else{document.createElement("li").className="option checkbox-list clickable",o.forEach((e=>{const{title:o,id:a}=e,r=document.createElement("li"),l=document.createElement("span");l.innerHTML=o,l.className="feature-name",r.appendChild(l),r.className="option checkbox-list clickable",r.addEventListener("click",(()=>{const e=s.Features.isEnabled(i.main,t,a);s.Features.setEnabled(i.main,t,a,!e),this._children[`${a}Checkbox`].classList.remove(this._class.checkbox[e]),this._children[`${a}Checkbox`].classList.add(this._class.checkbox[!e]),e?this._children[`${a}Checkbox`].classList.remove(n):this._children[`${a}Checkbox`].classList.add(n)}));const c=s.Features.isEnabled(i.main,t,a),h=document.createElement("span");h.className="bg-color checkbox icon",h.setAttribute("key",`${a}Checkbox`),h.classList.add("{{"+n+"}}"),h.classList.add(this._class.checkbox[c]),c?h.classList.add(n):h.classList.remove(n),r.appendChild(h),r.appendChild(l),this._children.featuresList.appendChild(r)})),this._setVariables(this._children.featuresBlock)}}async onRouteChange(t,e){const{id:i}=t,s=this._app.getManager("content").getColorClass(i);this._class.boxColor.true=s;const n=this._previousEntity&&this._app.scene.getEntity(this._previousEntity);null!==this._defaultTextureDescription&&n&&this._app.getManager("layer").changeSpheroidMap(this._previousEntity,this._defaultTextureDescription),this._defaultTextureDescription=null,this._previousEntity=t.id,this.addFeatures(t.id),this.setState({colorClass:s,entityName:e})}}FeaturesBlock.html=a()},function(t){t.exports='<div key="featuresBlock" class="features-block">\n\t<span class="small semi color second-title {{colorClass}} {{showFeatures}} title-underline" >\n\t\t<span >{{entityName}}</span>\n\t\t<span> Features</span>\n\t</span>\n\t<ul key="featuresList" class="checkbox-list"></ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{AllEventsBlock:function(){return AllEventsBlock}});var s=i(711),n=i.n(s),o=(i(1),i(854)),a=i(951),r=i.n(a);i(952);class AllEventsBlock extends o.BaseContentBlock{constructor(t){super(t,null,{sortTitle:"Sort:"}),this._allEventsList=null,this._scEvents=null,this._objectId=null,this._moreListThreshold=3,this.bindFunctions(["onRouteChange","nextTitle","formatForId","sortEvents","sortByYear","sortByTarget","toggleMore"])}async onRouteChange(t,e,i){if(this._allEventsList=this._children.allEventsList,this._scEvents=e,this._objectId=t,await this._buildSortedList(e),i&&i.isCanceled)return;this._children.eventsFilterDropdown&&(this._children.eventsFilterDropdown.selectedIndex=0);const s=this._app.getManager("content").getColorClass(t);this._setVariables(this._element),this.setState({colorClass:s,sortTitle:"Sort:"})}formatForId(t){return"_"+t.toString().toLowerCase().replace(/ /g,"_")}nextTitle(t,e){let i="";if("year"===e&&(i=n()(t.start).year()),"target"===e)if(t.target){const e=this._app.getManager("content").getEntityInfo(t.target);i=e.iauName??e.displayName}else i="No Target";return i}async _buildSortedList(t,e=null){if(this._allEventsList.innerHTML="",this._element.classList.remove("hidden"),t.length>0){let i=this.nextTitle(t[0],e);if(""!==i){const t=document.createElement("span");t.classList.add("list-title","small","semi","color","white"),t.innerHTML=i,this._allEventsList.appendChild(t)}let s=document.createElement("ul");s.id=this.formatForId(i);let o=0;for(let a=0;a<t.length;a++){o++;const r=t[a];let l="";if(""!==i&&(l=this.nextTitle(r,e),""!==i&&0!==l.toString().localeCompare(i))){o>this._moreListThreshold&&this._addMoreButton(i,s),o=0,s.id=this.formatForId(i),i=l,this._allEventsList.appendChild(s),s=document.createElement("ul");const t=document.createElement("span");t.classList.add("list-title","small","semi","color","white"),t.innerHTML=i,this._allEventsList.appendChild(t)}const c=document.createElement("li");let h="";n()(r.start).isValid()&&(h=" ("+n()(r.start).year()+")"),c.appendChild(document.createTextNode(r.title+h)),o>this._moreListThreshold-1&&""!==i&&c.classList.add("hidden");const u=this._objectId+"/events/"+t[a].id;c.addEventListener("click",(()=>{this._app.getManager("router").navigate(u)}),!1),c.classList.add("list-item","clickable"),s.appendChild(c)}o>this._moreListThreshold&&""!==i&&this._addMoreButton(i,s),s.id=this.formatForId(i),this._allEventsList.appendChild(s)}else this.setEnabled(!1)}_addMoreButton(t,e){const i=document.createElement("li");i.classList.add("more-toggle","clickable"),i.onclick=this.toggleMore.bind(i,t);const s=document.createElement("span");s.innerHTML="Show More",s.classList.add("x-small","more-message"),i.appendChild(s);const n=document.createElement("span");n.classList.add("button","more-message","clickable","icon","more-icon","icon-plus"),i.appendChild(n),e.appendChild(i)}toggleMore(t){const e=this.formatForId(t),i=document.getElementById(e).children;for(let t=this._moreListThreshold;t<i.length-1;t++)i[t].classList.value.includes("hidden")?i[t].classList.remove("hidden"):i[t].classList.add("hidden");"Show More"===i[i.length-1].children[0].innerHTML?i[i.length-1].children[0].innerHTML="Show Less":i[i.length-1].children[0].innerHTML="Show More",i[i.length-1].children[1].classList.value.includes("icon-plus")?(i[i.length-1].children[1].classList.remove("icon-plus"),i[i.length-1].children[1].classList.add("icon-minus")):(i[i.length-1].children[1].classList.remove("icon-minus"),i[i.length-1].children[1].classList.add("icon-plus"))}sortByYear(){this.sortEvents("year"),this.setState({sortTitle:"By Year"})}sortByTarget(){this.sortEvents("target"),this.setState({sortTitle:"By Target"})}sortEvents(t){const e=[];if(Object.assign(e,this._scEvents),"target"===t){const t=this._app.getManager("content");e.sort(((i,s)=>{if(i.target&&s.target){const e=t.getEntityInfo(i.target).iauName??t.getEntityInfo(i.target).entityInfo.displayName,n=t.getEntityInfo(s.target).iauName??t.getEntityInfo(s.target).entityInfo.displayName;return e.localeCompare(n)}return s.target?1:i.target?-1:e.sort(((t,e)=>n()(t.start).year()<n()(e.start).year()))}))}else"year"===t&&e.sort(((t,e)=>n()(t.start).year()<n()(e.start).year()));this._buildSortedList(e,t)}}AllEventsBlock.html=r()},function(t){t.exports='<div class="all-events-block">\n\t<div  class="events-filter dropdown color white small semi" onchange="sortEvents">\n\t\t<div class="button">\n\t\t\t<span class="placeholder">{{sortTitle}}</span>\n\t\t\t<span class="icon icon-dropdown"></span>\n\t\t</div>\n\t\t<div class="content" >\n\t\t\t<p class="option" onClick="sortByYear">By Year</p>\n\t\t\t<p class="option" onClick="sortByTarget">By Target</p>\n\t\t</div>\n\t</div>\n\t<span class="color {{colorClass}} small semi title-underline">All Events</span>\n\t<ul key="allEventsList" id="all-events-list" class="all-events-list"> </ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{RelatedBlock:function(){return RelatedBlock}});i(1);var s=i(854),n=i(954),o=i.n(n);i(955);class RelatedBlock extends s.BaseContentBlock{constructor(t){super(t,null,{relatedMessage:"Related"})}onRouteChange(t,e,i,s){null!==this._children.relatedList&&(this._children.relatedList.innerHTML="",void 0!==e&&0!==e.length?(this.setState({moreShowing:!1,moreMessage:"Show More",moreIcon:"icon-plus",relatedMessage:t,colorClass:i}),e.forEach((t=>{const e=this._app.getManager("content").getEntityInfo(t);if(null!==e){const i=document.createElement("li");i.appendChild(document.createTextNode(e.iauName)),i.addEventListener("click",(()=>{this._app.getManager("router").navigate(t)}),!1),i.setAttribute("data-value",t),i.classList.add("item"),i.classList.add("clickable"),this._children.relatedList.appendChild(i)}}))):this.hide())}}RelatedBlock.html=o()},function(t){t.exports='<div key="relatedBlock" class="related-block">\n\t<span class="small semi color {{colorClass}} title-underline">{{relatedMessage}}</span>\n\t<ul id="content-related-list" key="relatedList" class="list color gray med"></ul>\n</div>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{ContentPanel:function(){return ContentPanel}});var s=i(711),n=i.n(s),o=(i(859),i(862)),a=(i(918),i(1)),r=i(854),l=i(957),c=i.n(l);i(958);class ContentPanel extends a.BaseComponent{constructor(t,e){super(t,null,{title:"",isOverlay:!1,isOverlayClass:"",backButtonVisibleClass:"",hdButtonVisibleClass:"",hdButtonIconClass:"icon-hd",backButtonText:"Back",scrollToTopVisible:"hidden",...e}),this._class.isOverlay={true:"overlay",false:""},this._collapseMobile="icon-collapse",this._expandMobile="icon-expand",this._collapseDesktop="icon-collapse-side",this._expandDesktop="icon-expand-side",this._backRoute=this._state.backButtonRoute||"#",this._backButtonVisibleClass="",this._class.isScrollToTopVisible={true:"active",false:"hidden"},this._class.hdButtonVisibleClass={true:"active",false:"hidden"},this._class.hdButtonIconClass={true:"icon-hd-on",false:"icon-hd"},this._overviewBlock=null,this._defaultState={desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile,backButtonVisibleClass:this._backButtonVisibleClass,scrollToTopVisible:this._class.isScrollToTopVisible.false,title:"",hdButtonVisibleClass:this._class.hdButtonVisibleClass.false},this._blockState={overviewBlock:!1,replayBlock:!1,allEventsBlock:!1,featuredMoonsBlock:!1,explorationBlock:!1,contentStoryBlock:!1,featuredEventsBlock:!1,specialFeaturesBlock:!1,viewOptionsBlock:!1,layersBlock:!1,featuresBlock:!1,relatedBlock:!1},this._defaultBlockState={overviewBlock:!1,replayBlock:!1,allEventsBlock:!1,featuredMoonsBlock:!1,explorationBlock:!1,contentStoryBlock:!1,featuredEventsBlock:!1,specialFeaturesBlock:!1,viewOptionsBlock:!1,layersBlock:!1,featuresBlock:!1,relatedBlock:!1},this._state.desktopIconName=this._collapseDesktop,this._state.mobileIconName=this._collapseMobile,this._components=["overviewBlock","replayBlock","allEventsBlock","featuredMoonsBlock","explorationBlock","contentStoryBlock","featuredEventsBlock","specialFeaturesBlock","viewOptionsBlock","layersBlock","featuresBlock","relatedBlock"],this._eventNames.push("overlay","expandtoggle"),this._initCallbacks(),this._scrollbar=null,this._currentId="",this._hdToggleEntity=null,this._overviewBlock=null,this._replayBlock=null,this._relatedBlock=null,this._featuredEventsBlock=null,this._allEventsBlock=null,this._featuredMoonsBlock=null,this._storyBlock=null,this._explorationBlock=null,this._specialFeaturesBlock=null,this._viewOptionsBlock=null,this._layersBlock=null,this._featuresBlock=null,this._colorClass="white",this._mainViewportEl=null,this._pioneerParentEl=null,o.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[o.followCursor]}),this.bindFunctions(["backRoute","onClickShowCollapse","showOverlay","hideOverlay","scrollToTop","showHideScrollToTopButton","updateHDButton","onChildParentChange","clearPanel"])}async init(){super.init(),this._overviewBlock=await this._app.addComponentWithPlaceholder({type:r.OverviewBlock,name:"overviewBlock"},this._element),this._replayBlock=await this._app.addComponentWithPlaceholder({type:r.ReplayBlock,name:"replayBlock"},this._element),this._relatedBlock=await this._app.addComponentWithPlaceholder({type:r.RelatedBlock,name:"relatedBlock"},this._element),this._allEventsBlock=await this._app.addComponentWithPlaceholder({type:r.AllEventsBlock,name:"allEventsBlock"},this._element),this._featuredMoonsBlock=await this._app.addComponentWithPlaceholder({type:r.FeaturedMoonsBlock,name:"featuredMoonsBlock"},this._element),this._storyBlock=await this._app.addComponentWithPlaceholder({type:r.StoryBlock,name:"contentStoryBlock"},this._element),this._explorationBlock=await this._app.addComponentWithPlaceholder({type:r.ExplorationBlock,name:"explorationBlock"},this._element),this._specialFeaturesBlock=await this._app.addComponentWithPlaceholder({type:r.SpecialFeaturesBlock,name:"specialFeaturesBlock"},this._element),this._featuredEventsBlock=await this._app.addComponentWithPlaceholder({type:r.FeaturedEventsBlock,name:"featuredEventsBlock"},this._element),this._viewOptionsBlock=await this._app.addComponentWithPlaceholder({type:r.ViewOptionsBlock,name:"viewOptionsBlock"},this._element),this._layersBlock=await this._app.addComponentWithPlaceholder({type:r.LayersBlock,name:"layersBlock"},this._element),this._featuresBlock=await this._app.addComponentWithPlaceholder({type:r.FeaturesBlock,name:"featuresBlock"},this._element),this._callbackRegistry.push({emitter:this._app.getManager("layer"),event:"toggleLayer",callback:this._layersBlock.handleLayerToggle}),(0,o.default)(this._children.desktopCollapseExpandButton,{content:"Toggle content panel.",placement:"right"}),(0,o.default)(this._children.mobileShowOverlayButton,{content:"Expand content panel.",placement:"top"}),(0,o.default)(this._children.mobileHideOverlayButton,{content:"Collapse content panel.",placement:"top"}),(0,o.default)(this._children.hdButton,{content:"Toggle High Definition Textures",placement:"right"})}_onRouteChange(t,e){if(!this.isEnabled())return;if(this._disableAllComponents(),this._defaultState.title="",this._currentId=t,this._app.getManager("router").configs.locked||e?.length<=1)this._backButtonVisibleClass="hidden";else{if(e&&e.length>1){this._backRoute="";for(let t=0;t<e.length-1;t++)this._backRoute+="/"+e[t]}this._backButtonVisibleClass="visible"}const i=this._app.getManager("scene");let s=null;s=null===this._hdToggleEntity||void 0===this._hdToggleEntity?this._class.hdButtonVisibleClass.false:this._class.hdButtonVisibleClass[i.hasHD(this._hdToggleEntity)],this.setState({backButtonVisibleClass:this._backButtonVisibleClass,hdButtonVisibleClass:s})}_onRouteChangeAfter(){null===this._scrollbar?this._scrollbar=a.AppUtils.addScrollbar(this._element.querySelector(".content-body"),{callbacks:{onScroll:this.showHideScrollToTopButton}}):(this._scrollbar.scroll(0),this.showHideScrollToTopButton())}async onRouteChangeEvent(t,e,i,s,o,a,r){this._onRouteChange(t,r),this.setState({title:i.title}),this._defaultState.title=i.title;const l=this._app.getManager("scene"),c=this._app.getManager("content");if(i.target&&l.hasHD(i.target)?this._hdToggleEntity=i.target:this._hdToggleEntity=null,this._colorClass=this._app.getManager("content").getColorClass(t),null!==s){const t=n()(i.start).format("MMM DD, YYYY"),e=s.description.blurb,o=s.description.more;if(await this._overviewBlock.onRouteChange(e,o,t,this._colorClass),a&&a.isCanceled)return;this._blockState.overviewBlock=!0,this._overviewBlock.setEnabled(!0)}if(null!==e){if(await this._replayBlock.onRouteChange(t,e,i,o,a),a&&a.isCanceled)return;this._blockState.replayBlock=!0,this._replayBlock.setEnabled(!0)}if(null!==s&&void 0!==s.description.related&&s.description.related.length>0&&await this._relatedBlock.onRouteChange("Related to this Event",s.description.related,this._colorClass),null!==s&&void 0!==s.description.related&&s.description.related.length>0){if(await this._relatedBlock.onRouteChange("Related to this Event",s.description.related,this._colorClass),a&&a.isCanceled)return;this._blockState.relatedBlock=!0,this._relatedBlock.setEnabled(!0)}if(!0===s.layers||0!==this._app.getManager("layer").getContextualLayers(i.target).length){const t=this._app.getManager("content").getEntityInfo(i.target),e=t.displayName||t.iauName;if(await this._layersBlock.onRouteChange(t,e),a&&a.isCanceled)return;this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)}else this._blockState.layersBlock=!1,this._layersBlock.setEnabled(!1);if(this._featuresBlock.setEnabled(!1),0!==c.getSpheroidFeatures(t)?.length){const e=this._app.getManager("content").getEntityInfo(i.target),s=e.displayName||e.iauName;if(await this._featuresBlock.onRouteChange(e,s),a&&a.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.featuresBlock=!0,this._featuresBlock.setEnabled(!0)}else if(0!==c.getSpheroidFeatures(i.target)?.length){const e=c.getEntityInfo(i.target),s=e.displayName||e.iauName||"";if(await this._featuresBlock.onRouteChange(e,s),a&&a.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.featuresBlock=!0,this._featuresBlock.setEnabled(!0)}else this._blockState.featuresBlock=!1,this._featuresBlock.setEnabled(!1);this.show(),this.updateHDButton(),this._onRouteChangeAfter()}async onRouteChangeEventsOverview(t,e,i,s,n){if(this._onRouteChange(t,n),null!==e){this.setState({title:e.title+" Events"}),this._defaultState.title=e.title+" Events";const i=this._getSubheadingForObject(t,e);let n=e.description.blurb;e.eventDescription&&null!==e.eventDescription.blurb&&(n=e.eventDescription.blurb);let o=e.description.more;if(e.eventDescription&&null!==e.eventDescription.more&&(o=e.eventDescription.more),await this._overviewBlock.onRouteChange(n,o,i,this._colorClass),s&&s.isCanceled)return;this._blockState.overviewBlock=!0,this._overviewBlock.setEnabled(!0)}else this.setState({title:e.displayName+" Events"||0}),this._defaultState.title=e.displayName+" Events"||0;if(this._colorClass=this._app.getManager("content").getColorClass(t),null!==i){if(await this._allEventsBlock.onRouteChange(t,i,s),s&&s.isCanceled)return;this._blockState.allEventsBlock=!0,this._allEventsBlock.setEnabled(!0)}this._onRouteChangeAfter()}async onRouteChangeObject(t,e,i,s,n,o,a,r=!1){this._onRouteChange(t,a);let l="";if(["Asteroid","Comet","Moon","Dwarf Planet"].indexOf(e.category)>=0&&this._app.scene.getEntity(t).getComponentByType("model")?._url.includes("generic")&&(l="This ",l+=e.category.toLowerCase(),l+=" is represented by a generic model."),null!==i){this.setState({title:i.title}),this._defaultState.title=i.title;const e=this._getSubheadingForObject(t,i),a=i.description.blurb,r=i.description.more;if(await this._overviewBlock.onRouteChange(a,r,e,this._colorClass,l),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.overviewBlock=!0,this._overviewBlock.setEnabled(!0);const{locked:c}=this._app.getManager("router").configs;if(!c&&null!==s&&void 0!==i.featuredEvents&&i.featuredEvents.initial.length>0){if(await this._featuredEventsBlock.onRouteChange(t,i,s,o),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.featuredEventsBlock=!0,this._featuredEventsBlock.setEnabled(!0)}if(!c&&void 0!==i.exploration&&i.exploration.initial.length>0){if(await this._explorationBlock.onRouteChange(t,i.exploration,o),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.explorationBlock=!0,this._explorationBlock.setEnabled(!0)}if(!c&&null!=n&&n.length>0){if(await this._storyBlock.onRouteChange(t,"Stories",n,o),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.contentStoryBlock=!0,this._storyBlock.setEnabled(!0)}}else this.setState({title:e.displayName||e.iauName}),this._defaultState.title=e.displayName||e.iauName,""!==l&&(await this._overviewBlock.onRouteChange("","","","",l),this._blockState.overviewBlock=!0,this._overviewBlock.setEnabled(!0));this._colorClass=this._app.getManager("content").getColorClass(t),await this._specialFeaturesBlock.onRouteChange(e),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget()||(this._blockState.specialFeaturesBlock=!0,this._specialFeaturesBlock.setEnabled(!0))}async onRouteChangeObjectLoaded(t,e,i,s,n,o,a,r=!1){if(o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;const l=this._app.getManager("scene"),c=this._app.getManager("content");if(this._updateHDTarget(e,t),this._viewOptionsBlock.setEnabled(!1),await this._viewOptionsBlock.onRouteChange(e,r),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.viewOptionsBlock=!0,this._viewOptionsBlock.setEnabled(!0),this._layersBlock.setEnabled(!1);const h=i?.title||e.displayName||e.iauName;if(await this._layersBlock.onRouteChange(e,h),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;const u=this._app.getManager("layer"),d=l.get("main").getEntity(e.id).getParent().getName();if(0!==u.getContextualLayers(t).length||void 0!==c.getSpheroidLayers(t)){const i=e.displayName||e.iauName||"";if(await this._layersBlock.onRouteChange(e,i),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)}else if(0!==u.getContextualLayers(d).length||void 0!==c.getSpheroidLayers(d)){const e=c.getEntityInfo(d),i=e.displayName||e.iauName||"";if(await this._layersBlock.onRouteChange(e,i),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)}else this._blockState.layersBlock=!1,this._layersBlock.setEnabled(!1);if(this._featuresBlock.setEnabled(!1),0!==c.getSpheroidFeatures(t)?.length){const s=i?.title||e.displayName||e.iauName;if(await this._featuresBlock.onRouteChange(e,s),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.featuresBlock=!0,this._featuresBlock.setEnabled(!0)}else if(0!==c.getSpheroidFeatures(d)?.length){const e=c.getEntityInfo(d),i=e.displayName||e.iauName||"";if(await this._featuresBlock.onRouteChange(e,i),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.featuresBlock=!0,this._featuresBlock.setEnabled(!0)}else this._blockState.featuresBlock=!1,this._featuresBlock.setEnabled(!1);if(this._relatedBlock.setEnabled(!1),!this._app.getManager("router").configs.locked&&null!==i&&void 0!==i.related&&i.related.length>0){if(await this._relatedBlock.onRouteChange("Related",i.related,this._colorClass,o),o&&o.isCanceled&&t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.relatedBlock=!0,this._relatedBlock.setEnabled(!0)}this._onRouteChangeAfter()}async onRouteChangeFeature(t,e,i,s,n,o){this._onRouteChange(t,o),this.setState({title:s.title}),this._defaultState.title=s.title;const a=s.description?s.description.blurb:"",r=s.description?s.description.more:"";if(await this._overviewBlock.onRouteChange(a,r,"",this._colorClass),!n||!n.isCanceled){if(this._blockState.overviewBlock=!0,this._overviewBlock.setEnabled(!0),"moons"===o[o.length-1]){if(i.initial&&i.initial.length>0){if(await this._featuredMoonsBlock.onRouteChange(t,i,n),n&&n.isCanceled)return;this._blockState.featuredMoonsBlock=!0,this._featuredMoonsBlock.setEnabled(!0)}const s=e.displayName||e.iauName;if(await this._layersBlock.onRouteChange(e,s,["minorMoons","majorMoons"]),n&&n.isCanceled)return;0!==this._app.getManager("layer").getContextualLayers(t).length?(this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)):(this._blockState.layersBlock=!1,this._layersBlock.setEnabled(!1))}else if(i.initial&&i.initial.length>0){if(await this._explorationBlock.onRouteChange(t,i,n),n&&n.isCanceled)return;this._blockState.explorationBlock=!0,this._explorationBlock.setEnabled(!0)}this._onRouteChangeAfter()}}async onChildParentChange(t,e,i){const s=this._app.getManager("layer"),n=this._app.getManager("scene"),o=this._app.getManager("content");if(this._updateHDTarget(e,t),await this._viewOptionsBlock.onRouteChange(e,i),t===this._app.getView("object")?.getCurrentTarget()){if(0!==s.getContextualLayers(t).length){const i=e.displayName||e.iauName||"";if(await this._layersBlock.onRouteChange(e,i),t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)}else{const i=n.get("main").getEntity(e.id).getParent().getName();if(0!==s.getContextualLayers(i).length){const e=o.getEntityInfo(i),s=e.displayName||e.iauName||"";if(await this._layersBlock.onRouteChange(e,s),t!==this._app.getView("object")?.getCurrentTarget())return;this._blockState.layersBlock=!0,this._layersBlock.setEnabled(!0)}else this._blockState.layersBlock=!1,this._layersBlock.setEnabled(!1)}this._relatedBlock.isEnabled()&&(this._relatedBlock.setEnabled(!1),this._relatedBlock.setEnabled(!0))}}_getSubheadingForObject(t,e){const i=this._app.getManager("content"),s=i.getEntityInfo(t);let o="";switch(s.category){case"Spacecraft":{let t="";const i=n()(e.dates.start),s=new(n());if(void 0===e.dates||!0!==i.isValid())return"";t=i.year();let a="present";!0===n()(e.dates.end).isValid()&&(a=n()(e.dates.end).year()),i.isAfter(s)?(i.month()>-1&&i.year()>-1?t=i.format("MMMM YYYY"):i.month()<0&&i.year()>-1&&(t=i.year()),o=t):o=t+"-"+a;break}case"Moon":{const e=i.getEntityInfo(this._app.getManager("scene").get("main").getEntity(t).getParent().getName());o="Moon of "+(e.displayName||e.iauName);break}default:o=void 0!==s.subcategory?s.subcategory:s.category}return o}backRoute(){const t=this._app.getManager("router");let e={};const i=this._app.getManager("time"),s="string"==typeof this._backRoute&&this._backRoute.endsWith("events");t.query.time&&i&&(e={time:i.getTimeUrl(),rate:s?1:i.getTimeRate()}),this._app.getManager("router").navigate(e,this._backRoute)}async toggleHD(){if(null===this._hdToggleEntity||void 0===this._hdToggleEntity)return;const t=await this.app.getManager("scene").toggleHDTextureForEntity(this._hdToggleEntity);this.setState({hdButtonIconClass:this._class.hdButtonIconClass[t]})}async updateHDButton(){const t=this._app.getManager("scene");if(null===this._hdToggleEntity||void 0===this._hdToggleEntity||!1===t.get("main").getEntity(this._hdToggleEntity).getComponentByType("spheroidLOD").isEnabled()||(!0===a.AppUtils.isiPhone()||!0===a.AppUtils.isiPad())&&"earth"===this._hdToggleEntity)this.setState({hdButtonVisibleClass:this._class.hdButtonVisibleClass.false});else{const e=await t.isEntityHD(this._hdToggleEntity);this.setState({hdButtonVisibleClass:this._class.hdButtonVisibleClass.true,hdButtonIconClass:this._class.hdButtonIconClass[e]})}}_updateHDTarget(t,e){const i=this._app.getManager("scene"),s=this._app.getManager("content");let n=null;if(this._hdToggleEntity=null,"Planet"===t.category||"Moon"===t.category||"Dwarf Planet"===t.category||"Star"===t.category)n=e;else{const t=i.getParent(e);if(null!==t&&!a.AppUtils.isiPhone()){const e=s.getEntityInfo(t);"Planet"!==e.category&&"Moon"!==e.category||(n=t)}}null!==n&&i.hasHD(n)?this._hdToggleEntity=n:this._hdToggleEntity=null}showOverlay(){const{mobileHideOverlayButton:t}=this._children;t.setAttribute("aria-label","Collapse content panel to half screen"),this.setState({isOverlay:!0,isOverlayClass:this._class.isOverlay.true,desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile},(()=>this.triggerCallbacks("overlay",[this._state.isOverlay])))}hideOverlay(){const{mobileHideOverlayButton:t}=this._children;t.setAttribute("aria-label","Collapse content panel"),this.setState({isOverlay:!1,isOverlayClass:this._class.isOverlay.false,desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile},(()=>this.triggerCallbacks("overlay",[this._state.isOverlay])))}showHideScrollToTopButton(){if(!this._scrollbar)return;const t=this._scrollbar.scroll().position.y>25;this.setState({scrollToTopVisible:this._class.isScrollToTopVisible[t]})}scrollToTop(){this._scrollbar.scroll(0,300,"easeOutBounce")}onClickShowCollapse(){this._state.isVisible?this._state.isOverlay&&a.AppUtils.isMobileMode()?this.hideOverlay():this.hide():this.show()}show(){if(!1===this._app.getManager("layer").getLayer("ui").visible)return;super.show();const{desktopCollapseExpandButton:t}=this._children;t.setAttribute("aria-label","Collapse content panel"),this.setEnabled(!0),this._components.forEach((t=>{void 0!==this._blockState[t]&&null!==this._blockState[t]&&this._app.getComponent(t).setEnabled(this._blockState[t])})),this.triggerCallbacks("expandtoggle",[!0]),this.updateHDButton(),this.setState({desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile})}hide(){super.hide();const{desktopCollapseExpandButton:t}=this._children;t.setAttribute("aria-label","Expand content panel"),this.triggerCallbacks("expandtoggle",[!1]),this.setState({desktopIconName:this._expandDesktop,mobileIconName:this._expandMobile})}_disableAllComponents(){this._components.forEach((t=>{null!==this._blockState[t]&&void 0!==this._blockState[t]&&(this._blockState[t]=!1),this._app.getComponent(t).setEnabled(!1)}))}clearPanel(t=null){if(this._disableAllComponents(),t){const e=`Loading ${t}...`;this.setState({title:e}),this._defaultState.title=e}}reset(){this.setState(this._defaultState),this._currentId=""}__disable(){this.reset(),super.__disable()}}ContentPanel.html=c()},function(t){t.exports='<article class="content-panel {{isVisibleClass}} {{isOverlayClass}}">\n\t<button key="desktopCollapseExpandButton" class="button clickable icon {{desktopIconName}} desktop-collapse-button" data-tippy-content="Toggle content panel." onclick="onClickShowCollapse"></button>\n\t<div class="content-body panel scrollable">\n\t\t<button key="mobileScrollToTopButton" id="mobile-scroll-to-top-button" class="button clickable icon scroll-top mobile-scroll-to-top-button {{scrollToTopVisible}}" data-tippy-content="Top" aria-label="Return scroll to the top of content panel" onclick="scrollToTop"></button>\n\t\t<nav class="container back clickable {{backButtonVisibleClass}} {{backButtonPosition}}" onclick="backRoute">\n\t\t\t<span class="separator icon icon-lesser"></span>\n\t\t\t<p class="text">{{backButtonText}}</p>\n\t\t</nav>\n\t\t<div class="content-header">\n\t\t\t<h2 class="semi title">\n\t\t\t\t{{title}}\n\t\t\t</h2>\n\t\t\t<button key="hdButton" class="button clickable icon {{hdButtonIconClass}} {{hdButtonVisibleClass}}" data-tippy-content="Toggle High Definition Textures" aria-label="Toggle high definition textures" onclick="toggleHD" ontouch="toggleHD"></button>\n\t\t\t<span class="mobile-button-pair">\n\t\t\t\t<button key="mobileShowOverlayButton" class="button clickable icon icon-expand mobile-overlay-button" onclick="showOverlay" data-tippy-content="Expand content panel." aria-label="Expand content panel to full screen"></button>\n\t\t\t\t<button key="mobileHideOverlayButton" class="button clickable icon {{mobileIconName}} mobile-collapse-button" onclick="onClickShowCollapse" data-tippy-content="Collapse content panel" aria-label="Collapse content panel"></button>\n\t\t\t</span>\n\t\t</div>\n\t\t<div id="content" class="content">\n\t\t\t<OverviewBlock></OverviewBlock>\n\t\t\t<ReplayBlock></ReplayBlock>\n\t\t\t<ExplorationBlock></ExplorationBlock>\n\t\t\t<FeaturedEventsBlock></FeaturedEventsBlock>\n\t\t\t<AllEventsBlock></AllEventsBlock>\n\t\t\t<FeaturedMoonsBlock></FeaturedMoonsBlock>\n\t\t\t<StoryBlock></StoryBlock>\n\t\t\t<RelatedBlock></RelatedBlock>\n\t\t\t<LayersBlock></LayersBlock>\n\t\t\t<FeaturesBlock></FeaturesBlock>\n\t\t\t<ViewOptionsBlock></ViewOptionsBlock>\n\t\t\t<SpecialFeaturesBlock></SpecialFeaturesBlock>\n\t\t</div>\n\t</div>\n</article>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{FeaturedStoriesPanel:function(){return FeaturedStoriesPanel}});i(918);var s=i(1),n=i(854),o=i(960),a=i.n(o);i(961);class FeaturedStoriesPanel extends s.BaseComponent{constructor(t,e){super(t,null,{title:"Featured Stories",isOverlay:!1,isOverlayClass:"",isOpenTitleClass:"open",isOpenButtonClass:"open",...e}),this._class.isOverlay={true:"overlay",false:""},this._class.isOpen={true:"open",false:"closed"},this._collapseMobile="icon-collapse",this._expandMobile="icon-expand",this._collapseDesktop="icon-collapse-side",this._expandDesktop="icon-expand-side",this._defaultState={desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile},this._state.desktopIconName=this._collapseDesktop,this._state.mobileIconName=this._collapseMobile,this._components=["featuredStoryBlock"],this._eventNames.push("overlay","expandtoggle"),this._initCallbacks(),this._scrollbar=null,this._currentId="",this._storyBlock=null,this.bindFunctions(["onClickShowCollapse","showOverlay","hideOverlay"])}async init(){super.init(),this._storyBlock=await this._app.addComponentWithPlaceholder({type:n.StoryBlock,name:"featuredStoryBlock"},this._element)}_onRouteChange(){this.isEnabled()&&this._disableAllComponents()}async onRouteChange(t,e){if(!t||!t.isCanceled){if(this._onRouteChange(),e&&e.length>0){if(await this._storyBlock.onRouteChange("home","",e,t),t&&t.isCanceled)return;this._storyBlock.setEnabled(!0)}null===this._scrollbar?this._scrollbar=s.AppUtils.addScrollbar(document.getElementById("content-body")):this._scrollbar.scroll(0)}}showOverlay(){this.setState({isOverlay:!0,isOverlayClass:this._class.isOverlay.true,desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile},(()=>this.triggerCallbacks("overlay",[this._state.isOverlay])))}hideOverlay(){this.setState({isOverlay:!1,isOverlayClass:this._class.isOverlay.false,desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile},(()=>this.triggerCallbacks("overlay",[this._state.isOverlay])))}onClickShowCollapse(){this._state.isVisible?this._state.isOverlay&&s.AppUtils.isMobileMode()?this.hideOverlay():this.hide():this.show()}get shouldOffsetRight(){return s.AppUtils.isDesktop()}show(){super.show();const{currentView:t}=this._app.getManager("router");this._app.getView(t)?.setViewportOffset(!0);const{expandToggleBtn:e}=this._children;e.setAttribute("aria-label","Collapse featured stories panel"),this._app.getComponent("mobileExpandButton").showCPButton(!1,"featuredStoriesPanel"),this.setState({desktopIconName:this._collapseDesktop,mobileIconName:this._collapseMobile,isOpenTitleClass:this._class.isOpen.true,isOpenButtonClass:this._class.isOpen.true})}hide(){super.hide();const{currentView:t}=this._app.getManager("router");this._app.getView(t)?.setViewportOffset(!1);const{expandToggleBtn:e}=this._children;e.setAttribute("aria-label","Expand featured stories panel"),this._app.getComponent("mobileExpandButton").showCPButton(!0,"featuredStoriesPanel"),this.setState({desktopIconName:this._expandDesktop,mobileIconName:this._expandMobile,isOpenTitleClass:this._class.isOpen.false,isOpenButtonClass:this._class.isOpen.false})}_disableAllComponents(){this._components.forEach((t=>{this._app.getComponent(t).setEnabled(!1)}))}reset(){this.setState(this._defaultState),this._currentId=""}__disable(){this.reset(),super.__disable()}}FeaturedStoriesPanel.html=a()},function(t){t.exports='<article class="featured-stories-panel {{isVisibleClass}} {{isOverlayClass}}">\n\t<div class="featured-stories-header">\n\t\t<span class="featured-stories-title color gray {{isOpenTitleClass}}" >\n\t\t\tFeatured Stories and Events\n\t\t</span>\n\t\t<span class="button clickable icon desktop-collapse-button {{desktopIconName}} {{isOpenButtonClass}}" onclick="onClickShowCollapse"></span>\n\t</div>\n\n\t<div id="content-body" class="content-body panel scrollable">\n\t\t<div class="content-header">\n\t\t\t<span class="mobile-button-pair">\n\t\t\t\t<button key="expandToggleBtn" class="button clickable icon {{mobileIconName}} mobile-collapse-button" onclick="onClickShowCollapse"></button>\n\t\t\t</span>\n\t\t</div>\n\t\t<div id="content" class="content">\n\t\t\t<StoryBlock></StoryBlock>\n\t\t</div>\n\t</div>\n</article>\n'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{Comparison:function(){return Comparison}});var s=i(1),n=(i(963),i(964)),o=i.n(n);class Comparison extends s.BaseComponent{constructor(t,e){super(t,e),this.list=null,this.name=null,this.compare=null,this.unitConverter=null,this._class.fontSize.xSmall="x-small",this._class.fontSize.small="small",this._class.fontSize.default="",Object.assign(this._state,{unitSystem:"imperial",leftValueClass:"",rightValueClass:"",leftTitle:"",leftType:"",leftRadius:"",leftIdentifier:"",rightTitle:"",rightType:"",rightRadius:"",rightUnit:"",rightIdentifier:"",photoMode:"",unit:"",fontSizeClass:this._class.fontSize.default,altFontSizeClass:this._class.fontSize.small}),this.bindFunctions(["closeView","nextCompare","previousCompare","unitchange","clearLeftPanelText","clearRightPanelText"])}init(){super.init();const t=this._children.exit;t&&(t.addEventListener("click",this.closeView,{passive:!1}),t.addEventListener("mouseenter",(()=>{this._children.exitIcon.classList.add("hover")}),{passive:!1}),t.addEventListener("mouseleave",(()=>{this._children.exitIcon.classList.remove("hover")}),{passive:!1})),this._children.next&&this._children.next.addEventListener("click",this.nextCompare,{passive:!1}),this._children.previous&&this._children.previous.addEventListener("click",this.previousCompare,{passive:!1})}_updateFontSize(){let t=this._class.fontSize.default,e=this._class.fontSize.small;s.AppUtils.isMobileMode()?(t=this._class.fontSize.xSmall,e=this._class.fontSize.xSmall):(s.AppUtils.is2K()||s.AppUtils.is4K())&&(t=this._class.fontSize.default,e=this._class.fontSize.small),this.setState({fontSizeClass:t,altFontSizeClass:e})}unitchange(t){this.setState({unitSystem:t?"metric":"imperial"}),this.generateValues()}nextCompare(){const t=this.list.indexOf(this.compare)||0;this.compare=this.list[(t+1)%this.list.length],this.clearRightPanelText(this.compare),this._app.getManager("router").navigate(`${this.name}/compare?id=${this.compare}`)}previousCompare(){const t=this.list.indexOf(this.compare)||0;this.compare=this.list[t-1<0?this.list.length-1:t-1],this.clearRightPanelText(this.compare),this._app.getManager("router").navigate(`${this.name}/compare?id=${this.compare}`)}clearRightPanelText(t){const e=this._app.getManager("content").getEntityInfo(t),i=e?.displayName||e?.iauName,s=e?.subcategory||e?.category;this.setState({rightTitle:i??"",rightType:s??"",rightRadius:"",rightUnit:"",rightIdentifier:"loading..."})}clearLeftPanelText(t){const e=this._app.getManager("content").getEntityInfo(t),i=e?.displayName||e?.iauName,s=e?.subcategory||e?.category;this.setState({leftTitle:i??"",leftType:s??"",leftRadius:"",leftUnit:"",leftIdentifier:"loading..."})}async setup(t={}){if(t.cancelToken.isCanceled)return;this.list=t.list||this.list,this.name=t.name||this.name,this.compare=t.compare||this.compare,this.unitConverter=t.unitConverter||this.unitConverter;const e=Object.keys(this.list);for(let t=0;t<e.length;t++)this.list[e[t]]===this.name&&(this.list=this.list.slice(0,t).concat(this.list.slice(t+1)));this.generateValues()}formatValue(t,e=1){if(t<1){let i=t.toFixed(2*e);if(0===Number.parseFloat(i))for(let s=e;s<e+5&&(i=t.toFixed(s),0===Number.parseFloat(i));s+=1);return i}if(t<1e3)return t.toFixed(e);let i=Math.round(t);const s=Math.pow(10,i.toString().length-5);return i=Math.round(i/s)*s,i.toFixed(e)}async generateValues(){this.leftDescription=await this._app.getManager("content").getEntityDesc(this.name)||{};const t=this._app.getManager("content").getEntityInfo(this.name),e=this.leftDescription.data||{};e.type=t?t.subcategory||t.category:"",this.rightDescription=await this._app.getManager("content").getEntityDesc(this.compare)||{};const i=this._app.getManager("content").getEntityInfo(this.compare),s=this.rightDescription.data||this.rightDescription||{};s.type=i?i.subcategory||i.category:"";const{unitSystem:n}=this._state,o=this.leftDescription.title||t.displayName||t.iauName||this.name,a=this.rightDescription.title||i.displayName||i.iauName||this.compare,r={leftValueClass:"color "+this._app.getManager("content").getColorClass(this.name),rightValueClass:"color "+this._app.getManager("content").getColorClass(this.compare),leftTitle:o,rightTitle:a,leftType:e.type,leftRadius:"",leftIdentifier:"Radius",rightType:s.type,rightRadius:"",rightUnit:o,rightIdentifier:"Radius",unit:this.unitConverter[n].radius.unit};if(this.unitConverter[n].radius){let o=e.radius;if(!o){const t=await this.entityCompareLookup(this.name);o=t?t.radius:null}let a=s.radius;if(!a){const t=await this.entityCompareLookup(this.compare);a=t?t.radius:null}if(!o||!a)return;const l=a/o,c=["Spacecraft","Human","Building","Vehicle"];t&&c.indexOf(t.category)>=0&&(o*=2,r.leftIdentifier="Length");let h=this.unitConverter[n].radius.multiplier||1,u=o*h;if(u<1&&(h=this.unitConverter[n].radius.small.multiplier,u=o*h,r.unit=this.unitConverter[n].radius.small.unit),o=u,r.leftRadius=this.formatValue(o),i&&c.indexOf(i.category)>=0){a*=2,r.rightIdentifier="Length";let t=this.unitConverter[n].radius.multiplier||1,e=a*t;r.rightUnit=this.unitConverter[n].radius.unit,e<1&&(t=this.unitConverter[n].radius.small.multiplier,e=a*t,r.rightUnit=this.unitConverter[n].radius.small.unit),a=e,r.rightRadius=this.formatValue(a)}else r.rightRadius=this.formatValue(l),r.leftTitle&&(r.rightUnit="× "+r.leftTitle.toUpperCase())}this.setState(r)}async entityCompareLookup(t){const e=this._app.getManager("content").getEntityInfo(t)||{},i=this._app.scene.get(t);if(!i)return null;let s=e.category||"NA",n=(e.subcategory||e.category||"").toLowerCase().replace(/ /g,"-");void 0!==e.subcategory&&(s=e.subcategory,"Spacecraft"===e.category&&(s+=" "+e.category,n+=" "+e.subcategory.toLowerCase().replace(/ /g,"-")));return{icon:n,category:s,type:e.category||"NA",className:this._app.getManager("content").getClassName(t),name:e.displayName||e.iauName||e.name||i.getName(),radius:"Spacecraft"===e.category?i.getExtentsRadius():i.getOcclusionRadius()}}closeView(){this._app.getManager("comparison").exit(),this._app.getManager("router").navigate(`/${this.name}`)}}Comparison.html=o()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<div class="compare">\n\t<section key="left" class="left section">\n\t\t<div class="block {{isVisibleClass}}">\n\t\t\t<h5 class="semi title">{{leftTitle}}</h5>\n\t\t\t<div class="data-area">\n\t\t\t\t<div class="data left">\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray med">Type</span>\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray semi upper">{{leftType}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="data right">\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray med">{{leftIdentifier}}</span>\n\t\t\t\t\t<span class="{{fontSizeClass}} {{leftValueClass}} radius semi">{{leftRadius}}</span>\n\t\t\t\t\t<span class="{{altFontSizeClass}} color gray semi upper">{{unit}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n\t<div class="divider"></div>\n\t<section key="right" class="right section">\n\t\t<div class="block {{isVisibleClass}}">\n\t\t\t<h5 class="semi title">{{rightTitle}}</h5>\n\t\t\t<div class="data-area">\n\t\t\t\t<div class="data left">\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray med">Type</span>\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray semi upper">{{rightType}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="data right">\n\t\t\t\t\t<span class="{{fontSizeClass}} color gray med">{{rightIdentifier}}</span>\n\t\t\t\t\t<span class="{{fontSizeClass}} {{rightValueClass}} radius semi">{{rightRadius}}</span>\n\t\t\t\t\t<span class="{{altFontSizeClass}} color gray semi upper">{{rightUnit}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<span key="previous" alt="Previous compare object" class="previous icon clickable icon-arrow-left-large"></span>\n\t\t<span key="next" alt="Next compare object" class="next icon clickable icon-arrow-right-large"></span>\n\t</section>\n\t<footer class="footer {{isVisibleClass}}">\n\t\t<span class="menu {{altFontSizeClass}} semi upper color gray">Comparison Overview</span>\n\t\t<span key="exit" class="exit clickable {{isVisibleClass}}">\n\t\t\t<span class="text upper semi">Exit</span>\n\t\t\t<span key="exitIcon" alt="Close comparison" class="icon icon-box {{isVisibleClass}}">\n\t\t\t\t<span class="icon icon-close"></span>\n\t\t\t</span>\n\t\t</span>\n\t</footer>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{InfoPanel:function(){return InfoPanel}});var s=i(1),n=(i(966),i(967)),o=i.n(n);class InfoPanel extends s.BaseComponent{constructor(t,e={}){e.config={...e.config},super(t,null,{isVisible:!1,...e}),Object.assign(this._class,{isVisible:{true:"",false:"hidden"}}),this.bindFunctions(["openPanel","closePanel"])}openPanel(){this.show()}closePanel(){this.hide()}hide(){this.getState("isVisible")&&(super.hide(),this._app.getComponent("overlay").hide())}show(){super.show(),this._app.getComponent("overlay").setContent(this._element),this._app.getComponent("overlay").show()}}InfoPanel.html=o()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<div key="infoPanel" class="info-panel {{isVisibleClass}}">\n\t<div id="info-panel" class="container scrollable">\n\t\t<h2 class="title">Your Solar System</h2>\n\t\t<h3 class="subtitle">Real-time, Real data</h3>\n\t\t<div class="content">\n\t\t\t<p>Welcome to <strong>Eyes on the Solar System!</strong> This simulated view of the solar system allows you to explore the planets, their moons, asteroids, comets and the spacecraft exploring them. You can also fast-forward or rewind time, and explore the solar system as it looked from 1950 to 2050. Rewind back to Earth in 1958 to see Explorer 1, skip forward to see the incredible journey of missions like Cassini and Voyager in their entirety, or watch OSIRIS-REx sample the surface of the asteroid Bennu. See the International Space Station\'s current position over Earth, land on Mars with the Perseverance rover, or watch the Juno spacecraft orbit Jupiter\'s north pole. </p>There are hundreds of places to visit and it is all using real data, images, engineering models, and events, just as they happened in space and time.</p>\n\t\t\t<p>This app runs in a web browser, and is mobile and tablet-friendly. Most devices with a web browser and an internet connection can enjoy the app, with no download necessary.</p><p>Here are some tips to get you navigating around the solar system quickly. You can also check out this video tutorial.</p>\n\t\t\t<p style="text-align:center;">\n\t\t\t\t<div class = "videoWrapper" style="position: relative; padding-bottom: 56.25%; height: 0;">\n\t\t\t\t\t<iframe width="560" height="315" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"\n\t\t\t\t\tsrc="https://www.youtube.com/embed/QRTfKYOfPLg" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen>\n\t\t\t\t\t</iframe>\n\t\t\t\t</div>\n\t\t\t</p>\n\t\t\t<ul>\n\n\t\t\t\t<li><strong>Time controls. </strong>Use the time controls to move forwards and backwards through space and time. You can simply click or touch the date and time directly and change it to any time you want, or use the rewind, fast-forward and play/pause buttons. For finer control, try the time slider to zip back and forth. If you get lost in time, just click on the "LIVE" buttton to go to the current time.</li>\n\n\t\t\t\t<li><strong>Moving around objects. </strong>Desktop - click/drag, Mobile/Touch - tap/drag. Keyboard: Rotate heading - <strong>A/D</strong>, rotate pitch - <strong>Q/E</strong>, rotate bank - <strong>Z/C</strong>. Add <strong>SHIFT</strong> for faster speed.</li>\n\n\t\t\t\t<li><strong>Zoom in and out.</strong> Desktop - mouse wheel, Mobile/Touch - pinch in/out. Keyboard: Zoom in/out - <strong>W/S</strong>, Add <strong>SHIFT</strong> for faster speed.</li>\n\n\t\t\t\t<li><strong>Click on any label</strong>. If you see a label, just click or touch it to instantly travel to the object. Once there, you can see featured events, compare the size to other celestial bodies or spacecraft, change the view, or jump over to other related objects.</li>\n\n\t\t\t\t<li><strong>Menu and search. </strong>Just select the magnifying glass and type in what you seek. Alternatively, use the Menu to select any object by name, including planets, moons, spacecraft, asteroids, and comets. On mobile, search and menu are accessed through the "hamburger" menu at the top right.</li>\n\n\t\t\t\t<li><strong>Stories. </strong>On the left side of the screen (bottom of the screen on mobile), you will see several stories. Click on one to experience "scrolly-telling". Learn about the Cassini spacecraft discovering geysers on Saturn\'s moon Enceladus, watch the Perseverance rover land on Mars, or follow the grand tour of the famous Voyager spacecraft.</li>\n\n\t\t\t\t<li> <strong>Surface layers. </strong>For several planets and moons, you can turn on high quality textures. Just go to the object, then on the panel (left side of the screen for laptops, bottom of the screen for mobile phones) if it shows an "<strong>HD</strong>" icon, click on it and you will see better images. For Earth, Mars, and the Moon, you can also select an even higher-quality texture at the bottom of the panel, with a description of the source. In the case of Earth, this is a global image of Earth from the day before! </li>\n\n\t\t\t\t<li><strong>Settings. </strong>On desktop and mobile, the show/hide settings button is in the bottom right of the screen. Once opened, you can change the lighting (flood, shadow, and natural lighting), expand to full screen, and turn off and on different layers of visibility (constellations, spacecraft, labels, trails, asteroids, comets, and even the user interface).</li>\n\n\t\t\t\t<li><strong>Telescope mode. </strong>When you are at a planet, try telescope mode! Click anywhere on the planet, and you will land at that location. Then turn on constellations and see what\'s in the sky right now.</li>\n\t\t\t</ul>\n\n\t\t</div>\n\t</div>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{EventsTimeline:function(){return EventsTimeline}});var s=i(713),n=i.n(s),o=i(1),a=(i(969),i(970)),r=i.n(a);const{deepMerge:l,debounce:c,throttle:h,formatNumber:u}=o.AppUtils;class EventsTimeline extends o.BaseComponent{constructor(t,e,i={}){super(t,e),this._settings=this._app.getComponent("settings"),this.defaultOptions={marginPercent:2,events:{clusterCoeff:6e3,clusterMin:3,clusterMax:18,clusterThresh:1},focusPanel:{padding:5,tickChar:"|",tickMult:.8,events:{width:2,threshold:1},touch:{leftOffset:70}},doubleThreshold:5,doubleTimeout:400,tapFadeDelay:2e3,classNames:{clusterMarker:"cluster-marker",eventMarker:"event-marker",eventStatic:"event-static",clusterEventLine:"cluster-line {{clusterLineVisibleClass}} {{clusterLineColorClass}}",focusPanel:{eventLine:"event-line {{fpEventTextSideClass}}"}},tooltips:{minTime:2500,click:"Click to go here!",tap:"Tap to go here!"},animation:{keyframes:{fpTicks:{zoom:[{transform:"scale(0,0)"},{transform:"scale(0.1,0.1)"},{transform:"scale(1,1)"}],left:[{transform:"translateX(0%)"},{transform:"translateX(-50%)",offset:.49},{transform:"translateX(50%)",offset:.5},{transform:"translateX(0%)"}],right:[{transform:"translateX(0%)"},{transform:"translateX(50%)",offset:.49},{transform:"translateX(-50%)",offset:.5},{transform:"translateX(0%)"}]},fpLine:[{opacity:.6},{opacity:0}],fpEvents:{zoom:[{transform:"translateY(50%) scale(var(--fpMarker-scaleX), 0)"},{transform:"translateY(0) scale(var(--fpMarker-scaleX), 1)",offset:.3},{transform:"scale(1,1) rotate(0.01deg)"}]}},timings:{zoom:{duration:1200,delay:200,fill:"forwards",easing:"cubic-bezier(0.3, 0, 0, 1)"}}}},this.setState({isVisible:!1,isVisibleClass:"hidden",targetLineVisibleClass:"hidden",targetDateVisibleClass:"hidden",viewingLineVisibleClass:"",targetDateColorClass:"yellow",clusterLineVisibleClass:"hidden",clusterLineColorClass:"white",rangeDatesVisibleClass:"",fpVisibleClass:"hidden",fpTicksVisibleClass:"hidden",fpTargetLineVisibleClass:"hidden",fpViewingLineVisibleClass:"hidden",fpEventName:"",fpEventTime:""}),this._localState={target:null,title:null,time:null,isTouch:this._app.isTouch,activeMarkerIndex:-1,animMarkerIndex:-1,activeEventId:null,viewingLineX:0,updateViewingLine:!1,toolTipTimeout:null,timelinebar:{active:!1,width:null,left:null,viewingLineX:0,touchLineX:0,displayedTip:!1,clickedOnce:!1,doubleClick:!1,fadeTimeout:null},focusPanel:{enabled:!1,calcWidths:!1,totalWidth:null,contentWidth:null,arrowWidth:null,left:null,viewingLineX:0,active:!1,animating:!1,wheelX:0,touchX:0,touchDeltaX:0,touchLineX:0,clickEnabled:!0,displayedTip:!1,clickedOnce:!1,doubleClick:!1}},this._events=[],this._markers=[],this._tooltips={},this._animations={},this.bindFunctions(["_onTimelineMouseLeave","_onTimelineMouseMove","_onTimelineClick","_onMarkerMouseEnter","_onMarkerMouseLeave","_onMarkerMouseMove","_onViewClick","_onFpMouseEnter","_onFpMouseLeave","_onFpEventMouseOver","_onFpTicksMouseEnter","_onFpTicksMouseMove","_onFpTicksMouseLeave","_onFpTicksClick","_onFpWheel","_onFpTouchStart","_onFpTouchMove","_onFpTouchEnd","_onFpTicksTouchStart","_onFpTicksTouchMove","_onFpTicksTouchEnd","_onMarkerTouch","_onDateTouchStart","_onDateTouchEnd","_onFpEventTouch","_onFpArrowClick","_onTimelineTouchStart","_onTimelineTouchMove","_onTimelineTouchEnd","_onOutsideTouch","_onResize","_setResizeTimeout","update"]),this._setViewingLineXThrottled=h(this._setViewingLineX,500),this._onFpTouchMoveThrottled=h(this._onFpTouchMove,100),this._showToolTipDebounced=c(this._showToolTip,2e3),this._resizeDebounced=c(this._onResize,200),this._onMarkerMouseEnterDebounced=c(this._onMarkerMouseEnter,200),this._onMarkerMouseLeaveDebounced=c(this._onMarkerMouseLeave,200),this._onTimelineMouseLeaveDebounced=c(this._onTimelineMouseLeave,200),this._onFpMouseLeaveDebounced=c(this._onFpMouseLeave,200),this._setEventNameDebounced=c(this._setEventName,200),window.timeline=this,this._resizeTimeout=null,this.setOptions({...i},!0),this.routeManager=this._app.getManager("router")}init(){super.init();const{tooltips:t}=this._options,{isTouch:e}=this._localState,{timelinebar:i}=this._children,s=e?{props:{content:t.tap,interactive:!0,appendTo:this._element,trigger:"manual",touch:!0},onclick:this._onViewClick}:{props:{content:t.click,followCursor:"initial",appendTo:this._element,trigger:"manual",touch:!0}};this._tooltips.timelinebar=this._settings.addTooltips([i],s),window.ontouchend=this._onOutsideTouch,this._callbackRegistry.push({emitter:this._app.getManager("time"),event:"update",callback:this.update},{emitter:this._app.getComponent("contentPanel"),event:"expandtoggle",callback:()=>this._setResizeTimeout()})}_addFpTooltips(){if(this._tooltips.focusPanel)return;const{isTouch:t}=this._localState,{focusPanel:e,fpTicksContainer:i}=this._children,{tooltips:s}=this._options,n=t?e:i,o=t?{props:{content:s.tap,interactive:!0,appendTo:n,offset:[10,0],trigger:"manual",touch:!0},onclick:this._onViewClick}:{props:{content:s.click,followCursor:"initial",appendTo:this._element,trigger:"manual",touch:!0}};this._tooltips.focusPanel=this._settings.addTooltips([n],o)}_createAnimation(t,e,i){const s=new KeyframeEffect(t,e,i);return new Animation(s,t.ownerDocument.timeline)}_depopulateFocusPanel(){const{fpContent:t}=this._children;for(;t.firstChild;)t.removeChild(t.firstChild)}_populateFocusPanel(t){const{focusPanel:e,activeEventId:i,isTouch:s}=this._localState,{focusPanel:n,classNames:o}=this._options,{fpContent:a}=this._children,r=.01*n.padding*e.contentWidth,l=.01*n.events.threshold*e.contentWidth,c=.5*n.events.width,h=e.contentWidth-2*r;t.fpEventXs=[];const u=t.events.map(((e,s)=>[this._calcXfromTime(e.start,t.min,t.timeRange,h)+r,0!==s,e.id===i]));for(let t=0;t<u.length-1;t++){const e=u[t],i=u[t+1],[s,n]=e,[o]=i,a=o-c-(s+c);if(a<l){const t=l-a;if(n){const s=.5*t;e[0]-=s,i[0]+=s}else i[0]+=t;i[1]=!1}}t.fpEventElements=u.map((e=>{const[i,,r]=e;t.fpEventXs.push(i);const l=document.createElement("div");return l.className=`${o.focusPanel.eventLine} ${r?"active":""}`,s&&(l.ontouchstart=t=>t.preventDefault(),l.ontouchend=this._onFpEventTouch),this._app.canHover&&(l.onmouseenter=this._onFpEventMouseOver,l.onclick=this._onViewClick),l.style.setProperty("width",`${n.events.width}px`),l.style.setProperty("left",`${i}px`),a.appendChild(l),l})),this._setVariables(a)}_createEventsAndMarkers(){const{timelinebar:t}=this._localState,{events:e}=this._options,i=.01*e.clusterThresh*t.width;this._events.forEach(((t,e)=>{const s=this._events[e-1];let n=!0;if(s){this._calcWidthBtwnTimes(s.end,t.start)<i&&(n=!1)}this._addToCluster(t,n),this._createEventElement(t)}))}_createEventElement(t){const{classNames:e}=this._options,{eventContainer:i}=this._children,s=document.createElement("div");s.className=e.eventStatic;const n=this._calcMidpointX(t.start,t.end);s.style.setProperty("left",`${n}px`),i.appendChild(s)}_addToCluster(t,e=!0){const{isTouch:i}=this._localState,{classNames:s}=this._options,{markerContainer:n}=this._children,o=this._getLastCluster(),a=this._calcEventClusterMax(),r=o&&o.events.length===a;if(e||!o||r){const e=document.createElement("div");e.className=s.clusterMarker,i&&(e.ontouchstart=this._onMarkerTouch),this._app.canHover&&(e.onmouseenter=this._onMarkerMouseEnterDebounced,e.onmouseleave=this._onMarkerMouseLeaveDebounced,e.onmousemove=this._onMarkerMouseMove,e.onclick=this._onViewClick),n.appendChild(e),this._markers.push({cluster:!0,element:e,events:[t],fpEventElements:[],fpEventXs:[]})}else o.events.push(t)}_createClusterEventLine(){if(this._clusterEventLine)return;const{classNames:t}=this._options;this._clusterEventLine=document.createElement("div"),this._clusterEventLine.className=t.clusterEventLine,this._children.markerContainer.appendChild(this._clusterEventLine)}_populate(){if(!this._events.length)return;this._destroy(),this._createEventsAndMarkers(),this._setMarkerPositions();const t=this._markers.some((t=>t.cluster));this.setLocalState({focusPanel:{enabled:t}}),t&&(this._createClusterEventLine(),this._addFpTooltips()),this._setVariables(this._children.markerContainer)}_destroy(){this._depopulateFocusPanel();const{markerContainer:t,eventContainer:e}=this._children;for(;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)e.removeChild(e.firstChild);if(this._markers.length)for(const t of this._markers)t.element.remove(),t.fpEventElements&&t.fpEventElements.filter((t=>(t.remove(),!1)));this._markers=[]}_setClickedOnce(t,e=!0){const{doubleTimeout:i}=this._options;this.setLocalState({[t]:{clickedOnce:e}}),e&&setTimeout((()=>{this.setLocalState({[t]:{clickedOnce:!1}})}),i)}_onTimelineMouseLeave(t){this._hideTooltip(!1);const{focusPanel:e}=this._localState;this.setState({targetLineVisibleClass:"hidden",targetDateVisibleClass:e.active?"":"hidden",rangeDatesVisibleClass:e.active?"hidden":""}),this.setLocalState({timelinebar:{active:!1}})}_onTimelineMouseMove(t){if(this._hideTooltip(),this._onMarkerMouseEnterDebounced.cancel(),this._resizeTimeout)return;const{timelinebar:e}=this._localState,{start:i,end:s}=this._options,n=t.clientX-e.left,o=this._calcTimefromTimelineX(n),a=o.isBefore(i)||o.isAfter(s);this.setState({targetLineVisibleClass:a?"hidden":"",targetDateVisibleClass:a?"hidden":"",targetDateColorClass:"yellow",rangeDatesVisibleClass:"hidden"}),this.setLocalState({timelinebar:{active:!0},focusPanel:{active:!1}}),a||(this._setDateAndPosition(o,n),t.target===this._children.timelinebar&&this._showToolTipDebounced())}_onTimelineClick(t){if(t.target!==this._children.timelinebar)return;const{timelinebar:e}=this._localState,i=t.clientX-e.left,s=this._calcTimefromTimelineX(i);this.goToTime(s),this.setLocalState({time:s.valueOf()})}_onMarkerMouseEnter(t){const{focusPanel:e,animMarkerIndex:i}=this._localState,s=this._markers.find((e=>e.element===t.target)),n=this._markers.indexOf(s),a=this._markers[i];if(!e.active||t.force)if(this._hideTooltip(),this.setState({targetLineVisibleClass:"hidden",targetDateVisibleClass:"hidden",targetDateColorClass:"white",fpVisibleClass:"",rangeDatesVisibleClass:"hidden",fpTargetLineVisibleClass:"hidden",fpViewingLineVisibleClass:"hidden"}),o.AppUtils.isMobilePortrait()&&this._settings?.hide(),this.setLocalState({activeMarkerIndex:n,animMarkerIndex:s.cluster?n:this._localState.animMarkerIndex,...!s.cluster&&{activeEventId:s.events[0].id}}),this._markers.forEach((t=>this._setActive(t.element,t===s))),s.cluster){if(a===s)return;const{timelinebar:t}=this._localState,e=t.viewingLineX<s.leftX;this._setFpViewingLineStart(e),this._setFocusPanelPos(s),this._setFpAnimation(a,s)}else{const t=s.events[0];this._setEventName(t.title),this._setDateAndPosition(t.start,s.leftX)}}_onMarkerMouseLeave(){this._resetStates()}_onMarkerMouseMove(t){t.stopPropagation(),this._onFpMouseLeaveDebounced.cancel(),this._onMarkerMouseLeaveDebounced.cancel();const{timelinebar:e,activeEventId:i,activeMarkerIndex:s,animMarkerIndex:n}=this._localState,o=this._markers.find((e=>e.element===t.target)),a=t.clientX-e.left,r=o.cluster?this._getNearestIndex(a,o.eventXs):0,l=o.events[r],c=i===l.id,h=s!==n;h&&this._setDateAndPosition(l.start,o.leftX),c||h||(o.cluster?this._setClusterEvent(o,r):(this._setEventName(l.title),this._setDateAndPosition(l.start,o.leftX)),this.setLocalState({focusPanel:{active:!1}}))}_onFpMouseEnter(){this._onMarkerMouseLeaveDebounced.cancel(),this._onFpMouseLeaveDebounced.cancel(),this.setLocalState({focusPanel:{active:!0}})}_onFpMouseLeave(t){"hidden"!==this._state.fpVisibleClass&&this._resetStates()}_onFpEventMouseOver(t){this._hideTooltip();const[e,i]=this._getMarkerAndIndexFromFocusEl(t.target);e.events[i];this._setClusterEvent(e,i)}_onFpTicksMouseEnter(){const{activeMarkerIndex:t,title:e}=this._localState,i=this._markers[t];i&&this._setFpElementActive(i),this._setEventName(`Between ${e} events`)}_onFpTicksMouseMove(t){this._hideTooltip();const{focusPanel:e,activeMarkerIndex:i}=this._localState;if(e.animating||-1===i)return;this.setState({fpTargetLineVisibleClass:"",targetDateVisibleClass:"hidden",targetDateColorClass:"yellow",clusterLineColorClass:"yellow"}),this.setLocalState({focusPanel:{touchLineX:t.offsetX}});const s=this._calcTimeFromFpX(t.offsetX),n=this._calcXfromTime(s);this._setDateAndPosition(s,n),this._setClusterLineTransform(n),this._children.focusPanel.style.setProperty("--fp-dateline-X",`${t.offsetX}px`),this._localState.activeEventId||this._showToolTipDebounced("focusPanel")}_onFpTicksMouseLeave(){this._hideTooltip()}_onFpTicksClick(){this._hideTooltip();const{focusPanel:t,activeMarkerIndex:e}=this._localState;if(t.animating||-1===e)return;const i=this._calcTimeFromFpX(t.touchLineX);this.goToTime(i),this.setLocalState({time:i.valueOf()})}_onViewClick(t){this._hideTooltip();const{activeEventId:e}=this._localState,{fpTargetLineVisibleClass:i}=this._state,s="string"==typeof t?t:e;null!==s?this.goToEvent(s):""===i&&this._onDateTouchEnd(),this.setLocalState({time:null})}_onFpWheel(t){t.preventDefault();const{focusPanel:e,animMarkerIndex:i}=this._localState,s=.5*e.contentWidth,n=e.wheelX-t.deltaX;if(this._hideTooltip(),e.animating)return;if(Math.abs(n)>s){const t=n>0?this._markers[i-1]:this._markers[i+1];return void this._onMarkerMouseEnter({target:t.element,force:!0})}this.setLocalState({focusPanel:{wheelX:n}});const o={duration:200,fill:"forwards",easing:"ease-out"},a=this._createAnimation(this._children.fpContent,{transform:`translateX(${n}px) rotate(0.01deg)`},o),r=this._createAnimation(this._children.fpTicksContainer,{transform:`translateX(${n}px)`},o);a.play(),r.play()}_onFpTouchStart(t){this._hideTooltip();const e=t.touches[0].clientX;this.setLocalState({focusPanel:{touchX:e}})}_onFpTouchEnd(){this.setLocalState({focusPanel:{clickEnabled:!0}})}_onFpTouchMove(t){const{timelinebar:e,focusPanel:i,animMarkerIndex:s}=this._localState;if(i.animating)return;const n=t.touches[0].clientX,o=n-i.touchX,a=i.touchDeltaX+o,r={touchX:n,touchDeltaX:a};i.clickEnabled&&Math.abs(o)>2&&(r.clickEnabled=!1),this.setLocalState({focusPanel:r});const l=.7*this._localState.focusPanel.contentWidth;if(Math.abs(a)>l){const t=a>0,i=t?this._markers[s-1]:this._markers[s+1];this._onMarkerTouch({target:i.element,touches:[{clientX:t?e.width:0}]})}const c={duration:100,fill:"forwards",easing:"ease-out"},h=this._createAnimation(this._children.fpContent,{transform:`translateX(${a}px) rotate(0.01deg)`},c),u=this._createAnimation(this._children.fpTicksContainer,{transform:`translateX(${a}px)`},c);h.play(),u.play()}_onFpTicksTouchStart(t){const{timelinebar:e,focusPanel:i,activeMarkerIndex:s,title:n}=this._localState,{left:o,arrowWidth:a,touchDeltaX:r,totalWidth:l,clickedOnce:c,touchLineX:h}=i,{doubleThreshold:u}=this._options,d=t.touches[0].clientX-o-a-r-e.left;if(t.preventDefault(),t.stopPropagation(),i.animating||-1===s)return;if(this._hideTooltip(),this.setLocalState({focusPanel:{touchLineX:d}}),c){if(Math.abs(h-d)<u)return this._setClickedOnce("focusPanel",!1),void this.setLocalState({focusPanel:{doubleClick:!0}})}else this._setClickedOnce("focusPanel");this.setState({fpTargetLineVisibleClass:"",targetDateVisibleClass:"fp",targetDateColorClass:"yellow",clusterLineColorClass:"yellow",clusterLineVisibleClass:""}),this._setEventName(`Between ${n} events`);const p=this._markers[s];this._setFpElementActive(p);const _=this._calcTimeFromFpX(d),g=o+.5*l,m=this._calcXfromTime(_);this._setDateAndPosition(_,g),this._setClusterLineTransform(m),this._children.focusPanel.style.setProperty("--fp-dateline-X",`${d}px`)}_onFpTicksTouchMove(t){const{timelinebar:e,focusPanel:i,activeMarkerIndex:s}=this._localState,{left:n,arrowWidth:o,touchDeltaX:a,totalWidth:r}=i,l=t.touches[0].clientX-n-o-a-e.left;if(t.stopPropagation(),i.animating||-1===s)return;this.setLocalState({focusPanel:{touchLineX:l}}),this.setState({fpTargetLineVisibleClass:"",targetDateVisibleClass:"fp",targetDateColorClass:"yellow",clusterLineColorClass:"yellow",clusterLineVisibleClass:""});const c=this._calcTimeFromFpX(l),h=n+.5*r,u=this._calcXfromTime(c);this._setDateAndPosition(c,h),this._setClusterLineTransform(u),this._children.focusPanel.style.setProperty("--fp-dateline-X",`${l}px`)}_onFpTicksTouchEnd(t){t.stopPropagation(),this.setLocalState({focusPanel:{animating:!1}});const{focusPanel:e}=this._localState;e.doubleClick&&(this._onDateTouchEnd(),this.setLocalState({focusPanel:{doubleClick:!1}}))}_onMarkerTouch(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();const{timelinebar:e,animMarkerIndex:i,activeMarkerIndex:s}=this._localState,n=this._markers.find((e=>e.element===t.target)),a=this._markers.indexOf(n),r=this._markers[i];if(this._hideTooltip(),s!==a)if(this._markers.forEach((t=>this._setActive(t.element,t===n))),this.setState({targetLineVisibleClass:"hidden",targetDateVisibleClass:"hidden",targetDateColorClass:"white",fpTargetLineVisibleClass:"hidden",fpVisibleClass:"",rangeDatesVisibleClass:"hidden",fpViewingLineVisibleClass:"hidden",clusterLineVisibleClass:n.cluster?"":"hidden"}),o.AppUtils.isMobilePortrait()&&this._settings?.hide(),this.setLocalState({focusPanel:{active:Boolean(n.cluster)},activeMarkerIndex:a,animMarkerIndex:n.cluster?a:this._localState.animMarkerIndex}),n.cluster){const i=t.touches[0].clientX,s=this._getNearestIndex(i,n.eventXs),o=e.viewingLineX<n.leftX;this._setFpViewingLineStart(o),this._setFocusPanelPos(n),this._setFpAnimation(r,n,s)}else{const t=n.events[0];this._setEventNameDebounced.cancel(),this._setEventNameDebounced(t.title),this._setDateAndPosition(t.start,n.leftX),this._showToolTipDebounced()}else n.cluster||(this._onViewClick(n.events[0].id),this._resetStates())}_onDateTouchStart(t){t.preventDefault()}_onDateTouchEnd(){const{timelinebar:t,focusPanel:e}=this._localState;if(e.animating)return;const i=e.active?this._calcTimeFromFpX(e.touchLineX):this._calcTimefromTimelineX(t.touchLineX);this.goToTime(i),this.setLocalState({time:i.valueOf()})}_onFpEventTouch(t){t.preventDefault();const{focusPanel:e,activeEventId:i}=this._localState;if(!e.clickEnabled)return;const[s,n]=this._getMarkerAndIndexFromFocusEl(t.target),o=s.events[n];this._hideTooltip(),i!==o.id?this._setClusterEvent(s,n):this._onViewClick()}_onFpArrowClick(t){t.preventDefault();const e="left"===t.target.getAttribute("direction"),{timelinebar:i,activeMarkerIndex:s,activeEventId:n,focusPanel:o}=this._localState,{fpTargetLineVisibleClass:a}=this._state,r=this._markers[s];if(void 0===r)return;const l=r.events.findIndex((t=>t.id===n)),c=""===a?this._calcTimeFromFpX(o.touchLineX):this._localState.time;this._hideTooltip();const h=l>-1?e?l-1:l+1:this._getNextEventIndexByTime(c,r,e);if(r.events[h])this._setClusterEvent(r,h);else{const t=e?this._markers[s-1]:this._markers[s+1];t?this._onMarkerTouch({target:t.element,touches:[{clientX:e?i.width:0}]}):this._resetStates()}}_onTimelineTouchStart(t){if(t.target!==this._children.timelinebar)return;const{timelinebar:e}=this._localState,{clickedOnce:i,touchLineX:s}=e,{doubleThreshold:n}=this._options,o=t.touches[0].clientX-e.left;if(t.preventDefault(),this._hideTooltip(),this.setLocalState({timelinebar:{touchLineX:o}}),i){if(Math.abs(s-o)<n)return this._setClickedOnce("timelinebar",!1),void this.setLocalState({timelinebar:{doubleClick:!0}})}else this._setClickedOnce("timelinebar");this.setLocalState({timelinebar:{active:!0},focusPanel:{active:!1}}),this._resetStates({hideDate:!1}),this.setState({targetLineVisibleClass:"",targetDateColorClass:"yellow",rangeDatesVisibleClass:"hidden"});const a=o/e.width,r=this._options.min+this._options.range*a;this._setDateAndPosition(r,o)}_onTimelineTouchMove(t){const{start:e,end:i}=this._options,{timelinebar:s,activeMarkerIndex:n}=this._localState,o=t.touches[0].clientX-s.left,a=o/s.width,r=this._options.min+this._options.range*a,l=o<0||o>s.width||r<e.valueOf()||r>i.valueOf();n>-1||l||(this.setLocalState({timelinebar:{touchLineX:o}}),this.setState({targetLineVisibleClass:"",targetDateVisibleClass:""}),this._setDateAndPosition(r,o))}_onTimelineTouchEnd(){const{activeEventId:t,activeMarkerIndex:e}=this._localState;if(null!==t||e>-1)return;const{timelinebar:i}=this._localState;if(i.doubleClick)return this._onDateTouchEnd(),void this.setLocalState({timelinebar:{doubleClick:!1}});this.setState({targetLineVisibleClass:"hidden-slow",targetDateVisibleClass:"hidden-slow",rangeDatesVisibleClass:"fadein-slow"}),clearTimeout(this._localState.timelinebar.fadeTimeout);const s=setTimeout((()=>{if(this.setState&&this.setLocalState){const{targetLineVisibleClass:t,targetDateVisibleClass:e}=this._state;this.setState({targetLineVisibleClass:"hidden-slow"===t?"hidden":t,targetDateVisibleClass:"hidden-slow"===e?"hidden":e}),this.setLocalState({timelinebar:{doubleClick:!1},focusPanel:{doubleClick:!1}})}}),this._options.tapFadeDelay);this.setLocalState({timelinebar:{active:!1,fadeTimeout:s}})}_onOutsideTouch(t){this._element.contains(t.target)||this._resetStates()}_setResizeTimeout(t=1e3){clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this._resizeDebounced,t)}_onResize(){this._resizeTimeout=null,this._resetStates();const{width:t,left:e}=this._children.timelinebar.getBoundingClientRect(),{isTouch:i}=this._app;this.setLocalState({isTouch:i,focusPanel:{calcWidths:!0},timelinebar:{width:t,left:e}}),this._populate()}resize(){this._resizeDebounced()}_calcEventClusterMax(){const{events:t}=this._options,{timelinebar:e}=this._localState,i=Math.floor(t.clusterCoeff/e.width);return Math.max(Math.min(i,t.clusterMax),t.clusterMin)}_calcMidpointX(t,e,i=this._options.min,s=this._options.range,n=this._localState.timelinebar.width){const o=.5*(t+e);return this._calcXfromTime(o,i,s,n)}_calcWidthBtwnTimes(t,e,i=this._options.range,s=this._localState.timelinebar.width,n=1,o=this._options.range,a=!0){let r=n;const l=(e-t)/i;return l&&!isNaN(l)?(r=Math.max(l*s,r),r=Math.min(r,o),a?Math.round(r):r):null}_calcXfromTime(t,e=this._options.min,i=this._options.range,s=this._localState.timelinebar.width,n=2){const o=s*((t-e)/i);if(!isNaN(o)){const t=u(o,n);return"string"==typeof t?parseFloat(t.replace(/,/g,"")):null}return null}_calcTimefromTimelineX(t){const{timelinebar:e}=this._localState,i=t/e.width,s=this._options.min+i*this._options.range;return n()(s)}_calcTimeFromFpX(t){const{focusPanel:e,activeMarkerIndex:i}=this._localState,{focusPanel:s}=this._options,o=.01*s.padding*e.contentWidth,a=(t-o)/(e.contentWidth-2*o),r=this._markers[i],l=r.min+a*r.timeRange;return n()(l)}_calcRelativeProgress(t,e,i){return t+i*(e-t)}_calcFpEventOffset(t,e){const{leftOffset:i}=this._options.focusPanel.touch;return i-t.fpEventXs[e]}_nestedPropsChanged(t,e){for(const i in t){if(null!==t[i]&&null!==e[i]&&typeof t[i]!=typeof e[i])return console.error("Mismatched state types in object",t),!1;if(null!==t[i]&&t[i].constructor===Object){if(this._nestedPropsChanged(t[i],e[i]))return!0}else if(t[i]!==e[i])return!0}return!1}_showToolTip(t="timelinebar"){const e=this._tooltips[t],{isTouch:i,activeMarkerIndex:s,timelinebar:n}=this._localState;if(this._localState[t].displayedTip||!e)return;const o=this._markers[s];if(i&&o&&!o.cluster){const t=.5*n.width,i=o.leftX<t?"right":"left",s=({placement:e,_:i,popper:s})=>{if("top"===e){const e=.5*s.width;return[Math.min(Math.max(o.leftX,e),n.width-e)-t,30]}return[]},a=({popper:e,_:s,placement:n})=>{if("top"===n){const s=.3+.4*Math.abs((o.leftX-t)/t);return{[i]:e.width*s}}return 0};this._setTooltipModifiers(e,s,a)}e.show();const{minTime:a}=this._options.tooltips;this.setLocalState({toolTipTimeout:setTimeout((()=>{this.setLocalState({[t]:{displayedTip:!0}})}),a)})}_setTooltipModifiers(t,e,i){const s=[];"function"==typeof e&&s.push({name:"offset",options:{offset:e}}),"function"==typeof i&&s.push({name:"arrow",options:{padding:i}}),t.setProps({popperOptions:{modifiers:s}})}_resetTooltip(){this._showToolTipDebounced.cancel(),clearTimeout(this._localState.toolTipTimeout)}_hideTooltip(t=!0){t&&this._resetTooltip(),Object.values(this._tooltips).forEach((t=>t.hide()))}_resetStates({hideFocusPanel:t=!0,hideClusterLine:e=!0,hideDate:i=!0}={}){const{timelinebar:s}=this._localState;this._hideTooltip(!1),o.AppUtils.isMobilePortrait()&&this._app.getComponent("collapsibleMenu")?.getState("isVisible")&&(t?this._settings?.show():this._settings?.hide()),this.setState({fpVisibleClass:t?"hidden":"",rangeDatesVisibleClass:t?"":"hidden",clusterLineVisibleClass:e?"hidden":"",targetDateVisibleClass:i&&!s.active?"hidden":""}),this.setLocalState({activeMarkerIndex:-1,animMarkerIndex:-1,activeEventId:null,focusPanel:{active:!1,wheelX:0}}),this._markers.forEach((t=>this._setActive(t.element,!1)))}_setViewingLineX(t){const{timelinebar:e,updateViewingLine:i,focusPanel:s}=this._localState,n={viewingLineVisibleClass:"hidden",fpViewingLineVisibleClass:"hidden"},o={updateViewingLine:!1},a=this._calcXfromTime(t),r=this._getFpViewingLineX(t);if(a){const t=e.width&&a<=e.width;n.viewingLineVisibleClass=t?"":"hidden",(a!==e.viewingLineX||i)&&(this._children.timelinebar.style.setProperty("--viewingline-X",`${a}px`),o.timelinebar={viewingLineX:a})}r&&(n.fpViewingLineVisibleClass="",(r!==s.viewingLineX||i)&&(this._children.focusPanel.style.setProperty("--fp-viewingline-X",`${r}px`),o.focusPanel={viewingLineX:r})),this.setState(n),this.setLocalState(o)}_setFpViewingLineStart(t){const{focusPanel:e}=this._localState,i=e.width||1e3,s=t?-i:2*i;this._children.focusPanel.style.setProperty("--fp-viewingline-X",`${s}px`)}_setClusterEvent(t,e){const i=t.events[e],s=t.eventXs[e],n=t.fpEventElements[e];this._setEventName(i.title),this._setDateAndPosition(i.start,s),this._setClusterLineTransform(s),this.setState({clusterLineVisibleClass:"",clusterLineColorClass:"white",targetDateColorClass:"white",targetDateVisibleClass:"hidden",fpTargetLineVisibleClass:"hidden"}),this._setFpElementActive(t,n)}_setFpAnimation(t,e,i){const s=t,n=this._markers.indexOf(e),{isTouch:o}=this._localState;if(s){const s=700,a=2e3,r=t.leftX<e.leftX,l=this._getNormDistance(t,e),c=this._calcRelativeProgress(s,a,l),h=.39*c,u={focusPanel:{animating:!0}};o||(this.setState({clusterLineVisibleClass:"hidden"}),u.activeMarkerIndex=-1),this.setLocalState(u);const d=()=>{t.fpEventElements=[],this._depopulateFocusPanel(t),this._populateFocusPanel(e);const s={activeMarkerIndex:n,animMarkerIndex:n,updateViewingLine:!0,[o?"touchDeltaX":"wheelX"]:0,focusPanel:{active:!0}};void 0!==i&&this._setClusterEvent(e,i),this.setLocalState(s);const a=this._getFpEventsEnterAnim(h,r,0);a.onfinish=()=>{this.setLocalState({focusPanel:{animating:!1}})},a.play()},p=this._getFpEventsExitAnim(h,r);p.onfinish=d,p.play();const _=this._getFpTickAnim(l,c,r),g=this._getFpLineAnim(c);_.play(),g.play()}else{const{animation:{keyframes:t,timings:s}}=this._options;this._depopulateFocusPanel(),this._populateFocusPanel(e);const a={activeMarkerIndex:n,animMarkerIndex:n,updateViewingLine:!0,[o?"touchDeltaX":"wheelX"]:0,focusPanel:{active:!0}},r=[...t.fpEvents.zoom];void 0!==i&&this._setClusterEvent(e,i),this.setLocalState(a);this._createAnimation(this._children.fpContent,r,s.zoom).play();const l=this._createAnimation(this._children.fpTicks,t.fpTicks.zoom,s.zoom),c=this._createAnimation(this._children.fpLine,t.fpLine,s.zoom);l.play(),c.play()}}_getFpViewingLineX(t){const{activeMarkerIndex:e,focusPanel:i}=this._localState;if(-1!==e){const{focusPanel:s}=this._options,{min:n,timeRange:o}=this._markers[e],a=.01*s.padding*i.contentWidth,r=i.contentWidth-2*a,l=this._calcXfromTime(t,n,o,r,0);if(null!==l){const t=l+Math.round(a);if(t>-r&&t<2*r)return t}}return null}_getNearestEvent(t,e){if(t.cluster){const i=this._getNearestIndex(e,t.eventXs);return t.events[i]}return t.events[0]}_getNextEventIndexByTime(t=this._localState.time,e,i){let s=-1;return e.events.forEach(((e,i)=>{t>e.start.valueOf()&&(s=i)})),i?s:s+1}_setDateAndPosition(t,e){const{timelinebar:i}=this._children,s=("number"==typeof t?n()(t):t).format("MMM DD, YYYY");i.style.setProperty("--formatted-date",`'${s}'`),this.setState({fpEventTime:s}),e&&i.style.setProperty("--dateline-X",`${e}px`)}_setEventName(t){const{activeMarkerIndex:e,timelinebar:i}=this._localState;let s=50;const n=this._markers[e];n&&!n.cluster&&(s=n.leftX/i.width*100),this._element.style.setProperty("--event-offset-x",`-${s}%`),this._element.style.setProperty("--event-name",`'${t}'`),this.setState({fpEventName:t})}_setActive(t,e){e?t.classList.add("active"):t.classList.remove("active")}_getNormDistance(t,e){const{timelinebar:i}=this._localState;return Math.abs(e.leftX-t.leftX)/i.width}_getFpEventsEnterAnim(t,e,i){const s={duration:t,fill:"forwards",easing:"cubic-bezier(0, 1, 0, 1)"},n=e?"":"-",o=[{transform:`translateX(${n}100%) scaleY(0)`},{transform:`translateX(${n}50%) scaleY(0.1)`},{transform:`translateX(${i}px) scaleY(1) rotate(0.01deg)`}];return this._createAnimation(this._children.fpContent,o,s)}_getFpEventsExitAnim(t,e){const i={duration:t,easing:"cubic-bezier(.2, 0, 0, 1)"},s=e?"-":"",n=[{transform:`translateX(${s}50%) scaleY(0.1)`,offset:.5},{transform:`translateX(${s}100%) scaleY(0)`}];return this._createAnimation(this._children.fpContent,n,i)}_getFpTickAnim(t,e,i){const s={duration:e,fill:"forwards",easing:"cubic-bezier(0, 1, 0, 1)"},n=this._calcRelativeProgress(50,150,t),o=[{transform:"translateX(0%)"},{transform:`translateX(${i?"-":""}${n}%)`,offset:.49},{transform:`translateX(${i?"":"-"}${n}%)`,offset:.5},{transform:"translateX(0%)"}];return this._createAnimation(this._children.fpTicksContainer,o,s)}_getFpLineAnim(t){const e={duration:t,fill:"forwards",easing:"cubic-bezier(0, 1, 0, 1)"};return this._createAnimation(this._children.fpLine,[{opacity:0},{opacity:.6},{opacity:0}],e)}_setFpEventScaledClass(t){t.fpEventElements.forEach((t=>t.classList.add("scaled"))),requestAnimationFrame((()=>t.fpEventElements.forEach((t=>t.classList.remove("scaled")))))}_setClusterLineTransform(t){this._clusterEventLine.style.setProperty("transform",`translateX(calc(${t}px - 50%))`)}_getMarkerAndIndexFromFocusEl(t){for(const e of this._markers)if(e.fpEventElements){const i=e.fpEventElements.indexOf(t);if(i>-1)return[e,i]}return null}_setFpElementActive(t,e){t.fpEventElements.forEach((t=>t.classList.toggle("active",t===e)));const i=t.fpEventElements.indexOf(e),s=i>-1?t.events[i].id:null;this.setLocalState({activeEventId:s})}_setFocusPanelPos({leftX:t,widthPx:e}){const{focusPanel:i,fpMask:s}=this._children;if(this._localState.focusPanel.calcWidths){const t=i.getBoundingClientRect().width,e=s.getBoundingClientRect().width,n=.5*(t-e);this._setNumOfTicks(e),this.setLocalState({focusPanel:{calcWidths:!1,totalWidth:t,contentWidth:e,arrowWidth:n}}),i.style.setProperty("--fp-midpoint",.5*t+"px")}const{timelinebar:n,focusPanel:o}=this._localState,a=.5*o.totalWidth,r=n.width-o.totalWidth,l=Math.min(Math.max(t-a,0),r),c=t-l,h=e/o.contentWidth;this.setLocalState({focusPanel:{left:l}}),i.style.setProperty("--focus-X",`${l}px`),i.style.setProperty("--fpMarker-X",`${c}px`),i.style.setProperty("--fpMarker-scaleX",`${h}`)}_setNumOfTicks(t){const{tickChar:e,tickMult:i}=this._options.focusPanel,s=Math.round(t*i);this._children.fpTicks.innerText=e.repeat(s)}_getLastCluster(){for(let t=this._markers.length-1;t>=0;t--){const e=this._markers[t];if(e.cluster)return e}return null}_setMarkerPositions(){const{events:t,range:e}=this._options,i=.01*t.clusterThresh*2*e,s=.5*i;this._markers.forEach(((t,e)=>{const n=t.cluster?3:2,o=t.events[0],a=t.events[t.events.length-1];t.widthPx=Math.max(this._calcWidthBtwnTimes(o.start,a.end),n),t.leftX=this._calcMidpointX(o.start,a.end),t.min=Math.min(...t.events.map((t=>t.start))),t.max=Math.max(...t.events.map((t=>t.end))),t.timeRange=t.max-t.min;1===t.events.length&&t.timeRange<i&&(0===e?t.max=o.end.clone().add(i,"milliseconds"):e===this._markers.length-1?t.min=o.start.clone().subtract(i,"milliseconds"):(t.min=o.start.clone().subtract(s,"milliseconds"),t.max=o.end.clone().add(s,"milliseconds")),t.timeRange=t.max-t.min),t.cluster&&(t.eventXs=t.events.map((t=>this._calcMidpointX(t.start,t.end)))),t.element.style.setProperty("width",`${t.widthPx}px`),t.element.style.setProperty("transform",`translateX(calc(${t.leftX}px - 50%))`)}))}_getNearestIndex(t,e){const i=e.reduce(((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e));return e.indexOf(i)}setOptions(t,e=!1){const i=e?this.defaultOptions:this._options;this._options=l(i,t)}setLocalState(t){const e=this._localState;this._nestedPropsChanged(t,e)&&(this._localState=l(this._localState,t))}_setEvents(t){this._events=[...t],this._events.forEach((t=>{t.start=n()(t.start),t.end=t.end?n()(t.end):t.start.clone().add(1,"hours")})),this._events.sort(((t,e)=>t.start>e.start))}_buildRangeOptions(t){const{start:e,end:i}=t,s={start:e,end:i},n=(s.end-s.start)*this._options.marginPercent*.01;s.min=s.start.clone().subtract(n,"milliseconds"),s.max=s.end.clone().add(n,"milliseconds"),s.range=s.max-s.min,this.setOptions(s)}_setStartEndDates(){const{start:t,end:e}=this._options,{rangeDateStart:i,rangeDateEnd:s}=this._children;i.setAttribute("datetime",t.toISOString()),i.innerText=t.format("MMM DD, YYYY"),s.setAttribute("datetime",e.toISOString()),s.innerText=e.format("MMM DD, YYYY")}_calcCoverage(t,{start:e,end:i}){let{min:s,max:o}=this._app.getManager("time").getDefaultLimits();const a=this._app.getManager("scene").getCoverage(t);return null!==a.min&&(s=n().max(s,a.min)),null!==a.max&&(o=n().min(o,a.max)),e&&(s=n()(e)),i&&(o=n()(i)),{start:s,end:o}}setTarget({id:t,title:e,dates:i,orderedEvents:s}){const n=t!==this._localState.target;if(t&&s&&(this.setTime(),n)){this.setLocalState({target:t,title:e}),this._setEvents(s);const n=this._calcCoverage(t,i);this._buildRangeOptions(n),this._setStartEndDates()}}show(){super.show(),this._setResizeTimeout(800)}__disable(){clearTimeout(this._resizeTimeout),super.__disable()}goToTime(t){const e=this.routeManager.currentRoute.url,i=e.indexOf("events"),s=i>-1?e.slice(0,i):e,n=this._app.getManager("time").getTimeUrl(t);this.routeManager.navigate({time:n},s)}goToEvent(t){const e=this.routeManager.currentRoute.url,i=e.lastIndexOf("events");let s=`${e}${e.endsWith("/")?"":"/"}`;-1===i?s+=`events/${t}`:(s.endsWith("events/")||(s=s.slice(0,i+7)),s+=t),this.routeManager.navigate(s)}setTime(){const t=this.routeManager.query.time;t&&this.setLocalState({time:n()(t).valueOf()})}update(t){this._state.isVisible&&this.isEnabled()&&this._setViewingLineXThrottled(t)}}EventsTimeline.html=r()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<timeline class="events-timeline small semi {{isVisibleClass}}">\n\t<div \n\t\tclass="focus-container {{fpVisibleClass}}" \n\t\tkey="focusPanel"\n\t\tonmouseenter="_onFpMouseEnter"\n\t\tonmouseleave="_onFpMouseLeaveDebounced"\n\t\tonwheel="_onFpWheel"\n\t>\n\t\t<button class="fp-arrow left clickable" direction="left" onclick="_onFpArrowClick"></button>\n\t\t<div \n\t\t\tclass="fp-mask"\n\t\t\tkey="fpMask"\n\t\t\tontouchstart="_onFpTouchStart"\n\t\t\tontouchmove="_onFpTouchMoveThrottled"\n\t\t\tontouchend="_onFpTouchEnd"\n\t\t>\n\t\t\t<div class="fp-details {{targetDateColorClass}}">\n\t\t\t\t<h2>{{fpEventName}}</h2>\n\t\t\t\t<time>{{fpEventTime}}</time>\n\t\t\t\t<button class="clickable" onclick="_onViewClick"><span class="icon watch">view</span></button>\n\t\t\t</div>\n\t\t\t<div class="focus-ticks-container" key="fpTicksContainer">\n\t\t\t\t<div class="focus-line" key="fpLine"></div>\n\t\t\t\t<span \n\t\t\t\t\tclass="focus-ticks"\n\t\t\t\t\tkey="fpTicks"\n\t\t\t\t\tontouchstart="_onFpTicksTouchStart"\n\t\t\t\t\tontouchmove="_onFpTicksTouchMove"\n\t\t\t\t\tontouchend="_onFpTicksTouchEnd"\n\t\t\t\t\tonmouseenter="_onFpTicksMouseEnter"\n\t\t\t\t\tonmousemove="_onFpTicksMouseMove"\n\t\t\t\t\tonmouseleave="_onFpTicksMouseLeave"\n\t\t\t\t\tonclick="_onFpTicksClick"\n\t\t\t\t>\n\t\t\t\t</span>\n\t\t\t\t<div class="focus-target-line {{fpTargetLineVisibleClass}}"></div>\n\t\t\t\t<div class="focus-viewing-line {{fpViewingLineVisibleClass}}"></div>\n\t\t\t</div>\n\t\t\t<div class="focus-content"  key="fpContent"></div>\n\t\t</div>\n\t\t<button class="fp-arrow right clickable" direction="right" onclick="_onFpArrowClick"></button>\n\t</div>\n\t<div \n\t\tclass="bar" \n\t\tkey="timelinebar"\n\t\tontouchstart="_onTimelineTouchStart"\n\t\tontouchmove="_onTimelineTouchMove"\n\t\tontouchend="_onTimelineTouchEnd"\n\t\tonmousemove="_onTimelineMouseMove"\n\t\tonmouseleave="_onTimelineMouseLeaveDebounced"\n\t\tonclick="_onTimelineClick"\n\t>\n\t\t<div class="event-container" key="eventContainer"></div>\n\t\t<div class="marker-container" key="markerContainer"></div>\n\t\t<div class="viewing-line {{viewingLineVisibleClass}}"></div>\n\t\t<div class="target-line {{targetLineVisibleClass}}"></div>\n\t\t<span class="target-date {{targetDateVisibleClass}} {{targetDateColorClass}}" ontouchstart="_onDateTouchStart" ontouchend="_onDateTouchEnd"></span>\n\t</div>\n\t<time class="range-date {{rangeDatesVisibleClass}} start-date" key="rangeDateStart"></time>\n\t<time class="range-date {{rangeDatesVisibleClass}} end-date" key="rangeDateEnd"></time>\n</timeline>'},function(t,e,i){"use strict";i.r(e),i.d(e,{CollapsibleMenu:function(){return CollapsibleMenu}});var s=i(1),n=i(854),o=(i(972),i(973)),a=i.n(o);i(974);class CollapsibleMenu extends s.BaseComponent{constructor(t){super(t,null,{numMenusClass:"",expandedMenusClass:""}),this._menuItems=[],this._expandedItems=[],this._maxHeight=this._getMaxHeight(),this._availableHeight=this._calcAvailableHeight(),this._resizeObserver=new ResizeObserver((t=>{t.forEach((()=>{this._maxHeight=this._getMaxHeight(),this._availableHeight=this._calcAvailableHeight();this._availableHeight<0&&this._collapseLastItem()}))})),this.bindFunctions(["onItemToggle","onItemVisibleChange"])}init(){super.init(),this._resizeObserver.observe(this._element)}_getMaxHeight(){const t=window.innerHeight;return t>600?.4*t:.5*t}_calcUsedHeight(){let t=0;return this._expandedItems.forEach((({_config:e})=>{const{height:i}=e;t+=i.max})),t}_calcAvailableHeight(){const t=this._calcUsedHeight();return this._maxHeight-t}_itemHasSpace({height:t}){return this._availableHeight>t.max}_addExpandedItem(t){this._expandedItems.push(t),this._availableHeight=this._calcAvailableHeight()}_removeExpandedItem(t){this._expandedItems=this._expandedItems.filter((e=>e!==t)),this._availableHeight=this._calcAvailableHeight()}_collapseLastItem(){(this._expandedItems[0]??!1)?.setExpanded(!1)}collapse(){for(let t=0;t<this._menuItems.length;t++)this._menuItems[t].setExpanded(!1)}_setBtmGradScale(){const t=(80+this._calcUsedHeight())/80;document.body.style.setProperty("--btm-grad-height","80px"),document.body.style.setProperty("--btm-grad-scale",t)}async addItem({itemTitle:t,componentNames:e,positionIndex:i,dimensions:s,expand:o=!0}){const a=`${t.split(" ").join("").toLowerCase()}Collapsible`;let r=this._app.getComponent(a);const l=Boolean(r),{embed:c}=this._app.getManager("router").configs;if(c&&(o=!1),!l){const i=n.Types.get("CollapsibleMenuItem");r=await i.create(this._app,a,i,!1,[this],{isVisible:!0,parent:this._element,itemTitle:t,config:s}),this._callbackRegistry.push({emitter:r,event:"expandtoggle",callback:this.onItemToggle},{emitter:r,event:"visiblechange",callback:this.onItemVisibleChange}),this.registerCallbacks(),e.forEach(((t,e)=>{const i=this._app.getComponent(t);r.addComponent(i,0===e)}))}i>=this._element.children.length?this._element.appendChild(r.element):this._element.insertBefore(r.element,this._element.children[i]),this._menuItems.push(r);return(l?r.getState("isExpanded"):o)&&this._itemHasSpace(s)&&r.setExpanded(!0),this.onItemVisibleChange(),r}removeAllItems(){this._menuItems.forEach((t=>{t.element&&this._element.removeChild(t.element)})),this._menuItems=[],this._expandedItems=[],this._availableHeight=this._calcAvailableHeight()}onItemToggle(t,e){const{_config:i}=e;if(t){this._itemHasSpace(i)||this._collapseLastItem(),this._addExpandedItem(e)}else this._removeExpandedItem(e);this.setState({expandedMenusClass:`expanded-${this._expandedItems.length}`}),this._setBtmGradScale()}onItemVisibleChange(){this.setState({numMenusClass:`items-${this.visibleItems.length}`,expandedMenusClass:`expanded-${this._expandedItems.length}`})}get visibleItems(){return this._menuItems.filter((t=>t.getState("isVisible")))}get allItems(){return this._element?.childNodes}}CollapsibleMenu.html=a()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<nav class="c-menu-container {{isVisibleClass}} {{numMenusClass}} {{expandedMenusClass}}"></nav>'},function(t,e,i){"use strict";i.r(e),i.d(e,{CollapsibleMenuItem:function(){return CollapsibleMenuItem}});var s=i(1),n=(i(975),i(976)),o=i.n(n);class CollapsibleMenuItem extends s.BaseComponent{constructor(t,e,i={}){super(t,null,{isExpanded:!1,expandedClass:"collapsed",collapseBtnVisibleClass:"hidden",itemTitle:"",...i}),this._parentComponent=e,this._components=[],this._eventNames.push("expandtoggle"),this._initCallbacks()}init(){super.init();const{collapseButton:t,componentContainer:e}=this._children,{itemTitle:i,isExpanded:s}=this._state;t.setAttribute("aria-label",`${s?"Collapse":"Expand"} ${i.toLowerCase()}`);const{width:n,height:o}=this._config;e.style.setProperty("width",`clamp(${n.min}px, 100%, ${n.max}px)`),e.style.setProperty("height",`${o.max}px`),this._setToggleAriaLabel(s)}addComponent(t,e=!1){this._components.push(t),e&&t.registerCallback("statuschange",(t=>{t?this.show():this.hide()}));const{componentContainer:i}=this._children;t.setParent(i),i.appendChild(t.element)}onToggleClick(){const{isExpanded:t}=this._state,e=!t;this.setExpanded(e)}onCollapseClick(){this.setExpanded(!1)}_setToggleAriaLabel(t){const{toggleButton:e}=this._children,{itemTitle:i}=this._state,s=t?"Collapse":"Expand";e.setAttribute("aria-label",`${s} ${i.toLowerCase()}`)}setExpanded(t){this.setState({isExpanded:t,expandedClass:t?"expanded":"collapsed",collapseBtnVisibleClass:t?"":"hidden"}),this._setToggleAriaLabel(t),t?this._components.forEach((t=>t.show())):this._components.forEach((t=>t.hide())),this.triggerCallbacks("expandtoggle",[t,this])}get parentComponent(){return this._parentComponent}}CollapsibleMenuItem.html=o()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<div class="c-menu-item {{expandedClass}} {{isVisibleClass}}">\n\t<div key="componentContainer" class="expanded-container">\n\t\t<button key="collapseButton" class="item-collapse-btn clickable {{collapseBtnVisibleClass}} icon collapse-arrow" onclick="onCollapseClick"></button>\n\t</div>\n\t<button key="toggleButton" class="item-toggle-btn clickable" onclick="onToggleClick">{{itemTitle}}</button>\n</div>\n'},function(t,e,i){"use strict";i.r(e),i.d(e,{TimeControls:function(){return TimeControls}});var s=i(1),n=(i(978),i(979)),o=i.n(n);const{formatNumber:a,throttle:r}=s.AppUtils,l={yr:31536e3,mth:2592e3,wk:604800,day:86400,hr:3600,min:60,sec:1};class TimeControls extends s.BaseComponent{constructor(t,e={}){super(t,null,{isVisible:!0,isPlaying:null,isPlayingClass:"",isLiveClass:"",touchActiveClass:"",realTimeBtnClass:"hidden",playIconClass:null,rateDisplay:null,timeLimit:null,...e}),this._curve={x:0,y:0,cp1x:60,cp1y:50,cp2x:540,cp2y:50,endx:600,endy:0},this._rates=[-94608e3,-31536e3,-6048e3,-604800,-86400,-36e3,-3600,-600,-60,-10,-1,1,10,60,600,3600,36e3,86400,604800,6048e3,31536e3,94608e3],this._class.isPlaying={true:"rate-pause",false:"rate-play"},this._resizeObserver=new ResizeObserver((t=>{t.forEach((t=>{const{svgParent:e}=this._children,{width:i}=t.contentRect;e.setAttribute("width",i);const s=.1*i;this._curve.cp1x=s,this._curve.cp2x=i-s,this._curve.endx=i,this._drawCurve(),this._drawKnob(this._normValue)}))})),this._normValue=.5,this._currentRate=null,this._currentIsLive=null,this._canUpdate=null,this._rateBeforePause=null,this._touchTimeout=null,this._activeDelay=3e3,this._manager=this._app.getManager("time"),this._router=this._app.getManager("router");const i=0!==this._manager.getTimeRate();this.setState({isPlaying:i,playIconClass:this._class.isPlaying[i],rateDisplay:this.getRateDisplay()}),this.bindFunctions(["_onRateChange","_onSliderMove","_onTouchStart","_onTouchEnd","update"]),this._drawKnobThrottled=r(this._drawKnob,50),this._setQueryDebounced=r(this._setQuery,200)}async init(){super.init(),this._createRatesMap();const{inputRange:t}=this._children,e=this._app.getManager("time");this._callbackRegistry.push({emitter:e,event:"ratechange",callback:this._onRateChange},{emitter:this._app.getManager("time"),event:"update",callback:this.update}),t.addEventListener("input",this._onSliderMove),t.addEventListener("click",(()=>t.blur())),this._element.addEventListener("touchstart",this._onTouchStart),this._element.addEventListener("touchend",this._onTouchEnd);const{sliderContainer:i}=this._children;this._resizeObserver.observe(i)}_onRateChange(t){t>=this._rates[0]&&t<=this._rates[this._rates.length-1]?this._setRate(t):this._setQuery(1)}_onSliderMove(t){const{timeLimit:e}=this._state,{value:i}=t.target;if("max"===e&&i>45||"min"===e&&i<55)return void(t.target.value=50);const s=this._ratesMap[i];this._canUpdate&&this._currentRate!==s?(this._normValue=i/100,this._currentRate=s,this._drawKnobThrottled(this._normValue),this._setQueryDebounced(s)):t.target.value=100*this._normValue}_onTouchStart(t){const{touchActiveClass:e}=this._state,i=t.target?.classList.contains("slider-input"),s=t.target?.classList.contains("realtime");e||i||s||t.preventDefault(),clearTimeout(this._touchTimeout),this.setState({touchActiveClass:"touchactive"})}_onTouchEnd(){this._touchTimeout=setTimeout((()=>{this.setState({touchActiveClass:""})}),this._activeDelay)}_createRatesMap(){const t=this._rates.indexOf(1),e=this._rates.length-t-1,i=50/t,s=50/e,n=this._rates.slice(0,t),o=this._rates.slice(t);this._ratesMap=[],n.forEach(((t,e)=>{const s=Math.round(e*i),o=Math.round((e+1)*i)-s,a=n[e+1]??0;for(let e=0;e<o;e++){const i=t+e/o*(a-t),s=i>-1?-1:this._roundRate(i);this._ratesMap.push(Math.floor(s))}})),o.forEach(((t,e)=>{const i=50+Math.round(e*s),n=(e<o.length-1?50+Math.round((e+1)*s):101)-i,a=o[e+1]||o[o.length-1];for(let e=0;e<n;e++){const i=t+e/n*(a-t),s=this._roundRate(i);this._ratesMap.push(Math.floor(s))}}))}_roundRate(t){const{rate:e,unit:i}=this.getRateUnit(t);return e*l[i]}_drawCurve(){const{x:t,y:e,cp1x:i,cp1y:s,cp2x:n,cp2y:o,endx:a,endy:r}=this._curve,{sliderPath:l}=this._children;l.setAttribute("d",`M${t},${e} C${i},${s} ${n},${o} ${a},${r}`)}_drawKnob(t){const{endx:e,cp1y:i}=this._curve,s=t*e,n=.75*i*(1-.95*Math.pow(2*Math.abs(t-.5),3.2)),o=n-i;this._element.style.setProperty("--knobX",`${s}px`),this._element.style.setProperty("--knobY",`${n}px`),this._element.style.setProperty("--knobOffsetY",`${o}px`)}_setRate(t){const{inputRange:e}=this._children,i=0!==t,s=0!==this._currentRate,n=i?null:this._getTimeLimit(),o="max"===n,a=o||"min"===n;this._rateBeforePause=i||a||!s?null:this._currentRate;const r=o?"rate-replay":this._class.isPlaying[i];if(i&&this._currentRate!==t||a){const i=a?50:this._getValueFromRate(t);i&&(e.value=i),this._normValue=e.value/100,this._drawKnob(this._normValue),this._currentRate=t}const l=this._normValue<.47||this._normValue>.53;this.setState({isPlaying:i,isPlayingClass:i?"":"paused",realTimeBtnClass:l?"":"hidden",playIconClass:r,rateDisplay:this.getRateDisplay(t),timeLimit:n}),this._timeLimit=null}_getTimeLimit(){const{min:t,max:e}=this._manager.timeLimits,i=this._manager.getTime();return Math.abs(i.valueOf()-e.valueOf())<10?"max":Math.abs(i.valueOf()-t.valueOf())<10?"min":null}_getValueFromRate(t){const e=this._ratesMap.indexOf(t);if(e>-1)return e;for(let e=0;e<this._ratesMap.length-1;e++){const i=this._ratesMap[e],s=this._ratesMap[e+1];if(t>=i&&t<=s){return e+(t-i)/(s-i)}}return 50}_setQuery(t,e){this._router.navigate({rate:t,time:this._manager.getTimeUrl(e)})}decreaseRate(){if(!this._canUpdate)return;const{timeLimit:t}=this._state,e=(0===this._currentRate?this._rateBeforePause:this._currentRate)||1,i=this._getValueFromRate(e);let s=i%1>0?Math.floor(i):i-1;for(;this._ratesMap[s]===e;)s--;if(s<=0)return;const n="max"===t?-1:this._ratesMap[s];this._setQuery(n)}increaseRate(){if(!this._canUpdate)return;const{timeLimit:t}=this._state,e=(0===this._currentRate?this._rateBeforePause:this._currentRate)||1,i=this._getValueFromRate(e);let s=i%1>0?Math.ceil(i):i+1;for(;this._ratesMap[s]===e;)s++;if(s>=this._ratesMap.length||"max"===t)return;const n=this._ratesMap[s];this._setQuery(n)}playPauseRate(){if(!this._canUpdate)return;const{isPlaying:t,timeLimit:e}=this._state;if("max"===e)return void this._app.getView("event")?.replayEvent();const i=this._rateBeforePause??1,s=t?0:i;this._setQuery(s)}onRealtimeClick(){this._canUpdate&&this._setQuery(1)}getRateUnit(t,e=0){const i=t/l.yr,s=t/l.mth,n=t/l.wk,o=t/l.day,r=t/l.hr,c=t/l.min,h=Object.keys(l);let u=t%l.min,d=h.find((t=>l[t]===l.sec));return i>=1||i<=-1?(u=i,d=h.find((t=>l[t]===l.yr))):s>=1||s<=-1?(u=s,d=h.find((t=>l[t]===l.mth))):n>=1||n<=-1?(u=n,d=h.find((t=>l[t]===l.wk))):o>=1||o<=-1?(u=o,d=h.find((t=>l[t]===l.day))):r>=1||r<=-1?(u=r,d=h.find((t=>l[t]===l.hr))):(c>=1||c<=-1)&&(u=c,d=h.find((t=>l[t]===l.min))),{rate:parseFloat(a(u,e)),unit:d}}getRateDisplay(t=this._manager.getTimeRate()){if(0===t)return"paused";if(1===t)return"real rate";const{rate:e,unit:i}=this.getRateUnit(t);return`${e} ${i}${1===e?"":"s"}/s`}setCanUpdate(t){this._canUpdate=Boolean(t)}update(){const t=this._manager.isNow();this._currentIsLive!==t&&(this.setState({isLiveClass:t?"live":""}),this._currentIsLive=t)}__disable(){super.__disable(),clearTimeout(this._touchTimeout)}}TimeControls.html=o()},function(t,e,i){"use strict";i.r(e)},function(t){t.exports='<nav class="time-controls {{isVisibleClass}} {{touchActiveClass}} {{isLiveClass}} {{isPlayingClass}}">\n\t<div class="datetime-container">\n\t\t<time class="date">{{dateValue}}</time>\n\t\t<time class="time">{{timeValue}}</time>\n\t</div>\n\t<h3 class="rate">{{rateDisplay}}</h3>\n\t<div class="rate-controls">\n\t\t<button class="clickable" data-tippy-content="Decrease time rate" aria-label="Decrease time rate"\n\t\t\tonclick="decreaseRate">\n\t\t\t<span class="icon rate-change decrease"></span>\n\t\t</button>\n\t\t<button class="clickable" data-tippy-content="Pause / play" aria-label="Pause or play" onclick="playPauseRate">\n\t\t\t<span class="icon {{playIconClass}}"></span>\n\t\t</button>\n\t\t<button class="clickable" data-tippy-content="Increase time rate" aria-label="Increase time rate"\n\t\t\tonclick="increaseRate">\n\t\t\t<span class="icon rate-change increase"></span>\n\t\t</button>\n\t</div>\n\t<div key=\'sliderContainer\' class="slider-container">\n\t\t<input id="time-slider-input" class=\'slider-input clickable scrollable\' key=\'inputRange\' type="range" min="0" max="100">\n\t\t<svg class=\'svg-parent\' key=\'svgParent\' height="50" width="600">\n\t\t\t<defs>\n\t\t\t\t<linearGradient id="path-stroke" x1="0%" y1="0%" x2="0%" y2="100%">\n\t\t\t\t\t<stop offset="0%" stop-color="rgba(255, 255, 255, 0)" />\n\t\t\t\t\t<stop offset="100%" stop-color="rgba(255, 255, 255, 1)" />\n\t\t\t\t</linearGradient>\n\t\t\t</defs>\n\n\t\t\t<path key=\'sliderPath\' stroke="url(#path-stroke)" stroke-width="2" stroke-opacity="0.5"\n\t\t\t\tstroke-linecap="round" fill="none" />\n\t\t</svg>\n\t\t<button class="realtime clickable {{realTimeBtnClass}}" data-tippy-content="Return to real time speed"\n\t\t\taria-label="Return to real time speed" onclick="onRealtimeClick"></button>\n\t\t<label class="knob" for="time-slider-input">Drag time slider thumb</label>\n\t</div>\n</nav>'},function(t,e,i){"use strict";i.r(e),i.d(e,{Telescope:function(){return Telescope}});var s=i(5),n=i(1),o=(i(859),i(862)),a=i(981),r=i(982),l=i.n(r);i(983);class Telescope extends n.BaseComponent{constructor(t,e={}){super(t,null,{latitudeTitle:n.AppUtils.isMobileMode()?"Lat":"Latitude",longitudeTitle:n.AppUtils.isMobileMode()?"Lon":"Longitude",airClass:"",surfaceClass:"hidden",azimuth:0,elevation:0,latitudeValue:"",longitudeValue:"",...e}),this._target=null,this._targetEntity=null,this.longitude=null,this.latitude=null,this.helper=null,o.default.setDefaultProps({theme:"default",touch:["hold",2e3],delay:[600,null],plugins:[o.followCursor]})}resize(){super.resize(),this.checkPlatform()}async onEnter(t){this.app.getManager("label").setClickable(!1),this.app.getManager("selection").setClickable(!1),this.lightType=this.app.getComponent("settings").getState("lightType"),this.app.getComponent("settings").toggleLightOptions("flood"),(0,o.default)(this._children.constellationToggleButton,{content:"Toggle Constellations",placement:"top"})}async onRouteChange(t){const{spaceObject:e}=t;if(this._target=e,this._targetEntity=this.app?.scene.get(this._target),this._children.tapHint.classList.remove("hidden"),!this._targetEntity)return;this.helper=new a.default(this.app,this._targetEntity),this._targetEntity.getComponentByType("atmosphere")&&this._targetEntity.getComponentByType("atmosphere").setEnabled(!1),this.lyrManager=this.app.getManager("layer");const i=this.lyrManager?.getLayer("orbiters");i&&(this.orbiterVisibility=i.visible,this.lyrManager.toggleLayer("orbiters",{parentId:this._target},!1))}onLeave(){this.helper.reset(),this.helper=null,this.app.scene.get("camera").removeController(this._pickController),this.azimathelevationInterval&&clearInterval(this.azimathelevationInterval),this.constellations=!1,this.app.getManager("layer").toggleLayer("constellations",{},this.constellations),this.app.getManager("label").setClickable(!0),this.app.getManager("selection").setClickable(!0),this._targetEntity&&this._targetEntity.getComponentByType("atmosphere")&&this._targetEntity.getComponentByType("atmosphere").setEnabled(!0),void 0!==this.lightType&&this.app.getComponent("settings").toggleLightOptions(this.lightType),void 0!==this.occlusionRadius&&this._targetEntity.setOcclusionRadius(this.occlusionRadius),void 0!==this.orbiterVisibility&&this.lyrManager.toggleLayer("orbiters",{parentId:this._target},this.orbiterVisibility)}exitTelescope(){this._target?this._app.getManager("router").navigate(`/${this._target}`):console.warn("Space object could not be located in the url")}async processQuery(t){const{x:e,y:i,z:n}=t;this._children.tapHint.classList.add("hidden");const o=void 0!==e&&void 0!==i&&void 0!==n;if(await this.setView(o),o){if(this.position=new s.Vector3(e,i,n),this.position){const{latitude:t,longitude:e}=this.helper.getLatitudeLongitude(this.position);this.setLatitudeLongitude(t,e),await this.helper.flyToSurface(this.position),this._placemarkEl&&(this._placemarkEl.innerHTML="")}}else this._children.tapHint.classList.remove("hidden")}checkPlatform(){this.setState({latitudeTitle:n.AppUtils.isMobileMode()?"Lat":"Latitude",longitudeTitle:n.AppUtils.isMobileMode()?"Lon":"Longitude"})}async setView(t){if(this.setState({airClass:t?"hidden":"",surfaceClass:t?"":"hidden"}),this._target&&this.app)if(t)this._placemarkEl&&(this._placemarkEl.innerHTML=""),this.azimathelevationInterval&&clearInterval(this.azimathelevationInterval),this.azimathelevationInterval=setInterval((()=>{const{azimuth:t,elevation:e}=this.helper.getAzimuthElevation();this.setState({azimuth:t,elevation:e})}),300);else{await this.app.cameraScripts.goToCelestialObject(this._target);const t=this.app.scene.get("camera");this._pickController&&t.removeController(this._pickController),this._pickController=t.addController("pick"),this._pickController.setPickedEntity(this._targetEntity),this._pickController.setCallback((t=>{this.position=new s.Vector3,this.position.rotateInverse(this._targetEntity.getOrientation(),t);const e=this.helper.getLatitudeLongitude(this.position);e&&(this.latitude=e.latitude,this.longitude=e.longitude,this.addPickLocation(this.latitude,this.longitude),this.setLatitudeLongitude(this.latitude,this.longitude),this._children.tapHint.classList.add("hidden"))}))}}exitSurfaceMode(){this.constellations=!1,this.app.getManager("layer").toggleLayer("constellations",{},this.constellations),this._target&&this.app.getManager("router").navigate(`/${this._target}/telescope`)}toggleConstellation(){this.constellations=!this.constellations,this.app.getManager("layer").toggleLayer("constellations",{},this.constellations)}latitudeInputChange(t){t&&t.target&&t.target.value&&(this.latitude=t.target.value),this.validateLatLong()}longitudeInputChange(t){t&&t.target&&t.target.value&&(this.longitude=t.target.value),this.validateLatLong()}validateLatLong(){return this._children.latitude.classList.remove("error"),this._children.longitude.classList.remove("error"),null===this.latitude||void 0===this.latitude||isNaN(this.latitude)||Math.abs(this.latitude)>90?(this._children.latitude.classList.add("error"),!1):!(null===this.longitude||void 0===this.longitude||isNaN(this.longitude)||Math.abs(this.longitude)>180)||(this._children.longitude.classList.add("error"),!1)}goSurfaceViewClick(t){t.preventDefault(),t.stopPropagation(),this.validateLatLong()&&void 0!==this.position&&(this.helper.removePlacemark(),this.app.getManager("router").navigate(`/${this._target}/telescope?x=${this.position.x}&y=${this.position.y}&z=${this.position.z}`))}addPickLocation(t,e){const i="placemark",s=this.helper.addPlacemark(t,e,i);this._placemarkEl=s.get("div").getDiv(),this._placemarkEl.id=i,this._placemarkEl.innerHTML="";const n=this.helper.formatLatitudeLongitude(t,e),o=document.createElement("div");o.className="telescope pick",o.innerHTML=`\n\t\t\t<div>\n\t\t\t\t<span class="target icon latlong-target"></span>\n\t\t\t\t<span class="semi small">${n.latitude}</span>\n\t\t\t\t/\n\t\t\t\t<span class="semi small">${n.longitude}</span>\n\t\t\t</div>\n\t\t\t<button type="button" class="clickable active" ontouchstart="goSurfaceViewClick" onClick="goSurfaceViewClick">GO</button>\n\t\t`,this._placemarkEl.appendChild(o),o.addEventListener("mousedown",(t=>{t.stopPropagation()})),o.addEventListener("mouseup",(t=>{t.stopPropagation()})),this._setEventHandlersFromAttributes(this._placemarkEl)}setLatitudeLongitude(t,e){if(void 0===t||void 0===e)return;this.validateLatLong();const i=this.helper.formatLatitudeLongitude(t,e);this.setState({latitudeValue:i.latitude,longitudeValue:i.longitude}),this._children.latitude&&this._children.longitude&&(this._children.latitude.value=i.latitude,this._children.longitude.value=i.longitude)}}Telescope.html=l()},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(528);i(1);e.default=class TelescopeHelper{constructor(t,e){this.pioneer=t.pioneer,this.scene=t.scene,this.camera=t.scene.get("camera"),this.cameraTarget=t.scene.get("cameraTarget")||t.scene.addEntity("cameraTarget"),this.fixedController=this.cameraTarget.getControllerByType("fixed")||this.cameraTarget.addController("fixed"),this.cameraTarget.getControllerByType("rotateByEntityOrientation")||this.cameraTarget.addController("rotateByEntityOrientation"),this.entity=e}reset(){this.entity=null;this.scene.get("pickLocation")&&this.scene.removeEntity("pickLocation"),this.removePlacemark()}setPickedLocation(t){let e=this.scene.get("pickLocation");if(!e){e=this.scene.addEntity("pickLocation"),e.setCanOcclude(!1);const t=e.addController("fixed");t.setPosition(s.Vector3.Zero),t.setOrientation(s.Quaternion.Identity),e.addController("rotateByEntityOrientation")}return e.getParent()?.getName()!==t.getName()&&(e.setParent(t),e.setOcclusionRadius(t.getOcclusionRadius())),e}addPlacemark(t,e,i){const s=this.setPickedLocation(this.entity);this.removePlacemark();let o=this.scene.get(i);return o&&this.scene.removeEntity(i),o=n.Placemarks.addPlacemark(i,i,this.entity,t,e,10),o.setParent(s),o}removePlacemark(t="placemark"){this.scene.get(t)&&this.scene.removeEntity(t)}async flyToSurface(t){this.fixedController.getEntity().setParent(this.entity);const e=new s.Quaternion,i=this.entity.get("spheroid"),o=new s.LatLonAlt;i.llaFromXYZ(o,t),i.orientationFromLLA(e,o),this.fixedController.setOrientation(e);const a=new s.Vector3;i.upFromLLA(a,o),a.mult(a,25),t.add(t,a),this.fixedController.setPosition(t),await this.pioneer.waitUntilNextFrame();const r=this.camera.get("camera").getVerticalFieldOfView()/5,l=new s.Vector3(0,-.001*Math.cos(r),-.001*Math.sin(r));l.rotate(this.cameraTarget.getOrientation(),l);const c=this.entity.getComponentByType("atmosphere");null!==c&&c.setEnabled(!1),await n.Cameras.goToEntity(this.camera,this.cameraTarget,{destination:l,up:!0,zoom:!1}).catch();const h=this.camera.get("orbit");h&&h.setPitchAngleLimits(new s.Interval(-Math.PI/2,Math.PI/72))}readCameraAE(){const t={azimuth:0,elevation:0};return this.getAEFromEntity(this.camera,t),t}getAEFromEntity(t,e){const i=t.getParent();if(i){const n=s.Vector3.pool.get(),o=s.AER.pool.get(),a=s.Quaternion.pool.get();a.inverse(i.getOrientation()),t.getOrientation().getAxis(n,1),n.rotate(a,n),o.setFromVector(n),e.azimuth=(90-s.MathUtils.radToDeg(o.azimuth)).toFixed(2),e.azimuth=s.MathUtils.wrap(e.azimuth,0,360).toFixed(2),e.elevation=s.MathUtils.radToDeg(o.elevation).toFixed(2),s.Quaternion.pool.release(a),s.AER.pool.release(o),s.Vector3.pool.release(n)}}getAzimuthElevation(){const t=this.readCameraAE();if(!t)return null;let{azimuth:e,elevation:i}=t;return i+="°",e>=157.5&&e<=202.5&&(e+="°S"),e>=247.5&&e<=292.5&&(e+="°W"),(e>=337.5||e<=22.5)&&(e+="°N"),e>=67.5&&e<=112.5&&(e+="°E"),e>202.5&&e<247.5&&(e+="°SW"),e>292.5&&e<337.5&&(e+="°NW"),e>22.5&&e<67.5&&(e+="°NE"),e>112.5&&e<157.5&&(e+="°SE"),{azimuth:e,elevation:i}}getLatitudeLongitude(t){const e=this.entity.getComponentByType("spheroid");if(null==e||null===parent||t.isNaN())return null;const i=s.LatLonAlt.pool.get();e.llaFromXYZ(i,t);const n={latitude:s.MathUtils.radToDeg(i.lat),longitude:s.MathUtils.radToDeg(i.lon)};return s.LatLonAlt.pool.release(i),null==n.latitude||null==n.longitude?null:n}getPositionFromLatitudeLongitude(t,e){const i=this.entity.getComponentByType("spheroid");if(null==i||null===parent)return null;const n=s.LatLonAlt.pool.get();n.lat=t,n.lon=e;const o=new s.Vector3;return i.xyzFromLLA(o,n),o.rotateInverse(this.entity.getOrientation(),o),o}formatLatitudeLongitude(t,e){return{latitude:t<0?Math.abs(t).toFixed(2)+"°S":t.toFixed(2)+"°N",longitude:e<0?Math.abs(e).toFixed(2)+"°W":e.toFixed(2)+"°E"}}}},function(t){t.exports='<div class="telescope">\n\t<span class="air {{airClass}}">\n\t\t<div class="description above">\n\t\t\t<span class="semi small">Pick a location</span>\n\t\t</div>\n\n\t\t<div class="container">\n\t\t\t<div class="title">\n\t\t\t\t<div class="vertical">\n\t\t\t\t\t<snap class="menu semi upper color gray small">Telescope Mode</snap>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<span>\n\t\t\t\t<div class="latlong semi small color gray">\n\t\t\t\t\t<snap class="latitude">\n\t\t\t\t\t\t<label>{{latitudeTitle}}</label>\n\t\t\t\t\t\t<input readonly key="latitude" type="text" oninput="latitudeInputChange"/>\n\t\t\t\t\t</snap>\n\n\t\t\t\t\t<snap class="longitude">\n\t\t\t\t\t\t<label>{{longitudeTitle}}</label>\n\t\t\t\t\t\t<input readonly key="longitude" type="text" oninput="longitudeInputChange"/>\n\t\t\t\t\t</snap>\n\t\t\t\t</div>\n\t\t\t</span>\n\n\t\t\t<div class="exit">\n\t\t\t\t<span class="exit clickable active" onclick="exitTelescope">\n\t\t\t\t\t<span class="text semi menu upper small">Exit</span>\n\t\t\t\t\t<span alt="Close telescope mode" class="icon icon-box active">\n\t\t\t\t\t\t<span class="icon icon-close"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</span>\n\n\t<span class="surface {{surfaceClass}}">\n\t\t<div class="description surface top">\n\t\t\t<span class="semi small">{{azimuth}}</span>\n\t\t\t<span class="semi small">{{elevation}}</span>\n\t\t\t<span class="text semi small color gray">Azimuth</span>\n\t\t\t<span class="text semi small color gray">Elevation</span>\n\t\t</div>\n\n\t\t<div class="container">\n\t\t\t<div class="title">\n\t\t\t\t<div class="vertical">\n\t\t\t\t\t<snap class="menu semi upper color gray small">Telescope Mode</snap>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class="readout">\n\t\t\t\t<div class="semi small color gray middle" onclick="exitSurfaceMode">\n\t\t\t\t\t<snap class="menu semi upper color gray small changeLocation clickable">CHANGE LOCATION</snap>\n\n\t\t\t\t\t<div class="location clickable">\n\t\t\t\t\t\t<span class="icon latlong-target"></span>\n\t\t\t\t\t\t<snap>{{latitudeValue}}</snap>\n\t\t\t\t\t\t<snap> / </snap>\n\t\t\t\t\t\t<snap>{{longitudeValue}}</snap>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<span key="constellationToggleButton" class="icon icon-constellation clickable" onclick="toggleConstellation"></span>\n\t\t\t\t<span class="target icon telescope-target">\n\t\t\t\t\t<div class="description surface center">\n\t\t\t\t\t\t<span class="semi small">{{azimuth}}</span>\n\t\t\t\t\t\t<span class="semi small">{{elevation}}</span>\n\t\t\t\t\t\t<span class="text semi small color gray">Azimuth</span>\n\t\t\t\t\t\t<span class="text semi small color gray">Elevation</span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t</span>\n\n\t\t\t<div class="exit">\n\t\t\t\t<span class="exit clickable active" onclick="exitSurfaceMode">\n\t\t\t\t\t<span class="text semi menu upper small">Exit</span>\n\t\t\t\t\t<span alt="Close telescope mode" class="icon icon-box active">\n\t\t\t\t\t\t<span class="icon icon-close"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</span>\n\t<div class="tap-hint" key="tapHint">\n\t\t<div class="circle"></div>\n\t\t<div class="icon icon-finger"></div>\n\t</div>\n</div>'},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e),i.d(e,{Search:function(){return Search}});var s=i(1);class Search extends s.Search{_getLink(t){return this._app.getManager("link")?.getParsedLink?.(t)||t}}},function(t,e,i){"use strict";i.r(e),i.d(e,{Types:function(){return s.Types}});var s=i(1),n=i(854);s.Types.set("TimeManager",n.TimeManager),s.Types.set("LinkManager",n.LinkManager),s.Types.set("LabelManager",n.LabelManager),s.Types.set("Comparison",n.Comparison),s.Types.set("ContentPanel",n.ContentPanel),s.Types.set("FeaturedStoriesPanel",n.FeaturedStoriesPanel),s.Types.set("Menu",n.Menu),s.Types.set("MobileExpandButton",n.MobileExpandButton),s.Types.set("InfoPanel",n.InfoPanel),s.Types.set("EventsTimeline",n.EventsTimeline),s.Types.set("CollapsibleMenu",n.CollapsibleMenu),s.Types.set("CollapsibleMenuItem",n.CollapsibleMenuItem),s.Types.set("TimeControls",n.TimeControls),s.Types.set("Telescope",n.Telescope),s.Types.set("Search",n.Search)},function(t,e,i){"use strict";i.r(e),i.d(e,{StoryView:function(){return StoryView}});var s=i(528),n=i(1),o=i(708);class StoryView extends o.default{constructor(...t){super(...t),this._story=null,this._storyId=null,this._slideId=null,this._validQueries.push("slide"),this._rules.id={value:t=>t in this._app.getManager("content").getStoryList().stories}}async onQueryChange(t){await super.onQueryChange(t),await this._updateTime(t),await this._app.getComponent("story").onQueryChange(t),this._slideId=t.slide,this._updateTitle(),await this._updateCamera(t)}async onEnter(t,e=[]){this._offsetPanel=this._app.getComponent("story"),await super.onEnter(t,e);this._app.getComponent("clock").setState({allowEdit:!1}),this._app.getManager("label").setClickable(!1),this._app.getManager("selection").setClickable(!1)}async onLeave(t){await super.onLeave(t);const e=this._app.getComponent("story");await e.onLeave(),e.hide(),this.setViewportOffset(!1),await(this._story?.onLeave?.(this._app));this._app.getComponent("clock").setState({allowEdit:!0}),this._app.getManager("label").setClickable(!0),this._app.getManager("selection").setClickable(!0),this._story=null}async _updateResources(t){this._app.getManager("layer").setTarget(""),this._story&&(this._story.onLeave?.(this._app),this._app.getComponent("story")?.onLeave());try{const e=await this._app.getManager("content").getStory(t.id);this._story=n.AppUtils.deepClone(e),this._storyId=t.id,this._slideId=t.slide;const i=[...(t.slide?this._story.slides.find((e=>e.id===t.slide)):this._story.slides[0]).entities||[],...this._story.entities||[]];this.app.getManager("scene").setEntitiesForceVisible(i,!1),await s.SceneHelpers.waitTillEntitiesInPlace(this._app.scene,i),await(this._story?.onEnter?.(this._app))}catch(e){this._handleError(`StoryView._updateResources: Cannot find story ${t.id}: ${e}`)}}async _updateTime(t){super._updateTime(t);const e=this._app.getManager("time"),i=t.slide?this._story.slides.find((e=>e.id===t.slide)):this._story.slides[0];i.timeLimits&&(i.timeLimits.min&&e.setMin(i.timeLimits.min),i.timeLimits.max&&e.setMax(i.timeLimits.max)),!t.time&&i.time&&(e.setTime(i.time),await this._app.pioneer.waitUntilNextFrame())}_shouldHideControls(){return n.AppUtils.isMobileMode()&&!this._app.getComponent("story").getState("isCollapsed")}async _updateComponents(t){super._updateComponents(t);const e=this._app.getManager("router").currentRoute.url.match(/[^/]+/g);e.splice(e.indexOf("story"),1),this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:e}),this._app.getComponent("storyClock").show();const i=this._app.getComponent("story");await i.onRouteChange(this._story.slides,t),i.show(),this.setViewportOffset(!0),await this._app.getComponent("settings").setConfig({orientation:{tabletPortrait:{ori:"horizontal"},smallLandscape:{ori:"horizontal"},tabletLandscape:{ori:"horizontal"}}})}async _updateCamera(t){const e=t.slide?this._story.slides.find((e=>e.id===t.slide)):this._story.slides[0];if(!e)return Promise.reject(new Error(`${this.constructor.name}._updateCamera: Cannot find slide with id/index ${t.slide||0}.`));const i=[...e.entities||[],...this._story.entities||[]];if(e.camera){const t=this._app.getComponent("story");if(t.getState("previousIndex")!==t.getState("currentIndex")){const t=e.camera[0];await t(this._app)}}else await this._app.cameraScripts.goToSystem("outer_solar_system");this.app.getManager("scene").setEntitiesForceVisible(i,!0),await s.SceneHelpers.waitTillEntitiesInPlace(this._app.scene,i)}_updateTitle(){const t=n.AppUtils.deepCopy(this._app.getManager("content").getStoryList()).stories[this._storyId],e=this._slideId?this._slideId.replace("slide_",""):1,i=`${t.title} - ${e}`;document.title=`${i} - Eyes on the Solar System - NASA/JPL`}}},function(t,e,i){"use strict";i.r(e),i.d(e,{TelescopeView:function(){return TelescopeView}});var s=i(708);class TelescopeView extends s.default{async onEnter(t,e=[]){await super.onEnter(t,e),await this._app.getComponent("telescope").onEnter(t)}async onRouteChange(t){await this._app.getComponent("telescope").onRouteChange(t),await super.onRouteChange(t)}async _updateResources(t){this._target=t.spaceObject,this.app.getManager("scene").setEntitiesForceVisible(null!==this._target?[this._target]:[],!1)}async processQuery(t){await super.processQuery(t),this._app.getComponent("telescope").processQuery(t)}async _updateComponents(t){super._updateComponents(t),this._entityInfo=this._app.getManager("content").getEntityInfo(t.spaceObject);const e=this._app.getManager("router").currentRoute.url.match(/[^/]+/g);this._app.getComponent("breadcrumb").onRouteChange({...t,routeParts:e})}async _updateCamera(t){const e=null!==this._target?[this._target]:[];this.app.getManager("scene").setEntitiesForceVisible(e,!0)}async onLeave(t){await super.onLeave(t),this._app.getComponent("telescope").onLeave(t)}_updateTitle(){const{iauName:t,displayName:e}=this._entityInfo||{},i=`${t||e||"Home"} Telescope Mode`;document.title=`${i} - Eyes on the Solar System - NASA/JPL`}}},function(t,e,i){"use strict";i.r(e),i.d(e,{STORY_LIST:function(){return o},STORIES:function(){return a}});var s=i(989),n=i(990),o=i(991);const a={enceladus_discovery:s.default,voyager_grand_tour:n.default}},function(t,e,i){"use strict";i.r(e);const s={layers:[]};e.default={type:"nonsequential",entities:["sc_cassini","enceladus"],onEnter:async t=>{const e=t.getManager("layer"),i=t.getComponent("layerPanel");["asteroids","comets","dwarfPlanets","minorMoons","spacecraft"].forEach((t=>{e.getLayer(t).visible&&(s.layers.push(t),i.toggleLayer(t))})),["planets","majorMoons"].forEach((t=>{e.getLayer(t).visible||(s.layers.push(t),i.toggleLayer(t))})),s.maxTextureSize=t.pioneer.getConfig().getValue("maxTextureSize"),t.pioneer.getConfig().setValue("maxTextureSize",2048)},onLeave:t=>{const{layers:e}=s,i=t.getComponent("layerPanel");for(let t=0;t<e.length;t++)i.toggleLayer(e[t]);t.pioneer.getConfig().setValue("maxTextureSize",s.maxTextureSize),s.layers=[],delete s.trail,delete s.maxTextureSize},slides:[{id:"slide_1",type:"overlay",classList:["opaque","black"],content:[{type:"title",title:"Discovery at Enceladus"}]},{id:"slide_2",type:"panel",content:[{type:"description",title:"There is Something Happening on Enceladus",subtitle:"February 2005",description:"The Cassini mission spent 13 years orbiting Saturn and its moons, arriving at Saturn in 2004. But no one was expecting what was found on the moon named Enceladus."}],time:"2005-02-14T05:22:35Z",camera:[async t=>{const e="enceladus",i=t.getManager("scene");await i.isReady(e);const s=t.pioneer.get("main",e,"spheroidLOD");i.addLoading(e,"spheroidLOD"),await s.getLoadedPromise(),await t.pioneer.waitUntilNextFrame(),i.removeLoading(e,"spheroidLOD"),await t.cameraScripts.goToCelestialObject(e,{duration:3})}]},{id:"slide_3",type:"panel",content:[{type:"description",title:"Detection",subtitle:"Feb 16th, 2005",description:"The magnetometer aboard NASA's robotic Cassini spacecraft discovers something -- perhaps an atmosphere -- is pushing against Saturn's magnetic field around Enceladus, a small, icy moon of Saturn barely 300 miles (500 kilometers) in diameter. There is evidence that gases may be originating from the moon's surface or interior. Cassini's cosmic dust analyzer records thousands of hits from tiny particles of dust or ice, possibly coming from a cloud around the moon or from the adjacent E ring, a broad ring of dust-sized ice particles in which Enceladus orbits. The science team makes plans to return to Enceladus for a closer look."}],time:"2005-02-17T03:15:30Z",rate:12,camera:[async t=>{await t.cameraScripts.alignObjects("sc_cassini","enceladus",{transitionDuration:3,alignDuration:3,distance:.04,horizontalOffset:10})}],onEnter:t=>{},onLeave:t=>{}},{id:"slide_4",type:"panel",content:[{type:"description",title:"Water Vapor at the South Pole",subtitle:"July 2005",description:"During this pivotal flyby, the Cassini cameras obtain new, detailed images of the south polar region of Enceladus.To their amazement, Cassini scientists detect a huge cloud of water vapor over the area -- and relatively warm fractures in the crust that are supplying the cloud of water vapor and ice particles that extend into space. Cassini data also confirms that this activity is the major source of material in the E ring. Cassini has already made a major discovery, and something that no telescope could have seen."},{type:"image",src:"assets/images/enceladus_terrain.jpg",title:"Enceladus Terrain",alt:"Enceladus Terrain",clickable:!0},{type:"image",src:"assets/images/enceladus_temperature.jpg",title:"Enceladus Temperature",alt:"Enceladus Temperature",clickable:!0}],time:"2005-07-14T19:51:20Z",rate:5,camera:[async t=>{await t.cameraScripts.alignObjects("sc_cassini","enceladus",{transitionDuration:1,alignDuration:2,distance:.04,horizontalOffset:12})}]},{id:"slide_5",type:"panel",content:[{type:"description",title:"A Major Announcement",subtitle:"March 2006",description:"Cassini scientists announced they have found evidence of liquid water reservoirs feeding the Enceladus plume, possibly in the form of geysers. After examining high-resolution Cassini images and other data showing icy jets ejecting large quantities of particles at high speed, scientists rule out the idea that the particles are produced by or blown off the moon's surface by vapor created when warm water ice converts to a gas. Instead, they find evidence that the jets might be erupting from near-surface pockets of liquid water."},{type:"image",src:"assets/images/enceladus_icy_jets.jpg",title:"Enceladus Icy Jets",alt:"Enceladus Icy Jets",clickable:!0}],time:"2022-01-25T22:15:00Z",camera:[async t=>{await t.getManager("scene").isReady("enceladus"),await t.cameraScripts.goToCelestialObject("enceladus")}]},{id:"slide_6",type:"panel",content:[{type:"description",title:"Cassini and the Jets",description:"During a very close flyby on March 12th, 2008, Cassini's instruments sample the plume directly, and detect a surprising brew of volatile gases, water vapor, carbon dioxide and carbon monoxide, as well as organic materials, some 20 times denser than expected. The brew is described as being 'like carbonated water with an essence of natural gas.' New heat maps of the surface show higher temperatures than previously known in the south polar region, with higher-than-expected temperatures running the length of the giant fissures near the south pole."},{type:"replay"}],time:"2008-03-12T19:06:15Z",onEnter:t=>{t.getComponent("settings").toggleLightOptions("flood"),t.scene.get("sc_cassini","trail").setEnabled(!1)},onLeave:t=>{t.getComponent("settings").toggleLightOptions("shadow"),t.scene.get("sc_cassini","trail").setEnabled(!0)},camera:[async t=>{await t.cameraScripts.alignObjects("sc_cassini","enceladus",{duration:4,distance:.4,horizontalOffset:10})}]},{id:"slide_7",type:"panel",content:[{type:"description",title:"What We Learned Along the Way",description:"Over the next nine years, Cassini completes 23 flybys of Enceladus, unlocking new clues with each event. In subsequent flybys, Cassini found that the ice fractures called “tiger stripes” are about 300 meters (980 feet) deep, with V-shaped inner walls. Cassini also found that the particles in the plume were water ice with a surprising amount of salt in addition to methane, ammonia and carbon dioxide. Gravitational measurements indicated that the jets are supplied by a global subsurface ocean, probably regional to the south pole. Tiny silica grains, also found in the plume, suggest that the ocean of Enceladus likely contains hydrothermal vents - one of the places scientists suspect life could have begun on Earth."},{type:"image",src:"assets/images/enceladus_cutaway.jpg",title:"Enceladus cutaway",alt:"Enceladus cutaway",clickable:!0},{type:"image",src:"assets/images/enceladus_cutaway_description.jpg",title:"Enceladus cutaway with description",alt:"Enceladus cutaway with description",clickable:!0},{type:"image",src:"assets/images/enceladus_geyser_cutaway.jpg",title:"Enceladus cutaway with geysers",alt:"Enceladus cutaway with geysers",clickable:!0}],time:"2008-10-09T19:06:46Z",camera:[async t=>{await t.getManager("scene").isReady("sc_cassini"),await t.cameraScripts.goToSpacecraft("sc_cassini")}]},{id:"slide_8",type:"panel",content:[{type:"description",title:"Shoot the Plumes",description:"On October 28th, 2015, the Cassini mission managers decided to boldly send the spacecraft directly through the plumes. This entailed a very small amount of risk of damage to Cassini, but since it was nearing the end of the mission, it was a chance they were willing to take. This flyby, informally called the “Cassini car wash” was a complete success.\nThanks to the hard work of scientists and engineers, we discovered something that was completely unknown to us about this incredible moon of Saturn. This knowledge was not possible without actually visiting the site; no Earth-based telescopes could discover the geysers of water ice that emanate from the south pole. Over a decade of visiting, we learned that this moon harbors a sub-surface ocean of water, complete with organic material and an energy source which remains to be determined with certainty. This means something deeply significant; there could be life in that ocean, under the frozen crust, similar to what we have on Earth at the bottom of the Atlantic ocean, where there are hydrothermal vents."}],time:"2015-10-28T15:22:30Z",camera:[async t=>{await t.cameraScripts.viewFromSide("sc_cassini",{duration:2,distance:1e3,planeId:"enceladus",upVector:"-z-axis"})}],onEnter:t=>{t.getComponent("settings").toggleLightOptions("flood");const e=t.scene.get("sc_cassini","trail");s.trail={sc_cassini:e.getStartTime()},e.setRelativeToEntity("enceladus"),e.setStartTime(1e3)},onLeave:t=>{t.getComponent("settings").toggleLightOptions("shadow");const e=t.scene.get("sc_cassini","trail");e.setRelativeToEntity(""),e.setStartTime(s.trail.sc_cassini),s.trail={}}}]}},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(528);const o={layers:[]};e.default={type:"nonsequential",entities:["sc_voyager_1","sc_voyager_2"],onEnter:async t=>{const e=t.getManager("layer"),i=t.getComponent("layerPanel");["asteroids","comets","dwarfPlanets","minorMoons","spacecraft"].forEach((t=>{e.getLayer(t).visible&&(o.layers.push(t),i.toggleLayer(t))})),["planets","majorMoons"].forEach((t=>{e.getLayer(t).visible||(o.layers.push(t),i.toggleLayer(t))}))},onLeave:t=>{const{layers:e}=o,i=t.getComponent("layerPanel");for(let t=0;t<e.length;t++)i.toggleLayer(e[t]);o.layers=[]},slides:[{id:"slide_1",type:"overlay",classList:["opaque","black"],content:[{type:"title",title:"Voyager's Grand Tour",subtitle:"1977 - Today"}],time:"1977-09-05T12:56:00Z",rate:0,camera:[async t=>{await t.cameraScripts.goToSystem("outer_solar_system")}]},{id:"slide_2",type:"panel",content:[{type:"description",description:"The twin spacecraft Voyager 1 and Voyager 2 were launched by NASA in separate months in the summer of 1977. The Voyager mission was designed to take advantage of a rare geometric arrangement of the outer planets in the late 1970s and the 1980s which allowed for a four-planet tour for a minimum of propellant and trip time. This layout of Jupiter, Saturn, Uranus and Neptune, which occurs about every 175 years, allows a spacecraft on a particular flight path to swing from one planet to the next without the need for large onboard propulsion systems."},{type:"replay"}],time:"1977-09-05T12:56:00Z",rate:25228800,onEnter:async t=>{if(t.getManager("label").addExceptions(["sc_voyager_1","sc_voyager_2"]),!o.trail){const e=t.scene.get("sc_voyager_1","trail"),i=t.scene.get("sc_voyager_2","trail");o.trail={sc_voyager_1:e.getStartTime(),sc_voyager_2:i.getStartTime()},e.setStartTime(1e8*e.getStartTime()),i.setStartTime(1e8*i.getStartTime())}if(!o.timeCheck){const e=t.getManager("time");o.timeCheck=setInterval((()=>{e.getTime().valueOf()>=e.getNow().valueOf()&&(clearInterval(o.timeCheck),e.resetTimeRate(),e.setToNow(),delete o.timeCheck)}),500)}await t.getManager("scene").isListReady(["sun","earth","sc_voyager_1","sc_voyager_2"])},onLeave:t=>{t.getManager("label").removeExceptions(["sc_voyager_1","sc_voyager_2"]),t.scene.get("sc_voyager_1","trail").setStartTime(o.trail.sc_voyager_1),t.scene.get("sc_voyager_2","trail").setStartTime(o.trail.sc_voyager_2),delete o.trail,o.timeCheck&&(clearInterval(o.timeCheck),delete o.timeCheck),o.zoomFitController&&(t.scene.get("camera").removeController(o.zoomFitController),delete o.zoomFitController)},camera:[async t=>{const e=t.getManager("time");e.pause(),await t.cameraScripts.showLocation("sun","earth","earth","planeNormal",{distance:6e8,duration:2,startFromTarget:!1,rotateByScreenRatio:!1}),await t.scene.getLoadedPromise(),await t.pioneer.waitUntilNextFrame();const i=t.scene.get("camera");o.zoomFitController=i.addController("zoomFit",void 0,i.getControllerByType("align")),o.zoomFitController.addEntity("sun"),o.zoomFitController.addEntity("sc_voyager_1"),o.zoomFitController.addEntity("sc_voyager_2"),o.zoomFitController.setEdgeSize(.04),o.zoomFitController.setTightFit(!0),o.zoomFitController.setZoomOutOnly(!1),await t.scene.getLoadedPromise(),await t.pioneer.waitUntilNextFrame(),e.play()}]},{id:"slide_3",type:"panel",content:[{type:"description",description:"Voyager 1 was the first to reach Jupiter, in March of 1979, followed by Voyager 2 in August. Discovery of active volcanism on the satellite Io was easily the greatest unexpected discovery at Jupiter. It was the first time active volcanoes had been seen on another body in the solar system. The Voyagers also discovered that the Great Red Spot was revealed as a complex storm moving in a counterclockwise direction, and a movie was made of it as Voyager 1 was inbound."},{type:"image",src:"assets/images/PIA02855_blue_movie.gif",title:'Voyager 1 "Blue Movie"',alt:'Voyager 1 "Blue Movie"',clickable:!0},{type:"image",src:"assets/images/PIA01971_volcanic_explosion_on_io.jpg",title:"Volcanic Explosion on Io",alt:"Volcanic Explosion on Io",clickable:!0},{type:"image",src:"assets/images/PIA00010_io_with_loki_plume_on_bright_limb.jpg",title:"Io with Loki Plume on Bright Limb",alt:"Io with Loki Plume on Bright Limb",clickable:!0},{type:"image",src:"assets/images/PIA00014_jupiter_great_red_spot.jpg",title:"Jupiter's Great Red Spot",alt:"Jupiter's Great Red Spot",clickable:!0},{type:"image",src:"assets/images/PIA02857_io_rotation_movie.gif",title:"Io Rotation Movie",alt:"Io Rotation Movie",clickable:!0},{type:"image",src:"assets/images/PIA01384_jupiter_great_red_spot.jpg",title:"Jupiter's Great Red Spot",alt:"Jupiter's Great Red Spot",clickable:!0}],time:"1979-03-04T15:56:00-08:00",rate:600,entities:["jupiter","io"],camera:[async t=>{await t.cameraScripts.alignObjects("sc_voyager_1","jupiter",{duration:4,distance:.04,horizontalOffset:10})}]},{id:"slide_4",type:"panel",content:[{type:"description",description:'The Voyager spacecraft both used Jupiter\'s gravity as a free speed boost, or a "slingshot" to reach Saturn. At Saturn, the Voyagers discovered many new details about Saturn\'s rings, as well as new data about Saturn\'s large moon Titan, which has an atmosphere. After the Saturn encounter, Voyager 1 headed "up" from Saturn, out of the plane of the ecliptic, whereas Voyager 2 continued on towards Uranus and Neptune.'},{type:"image",src:"assets/images/PIA02269_saturn_ring_system.jpg",title:"Saturn's Ring System",alt:"Saturn's Ring System",clickable:!0},{type:"image",src:"assets/images/PIA02238_titan_thick_haze_layer.jpg",title:"Titan's Thick Haze Layer",alt:"Titan's Thick Haze Layer",clickable:!0}],time:"1980-11-11T15:00:00-08:00",rate:3600,entities:["saturn","titan"],camera:[async t=>{await t.cameraScripts.alignObjects("sc_voyager_1","saturn",{duration:4,distance:.04,horizontalOffset:10,verticalOffset:-5})}]},{id:"slide_5",type:"panel",content:[{type:"description",description:"With Voyager 1's primary science phase over, Voyager 2 made the long journey out to Uranus, arriving in January of 1986. The planet had never been visited before, and the encounter did not disappoint: Voyager 2 found eleven new moons and two new rings around the planet. This was the first-ever visit to Uranus."},{type:"image",src:"assets/images/PIA18182_uranus_as_seen_by_nasa_voyager_2.jpg",title:"Uranus as seen by NASA's Voyager 2",alt:"Uranus as seen by NASA's Voyager 2",clickable:!0},{type:"image",src:"assets/images/PIA00036_titania_high-resolution_color_composite.jpg",title:"Titania High-Resolution Color Composite",alt:"Titania High-Resolution Color Composite",clickable:!0},{type:"image",src:"assets/images/PIA00141_miranda_geologic_history_(variety_of_terrain).jpg",title:"Miranda's Geologic History (Variety of Terrain)",alt:"Miranda's Geologic History (Variety of Terrain)",clickable:!0},{type:"image",src:"assets/images/PIA01977_uranus_rings.jpg",title:"Uranus Rings",alt:"Uranus Rings",clickable:!0}],time:"1986-01-23T04:00:00-08:00",rate:3600,entities:["uranus"],camera:[async t=>{await t.cameraScripts.alignObjects("sc_voyager_2","uranus",{duration:4,distance:.08,horizontalOffset:15})}]},{id:"slide_6",type:"panel",content:[{type:"description",description:"Voyager 2 makes its closest approach to Neptune, making it the first spacecraft to observe Neptune up close and the first to visit four planets beyond Earth. Highlights from the encounter include the discovery of six new moons, the first images of Neptune's rings, and the discovery of a huge, counter-clockwise rotating storm in Neptune's southern hemisphere, named \"The Great Dark Spot\"."},{type:"image",src:"assets/images/PIA02245_neptune_blue-green_atmosphere.jpg",title:"Neptune's Blue-green Atmosphere",alt:"Neptune's Blue-green Atmosphere",clickable:!0},{type:"image",src:"assets/images/PIA00058_neptune_clouds_showing_vertical_relief.jpg",title:"Neptune Clouds Showing Vertical Relief",alt:"Neptune Clouds Showing Vertical Relief",clickable:!0},{type:"image",src:"assets/images/PIA00317_global_color_mosaic_of_triton.jpg",title:"Global Color Mosaic of Triton",alt:"Global Color Mosaic of Triton",clickable:!0}],time:"1989-08-24T16:30:00Z",rate:3e3,entities:["neptune","triton"],camera:[async t=>{await t.cameraScripts.alignObjects("sc_voyager_2","neptune",{duration:4,distance:.07,verticalOffset:10})}],onEnter:t=>{t.getComponent("settings").toggleLightOptions("flood")},onLeave:t=>{t.getComponent("settings").toggleLightOptions("shadow")}},{id:"slide_7",type:"panel",content:[{type:"description",description:'After visiting Neptune, Voyager 2 turned "down" or south of the ecliptic plane, while Voyager 1 turned "up" or north of the plane. Each spacecraft headed out in a different direction, and they will never stop. In August of 2012, it was determined that Voyager 1 had reached the edge of the sun\'s influence(the heliopause), which is the boundary where the solar wind is balanced by the interstellar wind. Voyager 2 reached the heliopause in 2018.'},{type:"image",src:"assets/images/heliosphere.jpg",title:"Heliosphere",alt:"Heliosphere",clickable:!0}],time:"2012-08-25T00:00:00-08:00",onEnter:t=>{t.scene.get("sun","model")?.setEnabled(!0)},onLeave:t=>{t.scene.get("sun","model")?.setEnabled(!1)},camera:[async t=>{await t.getManager("camera").goToEntity("sc_voyager_1",{duration:3,destination:new s.Vector3(82226007739.1375,-56908057519.63546,597193963.1270928),destinationUp:s.Vector3.ZAxis})}]},{id:"slide_8",type:"panel",content:[{type:"description",description:"The Voyager spacecraft are still sending back data to this day, and will wander the Milky Way forever. Each spacecraft carries a message, prepared by a team headed by Carl Sagan, in the form of a 12 inch (30-centimeter) diameter gold-plated copper disc for potential extraterrestrials who might find the spacecraft. Like the plaques on Pioneers 10 and 11, the record has symbols to show the location of Earth relative to several pulsars. The records also contain instructions to play them using a cartridge and a needle, much like a vinyl record player. The audio on the disc includes greetings in 55 languages, 35 sounds from life on Earth (such as whale songs, laughter, etc.), 90 minutes of generally Western music including everything from Mozart and Bach to Chuck Berry and Blind Willie Johnson. It also includes 115 images of life on Earth and recorded greetings."},{type:"image",src:"assets/images/voyager_golden_record_cover.jpg",title:"Voyager's Golden Record Cover",alt:"Voyager's Golden Record Cover",clickable:!0},{type:"image",src:"assets/images/voyager_golden_record.jpg",title:"Voyager's Golden Record",alt:"Voyager's Golden Record",clickable:!0}],onEnter:async t=>{const e=t.getManager("scene");await e.isReady("sc_voyager_1"),n.Entity.createFromOptions("voyager_disc",{occlusionRadius:1e-4,extentsRadius:1e-4,parents:[[Number.NEGATIVE_INFINITY,"sc_voyager_1"]],fixed:{orientation:s.Quaternion.Identity,position:new s.Vector3(95e-5,0,0)},postCreateFunction:t=>{t.addController("rotateByEntityOrientation")}},t.scene),await e.isReady("voyager_disc"),await t.pioneer.waitUntilNextFrame()},onLeave:async t=>{t.scene.get("camera").setParent(t.scene.get("sc_voyager_1")),t.scene.removeEntity("voyager_disc")},camera:[async t=>{await t.cameraScripts.goToInstrument("voyager_disc",{distance:.002,upVector:"-z-axis",forwardVector:"-x-axis"})}]}]}},function(t){"use strict";t.exports=JSON.parse('{"stories":{"voyager_grand_tour":{"id":"voyager_grand_tour","title":"Voyager\'s Grand Tour","subtitle":"1977 - Today","icon":"assets/images/cards/voyager_story_icon.png"},"enceladus_discovery":{"id":"enceladus_discovery","title":"Discovery at Enceladus","subtitle":"Cassini","icon":"assets/images/cards/enceladus.png"}},"external":{"mars2020":{"id":"mars2020","title":"Entry, Descent, and Landing","subtitle":"Perseverance","link":"https://eyes.nasa.gov/apps/mars2020/","icon":"assets/images/cards/perseverance.png"},"asteroids_missions":{"id":"asteroids_missions","title":"Asteroid and Comet Missions","subtitle":"Eyes on Asteroids","link":"https://eyes.nasa.gov/apps/asteroids/#/asteroids/story/asteroids_missions","icon":"assets/images/cards/asteroid.png"},"experience_curiosity":{"id":"experience_curiosity","title":"Experience Curiosity","subtitle":"Interactive","link":"https://eyes.nasa.gov/curiosity/","icon":"assets/images/cards/curiosity.png"},"experience_insight":{"id":"experience_insight","title":"Experience Insight","subtitle":"Interactive","link":"https://eyes.nasa.gov/apps/experience-insight/InSight.html","icon":"assets/images/cards/insight.png"}},"internal":{"artemis":{"id":"artemis","title":"Artemis I","subtitle":"Fly Along Live!","internal":true,"link":"sc_artemis_1","icon":"assets/images/cards/artemis_icon.png"}},"featured":["voyager_grand_tour","enceladus_discovery","mars2020","asteroids_missions"]}')},function(t){t.exports='<header class="header">\n\t<Breadcrumb></Breadcrumb>\n\t<section class="menu-search-section">\n\t\t<Search id="searchDesktop"></Search>\n\t\t<Menu></Menu>\n\t</section>\n</header>\n<FeaturedStoriesPanel></FeaturedStoriesPanel>\n<ContentPanel></ContentPanel>\n<Story></Story>\n<CollapsibleMenu></CollapsibleMenu>\n<div id="float-mid-bottom" class="float-mid-bottom">\n\t<div id="extended-controls" class="extended-controls">\n\t\t<MobileExpandButton></MobileExpandButton>\n\t\t<Clock id="storyClock"></Clock>\n\t</div>\n</div>\n<div id="float-right-bottom" class="float-right-bottom">\n\t<LayerPanel></LayerPanel>\n\t<Settings></Settings>\n</div>\n<Comparison></Comparison>\n<Telescope></Telescope>\n'}],i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,t=[],s.O=function(e,i,n,o){if(!i){var a=1/0;for(h=0;h<t.length;h++){i=t[h][0],n=t[h][1],o=t[h][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(r=!1,o<a&&(a=o));if(r){t.splice(h--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[i,n,o]},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,{a:e}),e},s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t={0:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,o,a=i[0],r=i[1],l=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var h=l(s)}for(e&&e(i);c<a.length;c++)o=a[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(h)},i=self.webpackChunksolar_system=self.webpackChunksolar_system||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var n=s.O(void 0,[1],(function(){return s(0)}));n=s.O(n)}();